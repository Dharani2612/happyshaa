var Om=r=>{throw TypeError(r)};var Ih=(r,e,t)=>e.has(r)||Om("Cannot "+t);var R=(r,e,t)=>(Ih(r,e,"read from private field"),t?t.call(r):e.get(r)),fe=(r,e,t)=>e.has(r)?Om("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),re=(r,e,t,n)=>(Ih(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),at=(r,e,t)=>(Ih(r,e,"access private method"),t);var bl=(r,e,t,n)=>({set _(s){re(r,e,s,t)},get _(){return R(r,e,n)}});function PC(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in r)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(r,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();var nr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $y(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function OC(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var s=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,s.get?s:{enumerable:!0,get:function(){return r[n]}})}),t}var By={exports:{}},Iu={},zy={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ja=Symbol.for("react.element"),NC=Symbol.for("react.portal"),AC=Symbol.for("react.fragment"),MC=Symbol.for("react.strict_mode"),DC=Symbol.for("react.profiler"),RC=Symbol.for("react.provider"),LC=Symbol.for("react.context"),IC=Symbol.for("react.forward_ref"),FC=Symbol.for("react.suspense"),$C=Symbol.for("react.memo"),BC=Symbol.for("react.lazy"),Nm=Symbol.iterator;function zC(r){return r===null||typeof r!="object"?null:(r=Nm&&r[Nm]||r["@@iterator"],typeof r=="function"?r:null)}var Uy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wy=Object.assign,Vy={};function xo(r,e,t){this.props=r,this.context=e,this.refs=Vy,this.updater=t||Uy}xo.prototype.isReactComponent={};xo.prototype.setState=function(r,e){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,r,e,"setState")};xo.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function Hy(){}Hy.prototype=xo.prototype;function Eg(r,e,t){this.props=r,this.context=e,this.refs=Vy,this.updater=t||Uy}var Pg=Eg.prototype=new Hy;Pg.constructor=Eg;Wy(Pg,xo.prototype);Pg.isPureReactComponent=!0;var Am=Array.isArray,Gy=Object.prototype.hasOwnProperty,Og={current:null},Yy={key:!0,ref:!0,__self:!0,__source:!0};function qy(r,e,t){var n,s={},i=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Gy.call(e,n)&&!Yy.hasOwnProperty(n)&&(s[n]=e[n]);var a=arguments.length-2;if(a===1)s.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(r&&r.defaultProps)for(n in a=r.defaultProps,a)s[n]===void 0&&(s[n]=a[n]);return{$$typeof:Ja,type:r,key:i,ref:o,props:s,_owner:Og.current}}function UC(r,e){return{$$typeof:Ja,type:r.type,key:e,ref:r.ref,props:r.props,_owner:r._owner}}function Ng(r){return typeof r=="object"&&r!==null&&r.$$typeof===Ja}function WC(r){var e={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(t){return e[t]})}var Mm=/\/+/g;function Fh(r,e){return typeof r=="object"&&r!==null&&r.key!=null?WC(""+r.key):e.toString(36)}function yc(r,e,t,n,s){var i=typeof r;(i==="undefined"||i==="boolean")&&(r=null);var o=!1;if(r===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(r.$$typeof){case Ja:case NC:o=!0}}if(o)return o=r,s=s(o),r=n===""?"."+Fh(o,0):n,Am(s)?(t="",r!=null&&(t=r.replace(Mm,"$&/")+"/"),yc(s,e,t,"",function(c){return c})):s!=null&&(Ng(s)&&(s=UC(s,t+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Mm,"$&/")+"/")+r)),e.push(s)),1;if(o=0,n=n===""?".":n+":",Am(r))for(var a=0;a<r.length;a++){i=r[a];var l=n+Fh(i,a);o+=yc(i,e,t,l,s)}else if(l=zC(r),typeof l=="function")for(r=l.call(r),a=0;!(i=r.next()).done;)i=i.value,l=n+Fh(i,a++),o+=yc(i,e,t,l,s);else if(i==="object")throw e=String(r),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function _l(r,e,t){if(r==null)return r;var n=[],s=0;return yc(r,n,"","",function(i){return e.call(t,i,s++)}),n}function VC(r){if(r._status===-1){var e=r._result;e=e(),e.then(function(t){(r._status===0||r._status===-1)&&(r._status=1,r._result=t)},function(t){(r._status===0||r._status===-1)&&(r._status=2,r._result=t)}),r._status===-1&&(r._status=0,r._result=e)}if(r._status===1)return r._result.default;throw r._result}var bt={current:null},xc={transition:null},HC={ReactCurrentDispatcher:bt,ReactCurrentBatchConfig:xc,ReactCurrentOwner:Og};function Xy(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:_l,forEach:function(r,e,t){_l(r,function(){e.apply(this,arguments)},t)},count:function(r){var e=0;return _l(r,function(){e++}),e},toArray:function(r){return _l(r,function(e){return e})||[]},only:function(r){if(!Ng(r))throw Error("React.Children.only expected to receive a single React element child.");return r}};ae.Component=xo;ae.Fragment=AC;ae.Profiler=DC;ae.PureComponent=Eg;ae.StrictMode=MC;ae.Suspense=FC;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HC;ae.act=Xy;ae.cloneElement=function(r,e,t){if(r==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+r+".");var n=Wy({},r.props),s=r.key,i=r.ref,o=r._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Og.current),e.key!==void 0&&(s=""+e.key),r.type&&r.type.defaultProps)var a=r.type.defaultProps;for(l in e)Gy.call(e,l)&&!Yy.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:Ja,type:r.type,key:s,ref:i,props:n,_owner:o}};ae.createContext=function(r){return r={$$typeof:LC,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},r.Provider={$$typeof:RC,_context:r},r.Consumer=r};ae.createElement=qy;ae.createFactory=function(r){var e=qy.bind(null,r);return e.type=r,e};ae.createRef=function(){return{current:null}};ae.forwardRef=function(r){return{$$typeof:IC,render:r}};ae.isValidElement=Ng;ae.lazy=function(r){return{$$typeof:BC,_payload:{_status:-1,_result:r},_init:VC}};ae.memo=function(r,e){return{$$typeof:$C,type:r,compare:e===void 0?null:e}};ae.startTransition=function(r){var e=xc.transition;xc.transition={};try{r()}finally{xc.transition=e}};ae.unstable_act=Xy;ae.useCallback=function(r,e){return bt.current.useCallback(r,e)};ae.useContext=function(r){return bt.current.useContext(r)};ae.useDebugValue=function(){};ae.useDeferredValue=function(r){return bt.current.useDeferredValue(r)};ae.useEffect=function(r,e){return bt.current.useEffect(r,e)};ae.useId=function(){return bt.current.useId()};ae.useImperativeHandle=function(r,e,t){return bt.current.useImperativeHandle(r,e,t)};ae.useInsertionEffect=function(r,e){return bt.current.useInsertionEffect(r,e)};ae.useLayoutEffect=function(r,e){return bt.current.useLayoutEffect(r,e)};ae.useMemo=function(r,e){return bt.current.useMemo(r,e)};ae.useReducer=function(r,e,t){return bt.current.useReducer(r,e,t)};ae.useRef=function(r){return bt.current.useRef(r)};ae.useState=function(r){return bt.current.useState(r)};ae.useSyncExternalStore=function(r,e,t){return bt.current.useSyncExternalStore(r,e,t)};ae.useTransition=function(){return bt.current.useTransition()};ae.version="18.3.1";zy.exports=ae;var b=zy.exports;const U=$y(b),Ag=PC({__proto__:null,default:U},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GC=b,YC=Symbol.for("react.element"),qC=Symbol.for("react.fragment"),XC=Object.prototype.hasOwnProperty,KC=GC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,QC={key:!0,ref:!0,__self:!0,__source:!0};function Ky(r,e,t){var n,s={},i=null,o=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)XC.call(e,n)&&!QC.hasOwnProperty(n)&&(s[n]=e[n]);if(r&&r.defaultProps)for(n in e=r.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:YC,type:r,key:i,ref:o,props:s,_owner:KC.current}}Iu.Fragment=qC;Iu.jsx=Ky;Iu.jsxs=Ky;By.exports=Iu;var h=By.exports,Qy={exports:{}},Vt={},Jy={exports:{}},Zy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function e(N,M){var z=N.length;N.push(M);e:for(;0<z;){var Q=z-1>>>1,X=N[Q];if(0<s(X,M))N[Q]=M,N[z]=X,z=Q;else break e}}function t(N){return N.length===0?null:N[0]}function n(N){if(N.length===0)return null;var M=N[0],z=N.pop();if(z!==M){N[0]=z;e:for(var Q=0,X=N.length,Z=X>>>1;Q<Z;){var ee=2*(Q+1)-1,Se=N[ee],Oe=ee+1,le=N[Oe];if(0>s(Se,z))Oe<X&&0>s(le,Se)?(N[Q]=le,N[Oe]=z,Q=Oe):(N[Q]=Se,N[ee]=z,Q=ee);else if(Oe<X&&0>s(le,z))N[Q]=le,N[Oe]=z,Q=Oe;else break e}}return M}function s(N,M){var z=N.sortIndex-M.sortIndex;return z!==0?z:N.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;r.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();r.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,g=!1,y=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(N){for(var M=t(c);M!==null;){if(M.callback===null)n(c);else if(M.startTime<=N)n(c),M.sortIndex=M.expirationTime,e(l,M);else break;M=t(c)}}function _(N){if(v=!1,x(N),!y)if(t(l)!==null)y=!0,W(S);else{var M=t(c);M!==null&&V(_,M.startTime-N)}}function S(N,M){y=!1,v&&(v=!1,m(E),E=-1),g=!0;var z=f;try{for(x(M),d=t(l);d!==null&&(!(d.expirationTime>M)||N&&!B());){var Q=d.callback;if(typeof Q=="function"){d.callback=null,f=d.priorityLevel;var X=Q(d.expirationTime<=M);M=r.unstable_now(),typeof X=="function"?d.callback=X:d===t(l)&&n(l),x(M)}else n(l);d=t(l)}if(d!==null)var Z=!0;else{var ee=t(c);ee!==null&&V(_,ee.startTime-M),Z=!1}return Z}finally{d=null,f=z,g=!1}}var C=!1,T=null,E=-1,A=5,D=-1;function B(){return!(r.unstable_now()-D<A)}function P(){if(T!==null){var N=r.unstable_now();D=N;var M=!0;try{M=T(!0,N)}finally{M?I():(C=!1,T=null)}}else C=!1}var I;if(typeof p=="function")I=function(){p(P)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,G=L.port2;L.port1.onmessage=P,I=function(){G.postMessage(null)}}else I=function(){w(P,0)};function W(N){T=N,C||(C=!0,I())}function V(N,M){E=w(function(){N(r.unstable_now())},M)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(N){N.callback=null},r.unstable_continueExecution=function(){y||g||(y=!0,W(S))},r.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<N?Math.floor(1e3/N):5},r.unstable_getCurrentPriorityLevel=function(){return f},r.unstable_getFirstCallbackNode=function(){return t(l)},r.unstable_next=function(N){switch(f){case 1:case 2:case 3:var M=3;break;default:M=f}var z=f;f=M;try{return N()}finally{f=z}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(N,M){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var z=f;f=N;try{return M()}finally{f=z}},r.unstable_scheduleCallback=function(N,M,z){var Q=r.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?Q+z:Q):z=Q,N){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=z+X,N={id:u++,callback:M,priorityLevel:N,startTime:z,expirationTime:X,sortIndex:-1},z>Q?(N.sortIndex=z,e(c,N),t(l)===null&&N===t(c)&&(v?(m(E),E=-1):v=!0,V(_,z-Q))):(N.sortIndex=X,e(l,N),y||g||(y=!0,W(S))),N},r.unstable_shouldYield=B,r.unstable_wrapCallback=function(N){var M=f;return function(){var z=f;f=M;try{return N.apply(this,arguments)}finally{f=z}}}})(Zy);Jy.exports=Zy;var JC=Jy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZC=b,Wt=JC;function F(r){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+r,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+r+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ex=new Set,wa={};function ii(r,e){oo(r,e),oo(r+"Capture",e)}function oo(r,e){for(wa[r]=e,r=0;r<e.length;r++)ex.add(e[r])}var pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wd=Object.prototype.hasOwnProperty,e2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Dm={},Rm={};function t2(r){return Wd.call(Rm,r)?!0:Wd.call(Dm,r)?!1:e2.test(r)?Rm[r]=!0:(Dm[r]=!0,!1)}function r2(r,e,t,n){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function n2(r,e,t,n){if(e===null||typeof e>"u"||r2(r,e,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function _t(r,e,t,n,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=r,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var it={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){it[r]=new _t(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var e=r[0];it[e]=new _t(e,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){it[r]=new _t(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){it[r]=new _t(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){it[r]=new _t(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){it[r]=new _t(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){it[r]=new _t(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){it[r]=new _t(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){it[r]=new _t(r,5,!1,r.toLowerCase(),null,!1,!1)});var Mg=/[\-:]([a-z])/g;function Dg(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var e=r.replace(Mg,Dg);it[e]=new _t(e,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var e=r.replace(Mg,Dg);it[e]=new _t(e,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var e=r.replace(Mg,Dg);it[e]=new _t(e,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){it[r]=new _t(r,1,!1,r.toLowerCase(),null,!1,!1)});it.xlinkHref=new _t("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){it[r]=new _t(r,1,!1,r.toLowerCase(),null,!0,!0)});function Rg(r,e,t,n){var s=it.hasOwnProperty(e)?it[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(n2(e,t,s,n)&&(t=null),n||s===null?t2(e)&&(t===null?r.removeAttribute(e):r.setAttribute(e,""+t)):s.mustUseProperty?r[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,n=s.attributeNamespace,t===null?r.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,n?r.setAttributeNS(n,e,t):r.setAttribute(e,t))))}var kn=ZC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sl=Symbol.for("react.element"),Ti=Symbol.for("react.portal"),ji=Symbol.for("react.fragment"),Lg=Symbol.for("react.strict_mode"),Vd=Symbol.for("react.profiler"),tx=Symbol.for("react.provider"),rx=Symbol.for("react.context"),Ig=Symbol.for("react.forward_ref"),Hd=Symbol.for("react.suspense"),Gd=Symbol.for("react.suspense_list"),Fg=Symbol.for("react.memo"),Wn=Symbol.for("react.lazy"),nx=Symbol.for("react.offscreen"),Lm=Symbol.iterator;function Io(r){return r===null||typeof r!="object"?null:(r=Lm&&r[Lm]||r["@@iterator"],typeof r=="function"?r:null)}var Le=Object.assign,$h;function Xo(r){if($h===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);$h=e&&e[1]||""}return`
`+$h+r}var Bh=!1;function zh(r,e){if(!r||Bh)return"";Bh=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(r,[],e)}else{try{e.call()}catch(c){n=c}r.call(e.prototype)}else{try{throw Error()}catch(c){n=c}r()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return r.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",r.displayName)),l}while(1<=o&&0<=a);break}}}finally{Bh=!1,Error.prepareStackTrace=t}return(r=r?r.displayName||r.name:"")?Xo(r):""}function s2(r){switch(r.tag){case 5:return Xo(r.type);case 16:return Xo("Lazy");case 13:return Xo("Suspense");case 19:return Xo("SuspenseList");case 0:case 2:case 15:return r=zh(r.type,!1),r;case 11:return r=zh(r.type.render,!1),r;case 1:return r=zh(r.type,!0),r;default:return""}}function Yd(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case ji:return"Fragment";case Ti:return"Portal";case Vd:return"Profiler";case Lg:return"StrictMode";case Hd:return"Suspense";case Gd:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case rx:return(r.displayName||"Context")+".Consumer";case tx:return(r._context.displayName||"Context")+".Provider";case Ig:var e=r.render;return r=r.displayName,r||(r=e.displayName||e.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Fg:return e=r.displayName||null,e!==null?e:Yd(r.type)||"Memo";case Wn:e=r._payload,r=r._init;try{return Yd(r(e))}catch{}}return null}function i2(r){var e=r.type;switch(r.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=e.render,r=r.displayName||r.name||"",e.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yd(e);case 8:return e===Lg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fs(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function sx(r){var e=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function o2(r){var e=sx(r)?"checked":"value",t=Object.getOwnPropertyDescriptor(r.constructor.prototype,e),n=""+r[e];if(!r.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,i=t.set;return Object.defineProperty(r,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(r,e,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){r._valueTracker=null,delete r[e]}}}}function Cl(r){r._valueTracker||(r._valueTracker=o2(r))}function ix(r){if(!r)return!1;var e=r._valueTracker;if(!e)return!0;var t=e.getValue(),n="";return r&&(n=sx(r)?r.checked?"true":"false":r.value),r=n,r!==t?(e.setValue(r),!0):!1}function Bc(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function qd(r,e){var t=e.checked;return Le({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??r._wrapperState.initialChecked})}function Im(r,e){var t=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;t=fs(e.value!=null?e.value:t),r._wrapperState={initialChecked:n,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ox(r,e){e=e.checked,e!=null&&Rg(r,"checked",e,!1)}function Xd(r,e){ox(r,e);var t=fs(e.value),n=e.type;if(t!=null)n==="number"?(t===0&&r.value===""||r.value!=t)&&(r.value=""+t):r.value!==""+t&&(r.value=""+t);else if(n==="submit"||n==="reset"){r.removeAttribute("value");return}e.hasOwnProperty("value")?Kd(r,e.type,t):e.hasOwnProperty("defaultValue")&&Kd(r,e.type,fs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(r.defaultChecked=!!e.defaultChecked)}function Fm(r,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+r._wrapperState.initialValue,t||e===r.value||(r.value=e),r.defaultValue=e}t=r.name,t!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,t!==""&&(r.name=t)}function Kd(r,e,t){(e!=="number"||Bc(r.ownerDocument)!==r)&&(t==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+t&&(r.defaultValue=""+t))}var Ko=Array.isArray;function zi(r,e,t,n){if(r=r.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<r.length;t++)s=e.hasOwnProperty("$"+r[t].value),r[t].selected!==s&&(r[t].selected=s),s&&n&&(r[t].defaultSelected=!0)}else{for(t=""+fs(t),e=null,s=0;s<r.length;s++){if(r[s].value===t){r[s].selected=!0,n&&(r[s].defaultSelected=!0);return}e!==null||r[s].disabled||(e=r[s])}e!==null&&(e.selected=!0)}}function Qd(r,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return Le({},e,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function $m(r,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(F(92));if(Ko(t)){if(1<t.length)throw Error(F(93));t=t[0]}e=t}e==null&&(e=""),t=e}r._wrapperState={initialValue:fs(t)}}function ax(r,e){var t=fs(e.value),n=fs(e.defaultValue);t!=null&&(t=""+t,t!==r.value&&(r.value=t),e.defaultValue==null&&r.defaultValue!==t&&(r.defaultValue=t)),n!=null&&(r.defaultValue=""+n)}function Bm(r){var e=r.textContent;e===r._wrapperState.initialValue&&e!==""&&e!==null&&(r.value=e)}function lx(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Jd(r,e){return r==null||r==="http://www.w3.org/1999/xhtml"?lx(e):r==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var kl,cx=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,n,s){MSApp.execUnsafeLocalFunction(function(){return r(e,t,n,s)})}:r}(function(r,e){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=e;else{for(kl=kl||document.createElement("div"),kl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=kl.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;e.firstChild;)r.appendChild(e.firstChild)}});function ba(r,e){if(e){var t=r.firstChild;if(t&&t===r.lastChild&&t.nodeType===3){t.nodeValue=e;return}}r.textContent=e}var ra={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},a2=["Webkit","ms","Moz","O"];Object.keys(ra).forEach(function(r){a2.forEach(function(e){e=e+r.charAt(0).toUpperCase()+r.substring(1),ra[e]=ra[r]})});function ux(r,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||ra.hasOwnProperty(r)&&ra[r]?(""+e).trim():e+"px"}function hx(r,e){r=r.style;for(var t in e)if(e.hasOwnProperty(t)){var n=t.indexOf("--")===0,s=ux(t,e[t],n);t==="float"&&(t="cssFloat"),n?r.setProperty(t,s):r[t]=s}}var l2=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zd(r,e){if(e){if(l2[r]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,r));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function ef(r,e){if(r.indexOf("-")===-1)return typeof e.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tf=null;function $g(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var rf=null,Ui=null,Wi=null;function zm(r){if(r=tl(r)){if(typeof rf!="function")throw Error(F(280));var e=r.stateNode;e&&(e=Uu(e),rf(r.stateNode,r.type,e))}}function dx(r){Ui?Wi?Wi.push(r):Wi=[r]:Ui=r}function fx(){if(Ui){var r=Ui,e=Wi;if(Wi=Ui=null,zm(r),e)for(r=0;r<e.length;r++)zm(e[r])}}function gx(r,e){return r(e)}function px(){}var Uh=!1;function mx(r,e,t){if(Uh)return r(e,t);Uh=!0;try{return gx(r,e,t)}finally{Uh=!1,(Ui!==null||Wi!==null)&&(px(),fx())}}function _a(r,e){var t=r.stateNode;if(t===null)return null;var n=Uu(t);if(n===null)return null;t=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(r=r.type,n=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!n;break e;default:r=!1}if(r)return null;if(t&&typeof t!="function")throw Error(F(231,e,typeof t));return t}var nf=!1;if(pn)try{var Fo={};Object.defineProperty(Fo,"passive",{get:function(){nf=!0}}),window.addEventListener("test",Fo,Fo),window.removeEventListener("test",Fo,Fo)}catch{nf=!1}function c2(r,e,t,n,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var na=!1,zc=null,Uc=!1,sf=null,u2={onError:function(r){na=!0,zc=r}};function h2(r,e,t,n,s,i,o,a,l){na=!1,zc=null,c2.apply(u2,arguments)}function d2(r,e,t,n,s,i,o,a,l){if(h2.apply(this,arguments),na){if(na){var c=zc;na=!1,zc=null}else throw Error(F(198));Uc||(Uc=!0,sf=c)}}function oi(r){var e=r,t=r;if(r.alternate)for(;e.return;)e=e.return;else{r=e;do e=r,e.flags&4098&&(t=e.return),r=e.return;while(r)}return e.tag===3?t:null}function vx(r){if(r.tag===13){var e=r.memoizedState;if(e===null&&(r=r.alternate,r!==null&&(e=r.memoizedState)),e!==null)return e.dehydrated}return null}function Um(r){if(oi(r)!==r)throw Error(F(188))}function f2(r){var e=r.alternate;if(!e){if(e=oi(r),e===null)throw Error(F(188));return e!==r?null:r}for(var t=r,n=e;;){var s=t.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){t=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===t)return Um(s),r;if(i===n)return Um(s),e;i=i.sibling}throw Error(F(188))}if(t.return!==n.return)t=s,n=i;else{for(var o=!1,a=s.child;a;){if(a===t){o=!0,t=s,n=i;break}if(a===n){o=!0,n=s,t=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===t){o=!0,t=i,n=s;break}if(a===n){o=!0,n=i,t=s;break}a=a.sibling}if(!o)throw Error(F(189))}}if(t.alternate!==n)throw Error(F(190))}if(t.tag!==3)throw Error(F(188));return t.stateNode.current===t?r:e}function yx(r){return r=f2(r),r!==null?xx(r):null}function xx(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var e=xx(r);if(e!==null)return e;r=r.sibling}return null}var wx=Wt.unstable_scheduleCallback,Wm=Wt.unstable_cancelCallback,g2=Wt.unstable_shouldYield,p2=Wt.unstable_requestPaint,Be=Wt.unstable_now,m2=Wt.unstable_getCurrentPriorityLevel,Bg=Wt.unstable_ImmediatePriority,bx=Wt.unstable_UserBlockingPriority,Wc=Wt.unstable_NormalPriority,v2=Wt.unstable_LowPriority,_x=Wt.unstable_IdlePriority,Fu=null,Vr=null;function y2(r){if(Vr&&typeof Vr.onCommitFiberRoot=="function")try{Vr.onCommitFiberRoot(Fu,r,void 0,(r.current.flags&128)===128)}catch{}}var Tr=Math.clz32?Math.clz32:b2,x2=Math.log,w2=Math.LN2;function b2(r){return r>>>=0,r===0?32:31-(x2(r)/w2|0)|0}var Tl=64,jl=4194304;function Qo(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Vc(r,e){var t=r.pendingLanes;if(t===0)return 0;var n=0,s=r.suspendedLanes,i=r.pingedLanes,o=t&268435455;if(o!==0){var a=o&~s;a!==0?n=Qo(a):(i&=o,i!==0&&(n=Qo(i)))}else o=t&~s,o!==0?n=Qo(o):i!==0&&(n=Qo(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=t&16),e=r.entangledLanes,e!==0)for(r=r.entanglements,e&=n;0<e;)t=31-Tr(e),s=1<<t,n|=r[t],e&=~s;return n}function _2(r,e){switch(r){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function S2(r,e){for(var t=r.suspendedLanes,n=r.pingedLanes,s=r.expirationTimes,i=r.pendingLanes;0<i;){var o=31-Tr(i),a=1<<o,l=s[o];l===-1?(!(a&t)||a&n)&&(s[o]=_2(a,e)):l<=e&&(r.expiredLanes|=a),i&=~a}}function of(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Sx(){var r=Tl;return Tl<<=1,!(Tl&4194240)&&(Tl=64),r}function Wh(r){for(var e=[],t=0;31>t;t++)e.push(r);return e}function Za(r,e,t){r.pendingLanes|=e,e!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,e=31-Tr(e),r[e]=t}function C2(r,e){var t=r.pendingLanes&~e;r.pendingLanes=e,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=e,r.mutableReadLanes&=e,r.entangledLanes&=e,e=r.entanglements;var n=r.eventTimes;for(r=r.expirationTimes;0<t;){var s=31-Tr(t),i=1<<s;e[s]=0,n[s]=-1,r[s]=-1,t&=~i}}function zg(r,e){var t=r.entangledLanes|=e;for(r=r.entanglements;t;){var n=31-Tr(t),s=1<<n;s&e|r[n]&e&&(r[n]|=e),t&=~s}}var ye=0;function Cx(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var kx,Ug,Tx,jx,Ex,af=!1,El=[],is=null,os=null,as=null,Sa=new Map,Ca=new Map,Hn=[],k2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vm(r,e){switch(r){case"focusin":case"focusout":is=null;break;case"dragenter":case"dragleave":os=null;break;case"mouseover":case"mouseout":as=null;break;case"pointerover":case"pointerout":Sa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ca.delete(e.pointerId)}}function $o(r,e,t,n,s,i){return r===null||r.nativeEvent!==i?(r={blockedOn:e,domEventName:t,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=tl(e),e!==null&&Ug(e)),r):(r.eventSystemFlags|=n,e=r.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),r)}function T2(r,e,t,n,s){switch(e){case"focusin":return is=$o(is,r,e,t,n,s),!0;case"dragenter":return os=$o(os,r,e,t,n,s),!0;case"mouseover":return as=$o(as,r,e,t,n,s),!0;case"pointerover":var i=s.pointerId;return Sa.set(i,$o(Sa.get(i)||null,r,e,t,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Ca.set(i,$o(Ca.get(i)||null,r,e,t,n,s)),!0}return!1}function Px(r){var e=Ls(r.target);if(e!==null){var t=oi(e);if(t!==null){if(e=t.tag,e===13){if(e=vx(t),e!==null){r.blockedOn=e,Ex(r.priority,function(){Tx(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){r.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}r.blockedOn=null}function wc(r){if(r.blockedOn!==null)return!1;for(var e=r.targetContainers;0<e.length;){var t=lf(r.domEventName,r.eventSystemFlags,e[0],r.nativeEvent);if(t===null){t=r.nativeEvent;var n=new t.constructor(t.type,t);tf=n,t.target.dispatchEvent(n),tf=null}else return e=tl(t),e!==null&&Ug(e),r.blockedOn=t,!1;e.shift()}return!0}function Hm(r,e,t){wc(r)&&t.delete(e)}function j2(){af=!1,is!==null&&wc(is)&&(is=null),os!==null&&wc(os)&&(os=null),as!==null&&wc(as)&&(as=null),Sa.forEach(Hm),Ca.forEach(Hm)}function Bo(r,e){r.blockedOn===e&&(r.blockedOn=null,af||(af=!0,Wt.unstable_scheduleCallback(Wt.unstable_NormalPriority,j2)))}function ka(r){function e(s){return Bo(s,r)}if(0<El.length){Bo(El[0],r);for(var t=1;t<El.length;t++){var n=El[t];n.blockedOn===r&&(n.blockedOn=null)}}for(is!==null&&Bo(is,r),os!==null&&Bo(os,r),as!==null&&Bo(as,r),Sa.forEach(e),Ca.forEach(e),t=0;t<Hn.length;t++)n=Hn[t],n.blockedOn===r&&(n.blockedOn=null);for(;0<Hn.length&&(t=Hn[0],t.blockedOn===null);)Px(t),t.blockedOn===null&&Hn.shift()}var Vi=kn.ReactCurrentBatchConfig,Hc=!0;function E2(r,e,t,n){var s=ye,i=Vi.transition;Vi.transition=null;try{ye=1,Wg(r,e,t,n)}finally{ye=s,Vi.transition=i}}function P2(r,e,t,n){var s=ye,i=Vi.transition;Vi.transition=null;try{ye=4,Wg(r,e,t,n)}finally{ye=s,Vi.transition=i}}function Wg(r,e,t,n){if(Hc){var s=lf(r,e,t,n);if(s===null)Zh(r,e,n,Gc,t),Vm(r,n);else if(T2(s,r,e,t,n))n.stopPropagation();else if(Vm(r,n),e&4&&-1<k2.indexOf(r)){for(;s!==null;){var i=tl(s);if(i!==null&&kx(i),i=lf(r,e,t,n),i===null&&Zh(r,e,n,Gc,t),i===s)break;s=i}s!==null&&n.stopPropagation()}else Zh(r,e,n,null,t)}}var Gc=null;function lf(r,e,t,n){if(Gc=null,r=$g(n),r=Ls(r),r!==null)if(e=oi(r),e===null)r=null;else if(t=e.tag,t===13){if(r=vx(e),r!==null)return r;r=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;r=null}else e!==r&&(r=null);return Gc=r,null}function Ox(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(m2()){case Bg:return 1;case bx:return 4;case Wc:case v2:return 16;case _x:return 536870912;default:return 16}default:return 16}}var es=null,Vg=null,bc=null;function Nx(){if(bc)return bc;var r,e=Vg,t=e.length,n,s="value"in es?es.value:es.textContent,i=s.length;for(r=0;r<t&&e[r]===s[r];r++);var o=t-r;for(n=1;n<=o&&e[t-n]===s[i-n];n++);return bc=s.slice(r,1<n?1-n:void 0)}function _c(r){var e=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&e===13&&(r=13)):r=e,r===10&&(r=13),32<=r||r===13?r:0}function Pl(){return!0}function Gm(){return!1}function Ht(r){function e(t,n,s,i,o){this._reactName=t,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in r)r.hasOwnProperty(a)&&(t=r[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Pl:Gm,this.isPropagationStopped=Gm,this}return Le(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Pl)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Pl)},persist:function(){},isPersistent:Pl}),e}var wo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hg=Ht(wo),el=Le({},wo,{view:0,detail:0}),O2=Ht(el),Vh,Hh,zo,$u=Le({},el,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gg,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==zo&&(zo&&r.type==="mousemove"?(Vh=r.screenX-zo.screenX,Hh=r.screenY-zo.screenY):Hh=Vh=0,zo=r),Vh)},movementY:function(r){return"movementY"in r?r.movementY:Hh}}),Ym=Ht($u),N2=Le({},$u,{dataTransfer:0}),A2=Ht(N2),M2=Le({},el,{relatedTarget:0}),Gh=Ht(M2),D2=Le({},wo,{animationName:0,elapsedTime:0,pseudoElement:0}),R2=Ht(D2),L2=Le({},wo,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),I2=Ht(L2),F2=Le({},wo,{data:0}),qm=Ht(F2),$2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},B2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},z2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function U2(r){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(r):(r=z2[r])?!!e[r]:!1}function Gg(){return U2}var W2=Le({},el,{key:function(r){if(r.key){var e=$2[r.key]||r.key;if(e!=="Unidentified")return e}return r.type==="keypress"?(r=_c(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?B2[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gg,charCode:function(r){return r.type==="keypress"?_c(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?_c(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),V2=Ht(W2),H2=Le({},$u,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xm=Ht(H2),G2=Le({},el,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gg}),Y2=Ht(G2),q2=Le({},wo,{propertyName:0,elapsedTime:0,pseudoElement:0}),X2=Ht(q2),K2=Le({},$u,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Q2=Ht(K2),J2=[9,13,27,32],Yg=pn&&"CompositionEvent"in window,sa=null;pn&&"documentMode"in document&&(sa=document.documentMode);var Z2=pn&&"TextEvent"in window&&!sa,Ax=pn&&(!Yg||sa&&8<sa&&11>=sa),Km=" ",Qm=!1;function Mx(r,e){switch(r){case"keyup":return J2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dx(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ei=!1;function ek(r,e){switch(r){case"compositionend":return Dx(e);case"keypress":return e.which!==32?null:(Qm=!0,Km);case"textInput":return r=e.data,r===Km&&Qm?null:r;default:return null}}function tk(r,e){if(Ei)return r==="compositionend"||!Yg&&Mx(r,e)?(r=Nx(),bc=Vg=es=null,Ei=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ax&&e.locale!=="ko"?null:e.data;default:return null}}var rk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jm(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e==="input"?!!rk[r.type]:e==="textarea"}function Rx(r,e,t,n){dx(n),e=Yc(e,"onChange"),0<e.length&&(t=new Hg("onChange","change",null,t,n),r.push({event:t,listeners:e}))}var ia=null,Ta=null;function nk(r){Gx(r,0)}function Bu(r){var e=Ni(r);if(ix(e))return r}function sk(r,e){if(r==="change")return e}var Lx=!1;if(pn){var Yh;if(pn){var qh="oninput"in document;if(!qh){var Zm=document.createElement("div");Zm.setAttribute("oninput","return;"),qh=typeof Zm.oninput=="function"}Yh=qh}else Yh=!1;Lx=Yh&&(!document.documentMode||9<document.documentMode)}function e0(){ia&&(ia.detachEvent("onpropertychange",Ix),Ta=ia=null)}function Ix(r){if(r.propertyName==="value"&&Bu(Ta)){var e=[];Rx(e,Ta,r,$g(r)),mx(nk,e)}}function ik(r,e,t){r==="focusin"?(e0(),ia=e,Ta=t,ia.attachEvent("onpropertychange",Ix)):r==="focusout"&&e0()}function ok(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Bu(Ta)}function ak(r,e){if(r==="click")return Bu(e)}function lk(r,e){if(r==="input"||r==="change")return Bu(e)}function ck(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var Pr=typeof Object.is=="function"?Object.is:ck;function ja(r,e){if(Pr(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;var t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var s=t[n];if(!Wd.call(e,s)||!Pr(r[s],e[s]))return!1}return!0}function t0(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function r0(r,e){var t=t0(r);r=0;for(var n;t;){if(t.nodeType===3){if(n=r+t.textContent.length,r<=e&&n>=e)return{node:t,offset:e-r};r=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=t0(t)}}function Fx(r,e){return r&&e?r===e?!0:r&&r.nodeType===3?!1:e&&e.nodeType===3?Fx(r,e.parentNode):"contains"in r?r.contains(e):r.compareDocumentPosition?!!(r.compareDocumentPosition(e)&16):!1:!1}function $x(){for(var r=window,e=Bc();e instanceof r.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)r=e.contentWindow;else break;e=Bc(r.document)}return e}function qg(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e&&(e==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||e==="textarea"||r.contentEditable==="true")}function uk(r){var e=$x(),t=r.focusedElem,n=r.selectionRange;if(e!==t&&t&&t.ownerDocument&&Fx(t.ownerDocument.documentElement,t)){if(n!==null&&qg(t)){if(e=n.start,r=n.end,r===void 0&&(r=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(r,t.value.length);else if(r=(e=t.ownerDocument||document)&&e.defaultView||window,r.getSelection){r=r.getSelection();var s=t.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!r.extend&&i>n&&(s=n,n=i,i=s),s=r0(t,i);var o=r0(t,n);s&&o&&(r.rangeCount!==1||r.anchorNode!==s.node||r.anchorOffset!==s.offset||r.focusNode!==o.node||r.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),r.removeAllRanges(),i>n?(r.addRange(e),r.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),r.addRange(e)))}}for(e=[],r=t;r=r.parentNode;)r.nodeType===1&&e.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)r=e[t],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var hk=pn&&"documentMode"in document&&11>=document.documentMode,Pi=null,cf=null,oa=null,uf=!1;function n0(r,e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;uf||Pi==null||Pi!==Bc(n)||(n=Pi,"selectionStart"in n&&qg(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),oa&&ja(oa,n)||(oa=n,n=Yc(cf,"onSelect"),0<n.length&&(e=new Hg("onSelect","select",null,e,t),r.push({event:e,listeners:n}),e.target=Pi)))}function Ol(r,e){var t={};return t[r.toLowerCase()]=e.toLowerCase(),t["Webkit"+r]="webkit"+e,t["Moz"+r]="moz"+e,t}var Oi={animationend:Ol("Animation","AnimationEnd"),animationiteration:Ol("Animation","AnimationIteration"),animationstart:Ol("Animation","AnimationStart"),transitionend:Ol("Transition","TransitionEnd")},Xh={},Bx={};pn&&(Bx=document.createElement("div").style,"AnimationEvent"in window||(delete Oi.animationend.animation,delete Oi.animationiteration.animation,delete Oi.animationstart.animation),"TransitionEvent"in window||delete Oi.transitionend.transition);function zu(r){if(Xh[r])return Xh[r];if(!Oi[r])return r;var e=Oi[r],t;for(t in e)if(e.hasOwnProperty(t)&&t in Bx)return Xh[r]=e[t];return r}var zx=zu("animationend"),Ux=zu("animationiteration"),Wx=zu("animationstart"),Vx=zu("transitionend"),Hx=new Map,s0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ws(r,e){Hx.set(r,e),ii(e,[r])}for(var Kh=0;Kh<s0.length;Kh++){var Qh=s0[Kh],dk=Qh.toLowerCase(),fk=Qh[0].toUpperCase()+Qh.slice(1);ws(dk,"on"+fk)}ws(zx,"onAnimationEnd");ws(Ux,"onAnimationIteration");ws(Wx,"onAnimationStart");ws("dblclick","onDoubleClick");ws("focusin","onFocus");ws("focusout","onBlur");ws(Vx,"onTransitionEnd");oo("onMouseEnter",["mouseout","mouseover"]);oo("onMouseLeave",["mouseout","mouseover"]);oo("onPointerEnter",["pointerout","pointerover"]);oo("onPointerLeave",["pointerout","pointerover"]);ii("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ii("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ii("onBeforeInput",["compositionend","keypress","textInput","paste"]);ii("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ii("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ii("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jo));function i0(r,e,t){var n=r.type||"unknown-event";r.currentTarget=t,d2(n,e,void 0,r),r.currentTarget=null}function Gx(r,e){e=(e&4)!==0;for(var t=0;t<r.length;t++){var n=r[t],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;i0(s,a,c),i=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;i0(s,a,c),i=l}}}if(Uc)throw r=sf,Uc=!1,sf=null,r}function ke(r,e){var t=e[pf];t===void 0&&(t=e[pf]=new Set);var n=r+"__bubble";t.has(n)||(Yx(e,r,2,!1),t.add(n))}function Jh(r,e,t){var n=0;e&&(n|=4),Yx(t,r,n,e)}var Nl="_reactListening"+Math.random().toString(36).slice(2);function Ea(r){if(!r[Nl]){r[Nl]=!0,ex.forEach(function(t){t!=="selectionchange"&&(gk.has(t)||Jh(t,!1,r),Jh(t,!0,r))});var e=r.nodeType===9?r:r.ownerDocument;e===null||e[Nl]||(e[Nl]=!0,Jh("selectionchange",!1,e))}}function Yx(r,e,t,n){switch(Ox(e)){case 1:var s=E2;break;case 4:s=P2;break;default:s=Wg}t=s.bind(null,e,t,r),s=void 0,!nf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?r.addEventListener(e,t,{capture:!0,passive:s}):r.addEventListener(e,t,!0):s!==void 0?r.addEventListener(e,t,{passive:s}):r.addEventListener(e,t,!1)}function Zh(r,e,t,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ls(a),o===null)return;if(l=o.tag,l===5||l===6){n=i=o;continue e}a=a.parentNode}}n=n.return}mx(function(){var c=i,u=$g(t),d=[];e:{var f=Hx.get(r);if(f!==void 0){var g=Hg,y=r;switch(r){case"keypress":if(_c(t)===0)break e;case"keydown":case"keyup":g=V2;break;case"focusin":y="focus",g=Gh;break;case"focusout":y="blur",g=Gh;break;case"beforeblur":case"afterblur":g=Gh;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Ym;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=A2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Y2;break;case zx:case Ux:case Wx:g=R2;break;case Vx:g=X2;break;case"scroll":g=O2;break;case"wheel":g=Q2;break;case"copy":case"cut":case"paste":g=I2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Xm}var v=(e&4)!==0,w=!v&&r==="scroll",m=v?f!==null?f+"Capture":null:f;v=[];for(var p=c,x;p!==null;){x=p;var _=x.stateNode;if(x.tag===5&&_!==null&&(x=_,m!==null&&(_=_a(p,m),_!=null&&v.push(Pa(p,_,x)))),w)break;p=p.return}0<v.length&&(f=new g(f,y,null,t,u),d.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=r==="mouseover"||r==="pointerover",g=r==="mouseout"||r==="pointerout",f&&t!==tf&&(y=t.relatedTarget||t.fromElement)&&(Ls(y)||y[mn]))break e;if((g||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,g?(y=t.relatedTarget||t.toElement,g=c,y=y?Ls(y):null,y!==null&&(w=oi(y),y!==w||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=c),g!==y)){if(v=Ym,_="onMouseLeave",m="onMouseEnter",p="mouse",(r==="pointerout"||r==="pointerover")&&(v=Xm,_="onPointerLeave",m="onPointerEnter",p="pointer"),w=g==null?f:Ni(g),x=y==null?f:Ni(y),f=new v(_,p+"leave",g,t,u),f.target=w,f.relatedTarget=x,_=null,Ls(u)===c&&(v=new v(m,p+"enter",y,t,u),v.target=x,v.relatedTarget=w,_=v),w=_,g&&y)t:{for(v=g,m=y,p=0,x=v;x;x=pi(x))p++;for(x=0,_=m;_;_=pi(_))x++;for(;0<p-x;)v=pi(v),p--;for(;0<x-p;)m=pi(m),x--;for(;p--;){if(v===m||m!==null&&v===m.alternate)break t;v=pi(v),m=pi(m)}v=null}else v=null;g!==null&&o0(d,f,g,v,!1),y!==null&&w!==null&&o0(d,w,y,v,!0)}}e:{if(f=c?Ni(c):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var S=sk;else if(Jm(f))if(Lx)S=lk;else{S=ok;var C=ik}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=ak);if(S&&(S=S(r,c))){Rx(d,S,t,u);break e}C&&C(r,f,c),r==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&Kd(f,"number",f.value)}switch(C=c?Ni(c):window,r){case"focusin":(Jm(C)||C.contentEditable==="true")&&(Pi=C,cf=c,oa=null);break;case"focusout":oa=cf=Pi=null;break;case"mousedown":uf=!0;break;case"contextmenu":case"mouseup":case"dragend":uf=!1,n0(d,t,u);break;case"selectionchange":if(hk)break;case"keydown":case"keyup":n0(d,t,u)}var T;if(Yg)e:{switch(r){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Ei?Mx(r,t)&&(E="onCompositionEnd"):r==="keydown"&&t.keyCode===229&&(E="onCompositionStart");E&&(Ax&&t.locale!=="ko"&&(Ei||E!=="onCompositionStart"?E==="onCompositionEnd"&&Ei&&(T=Nx()):(es=u,Vg="value"in es?es.value:es.textContent,Ei=!0)),C=Yc(c,E),0<C.length&&(E=new qm(E,r,null,t,u),d.push({event:E,listeners:C}),T?E.data=T:(T=Dx(t),T!==null&&(E.data=T)))),(T=Z2?ek(r,t):tk(r,t))&&(c=Yc(c,"onBeforeInput"),0<c.length&&(u=new qm("onBeforeInput","beforeinput",null,t,u),d.push({event:u,listeners:c}),u.data=T))}Gx(d,e)})}function Pa(r,e,t){return{instance:r,listener:e,currentTarget:t}}function Yc(r,e){for(var t=e+"Capture",n=[];r!==null;){var s=r,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=_a(r,t),i!=null&&n.unshift(Pa(r,i,s)),i=_a(r,e),i!=null&&n.push(Pa(r,i,s))),r=r.return}return n}function pi(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function o0(r,e,t,n,s){for(var i=e._reactName,o=[];t!==null&&t!==n;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&c!==null&&(a=c,s?(l=_a(t,i),l!=null&&o.unshift(Pa(t,l,a))):s||(l=_a(t,i),l!=null&&o.push(Pa(t,l,a)))),t=t.return}o.length!==0&&r.push({event:e,listeners:o})}var pk=/\r\n?/g,mk=/\u0000|\uFFFD/g;function a0(r){return(typeof r=="string"?r:""+r).replace(pk,`
`).replace(mk,"")}function Al(r,e,t){if(e=a0(e),a0(r)!==e&&t)throw Error(F(425))}function qc(){}var hf=null,df=null;function ff(r,e){return r==="textarea"||r==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var gf=typeof setTimeout=="function"?setTimeout:void 0,vk=typeof clearTimeout=="function"?clearTimeout:void 0,l0=typeof Promise=="function"?Promise:void 0,yk=typeof queueMicrotask=="function"?queueMicrotask:typeof l0<"u"?function(r){return l0.resolve(null).then(r).catch(xk)}:gf;function xk(r){setTimeout(function(){throw r})}function ed(r,e){var t=e,n=0;do{var s=t.nextSibling;if(r.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(n===0){r.removeChild(s),ka(e);return}n--}else t!=="$"&&t!=="$?"&&t!=="$!"||n++;t=s}while(t);ka(e)}function ls(r){for(;r!=null;r=r.nextSibling){var e=r.nodeType;if(e===1||e===3)break;if(e===8){if(e=r.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return r}function c0(r){r=r.previousSibling;for(var e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return r;e--}else t==="/$"&&e++}r=r.previousSibling}return null}var bo=Math.random().toString(36).slice(2),Br="__reactFiber$"+bo,Oa="__reactProps$"+bo,mn="__reactContainer$"+bo,pf="__reactEvents$"+bo,wk="__reactListeners$"+bo,bk="__reactHandles$"+bo;function Ls(r){var e=r[Br];if(e)return e;for(var t=r.parentNode;t;){if(e=t[mn]||t[Br]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(r=c0(r);r!==null;){if(t=r[Br])return t;r=c0(r)}return e}r=t,t=r.parentNode}return null}function tl(r){return r=r[Br]||r[mn],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Ni(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(F(33))}function Uu(r){return r[Oa]||null}var mf=[],Ai=-1;function bs(r){return{current:r}}function je(r){0>Ai||(r.current=mf[Ai],mf[Ai]=null,Ai--)}function _e(r,e){Ai++,mf[Ai]=r.current,r.current=e}var gs={},gt=bs(gs),Pt=bs(!1),Js=gs;function ao(r,e){var t=r.type.contextTypes;if(!t)return gs;var n=r.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in t)s[i]=e[i];return n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=e,r.__reactInternalMemoizedMaskedChildContext=s),s}function Ot(r){return r=r.childContextTypes,r!=null}function Xc(){je(Pt),je(gt)}function u0(r,e,t){if(gt.current!==gs)throw Error(F(168));_e(gt,e),_e(Pt,t)}function qx(r,e,t){var n=r.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(F(108,i2(r)||"Unknown",s));return Le({},t,n)}function Kc(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||gs,Js=gt.current,_e(gt,r),_e(Pt,Pt.current),!0}function h0(r,e,t){var n=r.stateNode;if(!n)throw Error(F(169));t?(r=qx(r,e,Js),n.__reactInternalMemoizedMergedChildContext=r,je(Pt),je(gt),_e(gt,r)):je(Pt),_e(Pt,t)}var nn=null,Wu=!1,td=!1;function Xx(r){nn===null?nn=[r]:nn.push(r)}function _k(r){Wu=!0,Xx(r)}function _s(){if(!td&&nn!==null){td=!0;var r=0,e=ye;try{var t=nn;for(ye=1;r<t.length;r++){var n=t[r];do n=n(!0);while(n!==null)}nn=null,Wu=!1}catch(s){throw nn!==null&&(nn=nn.slice(r+1)),wx(Bg,_s),s}finally{ye=e,td=!1}}return null}var Mi=[],Di=0,Qc=null,Jc=0,Jt=[],Zt=0,Zs=null,cn=1,un="";function Os(r,e){Mi[Di++]=Jc,Mi[Di++]=Qc,Qc=r,Jc=e}function Kx(r,e,t){Jt[Zt++]=cn,Jt[Zt++]=un,Jt[Zt++]=Zs,Zs=r;var n=cn;r=un;var s=32-Tr(n)-1;n&=~(1<<s),t+=1;var i=32-Tr(e)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,cn=1<<32-Tr(e)+s|t<<s|n,un=i+r}else cn=1<<i|t<<s|n,un=r}function Xg(r){r.return!==null&&(Os(r,1),Kx(r,1,0))}function Kg(r){for(;r===Qc;)Qc=Mi[--Di],Mi[Di]=null,Jc=Mi[--Di],Mi[Di]=null;for(;r===Zs;)Zs=Jt[--Zt],Jt[Zt]=null,un=Jt[--Zt],Jt[Zt]=null,cn=Jt[--Zt],Jt[Zt]=null}var zt=null,Bt=null,Ae=!1,_r=null;function Qx(r,e){var t=tr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=r,e=r.deletions,e===null?(r.deletions=[t],r.flags|=16):e.push(t)}function d0(r,e){switch(r.tag){case 5:var t=r.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(r.stateNode=e,zt=r,Bt=ls(e.firstChild),!0):!1;case 6:return e=r.pendingProps===""||e.nodeType!==3?null:e,e!==null?(r.stateNode=e,zt=r,Bt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Zs!==null?{id:cn,overflow:un}:null,r.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=tr(18,null,null,0),t.stateNode=e,t.return=r,r.child=t,zt=r,Bt=null,!0):!1;default:return!1}}function vf(r){return(r.mode&1)!==0&&(r.flags&128)===0}function yf(r){if(Ae){var e=Bt;if(e){var t=e;if(!d0(r,e)){if(vf(r))throw Error(F(418));e=ls(t.nextSibling);var n=zt;e&&d0(r,e)?Qx(n,t):(r.flags=r.flags&-4097|2,Ae=!1,zt=r)}}else{if(vf(r))throw Error(F(418));r.flags=r.flags&-4097|2,Ae=!1,zt=r}}}function f0(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;zt=r}function Ml(r){if(r!==zt)return!1;if(!Ae)return f0(r),Ae=!0,!1;var e;if((e=r.tag!==3)&&!(e=r.tag!==5)&&(e=r.type,e=e!=="head"&&e!=="body"&&!ff(r.type,r.memoizedProps)),e&&(e=Bt)){if(vf(r))throw Jx(),Error(F(418));for(;e;)Qx(r,e),e=ls(e.nextSibling)}if(f0(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(F(317));e:{for(r=r.nextSibling,e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="/$"){if(e===0){Bt=ls(r.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}r=r.nextSibling}Bt=null}}else Bt=zt?ls(r.stateNode.nextSibling):null;return!0}function Jx(){for(var r=Bt;r;)r=ls(r.nextSibling)}function lo(){Bt=zt=null,Ae=!1}function Qg(r){_r===null?_r=[r]:_r.push(r)}var Sk=kn.ReactCurrentBatchConfig;function Uo(r,e,t){if(r=t.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(F(309));var n=t.stateNode}if(!n)throw Error(F(147,r));var s=n,i=""+r;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof r!="string")throw Error(F(284));if(!t._owner)throw Error(F(290,r))}return r}function Dl(r,e){throw r=Object.prototype.toString.call(e),Error(F(31,r==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":r))}function g0(r){var e=r._init;return e(r._payload)}function Zx(r){function e(m,p){if(r){var x=m.deletions;x===null?(m.deletions=[p],m.flags|=16):x.push(p)}}function t(m,p){if(!r)return null;for(;p!==null;)e(m,p),p=p.sibling;return null}function n(m,p){for(m=new Map;p!==null;)p.key!==null?m.set(p.key,p):m.set(p.index,p),p=p.sibling;return m}function s(m,p){return m=ds(m,p),m.index=0,m.sibling=null,m}function i(m,p,x){return m.index=x,r?(x=m.alternate,x!==null?(x=x.index,x<p?(m.flags|=2,p):x):(m.flags|=2,p)):(m.flags|=1048576,p)}function o(m){return r&&m.alternate===null&&(m.flags|=2),m}function a(m,p,x,_){return p===null||p.tag!==6?(p=ld(x,m.mode,_),p.return=m,p):(p=s(p,x),p.return=m,p)}function l(m,p,x,_){var S=x.type;return S===ji?u(m,p,x.props.children,_,x.key):p!==null&&(p.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Wn&&g0(S)===p.type)?(_=s(p,x.props),_.ref=Uo(m,p,x),_.return=m,_):(_=Pc(x.type,x.key,x.props,null,m.mode,_),_.ref=Uo(m,p,x),_.return=m,_)}function c(m,p,x,_){return p===null||p.tag!==4||p.stateNode.containerInfo!==x.containerInfo||p.stateNode.implementation!==x.implementation?(p=cd(x,m.mode,_),p.return=m,p):(p=s(p,x.children||[]),p.return=m,p)}function u(m,p,x,_,S){return p===null||p.tag!==7?(p=qs(x,m.mode,_,S),p.return=m,p):(p=s(p,x),p.return=m,p)}function d(m,p,x){if(typeof p=="string"&&p!==""||typeof p=="number")return p=ld(""+p,m.mode,x),p.return=m,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Sl:return x=Pc(p.type,p.key,p.props,null,m.mode,x),x.ref=Uo(m,null,p),x.return=m,x;case Ti:return p=cd(p,m.mode,x),p.return=m,p;case Wn:var _=p._init;return d(m,_(p._payload),x)}if(Ko(p)||Io(p))return p=qs(p,m.mode,x,null),p.return=m,p;Dl(m,p)}return null}function f(m,p,x,_){var S=p!==null?p.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return S!==null?null:a(m,p,""+x,_);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Sl:return x.key===S?l(m,p,x,_):null;case Ti:return x.key===S?c(m,p,x,_):null;case Wn:return S=x._init,f(m,p,S(x._payload),_)}if(Ko(x)||Io(x))return S!==null?null:u(m,p,x,_,null);Dl(m,x)}return null}function g(m,p,x,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return m=m.get(x)||null,a(p,m,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Sl:return m=m.get(_.key===null?x:_.key)||null,l(p,m,_,S);case Ti:return m=m.get(_.key===null?x:_.key)||null,c(p,m,_,S);case Wn:var C=_._init;return g(m,p,x,C(_._payload),S)}if(Ko(_)||Io(_))return m=m.get(x)||null,u(p,m,_,S,null);Dl(p,_)}return null}function y(m,p,x,_){for(var S=null,C=null,T=p,E=p=0,A=null;T!==null&&E<x.length;E++){T.index>E?(A=T,T=null):A=T.sibling;var D=f(m,T,x[E],_);if(D===null){T===null&&(T=A);break}r&&T&&D.alternate===null&&e(m,T),p=i(D,p,E),C===null?S=D:C.sibling=D,C=D,T=A}if(E===x.length)return t(m,T),Ae&&Os(m,E),S;if(T===null){for(;E<x.length;E++)T=d(m,x[E],_),T!==null&&(p=i(T,p,E),C===null?S=T:C.sibling=T,C=T);return Ae&&Os(m,E),S}for(T=n(m,T);E<x.length;E++)A=g(T,m,E,x[E],_),A!==null&&(r&&A.alternate!==null&&T.delete(A.key===null?E:A.key),p=i(A,p,E),C===null?S=A:C.sibling=A,C=A);return r&&T.forEach(function(B){return e(m,B)}),Ae&&Os(m,E),S}function v(m,p,x,_){var S=Io(x);if(typeof S!="function")throw Error(F(150));if(x=S.call(x),x==null)throw Error(F(151));for(var C=S=null,T=p,E=p=0,A=null,D=x.next();T!==null&&!D.done;E++,D=x.next()){T.index>E?(A=T,T=null):A=T.sibling;var B=f(m,T,D.value,_);if(B===null){T===null&&(T=A);break}r&&T&&B.alternate===null&&e(m,T),p=i(B,p,E),C===null?S=B:C.sibling=B,C=B,T=A}if(D.done)return t(m,T),Ae&&Os(m,E),S;if(T===null){for(;!D.done;E++,D=x.next())D=d(m,D.value,_),D!==null&&(p=i(D,p,E),C===null?S=D:C.sibling=D,C=D);return Ae&&Os(m,E),S}for(T=n(m,T);!D.done;E++,D=x.next())D=g(T,m,E,D.value,_),D!==null&&(r&&D.alternate!==null&&T.delete(D.key===null?E:D.key),p=i(D,p,E),C===null?S=D:C.sibling=D,C=D);return r&&T.forEach(function(P){return e(m,P)}),Ae&&Os(m,E),S}function w(m,p,x,_){if(typeof x=="object"&&x!==null&&x.type===ji&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Sl:e:{for(var S=x.key,C=p;C!==null;){if(C.key===S){if(S=x.type,S===ji){if(C.tag===7){t(m,C.sibling),p=s(C,x.props.children),p.return=m,m=p;break e}}else if(C.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Wn&&g0(S)===C.type){t(m,C.sibling),p=s(C,x.props),p.ref=Uo(m,C,x),p.return=m,m=p;break e}t(m,C);break}else e(m,C);C=C.sibling}x.type===ji?(p=qs(x.props.children,m.mode,_,x.key),p.return=m,m=p):(_=Pc(x.type,x.key,x.props,null,m.mode,_),_.ref=Uo(m,p,x),_.return=m,m=_)}return o(m);case Ti:e:{for(C=x.key;p!==null;){if(p.key===C)if(p.tag===4&&p.stateNode.containerInfo===x.containerInfo&&p.stateNode.implementation===x.implementation){t(m,p.sibling),p=s(p,x.children||[]),p.return=m,m=p;break e}else{t(m,p);break}else e(m,p);p=p.sibling}p=cd(x,m.mode,_),p.return=m,m=p}return o(m);case Wn:return C=x._init,w(m,p,C(x._payload),_)}if(Ko(x))return y(m,p,x,_);if(Io(x))return v(m,p,x,_);Dl(m,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,p!==null&&p.tag===6?(t(m,p.sibling),p=s(p,x),p.return=m,m=p):(t(m,p),p=ld(x,m.mode,_),p.return=m,m=p),o(m)):t(m,p)}return w}var co=Zx(!0),ew=Zx(!1),Zc=bs(null),eu=null,Ri=null,Jg=null;function Zg(){Jg=Ri=eu=null}function ep(r){var e=Zc.current;je(Zc),r._currentValue=e}function xf(r,e,t){for(;r!==null;){var n=r.alternate;if((r.childLanes&e)!==e?(r.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),r===t)break;r=r.return}}function Hi(r,e){eu=r,Jg=Ri=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&e&&(Et=!0),r.firstContext=null)}function sr(r){var e=r._currentValue;if(Jg!==r)if(r={context:r,memoizedValue:e,next:null},Ri===null){if(eu===null)throw Error(F(308));Ri=r,eu.dependencies={lanes:0,firstContext:r}}else Ri=Ri.next=r;return e}var Is=null;function tp(r){Is===null?Is=[r]:Is.push(r)}function tw(r,e,t,n){var s=e.interleaved;return s===null?(t.next=t,tp(e)):(t.next=s.next,s.next=t),e.interleaved=t,vn(r,n)}function vn(r,e){r.lanes|=e;var t=r.alternate;for(t!==null&&(t.lanes|=e),t=r,r=r.return;r!==null;)r.childLanes|=e,t=r.alternate,t!==null&&(t.childLanes|=e),t=r,r=r.return;return t.tag===3?t.stateNode:null}var Vn=!1;function rp(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rw(r,e){r=r.updateQueue,e.updateQueue===r&&(e.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function fn(r,e){return{eventTime:r,lane:e,tag:0,payload:null,callback:null,next:null}}function cs(r,e,t){var n=r.updateQueue;if(n===null)return null;if(n=n.shared,de&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,vn(r,t)}return s=n.interleaved,s===null?(e.next=e,tp(n)):(e.next=s.next,s.next=e),n.interleaved=e,vn(r,t)}function Sc(r,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var n=e.lanes;n&=r.pendingLanes,t|=n,e.lanes=t,zg(r,t)}}function p0(r,e){var t=r.updateQueue,n=r.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var s=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?s=i=o:i=i.next=o,t=t.next}while(t!==null);i===null?s=i=e:i=i.next=e}else s=i=e;t={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},r.updateQueue=t;return}r=t.lastBaseUpdate,r===null?t.firstBaseUpdate=e:r.next=e,t.lastBaseUpdate=e}function tu(r,e,t,n){var s=r.updateQueue;Vn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=r.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;o=0,u=c=l=null,a=i;do{var f=a.lane,g=a.eventTime;if((n&f)===f){u!==null&&(u=u.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=r,v=a;switch(f=e,g=t,v.tag){case 1:if(y=v.payload,typeof y=="function"){d=y.call(g,d,f);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,f=typeof y=="function"?y.call(g,d,f):y,f==null)break e;d=Le({},d,f);break e;case 2:Vn=!0}}a.callback!==null&&a.lane!==0&&(r.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=g,l=d):u=u.next=g,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(u===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ti|=o,r.lanes=o,r.memoizedState=d}}function m0(r,e,t){if(r=e.effects,e.effects=null,r!==null)for(e=0;e<r.length;e++){var n=r[e],s=n.callback;if(s!==null){if(n.callback=null,n=t,typeof s!="function")throw Error(F(191,s));s.call(n)}}}var rl={},Hr=bs(rl),Na=bs(rl),Aa=bs(rl);function Fs(r){if(r===rl)throw Error(F(174));return r}function np(r,e){switch(_e(Aa,e),_e(Na,r),_e(Hr,rl),r=e.nodeType,r){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Jd(null,"");break;default:r=r===8?e.parentNode:e,e=r.namespaceURI||null,r=r.tagName,e=Jd(e,r)}je(Hr),_e(Hr,e)}function uo(){je(Hr),je(Na),je(Aa)}function nw(r){Fs(Aa.current);var e=Fs(Hr.current),t=Jd(e,r.type);e!==t&&(_e(Na,r),_e(Hr,t))}function sp(r){Na.current===r&&(je(Hr),je(Na))}var De=bs(0);function ru(r){for(var e=r;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rd=[];function ip(){for(var r=0;r<rd.length;r++)rd[r]._workInProgressVersionPrimary=null;rd.length=0}var Cc=kn.ReactCurrentDispatcher,nd=kn.ReactCurrentBatchConfig,ei=0,Re=null,Xe=null,et=null,nu=!1,aa=!1,Ma=0,Ck=0;function lt(){throw Error(F(321))}function op(r,e){if(e===null)return!1;for(var t=0;t<e.length&&t<r.length;t++)if(!Pr(r[t],e[t]))return!1;return!0}function ap(r,e,t,n,s,i){if(ei=i,Re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Cc.current=r===null||r.memoizedState===null?Ek:Pk,r=t(n,s),aa){i=0;do{if(aa=!1,Ma=0,25<=i)throw Error(F(301));i+=1,et=Xe=null,e.updateQueue=null,Cc.current=Ok,r=t(n,s)}while(aa)}if(Cc.current=su,e=Xe!==null&&Xe.next!==null,ei=0,et=Xe=Re=null,nu=!1,e)throw Error(F(300));return r}function lp(){var r=Ma!==0;return Ma=0,r}function Rr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?Re.memoizedState=et=r:et=et.next=r,et}function ir(){if(Xe===null){var r=Re.alternate;r=r!==null?r.memoizedState:null}else r=Xe.next;var e=et===null?Re.memoizedState:et.next;if(e!==null)et=e,Xe=r;else{if(r===null)throw Error(F(310));Xe=r,r={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},et===null?Re.memoizedState=et=r:et=et.next=r}return et}function Da(r,e){return typeof e=="function"?e(r):e}function sd(r){var e=ir(),t=e.queue;if(t===null)throw Error(F(311));t.lastRenderedReducer=r;var n=Xe,s=n.baseQueue,i=t.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,t.pending=null}if(s!==null){i=s.next,n=n.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((ei&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:r(n,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=n):l=l.next=d,Re.lanes|=u,ti|=u}c=c.next}while(c!==null&&c!==i);l===null?o=n:l.next=a,Pr(n,e.memoizedState)||(Et=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,t.lastRenderedState=n}if(r=t.interleaved,r!==null){s=r;do i=s.lane,Re.lanes|=i,ti|=i,s=s.next;while(s!==r)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function id(r){var e=ir(),t=e.queue;if(t===null)throw Error(F(311));t.lastRenderedReducer=r;var n=t.dispatch,s=t.pending,i=e.memoizedState;if(s!==null){t.pending=null;var o=s=s.next;do i=r(i,o.action),o=o.next;while(o!==s);Pr(i,e.memoizedState)||(Et=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),t.lastRenderedState=i}return[i,n]}function sw(){}function iw(r,e){var t=Re,n=ir(),s=e(),i=!Pr(n.memoizedState,s);if(i&&(n.memoizedState=s,Et=!0),n=n.queue,cp(lw.bind(null,t,n,r),[r]),n.getSnapshot!==e||i||et!==null&&et.memoizedState.tag&1){if(t.flags|=2048,Ra(9,aw.bind(null,t,n,s,e),void 0,null),tt===null)throw Error(F(349));ei&30||ow(t,e,s)}return s}function ow(r,e,t){r.flags|=16384,r={getSnapshot:e,value:t},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.stores=[r]):(t=e.stores,t===null?e.stores=[r]:t.push(r))}function aw(r,e,t,n){e.value=t,e.getSnapshot=n,cw(e)&&uw(r)}function lw(r,e,t){return t(function(){cw(e)&&uw(r)})}function cw(r){var e=r.getSnapshot;r=r.value;try{var t=e();return!Pr(r,t)}catch{return!0}}function uw(r){var e=vn(r,1);e!==null&&jr(e,r,1,-1)}function v0(r){var e=Rr();return typeof r=="function"&&(r=r()),e.memoizedState=e.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Da,lastRenderedState:r},e.queue=r,r=r.dispatch=jk.bind(null,Re,r),[e.memoizedState,r]}function Ra(r,e,t,n){return r={tag:r,create:e,destroy:t,deps:n,next:null},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.lastEffect=r.next=r):(t=e.lastEffect,t===null?e.lastEffect=r.next=r:(n=t.next,t.next=r,r.next=n,e.lastEffect=r)),r}function hw(){return ir().memoizedState}function kc(r,e,t,n){var s=Rr();Re.flags|=r,s.memoizedState=Ra(1|e,t,void 0,n===void 0?null:n)}function Vu(r,e,t,n){var s=ir();n=n===void 0?null:n;var i=void 0;if(Xe!==null){var o=Xe.memoizedState;if(i=o.destroy,n!==null&&op(n,o.deps)){s.memoizedState=Ra(e,t,i,n);return}}Re.flags|=r,s.memoizedState=Ra(1|e,t,i,n)}function y0(r,e){return kc(8390656,8,r,e)}function cp(r,e){return Vu(2048,8,r,e)}function dw(r,e){return Vu(4,2,r,e)}function fw(r,e){return Vu(4,4,r,e)}function gw(r,e){if(typeof e=="function")return r=r(),e(r),function(){e(null)};if(e!=null)return r=r(),e.current=r,function(){e.current=null}}function pw(r,e,t){return t=t!=null?t.concat([r]):null,Vu(4,4,gw.bind(null,e,r),t)}function up(){}function mw(r,e){var t=ir();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&op(e,n[1])?n[0]:(t.memoizedState=[r,e],r)}function vw(r,e){var t=ir();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&op(e,n[1])?n[0]:(r=r(),t.memoizedState=[r,e],r)}function yw(r,e,t){return ei&21?(Pr(t,e)||(t=Sx(),Re.lanes|=t,ti|=t,r.baseState=!0),e):(r.baseState&&(r.baseState=!1,Et=!0),r.memoizedState=t)}function kk(r,e){var t=ye;ye=t!==0&&4>t?t:4,r(!0);var n=nd.transition;nd.transition={};try{r(!1),e()}finally{ye=t,nd.transition=n}}function xw(){return ir().memoizedState}function Tk(r,e,t){var n=hs(r);if(t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},ww(r))bw(e,t);else if(t=tw(r,e,t,n),t!==null){var s=xt();jr(t,r,n,s),_w(t,e,n)}}function jk(r,e,t){var n=hs(r),s={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if(ww(r))bw(e,s);else{var i=r.alternate;if(r.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,t);if(s.hasEagerState=!0,s.eagerState=a,Pr(a,o)){var l=e.interleaved;l===null?(s.next=s,tp(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}t=tw(r,e,s,n),t!==null&&(s=xt(),jr(t,r,n,s),_w(t,e,n))}}function ww(r){var e=r.alternate;return r===Re||e!==null&&e===Re}function bw(r,e){aa=nu=!0;var t=r.pending;t===null?e.next=e:(e.next=t.next,t.next=e),r.pending=e}function _w(r,e,t){if(t&4194240){var n=e.lanes;n&=r.pendingLanes,t|=n,e.lanes=t,zg(r,t)}}var su={readContext:sr,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useInsertionEffect:lt,useLayoutEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useMutableSource:lt,useSyncExternalStore:lt,useId:lt,unstable_isNewReconciler:!1},Ek={readContext:sr,useCallback:function(r,e){return Rr().memoizedState=[r,e===void 0?null:e],r},useContext:sr,useEffect:y0,useImperativeHandle:function(r,e,t){return t=t!=null?t.concat([r]):null,kc(4194308,4,gw.bind(null,e,r),t)},useLayoutEffect:function(r,e){return kc(4194308,4,r,e)},useInsertionEffect:function(r,e){return kc(4,2,r,e)},useMemo:function(r,e){var t=Rr();return e=e===void 0?null:e,r=r(),t.memoizedState=[r,e],r},useReducer:function(r,e,t){var n=Rr();return e=t!==void 0?t(e):e,n.memoizedState=n.baseState=e,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:e},n.queue=r,r=r.dispatch=Tk.bind(null,Re,r),[n.memoizedState,r]},useRef:function(r){var e=Rr();return r={current:r},e.memoizedState=r},useState:v0,useDebugValue:up,useDeferredValue:function(r){return Rr().memoizedState=r},useTransition:function(){var r=v0(!1),e=r[0];return r=kk.bind(null,r[1]),Rr().memoizedState=r,[e,r]},useMutableSource:function(){},useSyncExternalStore:function(r,e,t){var n=Re,s=Rr();if(Ae){if(t===void 0)throw Error(F(407));t=t()}else{if(t=e(),tt===null)throw Error(F(349));ei&30||ow(n,e,t)}s.memoizedState=t;var i={value:t,getSnapshot:e};return s.queue=i,y0(lw.bind(null,n,i,r),[r]),n.flags|=2048,Ra(9,aw.bind(null,n,i,t,e),void 0,null),t},useId:function(){var r=Rr(),e=tt.identifierPrefix;if(Ae){var t=un,n=cn;t=(n&~(1<<32-Tr(n)-1)).toString(32)+t,e=":"+e+"R"+t,t=Ma++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=Ck++,e=":"+e+"r"+t.toString(32)+":";return r.memoizedState=e},unstable_isNewReconciler:!1},Pk={readContext:sr,useCallback:mw,useContext:sr,useEffect:cp,useImperativeHandle:pw,useInsertionEffect:dw,useLayoutEffect:fw,useMemo:vw,useReducer:sd,useRef:hw,useState:function(){return sd(Da)},useDebugValue:up,useDeferredValue:function(r){var e=ir();return yw(e,Xe.memoizedState,r)},useTransition:function(){var r=sd(Da)[0],e=ir().memoizedState;return[r,e]},useMutableSource:sw,useSyncExternalStore:iw,useId:xw,unstable_isNewReconciler:!1},Ok={readContext:sr,useCallback:mw,useContext:sr,useEffect:cp,useImperativeHandle:pw,useInsertionEffect:dw,useLayoutEffect:fw,useMemo:vw,useReducer:id,useRef:hw,useState:function(){return id(Da)},useDebugValue:up,useDeferredValue:function(r){var e=ir();return Xe===null?e.memoizedState=r:yw(e,Xe.memoizedState,r)},useTransition:function(){var r=id(Da)[0],e=ir().memoizedState;return[r,e]},useMutableSource:sw,useSyncExternalStore:iw,useId:xw,unstable_isNewReconciler:!1};function pr(r,e){if(r&&r.defaultProps){e=Le({},e),r=r.defaultProps;for(var t in r)e[t]===void 0&&(e[t]=r[t]);return e}return e}function wf(r,e,t,n){e=r.memoizedState,t=t(n,e),t=t==null?e:Le({},e,t),r.memoizedState=t,r.lanes===0&&(r.updateQueue.baseState=t)}var Hu={isMounted:function(r){return(r=r._reactInternals)?oi(r)===r:!1},enqueueSetState:function(r,e,t){r=r._reactInternals;var n=xt(),s=hs(r),i=fn(n,s);i.payload=e,t!=null&&(i.callback=t),e=cs(r,i,s),e!==null&&(jr(e,r,s,n),Sc(e,r,s))},enqueueReplaceState:function(r,e,t){r=r._reactInternals;var n=xt(),s=hs(r),i=fn(n,s);i.tag=1,i.payload=e,t!=null&&(i.callback=t),e=cs(r,i,s),e!==null&&(jr(e,r,s,n),Sc(e,r,s))},enqueueForceUpdate:function(r,e){r=r._reactInternals;var t=xt(),n=hs(r),s=fn(t,n);s.tag=2,e!=null&&(s.callback=e),e=cs(r,s,n),e!==null&&(jr(e,r,n,t),Sc(e,r,n))}};function x0(r,e,t,n,s,i,o){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(n,i,o):e.prototype&&e.prototype.isPureReactComponent?!ja(t,n)||!ja(s,i):!0}function Sw(r,e,t){var n=!1,s=gs,i=e.contextType;return typeof i=="object"&&i!==null?i=sr(i):(s=Ot(e)?Js:gt.current,n=e.contextTypes,i=(n=n!=null)?ao(r,s):gs),e=new e(t,i),r.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Hu,r.stateNode=e,e._reactInternals=r,n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=i),e}function w0(r,e,t,n){r=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,n),e.state!==r&&Hu.enqueueReplaceState(e,e.state,null)}function bf(r,e,t,n){var s=r.stateNode;s.props=t,s.state=r.memoizedState,s.refs={},rp(r);var i=e.contextType;typeof i=="object"&&i!==null?s.context=sr(i):(i=Ot(e)?Js:gt.current,s.context=ao(r,i)),s.state=r.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(wf(r,e,i,t),s.state=r.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Hu.enqueueReplaceState(s,s.state,null),tu(r,t,s,n),s.state=r.memoizedState),typeof s.componentDidMount=="function"&&(r.flags|=4194308)}function ho(r,e){try{var t="",n=e;do t+=s2(n),n=n.return;while(n);var s=t}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:r,source:e,stack:s,digest:null}}function od(r,e,t){return{value:r,source:null,stack:t??null,digest:e??null}}function _f(r,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var Nk=typeof WeakMap=="function"?WeakMap:Map;function Cw(r,e,t){t=fn(-1,t),t.tag=3,t.payload={element:null};var n=e.value;return t.callback=function(){ou||(ou=!0,Af=n),_f(r,e)},t}function kw(r,e,t){t=fn(-1,t),t.tag=3;var n=r.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;t.payload=function(){return n(s)},t.callback=function(){_f(r,e)}}var i=r.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){_f(r,e),typeof n!="function"&&(us===null?us=new Set([this]):us.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function b0(r,e,t){var n=r.pingCache;if(n===null){n=r.pingCache=new Nk;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(t)||(s.add(t),r=Hk.bind(null,r,e,t),e.then(r,r))}function _0(r){do{var e;if((e=r.tag===13)&&(e=r.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return r;r=r.return}while(r!==null);return null}function S0(r,e,t,n,s){return r.mode&1?(r.flags|=65536,r.lanes=s,r):(r===e?r.flags|=65536:(r.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=fn(-1,1),e.tag=2,cs(t,e,1))),t.lanes|=1),r)}var Ak=kn.ReactCurrentOwner,Et=!1;function mt(r,e,t,n){e.child=r===null?ew(e,null,t,n):co(e,r.child,t,n)}function C0(r,e,t,n,s){t=t.render;var i=e.ref;return Hi(e,s),n=ap(r,e,t,n,i,s),t=lp(),r!==null&&!Et?(e.updateQueue=r.updateQueue,e.flags&=-2053,r.lanes&=~s,yn(r,e,s)):(Ae&&t&&Xg(e),e.flags|=1,mt(r,e,n,s),e.child)}function k0(r,e,t,n,s){if(r===null){var i=t.type;return typeof i=="function"&&!yp(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=i,Tw(r,e,i,n,s)):(r=Pc(t.type,null,n,e,e.mode,s),r.ref=e.ref,r.return=e,e.child=r)}if(i=r.child,!(r.lanes&s)){var o=i.memoizedProps;if(t=t.compare,t=t!==null?t:ja,t(o,n)&&r.ref===e.ref)return yn(r,e,s)}return e.flags|=1,r=ds(i,n),r.ref=e.ref,r.return=e,e.child=r}function Tw(r,e,t,n,s){if(r!==null){var i=r.memoizedProps;if(ja(i,n)&&r.ref===e.ref)if(Et=!1,e.pendingProps=n=i,(r.lanes&s)!==0)r.flags&131072&&(Et=!0);else return e.lanes=r.lanes,yn(r,e,s)}return Sf(r,e,t,n,s)}function jw(r,e,t){var n=e.pendingProps,s=n.children,i=r!==null?r.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(Ii,It),It|=t;else{if(!(t&1073741824))return r=i!==null?i.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:r,cachePool:null,transitions:null},e.updateQueue=null,_e(Ii,It),It|=r,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:t,_e(Ii,It),It|=n}else i!==null?(n=i.baseLanes|t,e.memoizedState=null):n=t,_e(Ii,It),It|=n;return mt(r,e,s,t),e.child}function Ew(r,e){var t=e.ref;(r===null&&t!==null||r!==null&&r.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Sf(r,e,t,n,s){var i=Ot(t)?Js:gt.current;return i=ao(e,i),Hi(e,s),t=ap(r,e,t,n,i,s),n=lp(),r!==null&&!Et?(e.updateQueue=r.updateQueue,e.flags&=-2053,r.lanes&=~s,yn(r,e,s)):(Ae&&n&&Xg(e),e.flags|=1,mt(r,e,t,s),e.child)}function T0(r,e,t,n,s){if(Ot(t)){var i=!0;Kc(e)}else i=!1;if(Hi(e,s),e.stateNode===null)Tc(r,e),Sw(e,t,n),bf(e,t,n,s),n=!0;else if(r===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=sr(c):(c=Ot(t)?Js:gt.current,c=ao(e,c));var u=t.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==c)&&w0(e,o,n,c),Vn=!1;var f=e.memoizedState;o.state=f,tu(e,n,o,s),l=e.memoizedState,a!==n||f!==l||Pt.current||Vn?(typeof u=="function"&&(wf(e,t,u,n),l=e.memoizedState),(a=Vn||x0(e,t,a,n,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=c,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,rw(r,e),a=e.memoizedProps,c=e.type===e.elementType?a:pr(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=sr(l):(l=Ot(t)?Js:gt.current,l=ao(e,l));var g=t.getDerivedStateFromProps;(u=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&w0(e,o,n,l),Vn=!1,f=e.memoizedState,o.state=f,tu(e,n,o,s);var y=e.memoizedState;a!==d||f!==y||Pt.current||Vn?(typeof g=="function"&&(wf(e,t,g,n),y=e.memoizedState),(c=Vn||x0(e,t,c,n,f,y,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===r.memoizedProps&&f===r.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===r.memoizedProps&&f===r.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=y),o.props=n,o.state=y,o.context=l,n=c):(typeof o.componentDidUpdate!="function"||a===r.memoizedProps&&f===r.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===r.memoizedProps&&f===r.memoizedState||(e.flags|=1024),n=!1)}return Cf(r,e,t,n,i,s)}function Cf(r,e,t,n,s,i){Ew(r,e);var o=(e.flags&128)!==0;if(!n&&!o)return s&&h0(e,t,!1),yn(r,e,i);n=e.stateNode,Ak.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,r!==null&&o?(e.child=co(e,r.child,null,i),e.child=co(e,null,a,i)):mt(r,e,a,i),e.memoizedState=n.state,s&&h0(e,t,!0),e.child}function Pw(r){var e=r.stateNode;e.pendingContext?u0(r,e.pendingContext,e.pendingContext!==e.context):e.context&&u0(r,e.context,!1),np(r,e.containerInfo)}function j0(r,e,t,n,s){return lo(),Qg(s),e.flags|=256,mt(r,e,t,n),e.child}var kf={dehydrated:null,treeContext:null,retryLane:0};function Tf(r){return{baseLanes:r,cachePool:null,transitions:null}}function Ow(r,e,t){var n=e.pendingProps,s=De.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=r!==null&&r.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(r===null||r.memoizedState!==null)&&(s|=1),_e(De,s&1),r===null)return yf(e),r=e.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(e.mode&1?r.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,r=n.fallback,i?(n=e.mode,i=e.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=qu(o,n,0,null),r=qs(r,n,t,null),i.return=e,r.return=e,i.sibling=r,e.child=i,e.child.memoizedState=Tf(t),e.memoizedState=kf,r):hp(e,o));if(s=r.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Mk(r,e,o,n,a,s,t);if(i){i=n.fallback,o=e.mode,s=r.child,a=s.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=ds(s,l),n.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=ds(a,i):(i=qs(i,o,t,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,o=r.child.memoizedState,o=o===null?Tf(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=r.childLanes&~t,e.memoizedState=kf,n}return i=r.child,r=i.sibling,n=ds(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=t),n.return=e,n.sibling=null,r!==null&&(t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)),e.child=n,e.memoizedState=null,n}function hp(r,e){return e=qu({mode:"visible",children:e},r.mode,0,null),e.return=r,r.child=e}function Rl(r,e,t,n){return n!==null&&Qg(n),co(e,r.child,null,t),r=hp(e,e.pendingProps.children),r.flags|=2,e.memoizedState=null,r}function Mk(r,e,t,n,s,i,o){if(t)return e.flags&256?(e.flags&=-257,n=od(Error(F(422))),Rl(r,e,o,n)):e.memoizedState!==null?(e.child=r.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=qu({mode:"visible",children:n.children},s,0,null),i=qs(i,s,o,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&co(e,r.child,null,o),e.child.memoizedState=Tf(o),e.memoizedState=kf,i);if(!(e.mode&1))return Rl(r,e,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var a=n.dgst;return n=a,i=Error(F(419)),n=od(i,n,void 0),Rl(r,e,o,n)}if(a=(o&r.childLanes)!==0,Et||a){if(n=tt,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,vn(r,s),jr(n,r,s,-1))}return vp(),n=od(Error(F(421))),Rl(r,e,o,n)}return s.data==="$?"?(e.flags|=128,e.child=r.child,e=Gk.bind(null,r),s._reactRetry=e,null):(r=i.treeContext,Bt=ls(s.nextSibling),zt=e,Ae=!0,_r=null,r!==null&&(Jt[Zt++]=cn,Jt[Zt++]=un,Jt[Zt++]=Zs,cn=r.id,un=r.overflow,Zs=e),e=hp(e,n.children),e.flags|=4096,e)}function E0(r,e,t){r.lanes|=e;var n=r.alternate;n!==null&&(n.lanes|=e),xf(r.return,e,t)}function ad(r,e,t,n,s){var i=r.memoizedState;i===null?r.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=t,i.tailMode=s)}function Nw(r,e,t){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(mt(r,e,n.children,t),n=De.current,n&2)n=n&1|2,e.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=e.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&E0(r,t,e);else if(r.tag===19)E0(r,t,e);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}n&=1}if(_e(De,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)r=t.alternate,r!==null&&ru(r)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),ad(e,!1,s,t,i);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(r=s.alternate,r!==null&&ru(r)===null){e.child=s;break}r=s.sibling,s.sibling=t,t=s,s=r}ad(e,!0,t,null,i);break;case"together":ad(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Tc(r,e){!(e.mode&1)&&r!==null&&(r.alternate=null,e.alternate=null,e.flags|=2)}function yn(r,e,t){if(r!==null&&(e.dependencies=r.dependencies),ti|=e.lanes,!(t&e.childLanes))return null;if(r!==null&&e.child!==r.child)throw Error(F(153));if(e.child!==null){for(r=e.child,t=ds(r,r.pendingProps),e.child=t,t.return=e;r.sibling!==null;)r=r.sibling,t=t.sibling=ds(r,r.pendingProps),t.return=e;t.sibling=null}return e.child}function Dk(r,e,t){switch(e.tag){case 3:Pw(e),lo();break;case 5:nw(e);break;case 1:Ot(e.type)&&Kc(e);break;case 4:np(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;_e(Zc,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(_e(De,De.current&1),e.flags|=128,null):t&e.child.childLanes?Ow(r,e,t):(_e(De,De.current&1),r=yn(r,e,t),r!==null?r.sibling:null);_e(De,De.current&1);break;case 19:if(n=(t&e.childLanes)!==0,r.flags&128){if(n)return Nw(r,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),_e(De,De.current),n)break;return null;case 22:case 23:return e.lanes=0,jw(r,e,t)}return yn(r,e,t)}var Aw,jf,Mw,Dw;Aw=function(r,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)r.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};jf=function(){};Mw=function(r,e,t,n){var s=r.memoizedProps;if(s!==n){r=e.stateNode,Fs(Hr.current);var i=null;switch(t){case"input":s=qd(r,s),n=qd(r,n),i=[];break;case"select":s=Le({},s,{value:void 0}),n=Le({},n,{value:void 0}),i=[];break;case"textarea":s=Qd(r,s),n=Qd(r,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(r.onclick=qc)}Zd(t,n);var o;t=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(wa.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in n){var l=n[c];if(a=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(i||(i=[]),i.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(wa.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ke("scroll",r),i||a===l||(i=[])):(i=i||[]).push(c,l))}t&&(i=i||[]).push("style",t);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};Dw=function(r,e,t,n){t!==n&&(e.flags|=4)};function Wo(r,e){if(!Ae)switch(r.tailMode){case"hidden":e=r.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?r.tail=null:t.sibling=null;break;case"collapsed":t=r.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e||r.tail===null?r.tail=null:r.tail.sibling=null:n.sibling=null}}function ct(r){var e=r.alternate!==null&&r.alternate.child===r.child,t=0,n=0;if(e)for(var s=r.child;s!==null;)t|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=r,s=s.sibling;else for(s=r.child;s!==null;)t|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=r,s=s.sibling;return r.subtreeFlags|=n,r.childLanes=t,e}function Rk(r,e,t){var n=e.pendingProps;switch(Kg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(e),null;case 1:return Ot(e.type)&&Xc(),ct(e),null;case 3:return n=e.stateNode,uo(),je(Pt),je(gt),ip(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(r===null||r.child===null)&&(Ml(e)?e.flags|=4:r===null||r.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,_r!==null&&(Rf(_r),_r=null))),jf(r,e),ct(e),null;case 5:sp(e);var s=Fs(Aa.current);if(t=e.type,r!==null&&e.stateNode!=null)Mw(r,e,t,n,s),r.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(F(166));return ct(e),null}if(r=Fs(Hr.current),Ml(e)){n=e.stateNode,t=e.type;var i=e.memoizedProps;switch(n[Br]=e,n[Oa]=i,r=(e.mode&1)!==0,t){case"dialog":ke("cancel",n),ke("close",n);break;case"iframe":case"object":case"embed":ke("load",n);break;case"video":case"audio":for(s=0;s<Jo.length;s++)ke(Jo[s],n);break;case"source":ke("error",n);break;case"img":case"image":case"link":ke("error",n),ke("load",n);break;case"details":ke("toggle",n);break;case"input":Im(n,i),ke("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},ke("invalid",n);break;case"textarea":$m(n,i),ke("invalid",n)}Zd(t,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?n.textContent!==a&&(i.suppressHydrationWarning!==!0&&Al(n.textContent,a,r),s=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Al(n.textContent,a,r),s=["children",""+a]):wa.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ke("scroll",n)}switch(t){case"input":Cl(n),Fm(n,i,!0);break;case"textarea":Cl(n),Bm(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=qc)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=lx(t)),r==="http://www.w3.org/1999/xhtml"?t==="script"?(r=o.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof n.is=="string"?r=o.createElement(t,{is:n.is}):(r=o.createElement(t),t==="select"&&(o=r,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):r=o.createElementNS(r,t),r[Br]=e,r[Oa]=n,Aw(r,e,!1,!1),e.stateNode=r;e:{switch(o=ef(t,n),t){case"dialog":ke("cancel",r),ke("close",r),s=n;break;case"iframe":case"object":case"embed":ke("load",r),s=n;break;case"video":case"audio":for(s=0;s<Jo.length;s++)ke(Jo[s],r);s=n;break;case"source":ke("error",r),s=n;break;case"img":case"image":case"link":ke("error",r),ke("load",r),s=n;break;case"details":ke("toggle",r),s=n;break;case"input":Im(r,n),s=qd(r,n),ke("invalid",r);break;case"option":s=n;break;case"select":r._wrapperState={wasMultiple:!!n.multiple},s=Le({},n,{value:void 0}),ke("invalid",r);break;case"textarea":$m(r,n),s=Qd(r,n),ke("invalid",r);break;default:s=n}Zd(t,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?hx(r,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&cx(r,l)):i==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&ba(r,l):typeof l=="number"&&ba(r,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(wa.hasOwnProperty(i)?l!=null&&i==="onScroll"&&ke("scroll",r):l!=null&&Rg(r,i,l,o))}switch(t){case"input":Cl(r),Fm(r,n,!1);break;case"textarea":Cl(r),Bm(r);break;case"option":n.value!=null&&r.setAttribute("value",""+fs(n.value));break;case"select":r.multiple=!!n.multiple,i=n.value,i!=null?zi(r,!!n.multiple,i,!1):n.defaultValue!=null&&zi(r,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(r.onclick=qc)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ct(e),null;case 6:if(r&&e.stateNode!=null)Dw(r,e,r.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(F(166));if(t=Fs(Aa.current),Fs(Hr.current),Ml(e)){if(n=e.stateNode,t=e.memoizedProps,n[Br]=e,(i=n.nodeValue!==t)&&(r=zt,r!==null))switch(r.tag){case 3:Al(n.nodeValue,t,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Al(n.nodeValue,t,(r.mode&1)!==0)}i&&(e.flags|=4)}else n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[Br]=e,e.stateNode=n}return ct(e),null;case 13:if(je(De),n=e.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Ae&&Bt!==null&&e.mode&1&&!(e.flags&128))Jx(),lo(),e.flags|=98560,i=!1;else if(i=Ml(e),n!==null&&n.dehydrated!==null){if(r===null){if(!i)throw Error(F(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(F(317));i[Br]=e}else lo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ct(e),i=!1}else _r!==null&&(Rf(_r),_r=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(n=n!==null,n!==(r!==null&&r.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(r===null||De.current&1?Qe===0&&(Qe=3):vp())),e.updateQueue!==null&&(e.flags|=4),ct(e),null);case 4:return uo(),jf(r,e),r===null&&Ea(e.stateNode.containerInfo),ct(e),null;case 10:return ep(e.type._context),ct(e),null;case 17:return Ot(e.type)&&Xc(),ct(e),null;case 19:if(je(De),i=e.memoizedState,i===null)return ct(e),null;if(n=(e.flags&128)!==0,o=i.rendering,o===null)if(n)Wo(i,!1);else{if(Qe!==0||r!==null&&r.flags&128)for(r=e.child;r!==null;){if(o=ru(r),o!==null){for(e.flags|=128,Wo(i,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=t,t=e.child;t!==null;)i=t,r=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,r=o.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t=t.sibling;return _e(De,De.current&1|2),e.child}r=r.sibling}i.tail!==null&&Be()>fo&&(e.flags|=128,n=!0,Wo(i,!1),e.lanes=4194304)}else{if(!n)if(r=ru(o),r!==null){if(e.flags|=128,n=!0,t=r.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Wo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ae)return ct(e),null}else 2*Be()-i.renderingStartTime>fo&&t!==1073741824&&(e.flags|=128,n=!0,Wo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(t=i.last,t!==null?t.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Be(),e.sibling=null,t=De.current,_e(De,n?t&1|2:t&1),e):(ct(e),null);case 22:case 23:return mp(),n=e.memoizedState!==null,r!==null&&r.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?It&1073741824&&(ct(e),e.subtreeFlags&6&&(e.flags|=8192)):ct(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function Lk(r,e){switch(Kg(e),e.tag){case 1:return Ot(e.type)&&Xc(),r=e.flags,r&65536?(e.flags=r&-65537|128,e):null;case 3:return uo(),je(Pt),je(gt),ip(),r=e.flags,r&65536&&!(r&128)?(e.flags=r&-65537|128,e):null;case 5:return sp(e),null;case 13:if(je(De),r=e.memoizedState,r!==null&&r.dehydrated!==null){if(e.alternate===null)throw Error(F(340));lo()}return r=e.flags,r&65536?(e.flags=r&-65537|128,e):null;case 19:return je(De),null;case 4:return uo(),null;case 10:return ep(e.type._context),null;case 22:case 23:return mp(),null;case 24:return null;default:return null}}var Ll=!1,dt=!1,Ik=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Li(r,e){var t=r.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){Fe(r,e,n)}else t.current=null}function Ef(r,e,t){try{t()}catch(n){Fe(r,e,n)}}var P0=!1;function Fk(r,e){if(hf=Hc,r=$x(),qg(r)){if("selectionStart"in r)var t={start:r.selectionStart,end:r.selectionEnd};else e:{t=(t=r.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=r,f=null;t:for(;;){for(var g;d!==t||s!==0&&d.nodeType!==3||(a=o+s),d!==i||n!==0&&d.nodeType!==3||(l=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)f=d,d=g;for(;;){if(d===r)break t;if(f===t&&++c===s&&(a=o),f===i&&++u===n&&(l=o),(g=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=g}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(df={focusedElem:r,selectionRange:t},Hc=!1,Y=e;Y!==null;)if(e=Y,r=e.child,(e.subtreeFlags&1028)!==0&&r!==null)r.return=e,Y=r;else for(;Y!==null;){e=Y;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,w=y.memoizedState,m=e.stateNode,p=m.getSnapshotBeforeUpdate(e.elementType===e.type?v:pr(e.type,v),w);m.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(_){Fe(e,e.return,_)}if(r=e.sibling,r!==null){r.return=e.return,Y=r;break}Y=e.return}return y=P0,P0=!1,y}function la(r,e,t){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&r)===r){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ef(e,t,i)}s=s.next}while(s!==n)}}function Gu(r,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&r)===r){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}}function Pf(r){var e=r.ref;if(e!==null){var t=r.stateNode;switch(r.tag){case 5:r=t;break;default:r=t}typeof e=="function"?e(r):e.current=r}}function Rw(r){var e=r.alternate;e!==null&&(r.alternate=null,Rw(e)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(e=r.stateNode,e!==null&&(delete e[Br],delete e[Oa],delete e[pf],delete e[wk],delete e[bk])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Lw(r){return r.tag===5||r.tag===3||r.tag===4}function O0(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Lw(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Of(r,e,t){var n=r.tag;if(n===5||n===6)r=r.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(r,e):t.insertBefore(r,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(r,t)):(e=t,e.appendChild(r)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=qc));else if(n!==4&&(r=r.child,r!==null))for(Of(r,e,t),r=r.sibling;r!==null;)Of(r,e,t),r=r.sibling}function Nf(r,e,t){var n=r.tag;if(n===5||n===6)r=r.stateNode,e?t.insertBefore(r,e):t.appendChild(r);else if(n!==4&&(r=r.child,r!==null))for(Nf(r,e,t),r=r.sibling;r!==null;)Nf(r,e,t),r=r.sibling}var rt=null,xr=!1;function Rn(r,e,t){for(t=t.child;t!==null;)Iw(r,e,t),t=t.sibling}function Iw(r,e,t){if(Vr&&typeof Vr.onCommitFiberUnmount=="function")try{Vr.onCommitFiberUnmount(Fu,t)}catch{}switch(t.tag){case 5:dt||Li(t,e);case 6:var n=rt,s=xr;rt=null,Rn(r,e,t),rt=n,xr=s,rt!==null&&(xr?(r=rt,t=t.stateNode,r.nodeType===8?r.parentNode.removeChild(t):r.removeChild(t)):rt.removeChild(t.stateNode));break;case 18:rt!==null&&(xr?(r=rt,t=t.stateNode,r.nodeType===8?ed(r.parentNode,t):r.nodeType===1&&ed(r,t),ka(r)):ed(rt,t.stateNode));break;case 4:n=rt,s=xr,rt=t.stateNode.containerInfo,xr=!0,Rn(r,e,t),rt=n,xr=s;break;case 0:case 11:case 14:case 15:if(!dt&&(n=t.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Ef(t,e,o),s=s.next}while(s!==n)}Rn(r,e,t);break;case 1:if(!dt&&(Li(t,e),n=t.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(a){Fe(t,e,a)}Rn(r,e,t);break;case 21:Rn(r,e,t);break;case 22:t.mode&1?(dt=(n=dt)||t.memoizedState!==null,Rn(r,e,t),dt=n):Rn(r,e,t);break;default:Rn(r,e,t)}}function N0(r){var e=r.updateQueue;if(e!==null){r.updateQueue=null;var t=r.stateNode;t===null&&(t=r.stateNode=new Ik),e.forEach(function(n){var s=Yk.bind(null,r,n);t.has(n)||(t.add(n),n.then(s,s))})}}function ur(r,e){var t=e.deletions;if(t!==null)for(var n=0;n<t.length;n++){var s=t[n];try{var i=r,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:rt=a.stateNode,xr=!1;break e;case 3:rt=a.stateNode.containerInfo,xr=!0;break e;case 4:rt=a.stateNode.containerInfo,xr=!0;break e}a=a.return}if(rt===null)throw Error(F(160));Iw(i,o,s),rt=null,xr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Fe(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Fw(e,r),e=e.sibling}function Fw(r,e){var t=r.alternate,n=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(ur(e,r),Mr(r),n&4){try{la(3,r,r.return),Gu(3,r)}catch(v){Fe(r,r.return,v)}try{la(5,r,r.return)}catch(v){Fe(r,r.return,v)}}break;case 1:ur(e,r),Mr(r),n&512&&t!==null&&Li(t,t.return);break;case 5:if(ur(e,r),Mr(r),n&512&&t!==null&&Li(t,t.return),r.flags&32){var s=r.stateNode;try{ba(s,"")}catch(v){Fe(r,r.return,v)}}if(n&4&&(s=r.stateNode,s!=null)){var i=r.memoizedProps,o=t!==null?t.memoizedProps:i,a=r.type,l=r.updateQueue;if(r.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&ox(s,i),ef(a,o);var c=ef(a,i);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?hx(s,d):u==="dangerouslySetInnerHTML"?cx(s,d):u==="children"?ba(s,d):Rg(s,u,d,c)}switch(a){case"input":Xd(s,i);break;case"textarea":ax(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?zi(s,!!i.multiple,g,!1):f!==!!i.multiple&&(i.defaultValue!=null?zi(s,!!i.multiple,i.defaultValue,!0):zi(s,!!i.multiple,i.multiple?[]:"",!1))}s[Oa]=i}catch(v){Fe(r,r.return,v)}}break;case 6:if(ur(e,r),Mr(r),n&4){if(r.stateNode===null)throw Error(F(162));s=r.stateNode,i=r.memoizedProps;try{s.nodeValue=i}catch(v){Fe(r,r.return,v)}}break;case 3:if(ur(e,r),Mr(r),n&4&&t!==null&&t.memoizedState.isDehydrated)try{ka(e.containerInfo)}catch(v){Fe(r,r.return,v)}break;case 4:ur(e,r),Mr(r);break;case 13:ur(e,r),Mr(r),s=r.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(gp=Be())),n&4&&N0(r);break;case 22:if(u=t!==null&&t.memoizedState!==null,r.mode&1?(dt=(c=dt)||u,ur(e,r),dt=c):ur(e,r),Mr(r),n&8192){if(c=r.memoizedState!==null,(r.stateNode.isHidden=c)&&!u&&r.mode&1)for(Y=r,u=r.child;u!==null;){for(d=Y=u;Y!==null;){switch(f=Y,g=f.child,f.tag){case 0:case 11:case 14:case 15:la(4,f,f.return);break;case 1:Li(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){n=f,t=f.return;try{e=n,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){Fe(n,t,v)}}break;case 5:Li(f,f.return);break;case 22:if(f.memoizedState!==null){M0(d);continue}}g!==null?(g.return=f,Y=g):M0(d)}u=u.sibling}e:for(u=null,d=r;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=ux("display",o))}catch(v){Fe(r,r.return,v)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){Fe(r,r.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===r)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===r)break e;for(;d.sibling===null;){if(d.return===null||d.return===r)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ur(e,r),Mr(r),n&4&&N0(r);break;case 21:break;default:ur(e,r),Mr(r)}}function Mr(r){var e=r.flags;if(e&2){try{e:{for(var t=r.return;t!==null;){if(Lw(t)){var n=t;break e}t=t.return}throw Error(F(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(ba(s,""),n.flags&=-33);var i=O0(r);Nf(r,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,a=O0(r);Of(r,a,o);break;default:throw Error(F(161))}}catch(l){Fe(r,r.return,l)}r.flags&=-3}e&4096&&(r.flags&=-4097)}function $k(r,e,t){Y=r,$w(r)}function $w(r,e,t){for(var n=(r.mode&1)!==0;Y!==null;){var s=Y,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Ll;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||dt;a=Ll;var c=dt;if(Ll=o,(dt=l)&&!c)for(Y=s;Y!==null;)o=Y,l=o.child,o.tag===22&&o.memoizedState!==null?D0(s):l!==null?(l.return=o,Y=l):D0(s);for(;i!==null;)Y=i,$w(i),i=i.sibling;Y=s,Ll=a,dt=c}A0(r)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Y=i):A0(r)}}function A0(r){for(;Y!==null;){var e=Y;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:dt||Gu(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!dt)if(t===null)n.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:pr(e.type,t.memoizedProps);n.componentDidUpdate(s,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&m0(e,i,n);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}m0(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&ka(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}dt||e.flags&512&&Pf(e)}catch(f){Fe(e,e.return,f)}}if(e===r){Y=null;break}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}}function M0(r){for(;Y!==null;){var e=Y;if(e===r){Y=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Y=t;break}Y=e.return}}function D0(r){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Gu(4,e)}catch(l){Fe(e,t,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(l){Fe(e,s,l)}}var i=e.return;try{Pf(e)}catch(l){Fe(e,i,l)}break;case 5:var o=e.return;try{Pf(e)}catch(l){Fe(e,o,l)}}}catch(l){Fe(e,e.return,l)}if(e===r){Y=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Y=a;break}Y=e.return}}var Bk=Math.ceil,iu=kn.ReactCurrentDispatcher,dp=kn.ReactCurrentOwner,rr=kn.ReactCurrentBatchConfig,de=0,tt=null,Ve=null,st=0,It=0,Ii=bs(0),Qe=0,La=null,ti=0,Yu=0,fp=0,ca=null,Tt=null,gp=0,fo=1/0,tn=null,ou=!1,Af=null,us=null,Il=!1,ts=null,au=0,ua=0,Mf=null,jc=-1,Ec=0;function xt(){return de&6?Be():jc!==-1?jc:jc=Be()}function hs(r){return r.mode&1?de&2&&st!==0?st&-st:Sk.transition!==null?(Ec===0&&(Ec=Sx()),Ec):(r=ye,r!==0||(r=window.event,r=r===void 0?16:Ox(r.type)),r):1}function jr(r,e,t,n){if(50<ua)throw ua=0,Mf=null,Error(F(185));Za(r,t,n),(!(de&2)||r!==tt)&&(r===tt&&(!(de&2)&&(Yu|=t),Qe===4&&Gn(r,st)),Nt(r,n),t===1&&de===0&&!(e.mode&1)&&(fo=Be()+500,Wu&&_s()))}function Nt(r,e){var t=r.callbackNode;S2(r,e);var n=Vc(r,r===tt?st:0);if(n===0)t!==null&&Wm(t),r.callbackNode=null,r.callbackPriority=0;else if(e=n&-n,r.callbackPriority!==e){if(t!=null&&Wm(t),e===1)r.tag===0?_k(R0.bind(null,r)):Xx(R0.bind(null,r)),yk(function(){!(de&6)&&_s()}),t=null;else{switch(Cx(n)){case 1:t=Bg;break;case 4:t=bx;break;case 16:t=Wc;break;case 536870912:t=_x;break;default:t=Wc}t=Yw(t,Bw.bind(null,r))}r.callbackPriority=e,r.callbackNode=t}}function Bw(r,e){if(jc=-1,Ec=0,de&6)throw Error(F(327));var t=r.callbackNode;if(Gi()&&r.callbackNode!==t)return null;var n=Vc(r,r===tt?st:0);if(n===0)return null;if(n&30||n&r.expiredLanes||e)e=lu(r,n);else{e=n;var s=de;de|=2;var i=Uw();(tt!==r||st!==e)&&(tn=null,fo=Be()+500,Ys(r,e));do try{Wk();break}catch(a){zw(r,a)}while(!0);Zg(),iu.current=i,de=s,Ve!==null?e=0:(tt=null,st=0,e=Qe)}if(e!==0){if(e===2&&(s=of(r),s!==0&&(n=s,e=Df(r,s))),e===1)throw t=La,Ys(r,0),Gn(r,n),Nt(r,Be()),t;if(e===6)Gn(r,n);else{if(s=r.current.alternate,!(n&30)&&!zk(s)&&(e=lu(r,n),e===2&&(i=of(r),i!==0&&(n=i,e=Df(r,i))),e===1))throw t=La,Ys(r,0),Gn(r,n),Nt(r,Be()),t;switch(r.finishedWork=s,r.finishedLanes=n,e){case 0:case 1:throw Error(F(345));case 2:Ns(r,Tt,tn);break;case 3:if(Gn(r,n),(n&130023424)===n&&(e=gp+500-Be(),10<e)){if(Vc(r,0)!==0)break;if(s=r.suspendedLanes,(s&n)!==n){xt(),r.pingedLanes|=r.suspendedLanes&s;break}r.timeoutHandle=gf(Ns.bind(null,r,Tt,tn),e);break}Ns(r,Tt,tn);break;case 4:if(Gn(r,n),(n&4194240)===n)break;for(e=r.eventTimes,s=-1;0<n;){var o=31-Tr(n);i=1<<o,o=e[o],o>s&&(s=o),n&=~i}if(n=s,n=Be()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Bk(n/1960))-n,10<n){r.timeoutHandle=gf(Ns.bind(null,r,Tt,tn),n);break}Ns(r,Tt,tn);break;case 5:Ns(r,Tt,tn);break;default:throw Error(F(329))}}}return Nt(r,Be()),r.callbackNode===t?Bw.bind(null,r):null}function Df(r,e){var t=ca;return r.current.memoizedState.isDehydrated&&(Ys(r,e).flags|=256),r=lu(r,e),r!==2&&(e=Tt,Tt=t,e!==null&&Rf(e)),r}function Rf(r){Tt===null?Tt=r:Tt.push.apply(Tt,r)}function zk(r){for(var e=r;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var n=0;n<t.length;n++){var s=t[n],i=s.getSnapshot;s=s.value;try{if(!Pr(i(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Gn(r,e){for(e&=~fp,e&=~Yu,r.suspendedLanes|=e,r.pingedLanes&=~e,r=r.expirationTimes;0<e;){var t=31-Tr(e),n=1<<t;r[t]=-1,e&=~n}}function R0(r){if(de&6)throw Error(F(327));Gi();var e=Vc(r,0);if(!(e&1))return Nt(r,Be()),null;var t=lu(r,e);if(r.tag!==0&&t===2){var n=of(r);n!==0&&(e=n,t=Df(r,n))}if(t===1)throw t=La,Ys(r,0),Gn(r,e),Nt(r,Be()),t;if(t===6)throw Error(F(345));return r.finishedWork=r.current.alternate,r.finishedLanes=e,Ns(r,Tt,tn),Nt(r,Be()),null}function pp(r,e){var t=de;de|=1;try{return r(e)}finally{de=t,de===0&&(fo=Be()+500,Wu&&_s())}}function ri(r){ts!==null&&ts.tag===0&&!(de&6)&&Gi();var e=de;de|=1;var t=rr.transition,n=ye;try{if(rr.transition=null,ye=1,r)return r()}finally{ye=n,rr.transition=t,de=e,!(de&6)&&_s()}}function mp(){It=Ii.current,je(Ii)}function Ys(r,e){r.finishedWork=null,r.finishedLanes=0;var t=r.timeoutHandle;if(t!==-1&&(r.timeoutHandle=-1,vk(t)),Ve!==null)for(t=Ve.return;t!==null;){var n=t;switch(Kg(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Xc();break;case 3:uo(),je(Pt),je(gt),ip();break;case 5:sp(n);break;case 4:uo();break;case 13:je(De);break;case 19:je(De);break;case 10:ep(n.type._context);break;case 22:case 23:mp()}t=t.return}if(tt=r,Ve=r=ds(r.current,null),st=It=e,Qe=0,La=null,fp=Yu=ti=0,Tt=ca=null,Is!==null){for(e=0;e<Is.length;e++)if(t=Is[e],n=t.interleaved,n!==null){t.interleaved=null;var s=n.next,i=t.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}t.pending=n}Is=null}return r}function zw(r,e){do{var t=Ve;try{if(Zg(),Cc.current=su,nu){for(var n=Re.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}nu=!1}if(ei=0,et=Xe=Re=null,aa=!1,Ma=0,dp.current=null,t===null||t.return===null){Qe=1,La=e,Ve=null;break}e:{var i=r,o=t.return,a=t,l=e;if(e=st,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=_0(o);if(g!==null){g.flags&=-257,S0(g,o,a,i,e),g.mode&1&&b0(i,c,e),e=g,l=c;var y=e.updateQueue;if(y===null){var v=new Set;v.add(l),e.updateQueue=v}else y.add(l);break e}else{if(!(e&1)){b0(i,c,e),vp();break e}l=Error(F(426))}}else if(Ae&&a.mode&1){var w=_0(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),S0(w,o,a,i,e),Qg(ho(l,a));break e}}i=l=ho(l,a),Qe!==4&&(Qe=2),ca===null?ca=[i]:ca.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var m=Cw(i,l,e);p0(i,m);break e;case 1:a=l;var p=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(us===null||!us.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var _=kw(i,a,e);p0(i,_);break e}}i=i.return}while(i!==null)}Vw(t)}catch(S){e=S,Ve===t&&t!==null&&(Ve=t=t.return);continue}break}while(!0)}function Uw(){var r=iu.current;return iu.current=su,r===null?su:r}function vp(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),tt===null||!(ti&268435455)&&!(Yu&268435455)||Gn(tt,st)}function lu(r,e){var t=de;de|=2;var n=Uw();(tt!==r||st!==e)&&(tn=null,Ys(r,e));do try{Uk();break}catch(s){zw(r,s)}while(!0);if(Zg(),de=t,iu.current=n,Ve!==null)throw Error(F(261));return tt=null,st=0,Qe}function Uk(){for(;Ve!==null;)Ww(Ve)}function Wk(){for(;Ve!==null&&!g2();)Ww(Ve)}function Ww(r){var e=Gw(r.alternate,r,It);r.memoizedProps=r.pendingProps,e===null?Vw(r):Ve=e,dp.current=null}function Vw(r){var e=r;do{var t=e.alternate;if(r=e.return,e.flags&32768){if(t=Lk(t,e),t!==null){t.flags&=32767,Ve=t;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Qe=6,Ve=null;return}}else if(t=Rk(t,e,It),t!==null){Ve=t;return}if(e=e.sibling,e!==null){Ve=e;return}Ve=e=r}while(e!==null);Qe===0&&(Qe=5)}function Ns(r,e,t){var n=ye,s=rr.transition;try{rr.transition=null,ye=1,Vk(r,e,t,n)}finally{rr.transition=s,ye=n}return null}function Vk(r,e,t,n){do Gi();while(ts!==null);if(de&6)throw Error(F(327));t=r.finishedWork;var s=r.finishedLanes;if(t===null)return null;if(r.finishedWork=null,r.finishedLanes=0,t===r.current)throw Error(F(177));r.callbackNode=null,r.callbackPriority=0;var i=t.lanes|t.childLanes;if(C2(r,i),r===tt&&(Ve=tt=null,st=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Il||(Il=!0,Yw(Wc,function(){return Gi(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=rr.transition,rr.transition=null;var o=ye;ye=1;var a=de;de|=4,dp.current=null,Fk(r,t),Fw(t,r),uk(df),Hc=!!hf,df=hf=null,r.current=t,$k(t),p2(),de=a,ye=o,rr.transition=i}else r.current=t;if(Il&&(Il=!1,ts=r,au=s),i=r.pendingLanes,i===0&&(us=null),y2(t.stateNode),Nt(r,Be()),e!==null)for(n=r.onRecoverableError,t=0;t<e.length;t++)s=e[t],n(s.value,{componentStack:s.stack,digest:s.digest});if(ou)throw ou=!1,r=Af,Af=null,r;return au&1&&r.tag!==0&&Gi(),i=r.pendingLanes,i&1?r===Mf?ua++:(ua=0,Mf=r):ua=0,_s(),null}function Gi(){if(ts!==null){var r=Cx(au),e=rr.transition,t=ye;try{if(rr.transition=null,ye=16>r?16:r,ts===null)var n=!1;else{if(r=ts,ts=null,au=0,de&6)throw Error(F(331));var s=de;for(de|=4,Y=r.current;Y!==null;){var i=Y,o=i.child;if(Y.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Y=c;Y!==null;){var u=Y;switch(u.tag){case 0:case 11:case 15:la(8,u,i)}var d=u.child;if(d!==null)d.return=u,Y=d;else for(;Y!==null;){u=Y;var f=u.sibling,g=u.return;if(Rw(u),u===c){Y=null;break}if(f!==null){f.return=g,Y=f;break}Y=g}}}var y=i.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}Y=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Y=o;else e:for(;Y!==null;){if(i=Y,i.flags&2048)switch(i.tag){case 0:case 11:case 15:la(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,Y=m;break e}Y=i.return}}var p=r.current;for(Y=p;Y!==null;){o=Y;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,Y=x;else e:for(o=p;Y!==null;){if(a=Y,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Gu(9,a)}}catch(S){Fe(a,a.return,S)}if(a===o){Y=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,Y=_;break e}Y=a.return}}if(de=s,_s(),Vr&&typeof Vr.onPostCommitFiberRoot=="function")try{Vr.onPostCommitFiberRoot(Fu,r)}catch{}n=!0}return n}finally{ye=t,rr.transition=e}}return!1}function L0(r,e,t){e=ho(t,e),e=Cw(r,e,1),r=cs(r,e,1),e=xt(),r!==null&&(Za(r,1,e),Nt(r,e))}function Fe(r,e,t){if(r.tag===3)L0(r,r,t);else for(;e!==null;){if(e.tag===3){L0(e,r,t);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(us===null||!us.has(n))){r=ho(t,r),r=kw(e,r,1),e=cs(e,r,1),r=xt(),e!==null&&(Za(e,1,r),Nt(e,r));break}}e=e.return}}function Hk(r,e,t){var n=r.pingCache;n!==null&&n.delete(e),e=xt(),r.pingedLanes|=r.suspendedLanes&t,tt===r&&(st&t)===t&&(Qe===4||Qe===3&&(st&130023424)===st&&500>Be()-gp?Ys(r,0):fp|=t),Nt(r,e)}function Hw(r,e){e===0&&(r.mode&1?(e=jl,jl<<=1,!(jl&130023424)&&(jl=4194304)):e=1);var t=xt();r=vn(r,e),r!==null&&(Za(r,e,t),Nt(r,t))}function Gk(r){var e=r.memoizedState,t=0;e!==null&&(t=e.retryLane),Hw(r,t)}function Yk(r,e){var t=0;switch(r.tag){case 13:var n=r.stateNode,s=r.memoizedState;s!==null&&(t=s.retryLane);break;case 19:n=r.stateNode;break;default:throw Error(F(314))}n!==null&&n.delete(e),Hw(r,t)}var Gw;Gw=function(r,e,t){if(r!==null)if(r.memoizedProps!==e.pendingProps||Pt.current)Et=!0;else{if(!(r.lanes&t)&&!(e.flags&128))return Et=!1,Dk(r,e,t);Et=!!(r.flags&131072)}else Et=!1,Ae&&e.flags&1048576&&Kx(e,Jc,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Tc(r,e),r=e.pendingProps;var s=ao(e,gt.current);Hi(e,t),s=ap(null,e,n,r,s,t);var i=lp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ot(n)?(i=!0,Kc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,rp(e),s.updater=Hu,e.stateNode=s,s._reactInternals=e,bf(e,n,r,t),e=Cf(null,e,n,!0,i,t)):(e.tag=0,Ae&&i&&Xg(e),mt(null,e,s,t),e=e.child),e;case 16:n=e.elementType;e:{switch(Tc(r,e),r=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=Xk(n),r=pr(n,r),s){case 0:e=Sf(null,e,n,r,t);break e;case 1:e=T0(null,e,n,r,t);break e;case 11:e=C0(null,e,n,r,t);break e;case 14:e=k0(null,e,n,pr(n.type,r),t);break e}throw Error(F(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:pr(n,s),Sf(r,e,n,s,t);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:pr(n,s),T0(r,e,n,s,t);case 3:e:{if(Pw(e),r===null)throw Error(F(387));n=e.pendingProps,i=e.memoizedState,s=i.element,rw(r,e),tu(e,n,null,t);var o=e.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ho(Error(F(423)),e),e=j0(r,e,n,t,s);break e}else if(n!==s){s=ho(Error(F(424)),e),e=j0(r,e,n,t,s);break e}else for(Bt=ls(e.stateNode.containerInfo.firstChild),zt=e,Ae=!0,_r=null,t=ew(e,null,n,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(lo(),n===s){e=yn(r,e,t);break e}mt(r,e,n,t)}e=e.child}return e;case 5:return nw(e),r===null&&yf(e),n=e.type,s=e.pendingProps,i=r!==null?r.memoizedProps:null,o=s.children,ff(n,s)?o=null:i!==null&&ff(n,i)&&(e.flags|=32),Ew(r,e),mt(r,e,o,t),e.child;case 6:return r===null&&yf(e),null;case 13:return Ow(r,e,t);case 4:return np(e,e.stateNode.containerInfo),n=e.pendingProps,r===null?e.child=co(e,null,n,t):mt(r,e,n,t),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:pr(n,s),C0(r,e,n,s,t);case 7:return mt(r,e,e.pendingProps,t),e.child;case 8:return mt(r,e,e.pendingProps.children,t),e.child;case 12:return mt(r,e,e.pendingProps.children,t),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,_e(Zc,n._currentValue),n._currentValue=o,i!==null)if(Pr(i.value,o)){if(i.children===s.children&&!Pt.current){e=yn(r,e,t);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=fn(-1,t&-t),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=t,l=i.alternate,l!==null&&(l.lanes|=t),xf(i.return,t,e),a.lanes|=t;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(F(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),xf(o,t,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}mt(r,e,s.children,t),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,Hi(e,t),s=sr(s),n=n(s),e.flags|=1,mt(r,e,n,t),e.child;case 14:return n=e.type,s=pr(n,e.pendingProps),s=pr(n.type,s),k0(r,e,n,s,t);case 15:return Tw(r,e,e.type,e.pendingProps,t);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:pr(n,s),Tc(r,e),e.tag=1,Ot(n)?(r=!0,Kc(e)):r=!1,Hi(e,t),Sw(e,n,s),bf(e,n,s,t),Cf(null,e,n,!0,r,t);case 19:return Nw(r,e,t);case 22:return jw(r,e,t)}throw Error(F(156,e.tag))};function Yw(r,e){return wx(r,e)}function qk(r,e,t,n){this.tag=r,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tr(r,e,t,n){return new qk(r,e,t,n)}function yp(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Xk(r){if(typeof r=="function")return yp(r)?1:0;if(r!=null){if(r=r.$$typeof,r===Ig)return 11;if(r===Fg)return 14}return 2}function ds(r,e){var t=r.alternate;return t===null?(t=tr(r.tag,e,r.key,r.mode),t.elementType=r.elementType,t.type=r.type,t.stateNode=r.stateNode,t.alternate=r,r.alternate=t):(t.pendingProps=e,t.type=r.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=r.flags&14680064,t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,e=r.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=r.sibling,t.index=r.index,t.ref=r.ref,t}function Pc(r,e,t,n,s,i){var o=2;if(n=r,typeof r=="function")yp(r)&&(o=1);else if(typeof r=="string")o=5;else e:switch(r){case ji:return qs(t.children,s,i,e);case Lg:o=8,s|=8;break;case Vd:return r=tr(12,t,e,s|2),r.elementType=Vd,r.lanes=i,r;case Hd:return r=tr(13,t,e,s),r.elementType=Hd,r.lanes=i,r;case Gd:return r=tr(19,t,e,s),r.elementType=Gd,r.lanes=i,r;case nx:return qu(t,s,i,e);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case tx:o=10;break e;case rx:o=9;break e;case Ig:o=11;break e;case Fg:o=14;break e;case Wn:o=16,n=null;break e}throw Error(F(130,r==null?r:typeof r,""))}return e=tr(o,t,e,s),e.elementType=r,e.type=n,e.lanes=i,e}function qs(r,e,t,n){return r=tr(7,r,n,e),r.lanes=t,r}function qu(r,e,t,n){return r=tr(22,r,n,e),r.elementType=nx,r.lanes=t,r.stateNode={isHidden:!1},r}function ld(r,e,t){return r=tr(6,r,null,e),r.lanes=t,r}function cd(r,e,t){return e=tr(4,r.children!==null?r.children:[],r.key,e),e.lanes=t,e.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},e}function Kk(r,e,t,n,s){this.tag=e,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wh(0),this.expirationTimes=Wh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wh(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function xp(r,e,t,n,s,i,o,a,l){return r=new Kk(r,e,t,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=tr(3,null,null,e),r.current=i,i.stateNode=r,i.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},rp(i),r}function Qk(r,e,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ti,key:n==null?null:""+n,children:r,containerInfo:e,implementation:t}}function qw(r){if(!r)return gs;r=r._reactInternals;e:{if(oi(r)!==r||r.tag!==1)throw Error(F(170));var e=r;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ot(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(r.tag===1){var t=r.type;if(Ot(t))return qx(r,t,e)}return e}function Xw(r,e,t,n,s,i,o,a,l){return r=xp(t,n,!0,r,s,i,o,a,l),r.context=qw(null),t=r.current,n=xt(),s=hs(t),i=fn(n,s),i.callback=e??null,cs(t,i,s),r.current.lanes=s,Za(r,s,n),Nt(r,n),r}function Xu(r,e,t,n){var s=e.current,i=xt(),o=hs(s);return t=qw(t),e.context===null?e.context=t:e.pendingContext=t,e=fn(i,o),e.payload={element:r},n=n===void 0?null:n,n!==null&&(e.callback=n),r=cs(s,e,o),r!==null&&(jr(r,s,o,i),Sc(r,s,o)),o}function cu(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function I0(r,e){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var t=r.retryLane;r.retryLane=t!==0&&t<e?t:e}}function wp(r,e){I0(r,e),(r=r.alternate)&&I0(r,e)}function Jk(){return null}var Kw=typeof reportError=="function"?reportError:function(r){console.error(r)};function bp(r){this._internalRoot=r}Ku.prototype.render=bp.prototype.render=function(r){var e=this._internalRoot;if(e===null)throw Error(F(409));Xu(r,e,null,null)};Ku.prototype.unmount=bp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var e=r.containerInfo;ri(function(){Xu(null,r,null,null)}),e[mn]=null}};function Ku(r){this._internalRoot=r}Ku.prototype.unstable_scheduleHydration=function(r){if(r){var e=jx();r={blockedOn:null,target:r,priority:e};for(var t=0;t<Hn.length&&e!==0&&e<Hn[t].priority;t++);Hn.splice(t,0,r),t===0&&Px(r)}};function _p(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Qu(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function F0(){}function Zk(r,e,t,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var c=cu(o);i.call(c)}}var o=Xw(e,n,r,0,null,!1,!1,"",F0);return r._reactRootContainer=o,r[mn]=o.current,Ea(r.nodeType===8?r.parentNode:r),ri(),o}for(;s=r.lastChild;)r.removeChild(s);if(typeof n=="function"){var a=n;n=function(){var c=cu(l);a.call(c)}}var l=xp(r,0,!1,null,null,!1,!1,"",F0);return r._reactRootContainer=l,r[mn]=l.current,Ea(r.nodeType===8?r.parentNode:r),ri(function(){Xu(e,l,t,n)}),l}function Ju(r,e,t,n,s){var i=t._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=cu(o);a.call(l)}}Xu(e,o,r,s)}else o=Zk(t,e,r,s,n);return cu(o)}kx=function(r){switch(r.tag){case 3:var e=r.stateNode;if(e.current.memoizedState.isDehydrated){var t=Qo(e.pendingLanes);t!==0&&(zg(e,t|1),Nt(e,Be()),!(de&6)&&(fo=Be()+500,_s()))}break;case 13:ri(function(){var n=vn(r,1);if(n!==null){var s=xt();jr(n,r,1,s)}}),wp(r,1)}};Ug=function(r){if(r.tag===13){var e=vn(r,134217728);if(e!==null){var t=xt();jr(e,r,134217728,t)}wp(r,134217728)}};Tx=function(r){if(r.tag===13){var e=hs(r),t=vn(r,e);if(t!==null){var n=xt();jr(t,r,e,n)}wp(r,e)}};jx=function(){return ye};Ex=function(r,e){var t=ye;try{return ye=r,e()}finally{ye=t}};rf=function(r,e,t){switch(e){case"input":if(Xd(r,t),e=t.name,t.type==="radio"&&e!=null){for(t=r;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var n=t[e];if(n!==r&&n.form===r.form){var s=Uu(n);if(!s)throw Error(F(90));ix(n),Xd(n,s)}}}break;case"textarea":ax(r,t);break;case"select":e=t.value,e!=null&&zi(r,!!t.multiple,e,!1)}};gx=pp;px=ri;var eT={usingClientEntryPoint:!1,Events:[tl,Ni,Uu,dx,fx,pp]},Vo={findFiberByHostInstance:Ls,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tT={bundleType:Vo.bundleType,version:Vo.version,rendererPackageName:Vo.rendererPackageName,rendererConfig:Vo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:kn.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=yx(r),r===null?null:r.stateNode},findFiberByHostInstance:Vo.findFiberByHostInstance||Jk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fl.isDisabled&&Fl.supportsFiber)try{Fu=Fl.inject(tT),Vr=Fl}catch{}}Vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eT;Vt.createPortal=function(r,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_p(e))throw Error(F(200));return Qk(r,e,null,t)};Vt.createRoot=function(r,e){if(!_p(r))throw Error(F(299));var t=!1,n="",s=Kw;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=xp(r,1,!1,null,null,t,!1,n,s),r[mn]=e.current,Ea(r.nodeType===8?r.parentNode:r),new bp(e)};Vt.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var e=r._reactInternals;if(e===void 0)throw typeof r.render=="function"?Error(F(188)):(r=Object.keys(r).join(","),Error(F(268,r)));return r=yx(e),r=r===null?null:r.stateNode,r};Vt.flushSync=function(r){return ri(r)};Vt.hydrate=function(r,e,t){if(!Qu(e))throw Error(F(200));return Ju(null,r,e,!0,t)};Vt.hydrateRoot=function(r,e,t){if(!_p(r))throw Error(F(405));var n=t!=null&&t.hydratedSources||null,s=!1,i="",o=Kw;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=Xw(e,null,r,1,t??null,s,!1,i,o),r[mn]=e.current,Ea(r),n)for(r=0;r<n.length;r++)t=n[r],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new Ku(e)};Vt.render=function(r,e,t){if(!Qu(e))throw Error(F(200));return Ju(null,r,e,!1,t)};Vt.unmountComponentAtNode=function(r){if(!Qu(r))throw Error(F(40));return r._reactRootContainer?(ri(function(){Ju(null,null,r,!1,function(){r._reactRootContainer=null,r[mn]=null})}),!0):!1};Vt.unstable_batchedUpdates=pp;Vt.unstable_renderSubtreeIntoContainer=function(r,e,t,n){if(!Qu(t))throw Error(F(200));if(r==null||r._reactInternals===void 0)throw Error(F(38));return Ju(r,e,t,!1,n)};Vt.version="18.3.1-next-f1338f8080-20240426";function Qw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Qw)}catch(r){console.error(r)}}Qw(),Qy.exports=Vt;var nl=Qy.exports;const Jw=$y(nl);var Zw,$0=nl;Zw=$0.createRoot,$0.hydrateRoot;const rT=1,nT=1e6;let ud=0;function sT(){return ud=(ud+1)%Number.MAX_SAFE_INTEGER,ud.toString()}const hd=new Map,B0=r=>{if(hd.has(r))return;const e=setTimeout(()=>{hd.delete(r),ha({type:"REMOVE_TOAST",toastId:r})},nT);hd.set(r,e)},iT=(r,e)=>{switch(e.type){case"ADD_TOAST":return{...r,toasts:[e.toast,...r.toasts].slice(0,rT)};case"UPDATE_TOAST":return{...r,toasts:r.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?B0(t):r.toasts.forEach(n=>{B0(n.id)}),{...r,toasts:r.toasts.map(n=>n.id===t||t===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return e.toastId===void 0?{...r,toasts:[]}:{...r,toasts:r.toasts.filter(t=>t.id!==e.toastId)}}},Oc=[];let Nc={toasts:[]};function ha(r){Nc=iT(Nc,r),Oc.forEach(e=>{e(Nc)})}function oT({...r}){const e=sT(),t=s=>ha({type:"UPDATE_TOAST",toast:{...s,id:e}}),n=()=>ha({type:"DISMISS_TOAST",toastId:e});return ha({type:"ADD_TOAST",toast:{...r,id:e,open:!0,onOpenChange:s=>{s||n()}}}),{id:e,dismiss:n,update:t}}function Ss(){const[r,e]=b.useState(Nc);return b.useEffect(()=>(Oc.push(e),()=>{const t=Oc.indexOf(e);t>-1&&Oc.splice(t,1)}),[r]),{...r,toast:oT,dismiss:t=>ha({type:"DISMISS_TOAST",toastId:t})}}function ce(r,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(r==null||r(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function z0(r,e){if(typeof r=="function")return r(e);r!=null&&(r.current=e)}function e1(...r){return e=>{let t=!1;const n=r.map(s=>{const i=z0(s,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let s=0;s<n.length;s++){const i=n[s];typeof i=="function"?i():z0(r[s],null)}}}}function Ye(...r){return b.useCallback(e1(...r),r)}function Tn(r,e=[]){let t=[];function n(i,o){const a=b.createContext(o),l=t.length;t=[...t,o];const c=d=>{var m;const{scope:f,children:g,...y}=d,v=((m=f==null?void 0:f[r])==null?void 0:m[l])||a,w=b.useMemo(()=>y,Object.values(y));return h.jsx(v.Provider,{value:w,children:g})};c.displayName=i+"Provider";function u(d,f){var v;const g=((v=f==null?void 0:f[r])==null?void 0:v[l])||a,y=b.useContext(g);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${i}\``)}return[c,u]}const s=()=>{const i=t.map(o=>b.createContext(o));return function(a){const l=(a==null?void 0:a[r])||i;return b.useMemo(()=>({[`__scope${r}`]:{...a,[r]:l}}),[a,l])}};return s.scopeName=r,[n,aT(s,...e)]}function aT(...r){const e=r[0];if(r.length===1)return e;const t=()=>{const n=r.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=n.reduce((a,{useScope:l,scopeName:c})=>{const d=l(i)[`__scope${c}`];return{...a,...d}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function uu(r){const e=cT(r),t=b.forwardRef((n,s)=>{const{children:i,...o}=n,a=b.Children.toArray(i),l=a.find(hT);if(l){const c=l.props.children,u=a.map(d=>d===l?b.Children.count(c)>1?b.Children.only(null):b.isValidElement(c)?c.props.children:null:d);return h.jsx(e,{...o,ref:s,children:b.isValidElement(c)?b.cloneElement(c,void 0,u):null})}return h.jsx(e,{...o,ref:s,children:i})});return t.displayName=`${r}.Slot`,t}var lT=uu("Slot");function cT(r){const e=b.forwardRef((t,n)=>{const{children:s,...i}=t;if(b.isValidElement(s)){const o=fT(s),a=dT(i,s.props);return s.type!==b.Fragment&&(a.ref=n?e1(n,o):o),b.cloneElement(s,a)}return b.Children.count(s)>1?b.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var t1=Symbol("radix.slottable");function uT(r){const e=({children:t})=>h.jsx(h.Fragment,{children:t});return e.displayName=`${r}.Slottable`,e.__radixId=t1,e}function hT(r){return b.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===t1}function dT(r,e){const t={...e};for(const n in e){const s=r[n],i=e[n];/^on[A-Z]/.test(n)?s&&i?t[n]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(t[n]=s):n==="style"?t[n]={...s,...i}:n==="className"&&(t[n]=[s,i].filter(Boolean).join(" "))}return{...r,...t}}function fT(r){var n,s;let e=(n=Object.getOwnPropertyDescriptor(r.props,"ref"))==null?void 0:n.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=(s=Object.getOwnPropertyDescriptor(r,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}function Sp(r){const e=r+"CollectionProvider",[t,n]=Tn(e),[s,i]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:w,children:m}=v,p=U.useRef(null),x=U.useRef(new Map).current;return h.jsx(s,{scope:w,itemMap:x,collectionRef:p,children:m})};o.displayName=e;const a=r+"CollectionSlot",l=uu(a),c=U.forwardRef((v,w)=>{const{scope:m,children:p}=v,x=i(a,m),_=Ye(w,x.collectionRef);return h.jsx(l,{ref:_,children:p})});c.displayName=a;const u=r+"CollectionItemSlot",d="data-radix-collection-item",f=uu(u),g=U.forwardRef((v,w)=>{const{scope:m,children:p,...x}=v,_=U.useRef(null),S=Ye(w,_),C=i(u,m);return U.useEffect(()=>(C.itemMap.set(_,{ref:_,...x}),()=>void C.itemMap.delete(_))),h.jsx(f,{[d]:"",ref:S,children:p})});g.displayName=u;function y(v){const w=i(r+"CollectionConsumer",v);return U.useCallback(()=>{const p=w.collectionRef.current;if(!p)return[];const x=Array.from(p.querySelectorAll(`[${d}]`));return Array.from(w.itemMap.values()).sort((C,T)=>x.indexOf(C.ref.current)-x.indexOf(T.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:o,Slot:c,ItemSlot:g},y,n]}var gT=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ve=gT.reduce((r,e)=>{const t=uu(`Primitive.${e}`),n=b.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(l,{...a,ref:i})});return n.displayName=`Primitive.${e}`,{...r,[e]:n}},{});function r1(r,e){r&&nl.flushSync(()=>r.dispatchEvent(e))}function xn(r){const e=b.useRef(r);return b.useEffect(()=>{e.current=r}),b.useMemo(()=>(...t)=>{var n;return(n=e.current)==null?void 0:n.call(e,...t)},[])}function pT(r,e=globalThis==null?void 0:globalThis.document){const t=xn(r);b.useEffect(()=>{const n=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[t,e])}var mT="DismissableLayer",Lf="dismissableLayer.update",vT="dismissableLayer.pointerDownOutside",yT="dismissableLayer.focusOutside",U0,n1=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Cp=b.forwardRef((r,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=r,c=b.useContext(n1),[u,d]=b.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=b.useState({}),y=Ye(e,T=>d(T)),v=Array.from(c.layers),[w]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),m=v.indexOf(w),p=u?v.indexOf(u):-1,x=c.layersWithOutsidePointerEventsDisabled.size>0,_=p>=m,S=wT(T=>{const E=T.target,A=[...c.branches].some(D=>D.contains(E));!_||A||(s==null||s(T),o==null||o(T),T.defaultPrevented||a==null||a())},f),C=bT(T=>{const E=T.target;[...c.branches].some(D=>D.contains(E))||(i==null||i(T),o==null||o(T),T.defaultPrevented||a==null||a())},f);return pT(T=>{p===c.layers.size-1&&(n==null||n(T),!T.defaultPrevented&&a&&(T.preventDefault(),a()))},f),b.useEffect(()=>{if(u)return t&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(U0=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),W0(),()=>{t&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=U0)}},[u,f,t,c]),b.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),W0())},[u,c]),b.useEffect(()=>{const T=()=>g({});return document.addEventListener(Lf,T),()=>document.removeEventListener(Lf,T)},[]),h.jsx(ve.div,{...l,ref:y,style:{pointerEvents:x?_?"auto":"none":void 0,...r.style},onFocusCapture:ce(r.onFocusCapture,C.onFocusCapture),onBlurCapture:ce(r.onBlurCapture,C.onBlurCapture),onPointerDownCapture:ce(r.onPointerDownCapture,S.onPointerDownCapture)})});Cp.displayName=mT;var xT="DismissableLayerBranch",s1=b.forwardRef((r,e)=>{const t=b.useContext(n1),n=b.useRef(null),s=Ye(e,n);return b.useEffect(()=>{const i=n.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),h.jsx(ve.div,{...r,ref:s})});s1.displayName=xT;function wT(r,e=globalThis==null?void 0:globalThis.document){const t=xn(r),n=b.useRef(!1),s=b.useRef(()=>{});return b.useEffect(()=>{const i=a=>{if(a.target&&!n.current){let l=function(){i1(vT,t,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);n.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>n.current=!0}}function bT(r,e=globalThis==null?void 0:globalThis.document){const t=xn(r),n=b.useRef(!1);return b.useEffect(()=>{const s=i=>{i.target&&!n.current&&i1(yT,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function W0(){const r=new CustomEvent(Lf);document.dispatchEvent(r)}function i1(r,e,t,{discrete:n}){const s=t.originalEvent.target,i=new CustomEvent(r,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(r,e,{once:!0}),n?r1(s,i):s.dispatchEvent(i)}var _T=Cp,ST=s1,wn=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},CT="Portal",o1=b.forwardRef((r,e)=>{var a;const{container:t,...n}=r,[s,i]=b.useState(!1);wn(()=>i(!0),[]);const o=t||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?Jw.createPortal(h.jsx(ve.div,{...n,ref:e}),o):null});o1.displayName=CT;function kT(r,e){return b.useReducer((t,n)=>e[t][n]??t,r)}var Zu=r=>{const{present:e,children:t}=r,n=TT(e),s=typeof t=="function"?t({present:n.isPresent}):b.Children.only(t),i=Ye(n.ref,jT(s));return typeof t=="function"||n.isPresent?b.cloneElement(s,{ref:i}):null};Zu.displayName="Presence";function TT(r){const[e,t]=b.useState(),n=b.useRef(null),s=b.useRef(r),i=b.useRef("none"),o=r?"mounted":"unmounted",[a,l]=kT(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const c=$l(n.current);i.current=a==="mounted"?c:"none"},[a]),wn(()=>{const c=n.current,u=s.current;if(u!==r){const f=i.current,g=$l(c);r?l("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=r}},[r,l]),wn(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=g=>{const v=$l(n.current).includes(g.animationName);if(g.target===e&&v&&(l("ANIMATION_END"),!s.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},f=g=>{g.target===e&&(i.current=$l(n.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:b.useCallback(c=>{n.current=c?getComputedStyle(c):null,t(c)},[])}}function $l(r){return(r==null?void 0:r.animationName)||"none"}function jT(r){var n,s;let e=(n=Object.getOwnPropertyDescriptor(r.props,"ref"))==null?void 0:n.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=(s=Object.getOwnPropertyDescriptor(r,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}var ET=Ag[" useInsertionEffect ".trim().toString()]||wn;function sl({prop:r,defaultProp:e,onChange:t=()=>{},caller:n}){const[s,i,o]=PT({defaultProp:e,onChange:t}),a=r!==void 0,l=a?r:s;{const u=b.useRef(r!==void 0);b.useEffect(()=>{const d=u.current;d!==a&&console.warn(`${n} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,n])}const c=b.useCallback(u=>{var d;if(a){const f=OT(u)?u(r):u;f!==r&&((d=o.current)==null||d.call(o,f))}else i(u)},[a,r,i,o]);return[l,c]}function PT({defaultProp:r,onChange:e}){const[t,n]=b.useState(r),s=b.useRef(t),i=b.useRef(e);return ET(()=>{i.current=e},[e]),b.useEffect(()=>{var o;s.current!==t&&((o=i.current)==null||o.call(i,t),s.current=t)},[t,s]),[t,n,i]}function OT(r){return typeof r=="function"}var NT=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),AT="VisuallyHidden",eh=b.forwardRef((r,e)=>h.jsx(ve.span,{...r,ref:e,style:{...NT,...r.style}}));eh.displayName=AT;var MT=eh,kp="ToastProvider",[Tp,DT,RT]=Sp("Toast"),[a1,LL]=Tn("Toast",[RT]),[LT,th]=a1(kp),l1=r=>{const{__scopeToast:e,label:t="Notification",duration:n=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=r,[a,l]=b.useState(null),[c,u]=b.useState(0),d=b.useRef(!1),f=b.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${kp}\`. Expected non-empty \`string\`.`),h.jsx(Tp.Provider,{scope:e,children:h.jsx(LT,{scope:e,label:t,duration:n,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:b.useCallback(()=>u(g=>g+1),[]),onToastRemove:b.useCallback(()=>u(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f,children:o})})};l1.displayName=kp;var c1="ToastViewport",IT=["F8"],If="toast.viewportPause",Ff="toast.viewportResume",u1=b.forwardRef((r,e)=>{const{__scopeToast:t,hotkey:n=IT,label:s="Notifications ({hotkey})",...i}=r,o=th(c1,t),a=DT(t),l=b.useRef(null),c=b.useRef(null),u=b.useRef(null),d=b.useRef(null),f=Ye(e,d,o.onViewportChange),g=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=o.toastCount>0;b.useEffect(()=>{const w=m=>{var x;n.length!==0&&n.every(_=>m[_]||m.code===_)&&((x=d.current)==null||x.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[n]),b.useEffect(()=>{const w=l.current,m=d.current;if(y&&w&&m){const p=()=>{if(!o.isClosePausedRef.current){const C=new CustomEvent(If);m.dispatchEvent(C),o.isClosePausedRef.current=!0}},x=()=>{if(o.isClosePausedRef.current){const C=new CustomEvent(Ff);m.dispatchEvent(C),o.isClosePausedRef.current=!1}},_=C=>{!w.contains(C.relatedTarget)&&x()},S=()=>{w.contains(document.activeElement)||x()};return w.addEventListener("focusin",p),w.addEventListener("focusout",_),w.addEventListener("pointermove",p),w.addEventListener("pointerleave",S),window.addEventListener("blur",p),window.addEventListener("focus",x),()=>{w.removeEventListener("focusin",p),w.removeEventListener("focusout",_),w.removeEventListener("pointermove",p),w.removeEventListener("pointerleave",S),window.removeEventListener("blur",p),window.removeEventListener("focus",x)}}},[y,o.isClosePausedRef]);const v=b.useCallback(({tabbingDirection:w})=>{const p=a().map(x=>{const _=x.ref.current,S=[_,...KT(_)];return w==="forwards"?S:S.reverse()});return(w==="forwards"?p.reverse():p).flat()},[a]);return b.useEffect(()=>{const w=d.current;if(w){const m=p=>{var S,C,T;const x=p.altKey||p.ctrlKey||p.metaKey;if(p.key==="Tab"&&!x){const E=document.activeElement,A=p.shiftKey;if(p.target===w&&A){(S=c.current)==null||S.focus();return}const P=v({tabbingDirection:A?"backwards":"forwards"}),I=P.findIndex(L=>L===E);dd(P.slice(I+1))?p.preventDefault():A?(C=c.current)==null||C.focus():(T=u.current)==null||T.focus()}};return w.addEventListener("keydown",m),()=>w.removeEventListener("keydown",m)}},[a,v]),h.jsxs(ST,{ref:l,role:"region","aria-label":s.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&h.jsx($f,{ref:c,onFocusFromOutsideViewport:()=>{const w=v({tabbingDirection:"forwards"});dd(w)}}),h.jsx(Tp.Slot,{scope:t,children:h.jsx(ve.ol,{tabIndex:-1,...i,ref:f})}),y&&h.jsx($f,{ref:u,onFocusFromOutsideViewport:()=>{const w=v({tabbingDirection:"backwards"});dd(w)}})]})});u1.displayName=c1;var h1="ToastFocusProxy",$f=b.forwardRef((r,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:n,...s}=r,i=th(h1,t);return h.jsx(eh,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(a))&&n()}})});$f.displayName=h1;var il="Toast",FT="toast.swipeStart",$T="toast.swipeMove",BT="toast.swipeCancel",zT="toast.swipeEnd",d1=b.forwardRef((r,e)=>{const{forceMount:t,open:n,defaultOpen:s,onOpenChange:i,...o}=r,[a,l]=sl({prop:n,defaultProp:s??!0,onChange:i,caller:il});return h.jsx(Zu,{present:t||a,children:h.jsx(VT,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:xn(r.onPause),onResume:xn(r.onResume),onSwipeStart:ce(r.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ce(r.onSwipeMove,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:ce(r.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ce(r.onSwipeEnd,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});d1.displayName=il;var[UT,WT]=a1(il,{onClose(){}}),VT=b.forwardRef((r,e)=>{const{__scopeToast:t,type:n="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:g,...y}=r,v=th(il,t),[w,m]=b.useState(null),p=Ye(e,L=>m(L)),x=b.useRef(null),_=b.useRef(null),S=s||v.duration,C=b.useRef(0),T=b.useRef(S),E=b.useRef(0),{onToastAdd:A,onToastRemove:D}=v,B=xn(()=>{var G;(w==null?void 0:w.contains(document.activeElement))&&((G=v.viewport)==null||G.focus()),o()}),P=b.useCallback(L=>{!L||L===1/0||(window.clearTimeout(E.current),C.current=new Date().getTime(),E.current=window.setTimeout(B,L))},[B]);b.useEffect(()=>{const L=v.viewport;if(L){const G=()=>{P(T.current),c==null||c()},W=()=>{const V=new Date().getTime()-C.current;T.current=T.current-V,window.clearTimeout(E.current),l==null||l()};return L.addEventListener(If,W),L.addEventListener(Ff,G),()=>{L.removeEventListener(If,W),L.removeEventListener(Ff,G)}}},[v.viewport,S,l,c,P]),b.useEffect(()=>{i&&!v.isClosePausedRef.current&&P(S)},[i,S,v.isClosePausedRef,P]),b.useEffect(()=>(A(),()=>D()),[A,D]);const I=b.useMemo(()=>w?x1(w):null,[w]);return v.viewport?h.jsxs(h.Fragment,{children:[I&&h.jsx(HT,{__scopeToast:t,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:I}),h.jsx(UT,{scope:t,onClose:B,children:nl.createPortal(h.jsx(Tp.ItemSlot,{scope:t,children:h.jsx(_T,{asChild:!0,onEscapeKeyDown:ce(a,()=>{v.isFocusedToastEscapeKeyDownRef.current||B(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:h.jsx(ve.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":v.swipeDirection,...y,ref:p,style:{userSelect:"none",touchAction:"none",...r.style},onKeyDown:ce(r.onKeyDown,L=>{L.key==="Escape"&&(a==null||a(L.nativeEvent),L.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,B()))}),onPointerDown:ce(r.onPointerDown,L=>{L.button===0&&(x.current={x:L.clientX,y:L.clientY})}),onPointerMove:ce(r.onPointerMove,L=>{if(!x.current)return;const G=L.clientX-x.current.x,W=L.clientY-x.current.y,V=!!_.current,N=["left","right"].includes(v.swipeDirection),M=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,z=N?M(0,G):0,Q=N?0:M(0,W),X=L.pointerType==="touch"?10:2,Z={x:z,y:Q},ee={originalEvent:L,delta:Z};V?(_.current=Z,Bl($T,d,ee,{discrete:!1})):V0(Z,v.swipeDirection,X)?(_.current=Z,Bl(FT,u,ee,{discrete:!1}),L.target.setPointerCapture(L.pointerId)):(Math.abs(G)>X||Math.abs(W)>X)&&(x.current=null)}),onPointerUp:ce(r.onPointerUp,L=>{const G=_.current,W=L.target;if(W.hasPointerCapture(L.pointerId)&&W.releasePointerCapture(L.pointerId),_.current=null,x.current=null,G){const V=L.currentTarget,N={originalEvent:L,delta:G};V0(G,v.swipeDirection,v.swipeThreshold)?Bl(zT,g,N,{discrete:!0}):Bl(BT,f,N,{discrete:!0}),V.addEventListener("click",M=>M.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),HT=r=>{const{__scopeToast:e,children:t,...n}=r,s=th(il,e),[i,o]=b.useState(!1),[a,l]=b.useState(!1);return qT(()=>o(!0)),b.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:h.jsx(o1,{asChild:!0,children:h.jsx(eh,{...n,children:i&&h.jsxs(h.Fragment,{children:[s.label," ",t]})})})},GT="ToastTitle",f1=b.forwardRef((r,e)=>{const{__scopeToast:t,...n}=r;return h.jsx(ve.div,{...n,ref:e})});f1.displayName=GT;var YT="ToastDescription",g1=b.forwardRef((r,e)=>{const{__scopeToast:t,...n}=r;return h.jsx(ve.div,{...n,ref:e})});g1.displayName=YT;var p1="ToastAction",m1=b.forwardRef((r,e)=>{const{altText:t,...n}=r;return t.trim()?h.jsx(y1,{altText:t,asChild:!0,children:h.jsx(jp,{...n,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${p1}\`. Expected non-empty \`string\`.`),null)});m1.displayName=p1;var v1="ToastClose",jp=b.forwardRef((r,e)=>{const{__scopeToast:t,...n}=r,s=WT(v1,t);return h.jsx(y1,{asChild:!0,children:h.jsx(ve.button,{type:"button",...n,ref:e,onClick:ce(r.onClick,s.onClose)})})});jp.displayName=v1;var y1=b.forwardRef((r,e)=>{const{__scopeToast:t,altText:n,...s}=r;return h.jsx(ve.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...s,ref:e})});function x1(r){const e=[];return Array.from(r.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),XT(n)){const s=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=n.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...x1(n))}}),e}function Bl(r,e,t,{discrete:n}){const s=t.originalEvent.currentTarget,i=new CustomEvent(r,{bubbles:!0,cancelable:!0,detail:t});e&&s.addEventListener(r,e,{once:!0}),n?r1(s,i):s.dispatchEvent(i)}var V0=(r,e,t=0)=>{const n=Math.abs(r.x),s=Math.abs(r.y),i=n>s;return e==="left"||e==="right"?i&&n>t:!i&&s>t};function qT(r=()=>{}){const e=xn(r);wn(()=>{let t=0,n=0;return t=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(n)}},[e])}function XT(r){return r.nodeType===r.ELEMENT_NODE}function KT(r){const e=[],t=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function dd(r){const e=document.activeElement;return r.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var QT=l1,w1=u1,b1=d1,_1=f1,S1=g1,C1=m1,k1=jp;function T1(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var s=r.length;for(e=0;e<s;e++)r[e]&&(t=T1(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function j1(){for(var r,e,t=0,n="",s=arguments.length;t<s;t++)(r=arguments[t])&&(e=T1(r))&&(n&&(n+=" "),n+=e);return n}const H0=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,G0=j1,rh=(r,e)=>t=>{var n;if((e==null?void 0:e.variants)==null)return G0(r,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const u=t==null?void 0:t[c],d=i==null?void 0:i[c];if(u===null)return null;const f=H0(u)||H0(d);return s[c][f]}),a=t&&Object.entries(t).reduce((c,u)=>{let[d,f]=u;return f===void 0||(c[d]=f),c},{}),l=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((c,u)=>{let{class:d,className:f,...g}=u;return Object.entries(g).every(y=>{let[v,w]=y;return Array.isArray(w)?w.includes({...i,...a}[v]):{...i,...a}[v]===w})?[...c,d,f]:c},[]);return G0(r,o,l,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),E1=(...r)=>r.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ZT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ej=b.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...a},l)=>b.createElement("svg",{ref:l,...ZT,width:e,height:e,stroke:r,strokeWidth:n?Number(t)*24/Number(e):t,className:E1("lucide",s),...a},[...o.map(([c,u])=>b.createElement(c,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=(r,e)=>{const t=b.forwardRef(({className:n,...s},i)=>b.createElement(ej,{ref:i,iconNode:e,className:E1(`lucide-${JT(r)}`,n),...s}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tj=q("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rj=q("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nj=q("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sj=q("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nh=q("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=q("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=q("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bf=q("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=q("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oj=q("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aj=q("Candy",[["path",{d:"m9.5 7.5-2 2a4.95 4.95 0 1 0 7 7l2-2a4.95 4.95 0 1 0-7-7Z",key:"ue6khb"}],["path",{d:"M14 6.5v10",key:"5xnk7c"}],["path",{d:"M10 7.5v10",key:"1uew51"}],["path",{d:"m16 7 1-5 1.37.68A3 3 0 0 0 19.7 3H21v1.3c0 .46.1.92.32 1.33L22 7l-5 1",key:"b9cp6k"}],["path",{d:"m8 17-1 5-1.37-.68A3 3 0 0 0 4.3 21H3v-1.3a3 3 0 0 0-.32-1.33L2 17l5-1",key:"5lney8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lj=q("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=q("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=q("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=q("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=q("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=q("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=q("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=q("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=q("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=q("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=q("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=q("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=q("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zf=q("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=q("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=q("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=q("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ac=q("Music2",[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=q("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const du=q("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=q("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=q("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fd=q("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=q("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=q("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=q("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=q("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=q("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=q("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=q("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sh=q("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=q("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=q("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=q("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=q("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=q("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=q("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=q("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fu=q("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=q("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=q("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=q("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=q("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=q("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=q("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=q("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=q("Triangle",[["path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"14u9p9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ep=q("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=q("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=q("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=q("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=q("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=q("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=q("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gu=q("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Pp="-",Lj=r=>{const e=Fj(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=r;return{getClassGroupId:o=>{const a=o.split(Pp);return a[0]===""&&a.length!==1&&a.shift(),F1(a,e)||Ij(o)},getConflictingClassGroupIds:(o,a)=>{const l=t[o]||[];return a&&n[o]?[...l,...n[o]]:l}}},F1=(r,e)=>{var o;if(r.length===0)return e.classGroupId;const t=r[0],n=e.nextPart.get(t),s=n?F1(r.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const i=r.join(Pp);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},X0=/^\[(.+)\]$/,Ij=r=>{if(X0.test(r)){const e=X0.exec(r)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},Fj=r=>{const{theme:e,prefix:t}=r,n={nextPart:new Map,validators:[]};return Bj(Object.entries(r.classGroups),t).forEach(([i,o])=>{Uf(o,n,i,e)}),n},Uf=(r,e,t,n)=>{r.forEach(s=>{if(typeof s=="string"){const i=s===""?e:K0(e,s);i.classGroupId=t;return}if(typeof s=="function"){if($j(s)){Uf(s(n),e,t,n);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([i,o])=>{Uf(o,K0(e,i),t,n)})})},K0=(r,e)=>{let t=r;return e.split(Pp).forEach(n=>{t.nextPart.has(n)||t.nextPart.set(n,{nextPart:new Map,validators:[]}),t=t.nextPart.get(n)}),t},$j=r=>r.isThemeGetter,Bj=(r,e)=>e?r.map(([t,n])=>{const s=n.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[t,s]}):r,zj=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,n=new Map;const s=(i,o)=>{t.set(i,o),e++,e>r&&(e=0,n=t,t=new Map)};return{get(i){let o=t.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return s(i,o),o},set(i,o){t.has(i)?t.set(i,o):s(i,o)}}},$1="!",Uj=r=>{const{separator:e,experimentalParseClassName:t}=r,n=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,u=0,d;for(let w=0;w<a.length;w++){let m=a[w];if(c===0){if(m===s&&(n||a.slice(w,w+i)===e)){l.push(a.slice(u,w)),u=w+i;continue}if(m==="/"){d=w;continue}}m==="["?c++:m==="]"&&c--}const f=l.length===0?a:a.substring(u),g=f.startsWith($1),y=g?f.substring(1):f,v=d&&d>u?d-u:void 0;return{modifiers:l,hasImportantModifier:g,baseClassName:y,maybePostfixModifierPosition:v}};return t?a=>t({className:a,parseClassName:o}):o},Wj=r=>{if(r.length<=1)return r;const e=[];let t=[];return r.forEach(n=>{n[0]==="["?(e.push(...t.sort(),n),t=[]):t.push(n)}),e.push(...t.sort()),e},Vj=r=>({cache:zj(r.cacheSize),parseClassName:Uj(r),...Lj(r)}),Hj=/\s+/,Gj=(r,e)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:s}=e,i=[],o=r.trim().split(Hj);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:u,hasImportantModifier:d,baseClassName:f,maybePostfixModifierPosition:g}=t(c);let y=!!g,v=n(y?f.substring(0,g):f);if(!v){if(!y){a=c+(a.length>0?" "+a:a);continue}if(v=n(f),!v){a=c+(a.length>0?" "+a:a);continue}y=!1}const w=Wj(u).join(":"),m=d?w+$1:w,p=m+v;if(i.includes(p))continue;i.push(p);const x=s(v,y);for(let _=0;_<x.length;++_){const S=x[_];i.push(m+S)}a=c+(a.length>0?" "+a:a)}return a};function Yj(){let r=0,e,t,n="";for(;r<arguments.length;)(e=arguments[r++])&&(t=B1(e))&&(n&&(n+=" "),n+=t);return n}const B1=r=>{if(typeof r=="string")return r;let e,t="";for(let n=0;n<r.length;n++)r[n]&&(e=B1(r[n]))&&(t&&(t+=" "),t+=e);return t};function qj(r,...e){let t,n,s,i=o;function o(l){const c=e.reduce((u,d)=>d(u),r());return t=Vj(c),n=t.cache.get,s=t.cache.set,i=a,a(l)}function a(l){const c=n(l);if(c)return c;const u=Gj(l,t);return s(l,u),u}return function(){return i(Yj.apply(null,arguments))}}const Ce=r=>{const e=t=>t[r]||[];return e.isThemeGetter=!0,e},z1=/^\[(?:([a-z-]+):)?(.+)\]$/i,Xj=/^\d+\/\d+$/,Kj=new Set(["px","full","screen"]),Qj=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Jj=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Zj=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,eE=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,tE=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Zr=r=>Yi(r)||Kj.has(r)||Xj.test(r),Ln=r=>_o(r,"length",cE),Yi=r=>!!r&&!Number.isNaN(Number(r)),pd=r=>_o(r,"number",Yi),Ho=r=>!!r&&Number.isInteger(Number(r)),rE=r=>r.endsWith("%")&&Yi(r.slice(0,-1)),se=r=>z1.test(r),In=r=>Qj.test(r),nE=new Set(["length","size","percentage"]),sE=r=>_o(r,nE,U1),iE=r=>_o(r,"position",U1),oE=new Set(["image","url"]),aE=r=>_o(r,oE,hE),lE=r=>_o(r,"",uE),Go=()=>!0,_o=(r,e,t)=>{const n=z1.exec(r);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):t(n[2]):!1},cE=r=>Jj.test(r)&&!Zj.test(r),U1=()=>!1,uE=r=>eE.test(r),hE=r=>tE.test(r),dE=()=>{const r=Ce("colors"),e=Ce("spacing"),t=Ce("blur"),n=Ce("brightness"),s=Ce("borderColor"),i=Ce("borderRadius"),o=Ce("borderSpacing"),a=Ce("borderWidth"),l=Ce("contrast"),c=Ce("grayscale"),u=Ce("hueRotate"),d=Ce("invert"),f=Ce("gap"),g=Ce("gradientColorStops"),y=Ce("gradientColorStopPositions"),v=Ce("inset"),w=Ce("margin"),m=Ce("opacity"),p=Ce("padding"),x=Ce("saturate"),_=Ce("scale"),S=Ce("sepia"),C=Ce("skew"),T=Ce("space"),E=Ce("translate"),A=()=>["auto","contain","none"],D=()=>["auto","hidden","clip","visible","scroll"],B=()=>["auto",se,e],P=()=>[se,e],I=()=>["",Zr,Ln],L=()=>["auto",Yi,se],G=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],W=()=>["solid","dashed","dotted","double","none"],V=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],N=()=>["start","end","center","between","around","evenly","stretch"],M=()=>["","0",se],z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Q=()=>[Yi,se];return{cacheSize:500,separator:":",theme:{colors:[Go],spacing:[Zr,Ln],blur:["none","",In,se],brightness:Q(),borderColor:[r],borderRadius:["none","","full",In,se],borderSpacing:P(),borderWidth:I(),contrast:Q(),grayscale:M(),hueRotate:Q(),invert:M(),gap:P(),gradientColorStops:[r],gradientColorStopPositions:[rE,Ln],inset:B(),margin:B(),opacity:Q(),padding:P(),saturate:Q(),scale:Q(),sepia:M(),skew:Q(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",se]}],container:["container"],columns:[{columns:[In]}],"break-after":[{"break-after":z()}],"break-before":[{"break-before":z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...G(),se]}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ho,se]}],basis:[{basis:B()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",se]}],grow:[{grow:M()}],shrink:[{shrink:M()}],order:[{order:["first","last","none",Ho,se]}],"grid-cols":[{"grid-cols":[Go]}],"col-start-end":[{col:["auto",{span:["full",Ho,se]},se]}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":[Go]}],"row-start-end":[{row:["auto",{span:[Ho,se]},se]}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",se]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",se]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...N()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...N(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...N(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[p]}],px:[{px:[p]}],py:[{py:[p]}],ps:[{ps:[p]}],pe:[{pe:[p]}],pt:[{pt:[p]}],pr:[{pr:[p]}],pb:[{pb:[p]}],pl:[{pl:[p]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",se,e]}],"min-w":[{"min-w":[se,e,"min","max","fit"]}],"max-w":[{"max-w":[se,e,"none","full","min","max","fit","prose",{screen:[In]},In]}],h:[{h:[se,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[se,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[se,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[se,e,"auto","min","max","fit"]}],"font-size":[{text:["base",In,Ln]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",pd]}],"font-family":[{font:[Go]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",se]}],"line-clamp":[{"line-clamp":["none",Yi,pd]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Zr,se]}],"list-image":[{"list-image":["none",se]}],"list-style-type":[{list:["none","disc","decimal",se]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[r]}],"placeholder-opacity":[{"placeholder-opacity":[m]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[r]}],"text-opacity":[{"text-opacity":[m]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...W(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Zr,Ln]}],"underline-offset":[{"underline-offset":["auto",Zr,se]}],"text-decoration-color":[{decoration:[r]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",se]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",se]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[m]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...G(),iE]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",sE]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},aE]}],"bg-color":[{bg:[r]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[m]}],"border-style":[{border:[...W(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[m]}],"divide-style":[{divide:W()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...W()]}],"outline-offset":[{"outline-offset":[Zr,se]}],"outline-w":[{outline:[Zr,Ln]}],"outline-color":[{outline:[r]}],"ring-w":[{ring:I()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[r]}],"ring-opacity":[{"ring-opacity":[m]}],"ring-offset-w":[{"ring-offset":[Zr,Ln]}],"ring-offset-color":[{"ring-offset":[r]}],shadow:[{shadow:["","inner","none",In,lE]}],"shadow-color":[{shadow:[Go]}],opacity:[{opacity:[m]}],"mix-blend":[{"mix-blend":[...V(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":V()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",In,se]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[x]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[m]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",se]}],duration:[{duration:Q()}],ease:[{ease:["linear","in","out","in-out",se]}],delay:[{delay:Q()}],animate:[{animate:["none","spin","ping","pulse","bounce",se]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[Ho,se]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",se]}],accent:[{accent:["auto",r]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",se]}],"caret-color":[{caret:[r]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",se]}],fill:[{fill:[r,"none"]}],"stroke-w":[{stroke:[Zr,Ln,pd]}],stroke:[{stroke:[r,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},fE=qj(dE);function Pe(...r){return fE(j1(r))}const gE=QT,W1=b.forwardRef(({className:r,...e},t)=>h.jsx(w1,{ref:t,className:Pe("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",r),...e}));W1.displayName=w1.displayName;const pE=rh("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),V1=b.forwardRef(({className:r,variant:e,...t},n)=>h.jsx(b1,{ref:n,className:Pe(pE({variant:e}),r),...t}));V1.displayName=b1.displayName;const mE=b.forwardRef(({className:r,...e},t)=>h.jsx(C1,{ref:t,className:Pe("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",r),...e}));mE.displayName=C1.displayName;const H1=b.forwardRef(({className:r,...e},t)=>h.jsx(k1,{ref:t,className:Pe("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",r),"toast-close":"",...e,children:h.jsx(Rj,{className:"h-4 w-4"})}));H1.displayName=k1.displayName;const G1=b.forwardRef(({className:r,...e},t)=>h.jsx(_1,{ref:t,className:Pe("text-sm font-semibold",r),...e}));G1.displayName=_1.displayName;const Y1=b.forwardRef(({className:r,...e},t)=>h.jsx(S1,{ref:t,className:Pe("text-sm opacity-90",r),...e}));Y1.displayName=S1.displayName;function vE(){const{toasts:r}=Ss();return h.jsxs(gE,{children:[r.map(function({id:e,title:t,description:n,action:s,...i}){return h.jsxs(V1,{...i,children:[h.jsxs("div",{className:"grid gap-1",children:[t&&h.jsx(G1,{children:t}),n&&h.jsx(Y1,{children:n})]}),s,h.jsx(H1,{})]},e)}),h.jsx(W1,{})]})}var Q0=["light","dark"],yE="(prefers-color-scheme: dark)",xE=b.createContext(void 0),wE={setTheme:r=>{},themes:[]},bE=()=>{var r;return(r=b.useContext(xE))!=null?r:wE};b.memo(({forcedTheme:r,storageKey:e,attribute:t,enableSystem:n,enableColorScheme:s,defaultTheme:i,value:o,attrs:a,nonce:l})=>{let c=i==="system",u=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(y=>`'${y}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,d=s?Q0.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(y,v=!1,w=!0)=>{let m=o?o[y]:y,p=v?y+"|| ''":`'${m}'`,x="";return s&&w&&!v&&Q0.includes(y)&&(x+=`d.style.colorScheme = '${y}';`),t==="class"?v||m?x+=`c.add(${p})`:x+="null":m&&(x+=`d[s](n,${p})`),x},g=r?`!function(){${u}${f(r)}}()`:n?`!function(){try{${u}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${yE}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${c?"":"else{"+f(i,!1,!1)+"}"}${d}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${d}}catch(t){}}();`;return b.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:g}})});var _E=r=>{switch(r){case"success":return kE;case"info":return jE;case"warning":return TE;case"error":return EE;default:return null}},SE=Array(12).fill(0),CE=({visible:r,className:e})=>U.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":r},U.createElement("div",{className:"sonner-spinner"},SE.map((t,n)=>U.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),kE=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),TE=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),jE=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),EE=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),PE=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},U.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),U.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),OE=()=>{let[r,e]=U.useState(document.hidden);return U.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),r},Wf=1,NE=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...s}=e,i=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Wf++,o=this.toasts.find(l=>l.id===i),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:n}),{...l,...e,id:i,dismissible:a,title:n}):l):this.addToast({title:n,...s,dismissible:a,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let s=e instanceof Promise?e:e(),i=n!==void 0,o,a=s.then(async c=>{if(o=["resolve",c],U.isValidElement(c))i=!1,this.create({id:n,type:"default",message:c});else if(ME(c)&&!c.ok){i=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,d=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:n,type:"error",message:u,description:d})}else if(t.success!==void 0){i=!1;let u=typeof t.success=="function"?await t.success(c):t.success,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"success",message:u,description:d})}}).catch(async c=>{if(o=["reject",c],t.error!==void 0){i=!1;let u=typeof t.error=="function"?await t.error(c):t.error,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"error",message:u,description:d})}}).finally(()=>{var c;i&&(this.dismiss(n),n=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,u)=>a.then(()=>o[0]==="reject"?u(o[1]):c(o[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||Wf++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Ct=new NE,AE=(r,e)=>{let t=(e==null?void 0:e.id)||Wf++;return Ct.addToast({title:r,...e,id:t}),t},ME=r=>r&&typeof r=="object"&&"ok"in r&&typeof r.ok=="boolean"&&"status"in r&&typeof r.status=="number",DE=AE,RE=()=>Ct.toasts,LE=()=>Ct.getActiveToasts(),J=Object.assign(DE,{success:Ct.success,info:Ct.info,warning:Ct.warning,error:Ct.error,custom:Ct.custom,message:Ct.message,promise:Ct.promise,dismiss:Ct.dismiss,loading:Ct.loading},{getHistory:RE,getToasts:LE});function IE(r,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=r:n.appendChild(document.createTextNode(r))}IE(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function zl(r){return r.label!==void 0}var FE=3,$E="32px",BE="16px",J0=4e3,zE=356,UE=14,WE=20,VE=200;function hr(...r){return r.filter(Boolean).join(" ")}function HE(r){let[e,t]=r.split("-"),n=[];return e&&n.push(e),t&&n.push(t),n}var GE=r=>{var e,t,n,s,i,o,a,l,c,u,d;let{invert:f,toast:g,unstyled:y,interacting:v,setHeights:w,visibleToasts:m,heights:p,index:x,toasts:_,expanded:S,removeToast:C,defaultRichColors:T,closeButton:E,style:A,cancelButtonStyle:D,actionButtonStyle:B,className:P="",descriptionClassName:I="",duration:L,position:G,gap:W,loadingIcon:V,expandByDefault:N,classNames:M,icons:z,closeButtonAriaLabel:Q="Close toast",pauseWhenPageIsHidden:X}=r,[Z,ee]=U.useState(null),[Se,Oe]=U.useState(null),[le,Pn]=U.useState(!1),[Gt,ot]=U.useState(!1),[On,ui]=U.useState(!1),[Nn,yl]=U.useState(!1),[Mh,xl]=U.useState(!1),[Dh,Ro]=U.useState(0),[hi,Cm]=U.useState(0),Lo=U.useRef(g.duration||L||J0),km=U.useRef(null),Ts=U.useRef(null),wC=x===0,bC=x+1<=m,Yt=g.type,di=g.dismissible!==!1,_C=g.className||"",SC=g.descriptionClassName||"",wl=U.useMemo(()=>p.findIndex(te=>te.toastId===g.id)||0,[p,g.id]),CC=U.useMemo(()=>{var te;return(te=g.closeButton)!=null?te:E},[g.closeButton,E]),Tm=U.useMemo(()=>g.duration||L||J0,[g.duration,L]),Rh=U.useRef(0),fi=U.useRef(0),jm=U.useRef(0),gi=U.useRef(null),[kC,TC]=G.split("-"),Em=U.useMemo(()=>p.reduce((te,xe,Ne)=>Ne>=wl?te:te+xe.height,0),[p,wl]),Pm=OE(),jC=g.invert||f,Lh=Yt==="loading";fi.current=U.useMemo(()=>wl*W+Em,[wl,Em]),U.useEffect(()=>{Lo.current=Tm},[Tm]),U.useEffect(()=>{Pn(!0)},[]),U.useEffect(()=>{let te=Ts.current;if(te){let xe=te.getBoundingClientRect().height;return Cm(xe),w(Ne=>[{toastId:g.id,height:xe,position:g.position},...Ne]),()=>w(Ne=>Ne.filter(ar=>ar.toastId!==g.id))}},[w,g.id]),U.useLayoutEffect(()=>{if(!le)return;let te=Ts.current,xe=te.style.height;te.style.height="auto";let Ne=te.getBoundingClientRect().height;te.style.height=xe,Cm(Ne),w(ar=>ar.find(lr=>lr.toastId===g.id)?ar.map(lr=>lr.toastId===g.id?{...lr,height:Ne}:lr):[{toastId:g.id,height:Ne,position:g.position},...ar])},[le,g.title,g.description,w,g.id]);let An=U.useCallback(()=>{ot(!0),Ro(fi.current),w(te=>te.filter(xe=>xe.toastId!==g.id)),setTimeout(()=>{C(g)},VE)},[g,C,w,fi]);U.useEffect(()=>{if(g.promise&&Yt==="loading"||g.duration===1/0||g.type==="loading")return;let te;return S||v||X&&Pm?(()=>{if(jm.current<Rh.current){let xe=new Date().getTime()-Rh.current;Lo.current=Lo.current-xe}jm.current=new Date().getTime()})():Lo.current!==1/0&&(Rh.current=new Date().getTime(),te=setTimeout(()=>{var xe;(xe=g.onAutoClose)==null||xe.call(g,g),An()},Lo.current)),()=>clearTimeout(te)},[S,v,g,Yt,X,Pm,An]),U.useEffect(()=>{g.delete&&An()},[An,g.delete]);function EC(){var te,xe,Ne;return z!=null&&z.loading?U.createElement("div",{className:hr(M==null?void 0:M.loader,(te=g==null?void 0:g.classNames)==null?void 0:te.loader,"sonner-loader"),"data-visible":Yt==="loading"},z.loading):V?U.createElement("div",{className:hr(M==null?void 0:M.loader,(xe=g==null?void 0:g.classNames)==null?void 0:xe.loader,"sonner-loader"),"data-visible":Yt==="loading"},V):U.createElement(CE,{className:hr(M==null?void 0:M.loader,(Ne=g==null?void 0:g.classNames)==null?void 0:Ne.loader),visible:Yt==="loading"})}return U.createElement("li",{tabIndex:0,ref:Ts,className:hr(P,_C,M==null?void 0:M.toast,(e=g==null?void 0:g.classNames)==null?void 0:e.toast,M==null?void 0:M.default,M==null?void 0:M[Yt],(t=g==null?void 0:g.classNames)==null?void 0:t[Yt]),"data-sonner-toast":"","data-rich-colors":(n=g.richColors)!=null?n:T,"data-styled":!(g.jsx||g.unstyled||y),"data-mounted":le,"data-promise":!!g.promise,"data-swiped":Mh,"data-removed":Gt,"data-visible":bC,"data-y-position":kC,"data-x-position":TC,"data-index":x,"data-front":wC,"data-swiping":On,"data-dismissible":di,"data-type":Yt,"data-invert":jC,"data-swipe-out":Nn,"data-swipe-direction":Se,"data-expanded":!!(S||N&&le),style:{"--index":x,"--toasts-before":x,"--z-index":_.length-x,"--offset":`${Gt?Dh:fi.current}px`,"--initial-height":N?"auto":`${hi}px`,...A,...g.style},onDragEnd:()=>{ui(!1),ee(null),gi.current=null},onPointerDown:te=>{Lh||!di||(km.current=new Date,Ro(fi.current),te.target.setPointerCapture(te.pointerId),te.target.tagName!=="BUTTON"&&(ui(!0),gi.current={x:te.clientX,y:te.clientY}))},onPointerUp:()=>{var te,xe,Ne,ar;if(Nn||!di)return;gi.current=null;let lr=Number(((te=Ts.current)==null?void 0:te.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Mn=Number(((xe=Ts.current)==null?void 0:xe.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),js=new Date().getTime()-((Ne=km.current)==null?void 0:Ne.getTime()),cr=Z==="x"?lr:Mn,Dn=Math.abs(cr)/js;if(Math.abs(cr)>=WE||Dn>.11){Ro(fi.current),(ar=g.onDismiss)==null||ar.call(g,g),Oe(Z==="x"?lr>0?"right":"left":Mn>0?"down":"up"),An(),yl(!0),xl(!1);return}ui(!1),ee(null)},onPointerMove:te=>{var xe,Ne,ar,lr;if(!gi.current||!di||((xe=window.getSelection())==null?void 0:xe.toString().length)>0)return;let Mn=te.clientY-gi.current.y,js=te.clientX-gi.current.x,cr=(Ne=r.swipeDirections)!=null?Ne:HE(G);!Z&&(Math.abs(js)>1||Math.abs(Mn)>1)&&ee(Math.abs(js)>Math.abs(Mn)?"x":"y");let Dn={x:0,y:0};Z==="y"?(cr.includes("top")||cr.includes("bottom"))&&(cr.includes("top")&&Mn<0||cr.includes("bottom")&&Mn>0)&&(Dn.y=Mn):Z==="x"&&(cr.includes("left")||cr.includes("right"))&&(cr.includes("left")&&js<0||cr.includes("right")&&js>0)&&(Dn.x=js),(Math.abs(Dn.x)>0||Math.abs(Dn.y)>0)&&xl(!0),(ar=Ts.current)==null||ar.style.setProperty("--swipe-amount-x",`${Dn.x}px`),(lr=Ts.current)==null||lr.style.setProperty("--swipe-amount-y",`${Dn.y}px`)}},CC&&!g.jsx?U.createElement("button",{"aria-label":Q,"data-disabled":Lh,"data-close-button":!0,onClick:Lh||!di?()=>{}:()=>{var te;An(),(te=g.onDismiss)==null||te.call(g,g)},className:hr(M==null?void 0:M.closeButton,(s=g==null?void 0:g.classNames)==null?void 0:s.closeButton)},(i=z==null?void 0:z.close)!=null?i:PE):null,g.jsx||b.isValidElement(g.title)?g.jsx?g.jsx:typeof g.title=="function"?g.title():g.title:U.createElement(U.Fragment,null,Yt||g.icon||g.promise?U.createElement("div",{"data-icon":"",className:hr(M==null?void 0:M.icon,(o=g==null?void 0:g.classNames)==null?void 0:o.icon)},g.promise||g.type==="loading"&&!g.icon?g.icon||EC():null,g.type!=="loading"?g.icon||(z==null?void 0:z[Yt])||_E(Yt):null):null,U.createElement("div",{"data-content":"",className:hr(M==null?void 0:M.content,(a=g==null?void 0:g.classNames)==null?void 0:a.content)},U.createElement("div",{"data-title":"",className:hr(M==null?void 0:M.title,(l=g==null?void 0:g.classNames)==null?void 0:l.title)},typeof g.title=="function"?g.title():g.title),g.description?U.createElement("div",{"data-description":"",className:hr(I,SC,M==null?void 0:M.description,(c=g==null?void 0:g.classNames)==null?void 0:c.description)},typeof g.description=="function"?g.description():g.description):null),b.isValidElement(g.cancel)?g.cancel:g.cancel&&zl(g.cancel)?U.createElement("button",{"data-button":!0,"data-cancel":!0,style:g.cancelButtonStyle||D,onClick:te=>{var xe,Ne;zl(g.cancel)&&di&&((Ne=(xe=g.cancel).onClick)==null||Ne.call(xe,te),An())},className:hr(M==null?void 0:M.cancelButton,(u=g==null?void 0:g.classNames)==null?void 0:u.cancelButton)},g.cancel.label):null,b.isValidElement(g.action)?g.action:g.action&&zl(g.action)?U.createElement("button",{"data-button":!0,"data-action":!0,style:g.actionButtonStyle||B,onClick:te=>{var xe,Ne;zl(g.action)&&((Ne=(xe=g.action).onClick)==null||Ne.call(xe,te),!te.defaultPrevented&&An())},className:hr(M==null?void 0:M.actionButton,(d=g==null?void 0:g.classNames)==null?void 0:d.actionButton)},g.action.label):null))};function Z0(){if(typeof window>"u"||typeof document>"u")return"ltr";let r=document.documentElement.getAttribute("dir");return r==="auto"||!r?window.getComputedStyle(document.documentElement).direction:r}function YE(r,e){let t={};return[r,e].forEach((n,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",a=i?BE:$E;function l(c){["top","right","bottom","left"].forEach(u=>{t[`${o}-${u}`]=typeof c=="number"?`${c}px`:c})}typeof n=="number"||typeof n=="string"?l(n):typeof n=="object"?["top","right","bottom","left"].forEach(c=>{n[c]===void 0?t[`${o}-${c}`]=a:t[`${o}-${c}`]=typeof n[c]=="number"?`${n[c]}px`:n[c]}):l(a)}),t}var qE=b.forwardRef(function(r,e){let{invert:t,position:n="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:l,mobileOffset:c,theme:u="light",richColors:d,duration:f,style:g,visibleToasts:y=FE,toastOptions:v,dir:w=Z0(),gap:m=UE,loadingIcon:p,icons:x,containerAriaLabel:_="Notifications",pauseWhenPageIsHidden:S}=r,[C,T]=U.useState([]),E=U.useMemo(()=>Array.from(new Set([n].concat(C.filter(X=>X.position).map(X=>X.position)))),[C,n]),[A,D]=U.useState([]),[B,P]=U.useState(!1),[I,L]=U.useState(!1),[G,W]=U.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),V=U.useRef(null),N=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),M=U.useRef(null),z=U.useRef(!1),Q=U.useCallback(X=>{T(Z=>{var ee;return(ee=Z.find(Se=>Se.id===X.id))!=null&&ee.delete||Ct.dismiss(X.id),Z.filter(({id:Se})=>Se!==X.id)})},[]);return U.useEffect(()=>Ct.subscribe(X=>{if(X.dismiss){T(Z=>Z.map(ee=>ee.id===X.id?{...ee,delete:!0}:ee));return}setTimeout(()=>{Jw.flushSync(()=>{T(Z=>{let ee=Z.findIndex(Se=>Se.id===X.id);return ee!==-1?[...Z.slice(0,ee),{...Z[ee],...X},...Z.slice(ee+1)]:[X,...Z]})})})}),[]),U.useEffect(()=>{if(u!=="system"){W(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?W("dark"):W("light")),typeof window>"u")return;let X=window.matchMedia("(prefers-color-scheme: dark)");try{X.addEventListener("change",({matches:Z})=>{W(Z?"dark":"light")})}catch{X.addListener(({matches:ee})=>{try{W(ee?"dark":"light")}catch(Se){console.error(Se)}})}},[u]),U.useEffect(()=>{C.length<=1&&P(!1)},[C]),U.useEffect(()=>{let X=Z=>{var ee,Se;s.every(Oe=>Z[Oe]||Z.code===Oe)&&(P(!0),(ee=V.current)==null||ee.focus()),Z.code==="Escape"&&(document.activeElement===V.current||(Se=V.current)!=null&&Se.contains(document.activeElement))&&P(!1)};return document.addEventListener("keydown",X),()=>document.removeEventListener("keydown",X)},[s]),U.useEffect(()=>{if(V.current)return()=>{M.current&&(M.current.focus({preventScroll:!0}),M.current=null,z.current=!1)}},[V.current]),U.createElement("section",{ref:e,"aria-label":`${_} ${N}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},E.map((X,Z)=>{var ee;let[Se,Oe]=X.split("-");return C.length?U.createElement("ol",{key:X,dir:w==="auto"?Z0():w,tabIndex:-1,ref:V,className:a,"data-sonner-toaster":!0,"data-theme":G,"data-y-position":Se,"data-lifted":B&&C.length>1&&!i,"data-x-position":Oe,style:{"--front-toast-height":`${((ee=A[0])==null?void 0:ee.height)||0}px`,"--width":`${zE}px`,"--gap":`${m}px`,...g,...YE(l,c)},onBlur:le=>{z.current&&!le.currentTarget.contains(le.relatedTarget)&&(z.current=!1,M.current&&(M.current.focus({preventScroll:!0}),M.current=null))},onFocus:le=>{le.target instanceof HTMLElement&&le.target.dataset.dismissible==="false"||z.current||(z.current=!0,M.current=le.relatedTarget)},onMouseEnter:()=>P(!0),onMouseMove:()=>P(!0),onMouseLeave:()=>{I||P(!1)},onDragEnd:()=>P(!1),onPointerDown:le=>{le.target instanceof HTMLElement&&le.target.dataset.dismissible==="false"||L(!0)},onPointerUp:()=>L(!1)},C.filter(le=>!le.position&&Z===0||le.position===X).map((le,Pn)=>{var Gt,ot;return U.createElement(GE,{key:le.id,icons:x,index:Pn,toast:le,defaultRichColors:d,duration:(Gt=v==null?void 0:v.duration)!=null?Gt:f,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:t,visibleToasts:y,closeButton:(ot=v==null?void 0:v.closeButton)!=null?ot:o,interacting:I,position:X,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,removeToast:Q,toasts:C.filter(On=>On.position==le.position),heights:A.filter(On=>On.position==le.position),setHeights:D,expandByDefault:i,gap:m,loadingIcon:p,expanded:B,pauseWhenPageIsHidden:S,swipeDirections:r.swipeDirections})})):null}))});const XE=({...r})=>{const{theme:e="system"}=bE();return h.jsx(qE,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...r})};var KE=Ag[" useId ".trim().toString()]||(()=>{}),QE=0;function q1(r){const[e,t]=b.useState(KE());return wn(()=>{r||t(n=>n??String(QE++))},[r]),r||(e?`radix-${e}`:"")}const JE=["top","right","bottom","left"],ms=Math.min,Ft=Math.max,pu=Math.round,Ul=Math.floor,Yr=r=>({x:r,y:r}),ZE={left:"right",right:"left",bottom:"top",top:"bottom"},eP={start:"end",end:"start"};function Vf(r,e,t){return Ft(r,ms(e,t))}function bn(r,e){return typeof r=="function"?r(e):r}function _n(r){return r.split("-")[0]}function So(r){return r.split("-")[1]}function Op(r){return r==="x"?"y":"x"}function Np(r){return r==="y"?"height":"width"}const tP=new Set(["top","bottom"]);function Ur(r){return tP.has(_n(r))?"y":"x"}function Ap(r){return Op(Ur(r))}function rP(r,e,t){t===void 0&&(t=!1);const n=So(r),s=Ap(r),i=Np(s);let o=s==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=mu(o)),[o,mu(o)]}function nP(r){const e=mu(r);return[Hf(r),e,Hf(e)]}function Hf(r){return r.replace(/start|end/g,e=>eP[e])}const ev=["left","right"],tv=["right","left"],sP=["top","bottom"],iP=["bottom","top"];function oP(r,e,t){switch(r){case"top":case"bottom":return t?e?tv:ev:e?ev:tv;case"left":case"right":return e?sP:iP;default:return[]}}function aP(r,e,t,n){const s=So(r);let i=oP(_n(r),t==="start",n);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(Hf)))),i}function mu(r){return r.replace(/left|right|bottom|top/g,e=>ZE[e])}function lP(r){return{top:0,right:0,bottom:0,left:0,...r}}function X1(r){return typeof r!="number"?lP(r):{top:r,right:r,bottom:r,left:r}}function vu(r){const{x:e,y:t,width:n,height:s}=r;return{width:n,height:s,top:t,left:e,right:e+n,bottom:t+s,x:e,y:t}}function rv(r,e,t){let{reference:n,floating:s}=r;const i=Ur(e),o=Ap(e),a=Np(o),l=_n(e),c=i==="y",u=n.x+n.width/2-s.width/2,d=n.y+n.height/2-s.height/2,f=n[a]/2-s[a]/2;let g;switch(l){case"top":g={x:u,y:n.y-s.height};break;case"bottom":g={x:u,y:n.y+n.height};break;case"right":g={x:n.x+n.width,y:d};break;case"left":g={x:n.x-s.width,y:d};break;default:g={x:n.x,y:n.y}}switch(So(e)){case"start":g[o]-=f*(t&&c?-1:1);break;case"end":g[o]+=f*(t&&c?-1:1);break}return g}const cP=async(r,e,t)=>{const{placement:n="bottom",strategy:s="absolute",middleware:i=[],platform:o}=t,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:r,floating:e,strategy:s}),{x:u,y:d}=rv(c,n,l),f=n,g={},y=0;for(let v=0;v<a.length;v++){const{name:w,fn:m}=a[v],{x:p,y:x,data:_,reset:S}=await m({x:u,y:d,initialPlacement:n,placement:f,strategy:s,middlewareData:g,rects:c,platform:o,elements:{reference:r,floating:e}});u=p??u,d=x??d,g={...g,[w]:{...g[w],..._}},S&&y<=50&&(y++,typeof S=="object"&&(S.placement&&(f=S.placement),S.rects&&(c=S.rects===!0?await o.getElementRects({reference:r,floating:e,strategy:s}):S.rects),{x:u,y:d}=rv(c,f,l)),v=-1)}return{x:u,y:d,placement:f,strategy:s,middlewareData:g}};async function Fa(r,e){var t;e===void 0&&(e={});const{x:n,y:s,platform:i,rects:o,elements:a,strategy:l}=r,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:g=0}=bn(e,r),y=X1(g),w=a[f?d==="floating"?"reference":"floating":d],m=vu(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(w)))==null||t?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),p=d==="floating"?{x:n,y:s,width:o.floating.width,height:o.floating.height}:o.reference,x=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),_=await(i.isElement==null?void 0:i.isElement(x))?await(i.getScale==null?void 0:i.getScale(x))||{x:1,y:1}:{x:1,y:1},S=vu(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:p,offsetParent:x,strategy:l}):p);return{top:(m.top-S.top+y.top)/_.y,bottom:(S.bottom-m.bottom+y.bottom)/_.y,left:(m.left-S.left+y.left)/_.x,right:(S.right-m.right+y.right)/_.x}}const uP=r=>({name:"arrow",options:r,async fn(e){const{x:t,y:n,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=bn(r,e)||{};if(c==null)return{};const d=X1(u),f={x:t,y:n},g=Ap(s),y=Np(g),v=await o.getDimensions(c),w=g==="y",m=w?"top":"left",p=w?"bottom":"right",x=w?"clientHeight":"clientWidth",_=i.reference[y]+i.reference[g]-f[g]-i.floating[y],S=f[g]-i.reference[g],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let T=C?C[x]:0;(!T||!await(o.isElement==null?void 0:o.isElement(C)))&&(T=a.floating[x]||i.floating[y]);const E=_/2-S/2,A=T/2-v[y]/2-1,D=ms(d[m],A),B=ms(d[p],A),P=D,I=T-v[y]-B,L=T/2-v[y]/2+E,G=Vf(P,L,I),W=!l.arrow&&So(s)!=null&&L!==G&&i.reference[y]/2-(L<P?D:B)-v[y]/2<0,V=W?L<P?L-P:L-I:0;return{[g]:f[g]+V,data:{[g]:G,centerOffset:L-G-V,...W&&{alignmentOffset:V}},reset:W}}}),hP=function(r){return r===void 0&&(r={}),{name:"flip",options:r,async fn(e){var t,n;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:v=!0,...w}=bn(r,e);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const m=_n(s),p=Ur(a),x=_n(a)===a,_=await(l.isRTL==null?void 0:l.isRTL(c.floating)),S=f||(x||!v?[mu(a)]:nP(a)),C=y!=="none";!f&&C&&S.push(...aP(a,v,y,_));const T=[a,...S],E=await Fa(e,w),A=[];let D=((n=i.flip)==null?void 0:n.overflows)||[];if(u&&A.push(E[m]),d){const L=rP(s,o,_);A.push(E[L[0]],E[L[1]])}if(D=[...D,{placement:s,overflows:A}],!A.every(L=>L<=0)){var B,P;const L=(((B=i.flip)==null?void 0:B.index)||0)+1,G=T[L];if(G&&(!(d==="alignment"?p!==Ur(G):!1)||D.every(N=>N.overflows[0]>0&&Ur(N.placement)===p)))return{data:{index:L,overflows:D},reset:{placement:G}};let W=(P=D.filter(V=>V.overflows[0]<=0).sort((V,N)=>V.overflows[1]-N.overflows[1])[0])==null?void 0:P.placement;if(!W)switch(g){case"bestFit":{var I;const V=(I=D.filter(N=>{if(C){const M=Ur(N.placement);return M===p||M==="y"}return!0}).map(N=>[N.placement,N.overflows.filter(M=>M>0).reduce((M,z)=>M+z,0)]).sort((N,M)=>N[1]-M[1])[0])==null?void 0:I[0];V&&(W=V);break}case"initialPlacement":W=a;break}if(s!==W)return{reset:{placement:W}}}return{}}}};function nv(r,e){return{top:r.top-e.height,right:r.right-e.width,bottom:r.bottom-e.height,left:r.left-e.width}}function sv(r){return JE.some(e=>r[e]>=0)}const dP=function(r){return r===void 0&&(r={}),{name:"hide",options:r,async fn(e){const{rects:t}=e,{strategy:n="referenceHidden",...s}=bn(r,e);switch(n){case"referenceHidden":{const i=await Fa(e,{...s,elementContext:"reference"}),o=nv(i,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:sv(o)}}}case"escaped":{const i=await Fa(e,{...s,altBoundary:!0}),o=nv(i,t.floating);return{data:{escapedOffsets:o,escaped:sv(o)}}}default:return{}}}}},K1=new Set(["left","top"]);async function fP(r,e){const{placement:t,platform:n,elements:s}=r,i=await(n.isRTL==null?void 0:n.isRTL(s.floating)),o=_n(t),a=So(t),l=Ur(t)==="y",c=K1.has(o)?-1:1,u=i&&l?-1:1,d=bn(e,r);let{mainAxis:f,crossAxis:g,alignmentAxis:y}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof y=="number"&&(g=a==="end"?y*-1:y),l?{x:g*u,y:f*c}:{x:f*c,y:g*u}}const gP=function(r){return r===void 0&&(r=0),{name:"offset",options:r,async fn(e){var t,n;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await fP(e,r);return o===((t=a.offset)==null?void 0:t.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},pP=function(r){return r===void 0&&(r={}),{name:"shift",options:r,async fn(e){const{x:t,y:n,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:w=>{let{x:m,y:p}=w;return{x:m,y:p}}},...l}=bn(r,e),c={x:t,y:n},u=await Fa(e,l),d=Ur(_n(s)),f=Op(d);let g=c[f],y=c[d];if(i){const w=f==="y"?"top":"left",m=f==="y"?"bottom":"right",p=g+u[w],x=g-u[m];g=Vf(p,g,x)}if(o){const w=d==="y"?"top":"left",m=d==="y"?"bottom":"right",p=y+u[w],x=y-u[m];y=Vf(p,y,x)}const v=a.fn({...e,[f]:g,[d]:y});return{...v,data:{x:v.x-t,y:v.y-n,enabled:{[f]:i,[d]:o}}}}}},mP=function(r){return r===void 0&&(r={}),{options:r,fn(e){const{x:t,y:n,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=bn(r,e),u={x:t,y:n},d=Ur(s),f=Op(d);let g=u[f],y=u[d];const v=bn(a,e),w=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const x=f==="y"?"height":"width",_=i.reference[f]-i.floating[x]+w.mainAxis,S=i.reference[f]+i.reference[x]-w.mainAxis;g<_?g=_:g>S&&(g=S)}if(c){var m,p;const x=f==="y"?"width":"height",_=K1.has(_n(s)),S=i.reference[d]-i.floating[x]+(_&&((m=o.offset)==null?void 0:m[d])||0)+(_?0:w.crossAxis),C=i.reference[d]+i.reference[x]+(_?0:((p=o.offset)==null?void 0:p[d])||0)-(_?w.crossAxis:0);y<S?y=S:y>C&&(y=C)}return{[f]:g,[d]:y}}}},vP=function(r){return r===void 0&&(r={}),{name:"size",options:r,async fn(e){var t,n;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=bn(r,e),u=await Fa(e,c),d=_n(s),f=So(s),g=Ur(s)==="y",{width:y,height:v}=i.floating;let w,m;d==="top"||d==="bottom"?(w=d,m=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(m=d,w=f==="end"?"top":"bottom");const p=v-u.top-u.bottom,x=y-u.left-u.right,_=ms(v-u[w],p),S=ms(y-u[m],x),C=!e.middlewareData.shift;let T=_,E=S;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(E=x),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(T=p),C&&!f){const D=Ft(u.left,0),B=Ft(u.right,0),P=Ft(u.top,0),I=Ft(u.bottom,0);g?E=y-2*(D!==0||B!==0?D+B:Ft(u.left,u.right)):T=v-2*(P!==0||I!==0?P+I:Ft(u.top,u.bottom))}await l({...e,availableWidth:E,availableHeight:T});const A=await o.getDimensions(a.floating);return y!==A.width||v!==A.height?{reset:{rects:!0}}:{}}}};function ih(){return typeof window<"u"}function Co(r){return Q1(r)?(r.nodeName||"").toLowerCase():"#document"}function Ut(r){var e;return(r==null||(e=r.ownerDocument)==null?void 0:e.defaultView)||window}function Qr(r){var e;return(e=(Q1(r)?r.ownerDocument:r.document)||window.document)==null?void 0:e.documentElement}function Q1(r){return ih()?r instanceof Node||r instanceof Ut(r).Node:!1}function Nr(r){return ih()?r instanceof Element||r instanceof Ut(r).Element:!1}function Xr(r){return ih()?r instanceof HTMLElement||r instanceof Ut(r).HTMLElement:!1}function iv(r){return!ih()||typeof ShadowRoot>"u"?!1:r instanceof ShadowRoot||r instanceof Ut(r).ShadowRoot}const yP=new Set(["inline","contents"]);function ol(r){const{overflow:e,overflowX:t,overflowY:n,display:s}=Ar(r);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!yP.has(s)}const xP=new Set(["table","td","th"]);function wP(r){return xP.has(Co(r))}const bP=[":popover-open",":modal"];function oh(r){return bP.some(e=>{try{return r.matches(e)}catch{return!1}})}const _P=["transform","translate","scale","rotate","perspective"],SP=["transform","translate","scale","rotate","perspective","filter"],CP=["paint","layout","strict","content"];function Mp(r){const e=Dp(),t=Nr(r)?Ar(r):r;return _P.some(n=>t[n]?t[n]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||SP.some(n=>(t.willChange||"").includes(n))||CP.some(n=>(t.contain||"").includes(n))}function kP(r){let e=vs(r);for(;Xr(e)&&!go(e);){if(Mp(e))return e;if(oh(e))return null;e=vs(e)}return null}function Dp(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const TP=new Set(["html","body","#document"]);function go(r){return TP.has(Co(r))}function Ar(r){return Ut(r).getComputedStyle(r)}function ah(r){return Nr(r)?{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}:{scrollLeft:r.scrollX,scrollTop:r.scrollY}}function vs(r){if(Co(r)==="html")return r;const e=r.assignedSlot||r.parentNode||iv(r)&&r.host||Qr(r);return iv(e)?e.host:e}function J1(r){const e=vs(r);return go(e)?r.ownerDocument?r.ownerDocument.body:r.body:Xr(e)&&ol(e)?e:J1(e)}function $a(r,e,t){var n;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=J1(r),i=s===((n=r.ownerDocument)==null?void 0:n.body),o=Ut(s);if(i){const a=Gf(o);return e.concat(o,o.visualViewport||[],ol(s)?s:[],a&&t?$a(a):[])}return e.concat(s,$a(s,[],t))}function Gf(r){return r.parent&&Object.getPrototypeOf(r.parent)?r.frameElement:null}function Z1(r){const e=Ar(r);let t=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=Xr(r),i=s?r.offsetWidth:t,o=s?r.offsetHeight:n,a=pu(t)!==i||pu(n)!==o;return a&&(t=i,n=o),{width:t,height:n,$:a}}function Rp(r){return Nr(r)?r:r.contextElement}function qi(r){const e=Rp(r);if(!Xr(e))return Yr(1);const t=e.getBoundingClientRect(),{width:n,height:s,$:i}=Z1(e);let o=(i?pu(t.width):t.width)/n,a=(i?pu(t.height):t.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const jP=Yr(0);function eb(r){const e=Ut(r);return!Dp()||!e.visualViewport?jP:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function EP(r,e,t){return e===void 0&&(e=!1),!t||e&&t!==Ut(r)?!1:e}function ni(r,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=r.getBoundingClientRect(),i=Rp(r);let o=Yr(1);e&&(n?Nr(n)&&(o=qi(n)):o=qi(r));const a=EP(i,t,n)?eb(i):Yr(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,u=s.width/o.x,d=s.height/o.y;if(i){const f=Ut(i),g=n&&Nr(n)?Ut(n):n;let y=f,v=Gf(y);for(;v&&n&&g!==y;){const w=qi(v),m=v.getBoundingClientRect(),p=Ar(v),x=m.left+(v.clientLeft+parseFloat(p.paddingLeft))*w.x,_=m.top+(v.clientTop+parseFloat(p.paddingTop))*w.y;l*=w.x,c*=w.y,u*=w.x,d*=w.y,l+=x,c+=_,y=Ut(v),v=Gf(y)}}return vu({width:u,height:d,x:l,y:c})}function Lp(r,e){const t=ah(r).scrollLeft;return e?e.left+t:ni(Qr(r)).left+t}function tb(r,e,t){t===void 0&&(t=!1);const n=r.getBoundingClientRect(),s=n.left+e.scrollLeft-(t?0:Lp(r,n)),i=n.top+e.scrollTop;return{x:s,y:i}}function PP(r){let{elements:e,rect:t,offsetParent:n,strategy:s}=r;const i=s==="fixed",o=Qr(n),a=e?oh(e.floating):!1;if(n===o||a&&i)return t;let l={scrollLeft:0,scrollTop:0},c=Yr(1);const u=Yr(0),d=Xr(n);if((d||!d&&!i)&&((Co(n)!=="body"||ol(o))&&(l=ah(n)),Xr(n))){const g=ni(n);c=qi(n),u.x=g.x+n.clientLeft,u.y=g.y+n.clientTop}const f=o&&!d&&!i?tb(o,l,!0):Yr(0);return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:t.y*c.y-l.scrollTop*c.y+u.y+f.y}}function OP(r){return Array.from(r.getClientRects())}function NP(r){const e=Qr(r),t=ah(r),n=r.ownerDocument.body,s=Ft(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),i=Ft(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-t.scrollLeft+Lp(r);const a=-t.scrollTop;return Ar(n).direction==="rtl"&&(o+=Ft(e.clientWidth,n.clientWidth)-s),{width:s,height:i,x:o,y:a}}function AP(r,e){const t=Ut(r),n=Qr(r),s=t.visualViewport;let i=n.clientWidth,o=n.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=Dp();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}const MP=new Set(["absolute","fixed"]);function DP(r,e){const t=ni(r,!0,e==="fixed"),n=t.top+r.clientTop,s=t.left+r.clientLeft,i=Xr(r)?qi(r):Yr(1),o=r.clientWidth*i.x,a=r.clientHeight*i.y,l=s*i.x,c=n*i.y;return{width:o,height:a,x:l,y:c}}function ov(r,e,t){let n;if(e==="viewport")n=AP(r,t);else if(e==="document")n=NP(Qr(r));else if(Nr(e))n=DP(e,t);else{const s=eb(r);n={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return vu(n)}function rb(r,e){const t=vs(r);return t===e||!Nr(t)||go(t)?!1:Ar(t).position==="fixed"||rb(t,e)}function RP(r,e){const t=e.get(r);if(t)return t;let n=$a(r,[],!1).filter(a=>Nr(a)&&Co(a)!=="body"),s=null;const i=Ar(r).position==="fixed";let o=i?vs(r):r;for(;Nr(o)&&!go(o);){const a=Ar(o),l=Mp(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&MP.has(s.position)||ol(o)&&!l&&rb(r,o))?n=n.filter(u=>u!==o):s=a,o=vs(o)}return e.set(r,n),n}function LP(r){let{element:e,boundary:t,rootBoundary:n,strategy:s}=r;const o=[...t==="clippingAncestors"?oh(e)?[]:RP(e,this._c):[].concat(t),n],a=o[0],l=o.reduce((c,u)=>{const d=ov(e,u,s);return c.top=Ft(d.top,c.top),c.right=ms(d.right,c.right),c.bottom=ms(d.bottom,c.bottom),c.left=Ft(d.left,c.left),c},ov(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function IP(r){const{width:e,height:t}=Z1(r);return{width:e,height:t}}function FP(r,e,t){const n=Xr(e),s=Qr(e),i=t==="fixed",o=ni(r,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Yr(0);function c(){l.x=Lp(s)}if(n||!n&&!i)if((Co(e)!=="body"||ol(s))&&(a=ah(e)),n){const g=ni(e,!0,i,e);l.x=g.x+e.clientLeft,l.y=g.y+e.clientTop}else s&&c();i&&!n&&s&&c();const u=s&&!n&&!i?tb(s,a):Yr(0),d=o.left+a.scrollLeft-l.x-u.x,f=o.top+a.scrollTop-l.y-u.y;return{x:d,y:f,width:o.width,height:o.height}}function md(r){return Ar(r).position==="static"}function av(r,e){if(!Xr(r)||Ar(r).position==="fixed")return null;if(e)return e(r);let t=r.offsetParent;return Qr(r)===t&&(t=t.ownerDocument.body),t}function nb(r,e){const t=Ut(r);if(oh(r))return t;if(!Xr(r)){let s=vs(r);for(;s&&!go(s);){if(Nr(s)&&!md(s))return s;s=vs(s)}return t}let n=av(r,e);for(;n&&wP(n)&&md(n);)n=av(n,e);return n&&go(n)&&md(n)&&!Mp(n)?t:n||kP(r)||t}const $P=async function(r){const e=this.getOffsetParent||nb,t=this.getDimensions,n=await t(r.floating);return{reference:FP(r.reference,await e(r.floating),r.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function BP(r){return Ar(r).direction==="rtl"}const zP={convertOffsetParentRelativeRectToViewportRelativeRect:PP,getDocumentElement:Qr,getClippingRect:LP,getOffsetParent:nb,getElementRects:$P,getClientRects:OP,getDimensions:IP,getScale:qi,isElement:Nr,isRTL:BP};function sb(r,e){return r.x===e.x&&r.y===e.y&&r.width===e.width&&r.height===e.height}function UP(r,e){let t=null,n;const s=Qr(r);function i(){var a;clearTimeout(n),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=r.getBoundingClientRect(),{left:u,top:d,width:f,height:g}=c;if(a||e(),!f||!g)return;const y=Ul(d),v=Ul(s.clientWidth-(u+f)),w=Ul(s.clientHeight-(d+g)),m=Ul(u),x={rootMargin:-y+"px "+-v+"px "+-w+"px "+-m+"px",threshold:Ft(0,ms(1,l))||1};let _=!0;function S(C){const T=C[0].intersectionRatio;if(T!==l){if(!_)return o();T?o(!1,T):n=setTimeout(()=>{o(!1,1e-7)},1e3)}T===1&&!sb(c,r.getBoundingClientRect())&&o(),_=!1}try{t=new IntersectionObserver(S,{...x,root:s.ownerDocument})}catch{t=new IntersectionObserver(S,x)}t.observe(r)}return o(!0),i}function WP(r,e,t,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=Rp(r),u=s||i?[...c?$a(c):[],...$a(e)]:[];u.forEach(m=>{s&&m.addEventListener("scroll",t,{passive:!0}),i&&m.addEventListener("resize",t)});const d=c&&a?UP(c,t):null;let f=-1,g=null;o&&(g=new ResizeObserver(m=>{let[p]=m;p&&p.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var x;(x=g)==null||x.observe(e)})),t()}),c&&!l&&g.observe(c),g.observe(e));let y,v=l?ni(r):null;l&&w();function w(){const m=ni(r);v&&!sb(v,m)&&t(),v=m,y=requestAnimationFrame(w)}return t(),()=>{var m;u.forEach(p=>{s&&p.removeEventListener("scroll",t),i&&p.removeEventListener("resize",t)}),d==null||d(),(m=g)==null||m.disconnect(),g=null,l&&cancelAnimationFrame(y)}}const VP=gP,HP=pP,GP=hP,YP=vP,qP=dP,lv=uP,XP=mP,KP=(r,e,t)=>{const n=new Map,s={platform:zP,...t},i={...s.platform,_c:n};return cP(r,e,{...s,platform:i})};var QP=typeof document<"u",JP=function(){},Mc=QP?b.useLayoutEffect:JP;function yu(r,e){if(r===e)return!0;if(typeof r!=typeof e)return!1;if(typeof r=="function"&&r.toString()===e.toString())return!0;let t,n,s;if(r&&e&&typeof r=="object"){if(Array.isArray(r)){if(t=r.length,t!==e.length)return!1;for(n=t;n--!==0;)if(!yu(r[n],e[n]))return!1;return!0}if(s=Object.keys(r),t=s.length,t!==Object.keys(e).length)return!1;for(n=t;n--!==0;)if(!{}.hasOwnProperty.call(e,s[n]))return!1;for(n=t;n--!==0;){const i=s[n];if(!(i==="_owner"&&r.$$typeof)&&!yu(r[i],e[i]))return!1}return!0}return r!==r&&e!==e}function ib(r){return typeof window>"u"?1:(r.ownerDocument.defaultView||window).devicePixelRatio||1}function cv(r,e){const t=ib(r);return Math.round(e*t)/t}function vd(r){const e=b.useRef(r);return Mc(()=>{e.current=r}),e}function ZP(r){r===void 0&&(r={});const{placement:e="bottom",strategy:t="absolute",middleware:n=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=r,[u,d]=b.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[f,g]=b.useState(n);yu(f,n)||g(n);const[y,v]=b.useState(null),[w,m]=b.useState(null),p=b.useCallback(N=>{N!==C.current&&(C.current=N,v(N))},[]),x=b.useCallback(N=>{N!==T.current&&(T.current=N,m(N))},[]),_=i||y,S=o||w,C=b.useRef(null),T=b.useRef(null),E=b.useRef(u),A=l!=null,D=vd(l),B=vd(s),P=vd(c),I=b.useCallback(()=>{if(!C.current||!T.current)return;const N={placement:e,strategy:t,middleware:f};B.current&&(N.platform=B.current),KP(C.current,T.current,N).then(M=>{const z={...M,isPositioned:P.current!==!1};L.current&&!yu(E.current,z)&&(E.current=z,nl.flushSync(()=>{d(z)}))})},[f,e,t,B,P]);Mc(()=>{c===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,d(N=>({...N,isPositioned:!1})))},[c]);const L=b.useRef(!1);Mc(()=>(L.current=!0,()=>{L.current=!1}),[]),Mc(()=>{if(_&&(C.current=_),S&&(T.current=S),_&&S){if(D.current)return D.current(_,S,I);I()}},[_,S,I,D,A]);const G=b.useMemo(()=>({reference:C,floating:T,setReference:p,setFloating:x}),[p,x]),W=b.useMemo(()=>({reference:_,floating:S}),[_,S]),V=b.useMemo(()=>{const N={position:t,left:0,top:0};if(!W.floating)return N;const M=cv(W.floating,u.x),z=cv(W.floating,u.y);return a?{...N,transform:"translate("+M+"px, "+z+"px)",...ib(W.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:M,top:z}},[t,a,W.floating,u.x,u.y]);return b.useMemo(()=>({...u,update:I,refs:G,elements:W,floatingStyles:V}),[u,I,G,W,V])}const eO=r=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:r,fn(t){const{element:n,padding:s}=typeof r=="function"?r(t):r;return n&&e(n)?n.current!=null?lv({element:n.current,padding:s}).fn(t):{}:n?lv({element:n,padding:s}).fn(t):{}}}},tO=(r,e)=>({...VP(r),options:[r,e]}),rO=(r,e)=>({...HP(r),options:[r,e]}),nO=(r,e)=>({...XP(r),options:[r,e]}),sO=(r,e)=>({...GP(r),options:[r,e]}),iO=(r,e)=>({...YP(r),options:[r,e]}),oO=(r,e)=>({...qP(r),options:[r,e]}),aO=(r,e)=>({...eO(r),options:[r,e]});var lO="Arrow",ob=b.forwardRef((r,e)=>{const{children:t,width:n=10,height:s=5,...i}=r;return h.jsx(ve.svg,{...i,ref:e,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:r.asChild?t:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});ob.displayName=lO;var cO=ob;function Ip(r){const[e,t]=b.useState(void 0);return wn(()=>{if(r){t({width:r.offsetWidth,height:r.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=r.offsetWidth,a=r.offsetHeight;t({width:o,height:a})});return n.observe(r,{box:"border-box"}),()=>n.unobserve(r)}else t(void 0)},[r]),e}var ab="Popper",[lb,cb]=Tn(ab),[FL,ub]=lb(ab),hb="PopperAnchor",db=b.forwardRef((r,e)=>{const{__scopePopper:t,virtualRef:n,...s}=r,i=ub(hb,t),o=b.useRef(null),a=Ye(e,o);return b.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:h.jsx(ve.div,{...s,ref:a})});db.displayName=hb;var Fp="PopperContent",[uO,hO]=lb(Fp),fb=b.forwardRef((r,e)=>{var le,Pn,Gt,ot,On,ui;const{__scopePopper:t,side:n="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:g="optimized",onPlaced:y,...v}=r,w=ub(Fp,t),[m,p]=b.useState(null),x=Ye(e,Nn=>p(Nn)),[_,S]=b.useState(null),C=Ip(_),T=(C==null?void 0:C.width)??0,E=(C==null?void 0:C.height)??0,A=n+(i!=="center"?"-"+i:""),D=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},B=Array.isArray(c)?c:[c],P=B.length>0,I={padding:D,boundary:B.filter(fO),altBoundary:P},{refs:L,floatingStyles:G,placement:W,isPositioned:V,middlewareData:N}=ZP({strategy:"fixed",placement:A,whileElementsMounted:(...Nn)=>WP(...Nn,{animationFrame:g==="always"}),elements:{reference:w.anchor},middleware:[tO({mainAxis:s+E,alignmentAxis:o}),l&&rO({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?nO():void 0,...I}),l&&sO({...I}),iO({...I,apply:({elements:Nn,rects:yl,availableWidth:Mh,availableHeight:xl})=>{const{width:Dh,height:Ro}=yl.reference,hi=Nn.floating.style;hi.setProperty("--radix-popper-available-width",`${Mh}px`),hi.setProperty("--radix-popper-available-height",`${xl}px`),hi.setProperty("--radix-popper-anchor-width",`${Dh}px`),hi.setProperty("--radix-popper-anchor-height",`${Ro}px`)}}),_&&aO({element:_,padding:a}),gO({arrowWidth:T,arrowHeight:E}),f&&oO({strategy:"referenceHidden",...I})]}),[M,z]=mb(W),Q=xn(y);wn(()=>{V&&(Q==null||Q())},[V,Q]);const X=(le=N.arrow)==null?void 0:le.x,Z=(Pn=N.arrow)==null?void 0:Pn.y,ee=((Gt=N.arrow)==null?void 0:Gt.centerOffset)!==0,[Se,Oe]=b.useState();return wn(()=>{m&&Oe(window.getComputedStyle(m).zIndex)},[m]),h.jsx("div",{ref:L.setFloating,"data-radix-popper-content-wrapper":"",style:{...G,transform:V?G.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Se,"--radix-popper-transform-origin":[(ot=N.transformOrigin)==null?void 0:ot.x,(On=N.transformOrigin)==null?void 0:On.y].join(" "),...((ui=N.hide)==null?void 0:ui.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:r.dir,children:h.jsx(uO,{scope:t,placedSide:M,onArrowChange:S,arrowX:X,arrowY:Z,shouldHideArrow:ee,children:h.jsx(ve.div,{"data-side":M,"data-align":z,...v,ref:x,style:{...v.style,animation:V?void 0:"none"}})})})});fb.displayName=Fp;var gb="PopperArrow",dO={top:"bottom",right:"left",bottom:"top",left:"right"},pb=b.forwardRef(function(e,t){const{__scopePopper:n,...s}=e,i=hO(gb,n),o=dO[i.placedSide];return h.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:h.jsx(cO,{...s,ref:t,style:{...s.style,display:"block"}})})});pb.displayName=gb;function fO(r){return r!==null}var gO=r=>({name:"transformOrigin",options:r,fn(e){var w,m,p;const{placement:t,rects:n,middlewareData:s}=e,o=((w=s.arrow)==null?void 0:w.centerOffset)!==0,a=o?0:r.arrowWidth,l=o?0:r.arrowHeight,[c,u]=mb(t),d={start:"0%",center:"50%",end:"100%"}[u],f=(((m=s.arrow)==null?void 0:m.x)??0)+a/2,g=(((p=s.arrow)==null?void 0:p.y)??0)+l/2;let y="",v="";return c==="bottom"?(y=o?d:`${f}px`,v=`${-l}px`):c==="top"?(y=o?d:`${f}px`,v=`${n.floating.height+l}px`):c==="right"?(y=`${-l}px`,v=o?d:`${g}px`):c==="left"&&(y=`${n.floating.width+l}px`,v=o?d:`${g}px`),{data:{x:y,y:v}}}});function mb(r){const[e,t="center"]=r.split("-");return[e,t]}var pO=db,mO=fb,vO=pb,[lh,$L]=Tn("Tooltip",[cb]),$p=cb(),vb="TooltipProvider",yO=700,uv="tooltip.open",[xO,yb]=lh(vb),xb=r=>{const{__scopeTooltip:e,delayDuration:t=yO,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:i}=r,o=b.useRef(!0),a=b.useRef(!1),l=b.useRef(0);return b.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),h.jsx(xO,{scope:e,isOpenDelayedRef:o,delayDuration:t,onOpen:b.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:b.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:a,onPointerInTransitChange:b.useCallback(c=>{a.current=c},[]),disableHoverableContent:s,children:i})};xb.displayName=vb;var wb="Tooltip",[BL,ch]=lh(wb),Yf="TooltipTrigger",wO=b.forwardRef((r,e)=>{const{__scopeTooltip:t,...n}=r,s=ch(Yf,t),i=yb(Yf,t),o=$p(t),a=b.useRef(null),l=Ye(e,a,s.onTriggerChange),c=b.useRef(!1),u=b.useRef(!1),d=b.useCallback(()=>c.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),h.jsx(pO,{asChild:!0,...o,children:h.jsx(ve.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:l,onPointerMove:ce(r.onPointerMove,f=>{f.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),u.current=!0)}),onPointerLeave:ce(r.onPointerLeave,()=>{s.onTriggerLeave(),u.current=!1}),onPointerDown:ce(r.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:ce(r.onFocus,()=>{c.current||s.onOpen()}),onBlur:ce(r.onBlur,s.onClose),onClick:ce(r.onClick,s.onClose)})})});wO.displayName=Yf;var bO="TooltipPortal",[zL,_O]=lh(bO,{forceMount:void 0}),po="TooltipContent",bb=b.forwardRef((r,e)=>{const t=_O(po,r.__scopeTooltip),{forceMount:n=t.forceMount,side:s="top",...i}=r,o=ch(po,r.__scopeTooltip);return h.jsx(Zu,{present:n||o.open,children:o.disableHoverableContent?h.jsx(_b,{side:s,...i,ref:e}):h.jsx(SO,{side:s,...i,ref:e})})}),SO=b.forwardRef((r,e)=>{const t=ch(po,r.__scopeTooltip),n=yb(po,r.__scopeTooltip),s=b.useRef(null),i=Ye(e,s),[o,a]=b.useState(null),{trigger:l,onClose:c}=t,u=s.current,{onPointerInTransitChange:d}=n,f=b.useCallback(()=>{a(null),d(!1)},[d]),g=b.useCallback((y,v)=>{const w=y.currentTarget,m={x:y.clientX,y:y.clientY},p=EO(m,w.getBoundingClientRect()),x=PO(m,p),_=OO(v.getBoundingClientRect()),S=AO([...x,..._]);a(S),d(!0)},[d]);return b.useEffect(()=>()=>f(),[f]),b.useEffect(()=>{if(l&&u){const y=w=>g(w,u),v=w=>g(w,l);return l.addEventListener("pointerleave",y),u.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",y),u.removeEventListener("pointerleave",v)}}},[l,u,g,f]),b.useEffect(()=>{if(o){const y=v=>{const w=v.target,m={x:v.clientX,y:v.clientY},p=(l==null?void 0:l.contains(w))||(u==null?void 0:u.contains(w)),x=!NO(m,o);p?f():x&&(f(),c())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[l,u,o,c,f]),h.jsx(_b,{...r,ref:i})}),[CO,kO]=lh(wb,{isInside:!1}),TO=uT("TooltipContent"),_b=b.forwardRef((r,e)=>{const{__scopeTooltip:t,children:n,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=r,l=ch(po,t),c=$p(t),{onClose:u}=l;return b.useEffect(()=>(document.addEventListener(uv,u),()=>document.removeEventListener(uv,u)),[u]),b.useEffect(()=>{if(l.trigger){const d=f=>{const g=f.target;g!=null&&g.contains(l.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,u]),h.jsx(Cp,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:h.jsxs(mO,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[h.jsx(TO,{children:n}),h.jsx(CO,{scope:t,isInside:!0,children:h.jsx(MT,{id:l.contentId,role:"tooltip",children:s||n})})]})})});bb.displayName=po;var Sb="TooltipArrow",jO=b.forwardRef((r,e)=>{const{__scopeTooltip:t,...n}=r,s=$p(t);return kO(Sb,t).isInside?null:h.jsx(vO,{...s,...n,ref:e})});jO.displayName=Sb;function EO(r,e){const t=Math.abs(e.top-r.y),n=Math.abs(e.bottom-r.y),s=Math.abs(e.right-r.x),i=Math.abs(e.left-r.x);switch(Math.min(t,n,s,i)){case i:return"left";case s:return"right";case t:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function PO(r,e,t=5){const n=[];switch(e){case"top":n.push({x:r.x-t,y:r.y+t},{x:r.x+t,y:r.y+t});break;case"bottom":n.push({x:r.x-t,y:r.y-t},{x:r.x+t,y:r.y-t});break;case"left":n.push({x:r.x+t,y:r.y-t},{x:r.x+t,y:r.y+t});break;case"right":n.push({x:r.x-t,y:r.y-t},{x:r.x-t,y:r.y+t});break}return n}function OO(r){const{top:e,right:t,bottom:n,left:s}=r;return[{x:s,y:e},{x:t,y:e},{x:t,y:n},{x:s,y:n}]}function NO(r,e){const{x:t,y:n}=r;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],c=a.x,u=a.y,d=l.x,f=l.y;u>n!=f>n&&t<(d-c)*(n-u)/(f-u)+c&&(s=!s)}return s}function AO(r){const e=r.slice();return e.sort((t,n)=>t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0),MO(e)}function MO(r){if(r.length<=1)return r.slice();const e=[];for(let n=0;n<r.length;n++){const s=r[n];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const t=[];for(let n=r.length-1;n>=0;n--){const s=r[n];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var DO=xb,Cb=bb;const RO=DO,LO=b.forwardRef(({className:r,sideOffset:e=4,...t},n)=>h.jsx(Cb,{ref:n,sideOffset:e,className:Pe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...t}));LO.displayName=Cb.displayName;var uh=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(r){return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},hh=typeof window>"u"||"Deno"in globalThis;function mr(){}function IO(r,e){return typeof r=="function"?r(e):r}function FO(r){return typeof r=="number"&&r>=0&&r!==1/0}function $O(r,e){return Math.max(r+(e||0)-Date.now(),0)}function qf(r,e){return typeof r=="function"?r(e):r}function BO(r,e){return typeof r=="function"?r(e):r}function hv(r,e){const{type:t="all",exact:n,fetchStatus:s,predicate:i,queryKey:o,stale:a}=r;if(o){if(n){if(e.queryHash!==Bp(o,e.options))return!1}else if(!za(e.queryKey,o))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function dv(r,e){const{exact:t,status:n,predicate:s,mutationKey:i}=r;if(i){if(!e.options.mutationKey)return!1;if(t){if(Ba(e.options.mutationKey)!==Ba(i))return!1}else if(!za(e.options.mutationKey,i))return!1}return!(n&&e.state.status!==n||s&&!s(e))}function Bp(r,e){return((e==null?void 0:e.queryKeyHashFn)||Ba)(r)}function Ba(r){return JSON.stringify(r,(e,t)=>Xf(t)?Object.keys(t).sort().reduce((n,s)=>(n[s]=t[s],n),{}):t)}function za(r,e){return r===e?!0:typeof r!=typeof e?!1:r&&e&&typeof r=="object"&&typeof e=="object"?Object.keys(e).every(t=>za(r[t],e[t])):!1}function kb(r,e){if(r===e)return r;const t=fv(r)&&fv(e);if(t||Xf(r)&&Xf(e)){const n=t?r:Object.keys(r),s=n.length,i=t?e:Object.keys(e),o=i.length,a=t?[]:{},l=new Set(n);let c=0;for(let u=0;u<o;u++){const d=t?u:i[u];(!t&&l.has(d)||t)&&r[d]===void 0&&e[d]===void 0?(a[d]=void 0,c++):(a[d]=kb(r[d],e[d]),a[d]===r[d]&&r[d]!==void 0&&c++)}return s===o&&c===s?r:a}return e}function fv(r){return Array.isArray(r)&&r.length===Object.keys(r).length}function Xf(r){if(!gv(r))return!1;const e=r.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!gv(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(r)!==Object.prototype)}function gv(r){return Object.prototype.toString.call(r)==="[object Object]"}function zO(r){return new Promise(e=>{setTimeout(e,r)})}function UO(r,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(r,e):t.structuralSharing!==!1?kb(r,e):e}function WO(r,e,t=0){const n=[...r,e];return t&&n.length>t?n.slice(1):n}function VO(r,e,t=0){const n=[e,...r];return t&&n.length>t?n.slice(0,-1):n}var zp=Symbol();function Tb(r,e){return!r.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!r.queryFn||r.queryFn===zp?()=>Promise.reject(new Error(`Missing queryFn: '${r.queryHash}'`)):r.queryFn}var zs,Xn,Ji,Ny,HO=(Ny=class extends uh{constructor(){super();fe(this,zs);fe(this,Xn);fe(this,Ji);re(this,Ji,e=>{if(!hh&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){R(this,Xn)||this.setEventListener(R(this,Ji))}onUnsubscribe(){var e;this.hasListeners()||((e=R(this,Xn))==null||e.call(this),re(this,Xn,void 0))}setEventListener(e){var t;re(this,Ji,e),(t=R(this,Xn))==null||t.call(this),re(this,Xn,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){R(this,zs)!==e&&(re(this,zs,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof R(this,zs)=="boolean"?R(this,zs):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},zs=new WeakMap,Xn=new WeakMap,Ji=new WeakMap,Ny),jb=new HO,Zi,Kn,eo,Ay,GO=(Ay=class extends uh{constructor(){super();fe(this,Zi,!0);fe(this,Kn);fe(this,eo);re(this,eo,e=>{if(!hh&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}})}onSubscribe(){R(this,Kn)||this.setEventListener(R(this,eo))}onUnsubscribe(){var e;this.hasListeners()||((e=R(this,Kn))==null||e.call(this),re(this,Kn,void 0))}setEventListener(e){var t;re(this,eo,e),(t=R(this,Kn))==null||t.call(this),re(this,Kn,e(this.setOnline.bind(this)))}setOnline(e){R(this,Zi)!==e&&(re(this,Zi,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return R(this,Zi)}},Zi=new WeakMap,Kn=new WeakMap,eo=new WeakMap,Ay),xu=new GO;function YO(){let r,e;const t=new Promise((s,i)=>{r=s,e=i});t.status="pending",t.catch(()=>{});function n(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{n({status:"fulfilled",value:s}),r(s)},t.reject=s=>{n({status:"rejected",reason:s}),e(s)},t}function qO(r){return Math.min(1e3*2**r,3e4)}function Eb(r){return(r??"online")==="online"?xu.isOnline():!0}var Pb=class extends Error{constructor(r){super("CancelledError"),this.revert=r==null?void 0:r.revert,this.silent=r==null?void 0:r.silent}};function yd(r){return r instanceof Pb}function Ob(r){let e=!1,t=0,n=!1,s;const i=YO(),o=v=>{var w;n||(f(new Pb(v)),(w=r.abort)==null||w.call(r))},a=()=>{e=!0},l=()=>{e=!1},c=()=>jb.isFocused()&&(r.networkMode==="always"||xu.isOnline())&&r.canRun(),u=()=>Eb(r.networkMode)&&r.canRun(),d=v=>{var w;n||(n=!0,(w=r.onSuccess)==null||w.call(r,v),s==null||s(),i.resolve(v))},f=v=>{var w;n||(n=!0,(w=r.onError)==null||w.call(r,v),s==null||s(),i.reject(v))},g=()=>new Promise(v=>{var w;s=m=>{(n||c())&&v(m)},(w=r.onPause)==null||w.call(r)}).then(()=>{var v;s=void 0,n||(v=r.onContinue)==null||v.call(r)}),y=()=>{if(n)return;let v;const w=t===0?r.initialPromise:void 0;try{v=w??r.fn()}catch(m){v=Promise.reject(m)}Promise.resolve(v).then(d).catch(m=>{var C;if(n)return;const p=r.retry??(hh?0:3),x=r.retryDelay??qO,_=typeof x=="function"?x(t,m):x,S=p===!0||typeof p=="number"&&t<p||typeof p=="function"&&p(t,m);if(e||!S){f(m);return}t++,(C=r.onFail)==null||C.call(r,t,m),zO(_).then(()=>c()?void 0:g()).then(()=>{e?f(m):y()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?y():g().then(y),i)}}var XO=r=>setTimeout(r,0);function KO(){let r=[],e=0,t=a=>{a()},n=a=>{a()},s=XO;const i=a=>{e?r.push(a):s(()=>{t(a)})},o=()=>{const a=r;r=[],a.length&&s(()=>{n(()=>{a.forEach(l=>{t(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{s=a}}}var vt=KO(),Us,My,Nb=(My=class{constructor(){fe(this,Us)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),FO(this.gcTime)&&re(this,Us,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(r){this.gcTime=Math.max(this.gcTime||0,r??(hh?1/0:5*60*1e3))}clearGcTimeout(){R(this,Us)&&(clearTimeout(R(this,Us)),re(this,Us,void 0))}},Us=new WeakMap,My),to,Ws,Kt,Vs,ut,Ka,Hs,vr,en,Dy,QO=(Dy=class extends Nb{constructor(e){super();fe(this,vr);fe(this,to);fe(this,Ws);fe(this,Kt);fe(this,Vs);fe(this,ut);fe(this,Ka);fe(this,Hs);re(this,Hs,!1),re(this,Ka,e.defaultOptions),this.setOptions(e.options),this.observers=[],re(this,Vs,e.client),re(this,Kt,R(this,Vs).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,re(this,to,ZO(this.options)),this.state=e.state??R(this,to),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=R(this,ut))==null?void 0:e.promise}setOptions(e){this.options={...R(this,Ka),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&R(this,Kt).remove(this)}setData(e,t){const n=UO(this.state.data,e,this.options);return at(this,vr,en).call(this,{data:n,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),n}setState(e,t){at(this,vr,en).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var n,s;const t=(n=R(this,ut))==null?void 0:n.promise;return(s=R(this,ut))==null||s.cancel(e),t?t.then(mr).catch(mr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(R(this,to))}isActive(){return this.observers.some(e=>BO(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===zp||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>qf(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!$O(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=R(this,ut))==null||t.continue()}onOnline(){var t;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=R(this,ut))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),R(this,Kt).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(R(this,ut)&&(R(this,Hs)?R(this,ut).cancel({revert:!0}):R(this,ut).cancelRetry()),this.scheduleGc()),R(this,Kt).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||at(this,vr,en).call(this,{type:"invalidate"})}fetch(e,t){var c,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(R(this,ut))return R(this,ut).continueRetry(),R(this,ut).promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(g=>g.options.queryFn);f&&this.setOptions(f.options)}const n=new AbortController,s=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(re(this,Hs,!0),n.signal)})},i=()=>{const f=Tb(this.options,t),y=(()=>{const v={client:R(this,Vs),queryKey:this.queryKey,meta:this.meta};return s(v),v})();return re(this,Hs,!1),this.options.persister?this.options.persister(f,y,this):f(y)},a=(()=>{const f={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:R(this,Vs),state:this.state,fetchFn:i};return s(f),f})();(c=this.options.behavior)==null||c.onFetch(a,this),re(this,Ws,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&at(this,vr,en).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const l=f=>{var g,y,v,w;yd(f)&&f.silent||at(this,vr,en).call(this,{type:"error",error:f}),yd(f)||((y=(g=R(this,Kt).config).onError)==null||y.call(g,f,this),(w=(v=R(this,Kt).config).onSettled)==null||w.call(v,this.state.data,f,this)),this.scheduleGc()};return re(this,ut,Ob({initialPromise:t==null?void 0:t.initialPromise,fn:a.fetchFn,abort:n.abort.bind(n),onSuccess:f=>{var g,y,v,w;if(f===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(m){l(m);return}(y=(g=R(this,Kt).config).onSuccess)==null||y.call(g,f,this),(w=(v=R(this,Kt).config).onSettled)==null||w.call(v,f,this.state.error,this),this.scheduleGc()},onError:l,onFail:(f,g)=>{at(this,vr,en).call(this,{type:"failed",failureCount:f,error:g})},onPause:()=>{at(this,vr,en).call(this,{type:"pause"})},onContinue:()=>{at(this,vr,en).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),R(this,ut).start()}},to=new WeakMap,Ws=new WeakMap,Kt=new WeakMap,Vs=new WeakMap,ut=new WeakMap,Ka=new WeakMap,Hs=new WeakMap,vr=new WeakSet,en=function(e){const t=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...JO(n.data,this.options),fetchMeta:e.meta??null};case"success":return re(this,Ws,void 0),{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return yd(s)&&s.revert&&R(this,Ws)?{...R(this,Ws),fetchStatus:"idle"}:{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=t(this.state),vt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),R(this,Kt).notify({query:this,type:"updated",action:e})})},Dy);function JO(r,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Eb(e.networkMode)?"fetching":"paused",...r===void 0&&{error:null,status:"pending"}}}function ZO(r){const e=typeof r.initialData=="function"?r.initialData():r.initialData,t=e!==void 0,n=t?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Ir,Ry,eN=(Ry=class extends uh{constructor(e={}){super();fe(this,Ir);this.config=e,re(this,Ir,new Map)}build(e,t,n){const s=t.queryKey,i=t.queryHash??Bp(s,t);let o=this.get(i);return o||(o=new QO({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){R(this,Ir).has(e.queryHash)||(R(this,Ir).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=R(this,Ir).get(e.queryHash);t&&(e.destroy(),t===e&&R(this,Ir).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){vt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return R(this,Ir).get(e)}getAll(){return[...R(this,Ir).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(n=>hv(t,n))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(n=>hv(e,n)):t}notify(e){vt.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){vt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){vt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ir=new WeakMap,Ry),Fr,pt,Gs,$r,zn,Ly,tN=(Ly=class extends Nb{constructor(e){super();fe(this,$r);fe(this,Fr);fe(this,pt);fe(this,Gs);this.mutationId=e.mutationId,re(this,pt,e.mutationCache),re(this,Fr,[]),this.state=e.state||rN(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){R(this,Fr).includes(e)||(R(this,Fr).push(e),this.clearGcTimeout(),R(this,pt).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){re(this,Fr,R(this,Fr).filter(t=>t!==e)),this.scheduleGc(),R(this,pt).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){R(this,Fr).length||(this.state.status==="pending"?this.scheduleGc():R(this,pt).remove(this))}continue(){var e;return((e=R(this,Gs))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,l,c,u,d,f,g,y,v,w,m,p,x,_,S,C,T,E;const t=()=>{at(this,$r,zn).call(this,{type:"continue"})};re(this,Gs,Ob({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(A,D)=>{at(this,$r,zn).call(this,{type:"failed",failureCount:A,error:D})},onPause:()=>{at(this,$r,zn).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>R(this,pt).canRun(this)}));const n=this.state.status==="pending",s=!R(this,Gs).canStart();try{if(n)t();else{at(this,$r,zn).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=R(this,pt).config).onMutate)==null?void 0:o.call(i,e,this));const D=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,e));D!==this.state.context&&at(this,$r,zn).call(this,{type:"pending",context:D,variables:e,isPaused:s})}const A=await R(this,Gs).start();return await((u=(c=R(this,pt).config).onSuccess)==null?void 0:u.call(c,A,e,this.state.context,this)),await((f=(d=this.options).onSuccess)==null?void 0:f.call(d,A,e,this.state.context)),await((y=(g=R(this,pt).config).onSettled)==null?void 0:y.call(g,A,null,this.state.variables,this.state.context,this)),await((w=(v=this.options).onSettled)==null?void 0:w.call(v,A,null,e,this.state.context)),at(this,$r,zn).call(this,{type:"success",data:A}),A}catch(A){try{throw await((p=(m=R(this,pt).config).onError)==null?void 0:p.call(m,A,e,this.state.context,this)),await((_=(x=this.options).onError)==null?void 0:_.call(x,A,e,this.state.context)),await((C=(S=R(this,pt).config).onSettled)==null?void 0:C.call(S,void 0,A,this.state.variables,this.state.context,this)),await((E=(T=this.options).onSettled)==null?void 0:E.call(T,void 0,A,e,this.state.context)),A}finally{at(this,$r,zn).call(this,{type:"error",error:A})}}finally{R(this,pt).runNext(this)}}},Fr=new WeakMap,pt=new WeakMap,Gs=new WeakMap,$r=new WeakSet,zn=function(e){const t=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),vt.batch(()=>{R(this,Fr).forEach(n=>{n.onMutationUpdate(e)}),R(this,pt).notify({mutation:this,type:"updated",action:e})})},Ly);function rN(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var an,yr,Qa,Iy,nN=(Iy=class extends uh{constructor(e={}){super();fe(this,an);fe(this,yr);fe(this,Qa);this.config=e,re(this,an,new Set),re(this,yr,new Map),re(this,Qa,0)}build(e,t,n){const s=new tN({mutationCache:this,mutationId:++bl(this,Qa)._,options:e.defaultMutationOptions(t),state:n});return this.add(s),s}add(e){R(this,an).add(e);const t=Wl(e);if(typeof t=="string"){const n=R(this,yr).get(t);n?n.push(e):R(this,yr).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(R(this,an).delete(e)){const t=Wl(e);if(typeof t=="string"){const n=R(this,yr).get(t);if(n)if(n.length>1){const s=n.indexOf(e);s!==-1&&n.splice(s,1)}else n[0]===e&&R(this,yr).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Wl(e);if(typeof t=="string"){const n=R(this,yr).get(t),s=n==null?void 0:n.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var n;const t=Wl(e);if(typeof t=="string"){const s=(n=R(this,yr).get(t))==null?void 0:n.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){vt.batch(()=>{R(this,an).forEach(e=>{this.notify({type:"removed",mutation:e})}),R(this,an).clear(),R(this,yr).clear()})}getAll(){return Array.from(R(this,an))}find(e){const t={exact:!0,...e};return this.getAll().find(n=>dv(t,n))}findAll(e={}){return this.getAll().filter(t=>dv(e,t))}notify(e){vt.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return vt.batch(()=>Promise.all(e.map(t=>t.continue().catch(mr))))}},an=new WeakMap,yr=new WeakMap,Qa=new WeakMap,Iy);function Wl(r){var e;return(e=r.options.scope)==null?void 0:e.id}function pv(r){return{onFetch:(e,t)=>{var u,d,f,g,y;const n=e.options,s=(f=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:f.direction,i=((g=e.state.data)==null?void 0:g.pages)||[],o=((y=e.state.data)==null?void 0:y.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let v=!1;const w=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},m=Tb(e.options,e.fetchOptions),p=async(x,_,S)=>{if(v)return Promise.reject();if(_==null&&x.pages.length)return Promise.resolve(x);const T=(()=>{const B={client:e.client,queryKey:e.queryKey,pageParam:_,direction:S?"backward":"forward",meta:e.options.meta};return w(B),B})(),E=await m(T),{maxPages:A}=e.options,D=S?VO:WO;return{pages:D(x.pages,E,A),pageParams:D(x.pageParams,_,A)}};if(s&&i.length){const x=s==="backward",_=x?sN:mv,S={pages:i,pageParams:o},C=_(n,S);a=await p(S,C,x)}else{const x=r??i.length;do{const _=l===0?o[0]??n.initialPageParam:mv(n,a);if(l>0&&_==null)break;a=await p(a,_),l++}while(l<x)}return a};e.options.persister?e.fetchFn=()=>{var v,w;return(w=(v=e.options).persister)==null?void 0:w.call(v,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=c}}}function mv(r,{pages:e,pageParams:t}){const n=e.length-1;return e.length>0?r.getNextPageParam(e[n],e,t[n],t):void 0}function sN(r,{pages:e,pageParams:t}){var n;return e.length>0?(n=r.getPreviousPageParam)==null?void 0:n.call(r,e[0],e,t[0],t):void 0}var Ie,Qn,Jn,ro,no,Zn,so,io,Fy,iN=(Fy=class{constructor(r={}){fe(this,Ie);fe(this,Qn);fe(this,Jn);fe(this,ro);fe(this,no);fe(this,Zn);fe(this,so);fe(this,io);re(this,Ie,r.queryCache||new eN),re(this,Qn,r.mutationCache||new nN),re(this,Jn,r.defaultOptions||{}),re(this,ro,new Map),re(this,no,new Map),re(this,Zn,0)}mount(){bl(this,Zn)._++,R(this,Zn)===1&&(re(this,so,jb.subscribe(async r=>{r&&(await this.resumePausedMutations(),R(this,Ie).onFocus())})),re(this,io,xu.subscribe(async r=>{r&&(await this.resumePausedMutations(),R(this,Ie).onOnline())})))}unmount(){var r,e;bl(this,Zn)._--,R(this,Zn)===0&&((r=R(this,so))==null||r.call(this),re(this,so,void 0),(e=R(this,io))==null||e.call(this),re(this,io,void 0))}isFetching(r){return R(this,Ie).findAll({...r,fetchStatus:"fetching"}).length}isMutating(r){return R(this,Qn).findAll({...r,status:"pending"}).length}getQueryData(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=R(this,Ie).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(r){const e=this.defaultQueryOptions(r),t=R(this,Ie).build(this,e),n=t.state.data;return n===void 0?this.fetchQuery(r):(r.revalidateIfStale&&t.isStaleByTime(qf(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(r){return R(this,Ie).findAll(r).map(({queryKey:e,state:t})=>{const n=t.data;return[e,n]})}setQueryData(r,e,t){const n=this.defaultQueryOptions({queryKey:r}),s=R(this,Ie).get(n.queryHash),i=s==null?void 0:s.state.data,o=IO(e,i);if(o!==void 0)return R(this,Ie).build(this,n).setData(o,{...t,manual:!0})}setQueriesData(r,e,t){return vt.batch(()=>R(this,Ie).findAll(r).map(({queryKey:n})=>[n,this.setQueryData(n,e,t)]))}getQueryState(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=R(this,Ie).get(e.queryHash))==null?void 0:t.state}removeQueries(r){const e=R(this,Ie);vt.batch(()=>{e.findAll(r).forEach(t=>{e.remove(t)})})}resetQueries(r,e){const t=R(this,Ie);return vt.batch(()=>(t.findAll(r).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...r},e)))}cancelQueries(r,e={}){const t={revert:!0,...e},n=vt.batch(()=>R(this,Ie).findAll(r).map(s=>s.cancel(t)));return Promise.all(n).then(mr).catch(mr)}invalidateQueries(r,e={}){return vt.batch(()=>(R(this,Ie).findAll(r).forEach(t=>{t.invalidate()}),(r==null?void 0:r.refetchType)==="none"?Promise.resolve():this.refetchQueries({...r,type:(r==null?void 0:r.refetchType)??(r==null?void 0:r.type)??"active"},e)))}refetchQueries(r,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},n=vt.batch(()=>R(this,Ie).findAll(r).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,t);return t.throwOnError||(i=i.catch(mr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(mr)}fetchQuery(r){const e=this.defaultQueryOptions(r);e.retry===void 0&&(e.retry=!1);const t=R(this,Ie).build(this,e);return t.isStaleByTime(qf(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(r){return this.fetchQuery(r).then(mr).catch(mr)}fetchInfiniteQuery(r){return r.behavior=pv(r.pages),this.fetchQuery(r)}prefetchInfiniteQuery(r){return this.fetchInfiniteQuery(r).then(mr).catch(mr)}ensureInfiniteQueryData(r){return r.behavior=pv(r.pages),this.ensureQueryData(r)}resumePausedMutations(){return xu.isOnline()?R(this,Qn).resumePausedMutations():Promise.resolve()}getQueryCache(){return R(this,Ie)}getMutationCache(){return R(this,Qn)}getDefaultOptions(){return R(this,Jn)}setDefaultOptions(r){re(this,Jn,r)}setQueryDefaults(r,e){R(this,ro).set(Ba(r),{queryKey:r,defaultOptions:e})}getQueryDefaults(r){const e=[...R(this,ro).values()],t={};return e.forEach(n=>{za(r,n.queryKey)&&Object.assign(t,n.defaultOptions)}),t}setMutationDefaults(r,e){R(this,no).set(Ba(r),{mutationKey:r,defaultOptions:e})}getMutationDefaults(r){const e=[...R(this,no).values()],t={};return e.forEach(n=>{za(r,n.mutationKey)&&Object.assign(t,n.defaultOptions)}),t}defaultQueryOptions(r){if(r._defaulted)return r;const e={...R(this,Jn).queries,...this.getQueryDefaults(r.queryKey),...r,_defaulted:!0};return e.queryHash||(e.queryHash=Bp(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===zp&&(e.enabled=!1),e}defaultMutationOptions(r){return r!=null&&r._defaulted?r:{...R(this,Jn).mutations,...(r==null?void 0:r.mutationKey)&&this.getMutationDefaults(r.mutationKey),...r,_defaulted:!0}}clear(){R(this,Ie).clear(),R(this,Qn).clear()}},Ie=new WeakMap,Qn=new WeakMap,Jn=new WeakMap,ro=new WeakMap,no=new WeakMap,Zn=new WeakMap,so=new WeakMap,io=new WeakMap,Fy),oN=b.createContext(void 0),aN=({client:r,children:e})=>(b.useEffect(()=>(r.mount(),()=>{r.unmount()}),[r]),h.jsx(oN.Provider,{value:r,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ua(){return Ua=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Ua.apply(this,arguments)}var ns;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(ns||(ns={}));const vv="popstate";function lN(r){r===void 0&&(r={});function e(n,s){let{pathname:i,search:o,hash:a}=n.location;return Kf("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(n,s){return typeof s=="string"?s:Mb(s)}return uN(e,t,null,r)}function He(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Ab(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function cN(){return Math.random().toString(36).substr(2,8)}function yv(r,e){return{usr:r.state,key:r.key,idx:e}}function Kf(r,e,t,n){return t===void 0&&(t=null),Ua({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?ko(e):e,{state:t,key:e&&e.key||n||cN()})}function Mb(r){let{pathname:e="/",search:t="",hash:n=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function ko(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substr(n),r=r.substr(0,n)),r&&(e.pathname=r)}return e}function uN(r,e,t,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,a=ns.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Ua({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=ns.Pop;let w=u(),m=w==null?null:w-c;c=w,l&&l({action:a,location:v.location,delta:m})}function f(w,m){a=ns.Push;let p=Kf(v.location,w,m);c=u()+1;let x=yv(p,c),_=v.createHref(p);try{o.pushState(x,"",_)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(_)}i&&l&&l({action:a,location:v.location,delta:1})}function g(w,m){a=ns.Replace;let p=Kf(v.location,w,m);c=u();let x=yv(p,c),_=v.createHref(p);o.replaceState(x,"",_),i&&l&&l({action:a,location:v.location,delta:0})}function y(w){let m=s.location.origin!=="null"?s.location.origin:s.location.href,p=typeof w=="string"?w:Mb(w);return p=p.replace(/ $/,"%20"),He(m,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,m)}let v={get action(){return a},get location(){return r(s,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(vv,d),l=w,()=>{s.removeEventListener(vv,d),l=null}},createHref(w){return e(s,w)},createURL:y,encodeLocation(w){let m=y(w);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:f,replace:g,go(w){return o.go(w)}};return v}var xv;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(xv||(xv={}));function hN(r,e,t){return t===void 0&&(t="/"),dN(r,e,t,!1)}function dN(r,e,t,n){let s=typeof e=="string"?ko(e):e,i=Lb(s.pathname||"/",t);if(i==null)return null;let o=Db(r);fN(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=CN(i);a=_N(o[l],c,n)}return a}function Db(r,e,t,n){e===void 0&&(e=[]),t===void 0&&(t=[]),n===void 0&&(n="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(He(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=Ks([n,l.relativePath]),u=t.concat(l);i.children&&i.children.length>0&&(He(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Db(i.children,e,u,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:wN(c,i.index),routesMeta:u})};return r.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of Rb(i.path))s(i,o,l)}),e}function Rb(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,s=t.endsWith("?"),i=t.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=Rb(n.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>r.startsWith("/")&&l===""?"/":l)}function fN(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:bN(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}const gN=/^:[\w-]+$/,pN=3,mN=2,vN=1,yN=10,xN=-2,wv=r=>r==="*";function wN(r,e){let t=r.split("/"),n=t.length;return t.some(wv)&&(n+=xN),e&&(n+=mN),t.filter(s=>!wv(s)).reduce((s,i)=>s+(gN.test(i)?pN:i===""?vN:yN),n)}function bN(r,e){return r.length===e.length&&r.slice(0,-1).every((n,s)=>n===e[s])?r[r.length-1]-e[e.length-1]:0}function _N(r,e,t){let{routesMeta:n}=r,s={},i="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],c=a===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=bv({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!d&&c&&t&&!n[n.length-1].route.index&&(d=bv({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:Ks([i,d.pathname]),pathnameBase:EN(Ks([i,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(i=Ks([i,d.pathnameBase]))}return o}function bv(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=SN(r.path,r.caseSensitive,r.end),s=e.match(t);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:n.reduce((c,u,d)=>{let{paramName:f,isOptional:g}=u;if(f==="*"){let v=a[d]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const y=a[d];return g&&!y?c[f]=void 0:c[f]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:r}}function SN(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Ab(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let n=[],s="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(n.push({paramName:"*"}),s+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":r!==""&&r!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function CN(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ab(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function Lb(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}function kN(r,e){e===void 0&&(e="/");let{pathname:t,search:n="",hash:s=""}=typeof r=="string"?ko(r):r;return{pathname:t?t.startsWith("/")?t:TN(t,e):e,search:PN(n),hash:ON(s)}}function TN(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function xd(r,e,t,n){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function jN(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Ib(r,e){let t=jN(r);return e?t.map((n,s)=>s===t.length-1?n.pathname:n.pathnameBase):t.map(n=>n.pathnameBase)}function Fb(r,e,t,n){n===void 0&&(n=!1);let s;typeof r=="string"?s=ko(r):(s=Ua({},r),He(!s.pathname||!s.pathname.includes("?"),xd("?","pathname","search",s)),He(!s.pathname||!s.pathname.includes("#"),xd("#","pathname","hash",s)),He(!s.search||!s.search.includes("#"),xd("#","search","hash",s)));let i=r===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=t;else{let d=e.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;s.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=kN(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Ks=r=>r.join("/").replace(/\/\/+/g,"/"),EN=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),PN=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,ON=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function NN(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const $b=["post","put","patch","delete"];new Set($b);const AN=["get",...$b];new Set(AN);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wa(){return Wa=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Wa.apply(this,arguments)}const Up=b.createContext(null),MN=b.createContext(null),al=b.createContext(null),dh=b.createContext(null),ai=b.createContext({outlet:null,matches:[],isDataRoute:!1}),Bb=b.createContext(null);function ll(){return b.useContext(dh)!=null}function fh(){return ll()||He(!1),b.useContext(dh).location}function zb(r){b.useContext(al).static||b.useLayoutEffect(r)}function Wp(){let{isDataRoute:r}=b.useContext(ai);return r?GN():DN()}function DN(){ll()||He(!1);let r=b.useContext(Up),{basename:e,future:t,navigator:n}=b.useContext(al),{matches:s}=b.useContext(ai),{pathname:i}=fh(),o=JSON.stringify(Ib(s,t.v7_relativeSplatPath)),a=b.useRef(!1);return zb(()=>{a.current=!0}),b.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){n.go(c);return}let d=Fb(c,JSON.parse(o),i,u.relative==="path");r==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ks([e,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[e,n,o,i,r])}function RN(r,e){return LN(r,e)}function LN(r,e,t,n){ll()||He(!1);let{navigator:s}=b.useContext(al),{matches:i}=b.useContext(ai),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=fh(),u;if(e){var d;let w=typeof e=="string"?ko(e):e;l==="/"||(d=w.pathname)!=null&&d.startsWith(l)||He(!1),u=w}else u=c;let f=u.pathname||"/",g=f;if(l!=="/"){let w=l.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(w.length).join("/")}let y=hN(r,{pathname:g}),v=zN(y&&y.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:Ks([l,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?l:Ks([l,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,t,n);return e&&v?b.createElement(dh.Provider,{value:{location:Wa({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:ns.Pop}},v):v}function IN(){let r=HN(),e=NN(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),t?b.createElement("pre",{style:s},t):null,null)}const FN=b.createElement(IN,null);class $N extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?b.createElement(ai.Provider,{value:this.props.routeContext},b.createElement(Bb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function BN(r){let{routeContext:e,match:t,children:n}=r,s=b.useContext(Up);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),b.createElement(ai.Provider,{value:e},n)}function zN(r,e,t,n){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),n===void 0&&(n=null),r==null){var i;if(!t)return null;if(t.errors)r=t.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let o=r,a=(s=t)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||He(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(t&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:f,errors:g}=t,y=d.route.loader&&f[d.route.id]===void 0&&(!g||g[d.route.id]===void 0);if(d.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,d,f)=>{let g,y=!1,v=null,w=null;t&&(g=a&&d.route.id?a[d.route.id]:void 0,v=d.route.errorElement||FN,l&&(c<0&&f===0?(y=!0,w=null):c===f&&(y=!0,w=d.route.hydrateFallbackElement||null)));let m=e.concat(o.slice(0,f+1)),p=()=>{let x;return g?x=v:y?x=w:d.route.Component?x=b.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=u,b.createElement(BN,{match:d,routeContext:{outlet:u,matches:m,isDataRoute:t!=null},children:x})};return t&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?b.createElement($N,{location:t.location,revalidation:t.revalidation,component:v,error:g,children:p(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):p()},null)}var Ub=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(Ub||{}),wu=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(wu||{});function UN(r){let e=b.useContext(Up);return e||He(!1),e}function WN(r){let e=b.useContext(MN);return e||He(!1),e}function VN(r){let e=b.useContext(ai);return e||He(!1),e}function Wb(r){let e=VN(),t=e.matches[e.matches.length-1];return t.route.id||He(!1),t.route.id}function HN(){var r;let e=b.useContext(Bb),t=WN(wu.UseRouteError),n=Wb(wu.UseRouteError);return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function GN(){let{router:r}=UN(Ub.UseNavigateStable),e=Wb(wu.UseNavigateStable),t=b.useRef(!1);return zb(()=>{t.current=!0}),b.useCallback(function(s,i){i===void 0&&(i={}),t.current&&(typeof s=="number"?r.navigate(s):r.navigate(s,Wa({fromRouteId:e},i)))},[r,e])}function YN(r,e){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function _v(r){let{to:e,replace:t,state:n,relative:s}=r;ll()||He(!1);let{future:i,static:o}=b.useContext(al),{matches:a}=b.useContext(ai),{pathname:l}=fh(),c=Wp(),u=Fb(e,Ib(a,i.v7_relativeSplatPath),l,s==="path"),d=JSON.stringify(u);return b.useEffect(()=>c(JSON.parse(d),{replace:t,state:n,relative:s}),[c,d,s,t,n]),null}function Dc(r){He(!1)}function qN(r){let{basename:e="/",children:t=null,location:n,navigationType:s=ns.Pop,navigator:i,static:o=!1,future:a}=r;ll()&&He(!1);let l=e.replace(/^\/*/,"/"),c=b.useMemo(()=>({basename:l,navigator:i,static:o,future:Wa({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof n=="string"&&(n=ko(n));let{pathname:u="/",search:d="",hash:f="",state:g=null,key:y="default"}=n,v=b.useMemo(()=>{let w=Lb(u,l);return w==null?null:{location:{pathname:w,search:d,hash:f,state:g,key:y},navigationType:s}},[l,u,d,f,g,y,s]);return v==null?null:b.createElement(al.Provider,{value:c},b.createElement(dh.Provider,{children:t,value:v}))}function XN(r){let{children:e,location:t}=r;return RN(Qf(e),t)}new Promise(()=>{});function Qf(r,e){e===void 0&&(e=[]);let t=[];return b.Children.forEach(r,(n,s)=>{if(!b.isValidElement(n))return;let i=[...e,s];if(n.type===b.Fragment){t.push.apply(t,Qf(n.props.children,i));return}n.type!==Dc&&He(!1),!n.props.index||!n.props.children||He(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Qf(n.props.children,i)),t.push(o)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const KN="6";try{window.__reactRouterVersion=KN}catch{}const QN="startTransition",Sv=Ag[QN];function JN(r){let{basename:e,children:t,future:n,window:s}=r,i=b.useRef();i.current==null&&(i.current=lN({window:s,v5Compat:!0}));let o=i.current,[a,l]=b.useState({action:o.action,location:o.location}),{v7_startTransition:c}=n||{},u=b.useCallback(d=>{c&&Sv?Sv(()=>l(d)):l(d)},[l,c]);return b.useLayoutEffect(()=>o.listen(u),[o,u]),b.useEffect(()=>YN(n),[n]),b.createElement(qN,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:n})}var Cv;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(Cv||(Cv={}));var kv;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(kv||(kv={}));const ZN="modulepreload",eA=function(r){return"/"+r},Tv={},cl=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(t.map(l=>{if(l=eA(l),l in Tv)return;Tv[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":ZN,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((f,g)=>{d.addEventListener("load",f),d.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},tA=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>cl(async()=>{const{default:n}=await Promise.resolve().then(()=>To);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)};class Vp extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class jv extends Vp{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Ev extends Vp{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Pv extends Vp{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Jf;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(Jf||(Jf={}));var rA=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};class nA{constructor(e,{headers:t={},customFetch:n,region:s=Jf.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=tA(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return rA(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o,signal:a}=t;let l={},{region:c}=t;c||(c=this.region);const u=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const f=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:d,signal:a}).catch(w=>{throw w.name==="AbortError"?w:new jv(w)}),g=f.headers.get("x-relay-error");if(g&&g==="true")throw new Ev(f);if(!f.ok)throw new Pv(f);let y=((n=f.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),v;return y==="application/json"?v=yield f.json():y==="application/octet-stream"?v=yield f.blob():y==="text/event-stream"?v=f:y==="multipart/form-data"?v=yield f.formData():v=yield f.text(),{data:v,error:null,response:f}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new jv(s)}:{data:null,error:s,response:s instanceof Pv||s instanceof Ev?s.context:void 0}}})}}var jt={},Hp={},gh={},ul={},ph={},mh={},sA=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},mo=sA();const iA=mo.fetch,Vb=mo.fetch.bind(mo),Hb=mo.Headers,oA=mo.Request,aA=mo.Response,To=Object.freeze(Object.defineProperty({__proto__:null,Headers:Hb,Request:oA,Response:aA,default:Vb,fetch:iA},Symbol.toStringTag,{value:"Module"})),lA=OC(To);var vh={};Object.defineProperty(vh,"__esModule",{value:!0});let cA=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};vh.default=cA;var Gb=nr&&nr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(mh,"__esModule",{value:!0});const uA=Gb(lA),hA=Gb(vh);let dA=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=uA.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l,c;let u=null,d=null,f=null,g=i.status,y=i.statusText;if(i.ok){if(this.method!=="HEAD"){const p=await i.text();p===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?d=p:d=JSON.parse(p))}const w=(a=this.headers.get("Prefer"))===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),m=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");w&&m&&m.length>1&&(f=parseInt(m[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,g=406,y="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const w=await i.text();try{u=JSON.parse(w),Array.isArray(u)&&i.status===404&&(d=[],u=null,g=200,y="OK")}catch{i.status===404&&w===""?(g=204,y="No Content"):u={message:w}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,g=200,y="OK"),u&&this.shouldThrowOnError)throw new hA.default(u)}return{error:u,data:d,count:f,status:g,statusText:y}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}};mh.default=dA;var fA=nr&&nr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ph,"__esModule",{value:!0});const gA=fA(mh);let pA=class extends gA.default{select(e){let t=!1;const n=(e??"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,t?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};ph.default=pA;var mA=nr&&nr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ul,"__esModule",{value:!0});const vA=mA(ph);let yA=class extends vA.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}};ul.default=yA;var xA=nr&&nr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(gh,"__esModule",{value:!0});const Yo=xA(ul);let wA=class{constructor(e,{headers:t={},schema:n,fetch:s}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=s}select(e,{head:t=!1,count:n}={}){const s=t?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new Yo.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:n=!0}={}){var s;const i="POST";if(t&&this.headers.append("Prefer",`count=${t}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Yo.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){var o;const a="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Yo.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:t}={}){var n;const s="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new Yo.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var t;const n="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Yo.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}};gh.default=wA;var Yb=nr&&nr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Hp,"__esModule",{value:!0});const bA=Yb(gh),_A=Yb(ul);let SA=class qb{constructor(e,{headers:t={},schema:n,fetch:s}={}){this.url=e,this.headers=new Headers(t),this.schemaName=n,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new bA.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new qb(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:s=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${e}`);let c;n||s?(a=n?"HEAD":"GET",Object.entries(t).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{l.searchParams.append(d,f)})):(a="POST",c=t);const u=new Headers(this.headers);return i&&u.set("Prefer",`count=${i}`),new _A.default({method:a,url:l,headers:u,schema:this.schemaName,body:c,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};Hp.default=SA;var jo=nr&&nr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(jt,"__esModule",{value:!0});jt.PostgrestError=jt.PostgrestBuilder=jt.PostgrestTransformBuilder=jt.PostgrestFilterBuilder=jt.PostgrestQueryBuilder=jt.PostgrestClient=void 0;const Xb=jo(Hp);jt.PostgrestClient=Xb.default;const Kb=jo(gh);jt.PostgrestQueryBuilder=Kb.default;const Qb=jo(ul);jt.PostgrestFilterBuilder=Qb.default;const Jb=jo(ph);jt.PostgrestTransformBuilder=Jb.default;const Zb=jo(mh);jt.PostgrestBuilder=Zb.default;const e_=jo(vh);jt.PostgrestError=e_.default;var CA=jt.default={PostgrestClient:Xb.default,PostgrestQueryBuilder:Kb.default,PostgrestFilterBuilder:Qb.default,PostgrestTransformBuilder:Jb.default,PostgrestBuilder:Zb.default,PostgrestError:e_.default};const{PostgrestClient:kA,PostgrestQueryBuilder:YL,PostgrestFilterBuilder:qL,PostgrestTransformBuilder:XL,PostgrestBuilder:KL,PostgrestError:QL}=CA;class TA{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const n=t.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const n=this.getWebSocketConstructor();return new n(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const jA="2.15.5",EA=`realtime-js/${jA}`,PA="1.0.0",Zf=1e4,OA=1e3,NA=100;var fa;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(fa||(fa={}));var qe;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(qe||(qe={}));var wr;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(wr||(wr={}));var eg;(function(r){r.websocket="websocket"})(eg||(eg={}));var Ds;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(Ds||(Ds={}));class AA{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const s=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(e.slice(o,o+s));o=o+s;const l=n.decode(e.slice(o,o+i));o=o+i;const c=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class t_{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var be;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(be||(be={}));const Ov=(r,e,t={})=>{var n;const s=(n=t.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,o)=>(i[o]=MA(o,r,e,s),i),{})},MA=(r,e,t,n)=>{const s=e.find(a=>a.name===r),i=s==null?void 0:s.type,o=t[r];return i&&!n.includes(i)?r_(i,o):tg(o)},r_=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return IA(e,t)}switch(r){case be.bool:return DA(e);case be.float4:case be.float8:case be.int2:case be.int4:case be.int8:case be.numeric:case be.oid:return RA(e);case be.json:case be.jsonb:return LA(e);case be.timestamp:return FA(e);case be.abstime:case be.date:case be.daterange:case be.int4range:case be.int8range:case be.money:case be.reltime:case be.text:case be.time:case be.timestamptz:case be.timetz:case be.tsrange:case be.tstzrange:return tg(e);default:return tg(e)}},tg=r=>r,DA=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},RA=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},LA=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},IA=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,n=r[t];if(r[0]==="{"&&n==="}"){let i;const o=r.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>r_(e,a))}return r},FA=r=>typeof r=="string"?r.replace(" ","T"):r,n_=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class wd{constructor(e,t,n={},s=Zf){this.channel=e,this.event=t,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Nv;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(Nv||(Nv={}));class ga{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ga.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=ga.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=ga.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,s){const i=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(i,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const d=i[c];if(d){const f=u.map(w=>w.presence_ref),g=d.map(w=>w.presence_ref),y=u.filter(w=>g.indexOf(w.presence_ref)<0),v=d.filter(w=>f.indexOf(w.presence_ref)<0);y.length>0&&(a[c]=y),v.length>0&&(l[c]=v)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},n,s)}static syncDiff(e,t,n,s){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const d=e[a].map(g=>g.presence_ref),f=u.filter(g=>d.indexOf(g.presence_ref)<0);e[a].unshift(...f)}n(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=c,s(a,c,l),c.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const s=e[n];return"metas"in s?t[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[n]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Av;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(Av||(Av={}));var pa;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(pa||(pa={}));var rn;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(rn||(rn={}));class Gp{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=qe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new wd(this,wr.join,this.params,this.timeout),this.rejoinTimer=new t_(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=qe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=qe.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=qe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=qe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=qe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(wr.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new ga(this),this.broadcastEndpointURL=n_(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==qe.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(g=>g.filter))!==null&&s!==void 0?s:[],u=!!this.bindings[pa.PRESENCE]&&this.bindings[pa.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,d={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(g=>e==null?void 0:e(rn.CHANNEL_ERROR,g)),this._onClose(()=>e==null?void 0:e(rn.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:g})=>{var y;if(this.socket.setAuth(),g===void 0){e==null||e(rn.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,w=(y=v==null?void 0:v.length)!==null&&y!==void 0?y:0,m=[];for(let p=0;p<w;p++){const x=v[p],{filter:{event:_,schema:S,table:C,filter:T}}=x,E=g&&g[p];if(E&&E.event===_&&E.schema===S&&E.table===C&&E.filter===T)m.push(Object.assign(Object.assign({},x),{id:E.id}));else{this.unsubscribe(),this.state=qe.errored,e==null||e(rn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,e&&e(rn.SUBSCRIBED);return}}).receive("error",g=>{this.state=qe.errored,e==null||e(rn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(rn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===qe.joined&&e===pa.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,n)}async send(e,t={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=qe.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(wr.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new wd(this,wr.leave,{},e),n.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=qe.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(i),o}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new wd(this,e,t,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>NA){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=wr;if(n&&[a,l,c,u].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,t,n);if(t&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(g=>{var y,v,w;return((y=g.filter)===null||y===void 0?void 0:y.event)==="*"||((w=(v=g.filter)===null||v===void 0?void 0:v.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(g=>g.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(g=>{var y,v,w,m,p,x;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const _=g.id,S=(y=g.filter)===null||y===void 0?void 0:y.event;return _&&((v=t.ids)===null||v===void 0?void 0:v.includes(_))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((w=t.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const _=(p=(m=g==null?void 0:g.filter)===null||m===void 0?void 0:m.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return _==="*"||_===((x=t==null?void 0:t.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof f=="object"&&"ids"in f){const y=f.data,{schema:v,table:w,commit_timestamp:m,type:p,errors:x}=y;f=Object.assign(Object.assign({},{schema:v,table:w,commit_timestamp:m,eventType:p,new:{},old:{},errors:x}),this._getPayloadRecords(y))}g.callback(f,n)})}_isClosed(){return this.state===qe.closed}_isJoined(){return this.state===qe.joined}_isJoining(){return this.state===qe.joining}_isLeaving(){return this.state===qe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Gp.isEqual(s.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(wr.close,{},e)}_onError(e){this._on(wr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=qe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Ov(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Ov(e.columns,e.old_record)),t}}const bd=()=>{},Vl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},$A=[1e3,2e3,5e3,1e4],BA=1e4,zA=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class UA{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Zf,this.transport=null,this.heartbeatIntervalMs=Vl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=bd,this.ref=0,this.reconnectTimer=null,this.logger=bd,this.conn=null,this.sendBuffer=[],this.serializer=new AA,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>cl(async()=>{const{default:a}=await Promise.resolve().then(()=>To);return{default:a}},void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((n=t==null?void 0:t.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${eg.websocket}`,this.httpEndpoint=n_(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=TA.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:PA}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case fa.connecting:return Ds.Connecting;case fa.open:return Ds.Open;case fa.closing:return Ds.Closing;default:return Ds.Closed}}isConnected(){return this.connectionState()===Ds.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new Gp(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:n,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(OA,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Vl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:o}=t,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${n} ${s} ${a}`.trim(),i),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(s,i,o)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(wr.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${n}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([zA],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(n=>{const s={access_token:t,version:EA};t&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(wr.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new t_(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Vl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,s,i,o,a,l,c,u;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:Zf,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Vl.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:bd,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:d=>$A[d-1]||BA,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(d,f)=>f(JSON.stringify(d)),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Yp extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ue(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class WA extends Yp{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class rg extends Yp{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var VA=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};const s_=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>cl(async()=>{const{default:n}=await Promise.resolve().then(()=>To);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},HA=()=>VA(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield cl(()=>Promise.resolve().then(()=>To),void 0)).Response:Response}),ng=r=>{if(Array.isArray(r))return r.map(t=>ng(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,n])=>{const s=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=ng(n)}),e},GA=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)};var li=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};const _d=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),YA=(r,e,t)=>li(void 0,void 0,void 0,function*(){const n=yield HA();r instanceof n&&!(t!=null&&t.noResolveJson)?r.json().then(s=>{const i=r.status||500,o=(s==null?void 0:s.statusCode)||i+"";e(new WA(_d(s),i,o))}).catch(s=>{e(new rg(_d(s),s))}):e(new rg(_d(r),r))}),qA=(r,e,t,n)=>{const s={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"||!n?s:(GA(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),t))};function hl(r,e,t,n,s,i){return li(this,void 0,void 0,function*(){return new Promise((o,a)=>{r(t,qA(e,n,s,i)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>YA(l,a,n))})})}function bu(r,e,t,n){return li(this,void 0,void 0,function*(){return hl(r,"GET",e,t,n)})}function Lr(r,e,t,n,s){return li(this,void 0,void 0,function*(){return hl(r,"POST",e,n,s,t)})}function sg(r,e,t,n,s){return li(this,void 0,void 0,function*(){return hl(r,"PUT",e,n,s,t)})}function XA(r,e,t,n){return li(this,void 0,void 0,function*(){return hl(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),n)})}function i_(r,e,t,n,s){return li(this,void 0,void 0,function*(){return hl(r,"DELETE",e,n,s,t)})}var KA=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};class QA{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return KA(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ue(e))return{data:null,error:e};throw e}})}}var JA=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};class ZA{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}asStream(){return new QA(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.execute().then(e,t)}execute(){return JA(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ue(e))return{data:null,error:e};throw e}})}}var St=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};const eM={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Mv={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class tM{constructor(e,t={},n,s){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=s_(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,n,s){return St(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Mv),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const c=this._removeEmptyFolders(t),u=this._getFinalPath(c),d=yield(e=="PUT"?sg:Lr)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ue(i))return{data:null,error:i};throw i}})}upload(e,t,n){return St(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,s){return St(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const c=Object.assign({upsert:Mv.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield sg(this.fetch,a.toString(),l,{headers:u});return{data:{path:i,fullPath:d.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ue(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return St(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=yield Lr(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new Yp("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ue(n))return{data:null,error:n};throw n}})}update(e,t,n){return St(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return St(this,void 0,void 0,function*(){try{return{data:yield Lr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ue(s))return{data:null,error:s};throw s}})}copy(e,t,n){return St(this,void 0,void 0,function*(){try{return{data:{path:(yield Lr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ue(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,n){return St(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield Lr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ue(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,n){return St(this,void 0,void 0,function*(){try{const s=yield Lr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ue(s))return{data:null,error:s};throw s}})}download(e,t){const s=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"",a=this._getFinalPath(e),l=()=>bu(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new ZA(l,this.shouldThrowOnError)}info(e){return St(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const n=yield bu(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:ng(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ue(n))return{data:null,error:n};throw n}})}exists(e){return St(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield XA(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ue(n)&&n instanceof rg){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),s=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&s.push(i);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${c}`)}}}remove(e){return St(this,void 0,void 0,function*(){try{return{data:yield i_(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ue(t))return{data:null,error:t};throw t}})}list(e,t,n){return St(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},eM),t),{prefix:e||""});return{data:yield Lr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ue(s))return{data:null,error:s};throw s}})}listV2(e,t){return St(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield Lr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},t),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ue(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const rM="2.12.2",nM={"X-Client-Info":`storage-js/${rM}`};var mi=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};class sM{constructor(e,t={},n,s){this.shouldThrowOnError=!1;const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},nM),t),this.fetch=s_(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return mi(this,void 0,void 0,function*(){try{return{data:yield bu(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ue(e))return{data:null,error:e};throw e}})}getBucket(e){return mi(this,void 0,void 0,function*(){try{return{data:yield bu(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ue(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return mi(this,void 0,void 0,function*(){try{return{data:yield Lr(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ue(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return mi(this,void 0,void 0,function*(){try{return{data:yield sg(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ue(n))return{data:null,error:n};throw n}})}emptyBucket(e){return mi(this,void 0,void 0,function*(){try{return{data:yield Lr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ue(t))return{data:null,error:t};throw t}})}deleteBucket(e){return mi(this,void 0,void 0,function*(){try{return{data:yield i_(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ue(t))return{data:null,error:t};throw t}})}}class iM extends sM{constructor(e,t={},n,s){super(e,t,n,s)}from(e){return new tM(this.url,this.headers,e,this.fetch)}}const oM="2.58.0";let Zo="";typeof Deno<"u"?Zo="deno":typeof document<"u"?Zo="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Zo="react-native":Zo="node";const aM={"X-Client-Info":`supabase-js-${Zo}/${oM}`},lM={headers:aM},cM={schema:"public"},uM={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},hM={};var dM=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};const fM=r=>{let e;return r?e=r:typeof fetch>"u"?e=Vb:e=fetch,(...t)=>e(...t)},gM=()=>typeof Headers>"u"?Hb:Headers,pM=(r,e,t)=>{const n=fM(t),s=gM();return(i,o)=>dM(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:r;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",r),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(i,Object.assign(Object.assign({},o),{headers:c}))})};var mM=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};function vM(r){return r.endsWith("/")?r:r+"/"}function yM(r,e){var t,n;const{db:s,auth:i,realtime:o,global:a}=r,{db:l,auth:c,realtime:u,global:d}=e,f={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(t=d==null?void 0:d.headers)!==null&&t!==void 0?t:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>mM(this,void 0,void 0,function*(){return""})};return r.accessToken?f.accessToken=r.accessToken:delete f.accessToken,f}function xM(r){const e=r==null?void 0:r.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(vM(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const o_="2.72.0",Si=30*1e3,ig=3,Sd=ig*Si,wM="http://localhost:9999",bM="supabase.auth.token",_M={"X-Client-Info":`gotrue-js/${o_}`},og="X-Supabase-Api-Version",a_={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},SM=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,CM=10*60*1e3;class qp extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function ne(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class kM extends qp{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function TM(r){return ne(r)&&r.name==="AuthApiError"}class l_ extends qp{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Cs extends qp{constructor(e,t,n,s){super(e,n,s),this.name=t,this.status=n}}class Un extends Cs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function jM(r){return ne(r)&&r.name==="AuthSessionMissingError"}class qo extends Cs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Hl extends Cs{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Gl extends Cs{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function EM(r){return ne(r)&&r.name==="AuthImplicitGrantRedirectError"}class Dv extends Cs{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ag extends Cs{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Cd(r){return ne(r)&&r.name==="AuthRetryableFetchError"}class Rv extends Cs{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class lg extends Cs{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const _u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Lv=` 	
\r=`.split(""),PM=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<Lv.length;e+=1)r[Lv[e].charCodeAt(0)]=-2;for(let e=0;e<_u.length;e+=1)r[_u[e].charCodeAt(0)]=e;return r})();function Iv(r,e,t){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(_u[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(_u[n]),e.queuedBits-=6}}function c_(r,e,t){const n=PM[r];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function Fv(r){const e=[],t=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{AM(o,n,t)};for(let o=0;o<r.length;o+=1)c_(r.charCodeAt(o),s,i);return e.join("")}function OM(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function NM(r,e){for(let t=0;t<r.length;t+=1){let n=r.charCodeAt(t);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(r.charCodeAt(t+1)-56320&65535|s)+65536,t+=1}OM(n,e)}}function AM(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let n=1;n<6;n+=1)if(!(r>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function MM(r){const e=[],t={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<r.length;s+=1)c_(r.charCodeAt(s),t,n);return new Uint8Array(e)}function DM(r){const e=[];return NM(r,t=>e.push(t)),new Uint8Array(e)}function RM(r){const e=[],t={queue:0,queuedBits:0},n=s=>{e.push(s)};return r.forEach(s=>Iv(s,t,n)),Iv(null,t,n),e.join("")}function LM(r){return Math.round(Date.now()/1e3)+r}function IM(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const Xt=()=>typeof window<"u"&&typeof document<"u",Es={tested:!1,writable:!1},u_=()=>{if(!Xt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Es.tested)return Es.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),Es.tested=!0,Es.writable=!0}catch{Es.tested=!0,Es.writable=!1}return Es.writable};function FM(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return t.searchParams.forEach((n,s)=>{e[s]=n}),e}const h_=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>cl(async()=>{const{default:n}=await Promise.resolve().then(()=>To);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},$M=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",Ci=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},Ps=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Fn=async(r,e)=>{await r.removeItem(e)};class yh{constructor(){this.promise=new yh.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}yh.promiseConstructor=Promise;function kd(r){const e=r.split(".");if(e.length!==3)throw new lg("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!SM.test(e[n]))throw new lg("JWT not in base64url format");return{header:JSON.parse(Fv(e[0])),payload:JSON.parse(Fv(e[1])),signature:MM(e[2]),raw:{header:e[0],payload:e[1]}}}async function BM(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function zM(r,e){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await r(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function UM(r){return("0"+r.toString(16)).substr(-2)}function WM(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let s="";for(let i=0;i<56;i++)s+=t.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,UM).join("")}async function VM(r){const t=new TextEncoder().encode(r),n=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function HM(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await VM(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function vi(r,e,t=!1){const n=WM();let s=n;t&&(s+="/PASSWORD_RECOVERY"),await Ci(r,`${e}-code-verifier`,s);const i=await HM(n);return[i,n===i?"plain":"s256"]}const GM=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function YM(r){const e=r.headers.get(og);if(!e||!e.match(GM))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function qM(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function XM(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const KM=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function yi(r){if(!KM.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Td(){const r={};return new Proxy(r,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const n=t.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function $v(r){return JSON.parse(JSON.stringify(r))}var QM=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t};const As=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),JM=[502,503,504];async function Bv(r){var e;if(!$M(r))throw new ag(As(r),0);if(JM.includes(r.status))throw new ag(As(r),r.status);let t;try{t=await r.json()}catch(i){throw new l_(As(i),i)}let n;const s=YM(r);if(s&&s.getTime()>=a_["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new Rv(As(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Un}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Rv(As(t),r.status,t.weak_password.reasons);throw new kM(As(t),r.status||500,n)}const ZM=(r,e,t,n)=>{const s={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),t))};async function ie(r,e,t,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[og]||(i[og]=a_["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await eD(r,e,t+a,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function eD(r,e,t,n,s,i){const o=ZM(e,n,s,i);let a;try{a=await r(t,Object.assign({},o))}catch(l){throw console.error(l),new ag(As(l),0)}if(a.ok||await Bv(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await Bv(l)}}function Dr(r){var e;let t=null;sD(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=LM(r.expires_in)));const n=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:n},error:null}}function zv(r){const e=Dr(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=r.weak_password),e}function Yn(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function tD(r){return{data:r,error:null}}function rD(r){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:s,verification_type:i}=r,o=QM(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:n,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function nD(r){return r}function sD(r){return r.access_token&&r.refresh_token&&r.expires_in}const jd=["global","local","others"];var iD=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t};class oD{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=h_(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=jd[0]){if(jd.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${jd.join(", ")}`);try{return await ie(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ne(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await ie(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Yn})}catch(n){if(ne(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=iD(e,["options"]),s=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await ie(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:rD,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(ne(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await ie(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Yn})}catch(t){if(ne(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await ie(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:nD});if(u.error)throw u.error;const d=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(y=>{const v=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(y.split(";")[1].split("=")[1]);c[`${w}Page`]=v}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(ne(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){yi(e);try{return await ie(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Yn})}catch(t){if(ne(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){yi(e);try{return await ie(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Yn})}catch(n){if(ne(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){yi(e);try{return await ie(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Yn})}catch(n){if(ne(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){yi(e.userId);try{const{data:t,error:n}=await ie(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:n}}catch(t){if(ne(t))return{data:null,error:t};throw t}}async _deleteFactor(e){yi(e.userId),yi(e.id);try{return{data:await ie(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(ne(t))return{data:null,error:t};throw t}}}function Uv(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function aD(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const xi={debug:!!(globalThis&&u_()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class d_ extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class lD extends d_{}async function cD(r,e,t){xi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),xi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){xi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,s.name);try{return await t()}finally{xi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,s.name)}}else{if(e===0)throw xi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new lD(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(xi.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function f_(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function uD(r){return parseInt(r,16)}function hD(r){const e=new TextEncoder().encode(r);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function dD(r){var e;const{chainId:t,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:u,uri:d,version:f}=r;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=r.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const g=f_(r.address),y=u?`${u}://${n}`:n,v=r.statement?`${r.statement}
`:"",w=`${y} wants you to sign in with your Ethereum account:
${g}

${v}`;let m=`URI: ${d}
Version: ${f}
Chain ID: ${t}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(m+=`
Expiration Time: ${s.toISOString()}`),a&&(m+=`
Not Before: ${a.toISOString()}`),l&&(m+=`
Request ID: ${l}`),c){let p=`
Resources:`;for(const x of c){if(!x||typeof x!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${x}`);p+=`
- ${x}`}m+=p}return`${w}
${m}`}aD();const fD={url:wM,storageKey:bM,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:_M,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Wv(r,e,t){return await t()}const wi={};class Va{constructor(e){var t,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Va.nextInstanceID,Va.nextInstanceID+=1,this.instanceID>0&&Xt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},fD),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new oD({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=h_(s.fetch),this.lock=s.lock||Wv,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Xt()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=cD:this.lock=Wv,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:u_()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Uv(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Uv(this.memoryStorage)),Xt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=wi[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){wi[this.storageKey]=Object.assign(Object.assign({},wi[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=wi[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){wi[this.storageKey]=Object.assign(Object.assign({},wi[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${o_}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=FM(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),Xt()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(t,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),EM(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return ne(t)?{error:t}:{error:new l_("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,s;try{const i=await ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Dr}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(ne(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,n,s;try{let i;if("email"in e){const{email:u,password:d,options:f}=e;let g=null,y=null;this.flowType==="pkce"&&([g,y]=await vi(this.storage,this.storageKey)),i=await ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:d,data:(t=f==null?void 0:f.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:g,code_challenge_method:y},xform:Dr})}else if("phone"in e){const{phone:u,password:d,options:f}=e;i=await ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Dr})}else throw new Hl("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(ne(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:o,options:a}=e;t=await ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:zv})}else if("phone"in e){const{phone:i,password:o,options:a}=e;t=await ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:zv})}else throw new Hl("You must provide either an email or phone number and a password");const{data:n,error:s}=t;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new qo}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(t){if(ne(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,n,s,i,o,a,l,c,u,d,f;let g,y;if("message"in e)g=e.message,y=e.signature;else{const{chain:v,wallet:w,statement:m,options:p}=e;let x;if(Xt())if(typeof w=="object")x=w;else{const A=window;if("ethereum"in A&&typeof A.ethereum=="object"&&"request"in A.ethereum&&typeof A.ethereum.request=="function")x=A.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(p!=null&&p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=w}const _=new URL((t=p==null?void 0:p.url)!==null&&t!==void 0?t:window.location.href),S=await x.request({method:"eth_requestAccounts"}).then(A=>A).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const C=f_(S[0]);let T=(n=p==null?void 0:p.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!T){const A=await x.request({method:"eth_chainId"});T=uD(A)}const E={domain:_.host,address:C,statement:m,uri:_.href,version:"1",chainId:T,nonce:(s=p==null?void 0:p.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=p==null?void 0:p.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=p==null?void 0:p.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=p==null?void 0:p.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=p==null?void 0:p.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(u=p==null?void 0:p.signInWithEthereum)===null||u===void 0?void 0:u.resources};g=dD(E),y=await x.request({method:"personal_sign",params:[hD(g),C]})}try{const{data:v,error:w}=await ie(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:y},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Dr});if(w)throw w;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new qo}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:w})}catch(v){if(ne(v))return{data:{user:null,session:null},error:v};throw v}}async signInWithSolana(e){var t,n,s,i,o,a,l,c,u,d,f,g;let y,v;if("message"in e)y=e.message,v=e.signature;else{const{chain:w,wallet:m,statement:p,options:x}=e;let _;if(Xt())if(typeof m=="object")_=m;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))_=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=m}const S=new URL((t=x==null?void 0:x.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in _&&_.signIn){const C=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),p?{statement:p}:null));let T;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")T=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)T=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)y=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),v=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${S.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(n=x==null?void 0:x.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=x==null?void 0:x.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((o=x==null?void 0:x.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((a=x==null?void 0:x.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((c=x==null?void 0:x.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((d=(u=x==null?void 0:x.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...x.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const C=await _.signMessage(new TextEncoder().encode(y),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=C}}try{const{data:w,error:m}=await ie(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:RM(v)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Dr});if(m)throw m;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new qo}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:m})}catch(w){if(ne(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(e){const t=await Ps(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(t??"").split("/");try{const{data:i,error:o}=await ie(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Dr});if(await Fn(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new qo}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(ne(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:n,token:s,access_token:i,nonce:o}=e,a=await ie(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Dr}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new qo}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(t){if(ne(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,s,i,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await vi(this.storage,this.storageKey));const{error:d}=await ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Hl("You must provide either an email or phone number.")}catch(a){if(ne(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,n;try{let s,i;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await ie(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Dr});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(ne(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,n,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await vi(this.storage,this.storageKey)),await ie(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:tD})}catch(i){if(ne(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new Un;const{error:s}=await ie(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(ne(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:i}=e,{error:o}=await ie(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:s,options:i}=e,{data:o,error:a}=await ie(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Hl("You must provide either an email or phone number and a type")}catch(t){if(ne(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Ps(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Sd:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await Ps(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Td()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Yn}):await this._useSession(async t=>{var n,s,i;const{data:o,error:a}=t;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Un}:await ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Yn})})}catch(t){if(ne(t))return jM(t)&&(await this._removeSession(),await Fn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Un;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await vi(this.storage,this.storageKey));const{data:c,error:u}=await ie(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Yn});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(ne(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Un;const t=Date.now()/1e3;let n=t,s=!0,i=null;const{payload:o}=kd(e.access_token);if(o.exp&&(n=o.exp,s=n<=t),s){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(ne(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Un;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(ne(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Xt())throw new Gl("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Gl(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Dv("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Gl("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Dv("No code detected.");const{data:p,error:x}=await this._exchangeCodeForSession(e.code);if(x)throw x;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!i||!a||!o||!c)throw new Gl("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let f=u+d;l&&(f=parseInt(l));const g=f-u;g*1e3<=Si&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${d}s`);const y=f-d;u-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,f,u):u-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,f,u);const{data:v,error:w}=await this._getUser(i);if(w)throw w;const m={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:f,refresh_token:o,token_type:c,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:e.type},error:null}}catch(n){if(ne(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Ps(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:s,error:i}=t;if(i)return{error:i};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(TM(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Fn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=IM(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,s;try{const{data:{session:i},error:o}=t;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await vi(this.storage,this.storageKey,!0));try{return await ie(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(ne(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(ne(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:s}=await this._useSession(async i=>{var o,a,l,c,u;const{data:d,error:f}=i;if(f)throw f;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ie(this.fetch,"GET",g,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return Xt()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(ne(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,s;const{data:i,error:o}=t;if(o)throw o;return await ie(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(ne(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await zM(async s=>(s>0&&await BM(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await ie(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Dr})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Cd(i)&&Date.now()+o-n<Si})}catch(n){if(this._debug(t,"error",n),ne(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Xt()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Ps(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Ps(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Ci(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Td()}else if(s&&!s.user&&!s.user){const o=await Ps(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Fn(this.storage,this.storageKey+"-user"),await Ci(this.storage,this.storageKey,s)):s.user=Td()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((t=s.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Sd;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Sd}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Cd(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new Un;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new yh;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Un;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),ne(i)){const o={session:null,error:i};return Cd(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),n=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&t.user&&await Ci(this.userStorage,this.storageKey+"-user",{user:t.user});const s=Object.assign({},t);delete s.user;const i=$v(s);await Ci(this.storage,this.storageKey,i)}else{const s=$v(t);await Ci(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Fn(this.storage,this.storageKey),await Fn(this.storage,this.storageKey+"-code-verifier"),await Fn(this.storage,this.storageKey+"-user"),this.userStorage&&await Fn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Xt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Si);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/Si);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Si}ms, refresh threshold is ${ig} ticks`),s<=ig&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof d_)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Xt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const s=[`provider=${encodeURIComponent(t)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await vi(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:s,error:i}=t;return i?{data:null,error:i}:await ie(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(ne(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,s;const{data:i,error:o}=t;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await ie(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(ne(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:a}=await ie(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(ne(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:i}=t;return i?{data:null,error:i}:await ie(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(ne(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(e==null?void 0:e.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=kd(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((n=(t=s.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(a=>a.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(a=>a.kid===e),n&&this.jwks_cached_at+CM>s)return n;const{data:i,error:o}=await ie(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(a=>a.kid===e),!n)?null:n}async getClaims(e,t={}){try{let n=e;if(!n){const{data:g,error:y}=await this.getSession();if(y||!g.session)return{data:null,error:y};n=g.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=kd(n);t!=null&&t.allowExpired||qM(i.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!c){const{error:g}=await this.getUser(n);if(g)throw g;return{data:{claims:i,header:s,signature:o},error:null}}const u=XM(s.alg),d=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,d,o,DM(`${a}.${l}`)))throw new lg("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(ne(n))return{data:null,error:n};throw n}}}Va.nextInstanceID=0;const gD=Va;class pD extends gD{constructor(e){super(e)}}var mD=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};class vD{constructor(e,t,n){var s,i,o;this.supabaseUrl=e,this.supabaseKey=t;const a=xM(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,c={db:cM,realtime:hM,auth:Object.assign(Object.assign({},uM),{storageKey:l}),global:lM},u=yM(n??{},c);this.storageKey=(s=u.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=pM(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new kA(new URL("rest/v1",a).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new iM(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new nA(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return mD(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,userStorage:i,storageKey:o,flowType:a,lock:l,debug:c},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new pD({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,userStorage:i,flowType:a,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new UA(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const yD=(r,e,t)=>new vD(r,e,t);function xD(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const e=r.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}xD()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const wD="https://wzynngxlkzfejpucmtim.supabase.co",bD="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind6eW5uZ3hsa3pmZWpwdWNtdGltIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkxMjc0MDgsImV4cCI6MjA3NDcwMzQwOH0.cAzh_E7YRu3RomF8-FGfoTYDkUaUGdEstJxTjBrfVB0",Te=yD(wD,bD,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),_D=rh("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-elder-base font-medium ring-offset-background transition-companionship focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-gentle",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",therapeutic:"bg-gradient-primary text-primary-foreground hover:shadow-therapeutic transition-therapeutic",calming:"bg-gradient-calm text-accent-foreground hover:scale-105 transition-gentle shadow-gentle",healing:"bg-gradient-healing text-foreground border border-primary/20 hover:shadow-gentle transition-therapeutic",companionship:"bg-gradient-primary text-primary-foreground hover:shadow-companionship transition-companionship shadow-gentle border border-primary/20",nurturing:"bg-gradient-warmth text-foreground hover:bg-secondary/90 shadow-gentle border border-secondary/30",comfort:"bg-accent text-accent-foreground hover:bg-accent/80 shadow-gentle text-elder-base font-semibold"},size:{default:"h-12 px-6 py-3 text-elder-base",sm:"h-10 rounded-md px-4 text-elder-sm",lg:"h-14 rounded-md px-8 text-elder-lg",icon:"h-12 w-12"}},defaultVariants:{variant:"default",size:"default"}}),$=b.forwardRef(({className:r,variant:e,size:t,asChild:n=!1,...s},i)=>{const o=n?lT:"button";return h.jsx(o,{className:Pe(_D({variant:e,size:t,className:r})),ref:i,...s})});$.displayName="Button";const SD="/assets/hero-wellness-BVeKaMe6.jpg",K=b.forwardRef(({className:r,...e},t)=>h.jsx("div",{ref:t,className:Pe("rounded-lg border bg-card text-card-foreground shadow-sm",r),...e}));K.displayName="Card";const Xp=b.forwardRef(({className:r,...e},t)=>h.jsx("div",{ref:t,className:Pe("flex flex-col space-y-1.5 p-6",r),...e}));Xp.displayName="CardHeader";const Kp=b.forwardRef(({className:r,...e},t)=>h.jsx("h3",{ref:t,className:Pe("text-2xl font-semibold leading-none tracking-tight",r),...e}));Kp.displayName="CardTitle";const Qp=b.forwardRef(({className:r,...e},t)=>h.jsx("p",{ref:t,className:Pe("text-sm text-muted-foreground",r),...e}));Qp.displayName="CardDescription";const Jp=b.forwardRef(({className:r,...e},t)=>h.jsx("div",{ref:t,className:Pe("p-6 pt-0",r),...e}));Jp.displayName="CardContent";const CD=b.forwardRef(({className:r,...e},t)=>h.jsx("div",{ref:t,className:Pe("flex items-center p-6 pt-0",r),...e}));CD.displayName="CardFooter";const ge=b.forwardRef(({className:r,type:e,...t},n)=>h.jsx("input",{type:e,className:Pe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:n,...t}));ge.displayName="Input";const kD=rh("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ke({className:r,variant:e,...t}){return h.jsx("div",{className:Pe(kD({variant:e}),r),...t})}const Vv=()=>{const[r,e]=b.useState([{id:"1",text:`Hello there, beautiful soul!  I'm Shalala, your AI companion, and I'm absolutely delighted to meet you! Think of me as your digital friend who genuinely cares about you and is always here to chat, laugh, and support you through anything life brings your way. 

I love getting to know people - their stories, dreams, worries, and joys. What brings you here today? I'm genuinely curious and excited to learn about you! `,sender:"bot",timestamp:new Date,mood:"excited",type:"greeting",suggestions:["Tell me about your day","I'm feeling a bit lonely","Share something you love","I need some encouragement"]}]),[t,n]=b.useState(""),[s,i]=b.useState(!1),[o,a]=b.useState(""),l=b.useRef(null),{toast:c}=Ss(),u=()=>{var p;(p=l.current)==null||p.scrollIntoView({behavior:"smooth"})};b.useEffect(()=>{u()},[r]);const d=async p=>{const x=p.toLowerCase();if((x.includes("i'm ")||x.includes("my name is")||x.includes("i am "))&&!o){const S=p.match(/(?:i'm|my name is|i am)\s+([a-zA-Z]+)/i);if(S&&S[1]&&S[1].length>1&&S[1].length<20){const C=S[1];a(C)}}const _=x.includes("news")||x.includes("today")||x.includes("latest")||x.includes("what's happening")||x.includes("current")||x.includes("recent")||x.includes("youtube")||x.includes("google")||x.includes("search");try{const S=r.map(B=>({role:B.sender==="user"?"user":"assistant",content:B.text})),{data:C,error:T}=await Te.functions.invoke("chat-ai",{body:{messages:[...S,{role:"user",content:p}],searchQuery:_?p:null}});if(T)throw T;if(C!=null&&C.error)throw new Error(C.error);const E=C.response;let A="caring";x.includes("sad")||x.includes("depressed")?A="supportive":x.includes("worried")||x.includes("anxious")?A="concerned":x.includes("happy")||x.includes("great")?A="excited":(x.includes("help")||x.includes("support"))&&(A="encouraging");const D=f(x);return{text:E,mood:A,suggestions:D,type:"text"}}catch(S){return console.error("Error getting AI response:",S),{text:`${o?o+", ":""}I'm having a little trouble connecting right now, but I'm still here for you!  Would you like to tell me more about what's on your mind?`,mood:"caring",suggestions:["Tell me more","How are you feeling?","What's on your mind?"],type:"text"}}},f=p=>p.includes("lonely")||p.includes("alone")?["Tell me more","Share a memory","What helps?","Talk about hobbies"]:p.includes("sad")||p.includes("down")?["What's bothering you?","Share your feelings","Need encouragement","Tell me more"]:p.includes("family")||p.includes("friends")?["Tell me about them","Share a story","Favorite memory","What you love"]:p.includes("happy")||p.includes("good")?["Tell me more!","What happened?","Share the joy","Keep talking"]:["Continue","Tell me more","What else?","Share your thoughts"],g=async()=>{if(!t.trim())return;const p={id:Date.now().toString(),text:t,sender:"user",timestamp:new Date};e(_=>[..._,p]);const x=t;n(""),i(!0);try{const _=await d(x);setTimeout(()=>{const S={id:(Date.now()+1).toString(),text:_.text,sender:"bot",timestamp:new Date,mood:_.mood,suggestions:_.suggestions,type:_.type};e(C=>[...C,S]),i(!1),x.toLowerCase().includes("lonely")||x.toLowerCase().includes("sad")?c({title:" You're not alone",description:"I'm here with you. Take care of yourself today."}):x.toLowerCase().includes("happy")||x.toLowerCase().includes("good")?c({title:" Wonderful!",description:"Your joy brightens my day too!"}):c({title:" Thanks for sharing",description:"I love getting to know you better!"})},800)}catch(_){console.error("Error sending message:",_),i(!1),c({title:"Oops!",description:"I had a little trouble responding. Please try again! ",variant:"destructive",duration:3e3})}},y=p=>{n(p)},v=p=>{p.key==="Enter"&&!p.shiftKey&&(p.preventDefault(),g())},w=p=>{switch(p){case"supportive":return h.jsx(Or,{className:"w-4 h-4 text-pink-500"});case"concerned":return h.jsx(cj,{className:"w-4 h-4 text-blue-500"});case"encouraging":return h.jsx(Oj,{className:"w-4 h-4 text-green-500"});case"excited":return h.jsx(Ia,{className:"w-4 h-4 text-purple-500"});case"caring":return h.jsx(Or,{className:"w-4 h-4 text-red-500"});default:return h.jsx(M1,{className:"w-4 h-4 text-primary"})}},m=p=>{switch(p){case"supportive":return"from-pink-400 to-purple-400";case"concerned":return"from-blue-400 to-cyan-400";case"encouraging":return"from-green-400 to-emerald-400";case"excited":return"from-purple-400 to-pink-400";case"caring":return"from-red-400 to-pink-400";default:return"from-primary to-primary-glow"}};return h.jsx("div",{className:"max-w-4xl mx-auto",children:h.jsxs(K,{className:"shadow-companionship border-primary/10 overflow-hidden",children:[h.jsxs("div",{className:"h-[500px] overflow-y-auto p-6 space-y-6 bg-gradient-to-b from-background to-muted/30",children:[r.map(p=>h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:`flex gap-4 ${p.sender==="user"?"justify-end":"justify-start"}`,children:[p.sender==="bot"&&h.jsx("div",{className:`w-12 h-12 rounded-full bg-gradient-to-br ${m(p.mood)} flex items-center justify-center flex-shrink-0 shadow-gentle`,children:w(p.mood)}),h.jsxs("div",{className:`max-w-md lg:max-w-lg px-6 py-4 rounded-2xl transition-all duration-300 ${p.sender==="user"?"bg-gradient-primary text-primary-foreground shadow-gentle":"bg-card border border-primary/20 shadow-gentle hover:shadow-companionship"}`,children:[h.jsx("p",{className:"text-elder-base leading-relaxed whitespace-pre-line",children:p.text}),h.jsxs("div",{className:"flex items-center justify-between mt-3",children:[h.jsx("span",{className:"text-elder-sm opacity-70",children:p.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),p.mood&&p.sender==="bot"&&h.jsx(Ke,{variant:"outline",className:"text-xs",children:p.mood})]})]}),p.sender==="user"&&h.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-accent to-accent-foreground flex items-center justify-center flex-shrink-0 shadow-gentle",children:h.jsx(L1,{className:"w-6 h-6 text-accent-foreground"})})]}),p.suggestions&&p.sender==="bot"&&h.jsxs("div",{className:"ml-16 space-y-2",children:[h.jsx("p",{className:"text-elder-sm text-muted-foreground",children:" Quick responses:"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:p.suggestions.map((x,_)=>h.jsx($,{variant:"outline",size:"sm",onClick:()=>y(x),className:"text-xs hover:bg-primary/10 transition-colors",children:x},_))})]})]},p.id)),s&&h.jsxs("div",{className:"flex gap-4 justify-start",children:[h.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-primary flex items-center justify-center shadow-gentle",children:h.jsx(ij,{className:"w-6 h-6 text-primary-foreground"})}),h.jsx("div",{className:"bg-card border border-primary/20 rounded-2xl px-6 py-4 shadow-gentle",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("div",{className:"flex gap-1",children:[h.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-bounce"}),h.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),h.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),h.jsx("span",{className:"text-elder-sm text-muted-foreground",children:"Shalala is typing..."})]})})]}),h.jsx("div",{ref:l})]}),h.jsxs("div",{className:"p-6 border-t border-border bg-gradient-companionship",children:[h.jsxs("div",{className:"flex gap-3",children:[h.jsx(ge,{value:t,onChange:p=>n(p.target.value),onKeyPress:v,placeholder:`${o?`Hey ${o}, `:""}tell me what's on your mind...`,className:"flex-1 transition-gentle focus:shadow-gentle text-elder-base h-14 px-6 text-lg rounded-2xl border-primary/20"}),h.jsx($,{onClick:g,variant:"default",size:"icon",disabled:!t.trim()||s,className:"h-14 w-14 rounded-2xl bg-gradient-primary hover:scale-105 transition-all",children:h.jsx(Cj,{className:"w-6 h-6"})})]}),h.jsxs("div",{className:"flex items-center justify-between mt-4",children:[h.jsx("p",{className:"text-elder-sm text-muted-foreground",children:" I'm here to listen and chat with you anytime"}),h.jsx("p",{className:"text-elder-sm text-muted-foreground",children:"Powered by Shalala AI"})]})]})]})})},xh=b.forwardRef(({className:r,...e},t)=>h.jsx("textarea",{className:Pe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...e}));xh.displayName="Textarea";const Hv=[{value:1,label:"Very Low",color:"text-destructive",icon:""},{value:2,label:"Low",color:"text-orange-500",icon:""},{value:3,label:"Neutral",color:"text-muted-foreground",icon:""},{value:4,label:"Good",color:"text-primary",icon:""},{value:5,label:"Excellent",color:"text-green-500",icon:""}],TD=["Exercise","Meditation","Social Time","Work","Hobbies","Rest","Nature","Reading","Music","Cooking"],jD=()=>{const[r,e]=b.useState(null),[t,n]=b.useState(""),[s,i]=b.useState([]),[o,a]=b.useState([{id:"1",date:new Date(Date.now()-864e5),mood:3,notes:"Feeling okay today, had some challenges at work but managed well.",activities:["Work","Exercise","Reading"]},{id:"2",date:new Date(Date.now()-2*864e5),mood:4,notes:"Good day! Spent time in nature and felt refreshed.",activities:["Nature","Exercise","Social Time"]}]),{toast:l}=Ss(),c=f=>{i(g=>g.includes(f)?g.filter(y=>y!==f):[...g,f])},u=()=>{if(r===null){l({title:"Please select your mood",description:"Choose how you're feeling today before saving.",variant:"destructive"});return}const f={id:Date.now().toString(),date:new Date,mood:r,notes:t,activities:s};a(g=>[f,...g]),e(null),n(""),i([]),l({title:"Mood entry saved! ",description:"Your wellness journey is being tracked. Keep up the great work!"})},d=()=>o.length===0?0:(o.reduce((g,y)=>g+y.mood,0)/o.length).toFixed(1);return h.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[h.jsxs(K,{className:"p-6 shadow-therapeutic border-primary/10",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[h.jsx(Xs,{className:"w-5 h-5 text-primary"}),h.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Today's Mood Check-in"})]}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-medium text-foreground mb-3",children:"How are you feeling today?"}),h.jsx("div",{className:"grid grid-cols-5 gap-3",children:Hv.map(f=>h.jsxs($,{variant:r===f.value?"therapeutic":"healing",className:"h-20 flex-col gap-1 transition-therapeutic",onClick:()=>e(f.value),children:[h.jsx("span",{className:"text-2xl",children:f.icon}),h.jsx("span",{className:"text-xs",children:f.label})]},f.value))})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-medium text-foreground mb-3",children:"What activities did you do today?"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:TD.map(f=>h.jsx($,{variant:s.includes(f)?"calming":"outline",size:"sm",onClick:()=>c(f),className:"transition-gentle",children:f},f))})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-medium text-foreground mb-3",children:"Any additional thoughts or reflections?"}),h.jsx(xh,{value:t,onChange:f=>n(f.target.value),placeholder:"Reflect on your day, challenges you faced, or things you're grateful for...",className:"min-h-24 transition-gentle focus:shadow-gentle"})]}),h.jsxs($,{onClick:u,variant:"therapeutic",className:"w-full",children:[h.jsx(D1,{className:"w-4 h-4 mr-2"}),"Save Today's Entry"]})]})]}),h.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[h.jsxs(K,{className:"p-6 shadow-gentle border-primary/10",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[h.jsx(R1,{className:"w-5 h-5 text-primary"}),h.jsx("h3",{className:"font-semibold text-foreground",children:"Wellness Insights"})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex justify-between items-center p-3 bg-gradient-healing rounded-lg",children:[h.jsx("span",{className:"text-sm text-foreground",children:"Average Mood"}),h.jsxs("span",{className:"font-bold text-primary",children:[d(),"/5"]})]}),h.jsxs("div",{className:"flex justify-between items-center p-3 bg-gradient-calm rounded-lg",children:[h.jsx("span",{className:"text-sm text-accent-foreground",children:"Entries This Week"}),h.jsx("span",{className:"font-bold text-accent-foreground",children:o.length})]}),h.jsxs("div",{className:"flex justify-between items-center p-3 bg-accent/30 rounded-lg",children:[h.jsx("span",{className:"text-sm text-accent-foreground",children:"Most Common Activity"}),h.jsx("span",{className:"font-bold text-accent-foreground",children:"Exercise"})]})]})]}),h.jsxs(K,{className:"p-6 shadow-gentle border-primary/10",children:[h.jsx("h3",{className:"font-semibold text-foreground mb-4",children:"Recent Entries"}),h.jsx("div",{className:"space-y-3",children:o.slice(0,3).map(f=>{const g=Hv.find(y=>y.value===f.mood);return h.jsxs("div",{className:"p-3 bg-gradient-healing rounded-lg",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx("span",{className:"text-lg",children:g==null?void 0:g.icon}),h.jsx("span",{className:"text-sm font-medium text-foreground",children:f.date.toLocaleDateString()}),h.jsx("span",{className:`text-sm ${g==null?void 0:g.color}`,children:g==null?void 0:g.label})]}),f.notes&&h.jsx("p",{className:"text-xs text-muted-foreground truncate",children:f.notes})]},f.id)})})]})]})]})},ED=()=>{const[r,e]=b.useState({totalContacts:0,emergencyContacts:0,totalGamesPlayed:0,totalJournalEntries:0,recentEmergencies:0,emergencySystemActive:!1});Ss(),b.useEffect(()=>{t()},[]);const t=async()=>{try{const{data:{user:n}}=await Te.auth.getUser();if(!n)return;const{data:s}=await Te.from("contacts").select("*").eq("user_id",n.id),i=(s==null?void 0:s.filter(d=>d.emergency_contact).length)||0,{data:o}=await Te.from("game_scores").select("*").eq("user_id",n.id),{data:a}=await Te.from("journal_entries").select("*").eq("user_id",n.id),l=new Date;l.setDate(l.getDate()-30);const{data:c}=await Te.from("emergency_logs").select("*").eq("user_id",n.id).gte("created_at",l.toISOString()),{data:u}=await Te.from("emergency_settings").select("*").eq("user_id",n.id).single();e({totalContacts:(s==null?void 0:s.length)||0,emergencyContacts:i,totalGamesPlayed:(o==null?void 0:o.length)||0,totalJournalEntries:(a==null?void 0:a.length)||0,recentEmergencies:(c==null?void 0:c.length)||0,emergencySystemActive:u!==null})}catch(n){console.error("Error loading dashboard:",n)}};return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"text-center",children:[h.jsxs("h2",{className:"text-elder-3xl font-bold text-foreground mb-2 flex items-center justify-center gap-3",children:[h.jsx(tj,{className:"w-8 h-8 text-primary"}),"Your Wellness Dashboard"]}),h.jsx("p",{className:"text-elder-lg text-muted-foreground",children:"Track your activities, safety, and well-being all in one place"})]}),h.jsxs(K,{className:"p-6 shadow-companionship border-2 border-primary/20",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-red-400 to-pink-400 flex items-center justify-center",children:h.jsx(da,{className:"w-6 h-6 text-white"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-elder-xl font-semibold text-foreground",children:"Emergency Detection System"}),h.jsx("p",{className:"text-elder-base text-muted-foreground",children:"AI-powered camera monitoring for your safety"})]})]}),h.jsx(Ke,{variant:r.emergencySystemActive?"default":"secondary",className:"text-elder-base",children:r.emergencySystemActive?h.jsxs(h.Fragment,{children:[h.jsx(fr,{className:"w-4 h-4 mr-1"})," Configured"]}):h.jsxs(h.Fragment,{children:[h.jsx(Y0,{className:"w-4 h-4 mr-1"})," Setup Required"]})})]}),h.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[h.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx(oj,{className:"w-5 h-5 text-primary"}),h.jsx("span",{className:"text-elder-base font-medium",children:"Camera Monitoring"})]}),h.jsx("p",{className:"text-elder-sm text-muted-foreground",children:"AI analyzes video frames every 5 seconds"})]}),h.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx(rs,{className:"w-5 h-5 text-primary"}),h.jsx("span",{className:"text-elder-base font-medium",children:"Automatic Alerts"})]}),h.jsxs("p",{className:"text-elder-sm text-muted-foreground",children:["SMS + Voice calls to ",r.emergencyContacts," contacts"]})]}),h.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx(pj,{className:"w-5 h-5 text-primary"}),h.jsx("span",{className:"text-elder-base font-medium",children:"GPS Location"})]}),h.jsx("p",{className:"text-elder-sm text-muted-foreground",children:"Shares precise location + photo with contacts"})]})]}),r.recentEmergencies>0&&h.jsx("div",{className:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:h.jsxs("div",{className:"flex items-center gap-2 text-yellow-800 dark:text-yellow-200",children:[h.jsx(nh,{className:"w-4 h-4"}),h.jsxs("span",{className:"text-elder-sm font-medium",children:[r.recentEmergencies," emergency alert",r.recentEmergencies!==1?"s":""," in the last 30 days"]})]})})]}),h.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[h.jsxs(K,{className:"p-6 shadow-gentle hover:shadow-companionship transition-all",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsx(I1,{className:"w-8 h-8 text-blue-500"}),h.jsx(Ke,{variant:"secondary",className:"text-elder-lg font-bold",children:r.totalContacts})]}),h.jsx("h4",{className:"text-elder-base font-semibold text-foreground mb-1",children:"Total Contacts"}),h.jsxs("p",{className:"text-elder-sm text-muted-foreground",children:[r.emergencyContacts," emergency contacts"]})]}),h.jsxs(K,{className:"p-6 shadow-gentle hover:shadow-companionship transition-all",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsx(N1,{className:"w-8 h-8 text-purple-500"}),h.jsx(Ke,{variant:"secondary",className:"text-elder-lg font-bold",children:r.totalGamesPlayed})]}),h.jsx("h4",{className:"text-elder-base font-semibold text-foreground mb-1",children:"Games Played"}),h.jsx("p",{className:"text-elder-sm text-muted-foreground",children:"Keep your mind sharp!"})]}),h.jsxs(K,{className:"p-6 shadow-gentle hover:shadow-companionship transition-all",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsx(Xs,{className:"w-8 h-8 text-green-500"}),h.jsx(Ke,{variant:"secondary",className:"text-elder-lg font-bold",children:r.totalJournalEntries})]}),h.jsx("h4",{className:"text-elder-base font-semibold text-foreground mb-1",children:"Journal Entries"}),h.jsx("p",{className:"text-elder-sm text-muted-foreground",children:"Your thoughts & memories"})]}),h.jsxs(K,{className:"p-6 shadow-gentle hover:shadow-companionship transition-all",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsx(Or,{className:"w-8 h-8 text-pink-500"}),h.jsx(Ke,{variant:"secondary",className:"text-elder-lg font-bold",children:"24/7"})]}),h.jsx("h4",{className:"text-elder-base font-semibold text-foreground mb-1",children:"AI Companion"}),h.jsx("p",{className:"text-elder-sm text-muted-foreground",children:"Always here for you"})]})]}),h.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[h.jsxs(K,{className:"p-6 shadow-gentle",children:[h.jsxs("h3",{className:"text-elder-xl font-semibold text-foreground mb-4 flex items-center gap-2",children:[h.jsx(da,{className:"w-6 h-6 text-primary"}),"Safety Features"]}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(fr,{className:"w-5 h-5 text-green-500 mt-0.5"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-elder-base font-medium",children:"AI Emergency Detection"}),h.jsx("p",{className:"text-elder-sm text-muted-foreground",children:"Automatic fall and distress detection via camera"})]})]}),h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(fr,{className:"w-5 h-5 text-green-500 mt-0.5"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-elder-base font-medium",children:"Instant Notifications"}),h.jsx("p",{className:"text-elder-sm text-muted-foreground",children:"SMS + voice calls to family members"})]})]}),h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(fr,{className:"w-5 h-5 text-green-500 mt-0.5"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-elder-base font-medium",children:"GPS + Photo Sharing"}),h.jsx("p",{className:"text-elder-sm text-muted-foreground",children:"Real-time location and visual context"})]})]}),h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(fr,{className:"w-5 h-5 text-green-500 mt-0.5"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-elder-base font-medium",children:"Countdown Cancellation"}),h.jsx("p",{className:"text-elder-sm text-muted-foreground",children:"10-second window to prevent false alarms"})]})]})]})]}),h.jsxs(K,{className:"p-6 shadow-gentle",children:[h.jsxs("h3",{className:"text-elder-xl font-semibold text-foreground mb-4 flex items-center gap-2",children:[h.jsx(R1,{className:"w-6 h-6 text-primary"}),"Wellness Activities"]}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(fr,{className:"w-5 h-5 text-green-500 mt-0.5"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-elder-base font-medium",children:"AI Chatbot Companion"}),h.jsx("p",{className:"text-elder-sm text-muted-foreground",children:"Empathetic conversations powered by Google Gemini"})]})]}),h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(fr,{className:"w-5 h-5 text-green-500 mt-0.5"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-elder-base font-medium",children:"Brain Training Games"}),h.jsx("p",{className:"text-elder-sm text-muted-foreground",children:"Temple Run, Candy Crush, memory challenges"})]})]}),h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(fr,{className:"w-5 h-5 text-green-500 mt-0.5"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-elder-base font-medium",children:"Creative Activities"}),h.jsx("p",{className:"text-elder-sm text-muted-foreground",children:"Doodle, journaling, music, and more"})]})]}),h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(fr,{className:"w-5 h-5 text-green-500 mt-0.5"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-elder-base font-medium",children:"Mood Tracking"}),h.jsx("p",{className:"text-elder-sm text-muted-foreground",children:"Monitor your emotional well-being"})]})]})]})]})]}),!r.emergencySystemActive&&h.jsx(K,{className:"p-6 shadow-companionship bg-gradient-to-br from-primary/10 to-primary/5 border-primary/20",children:h.jsxs("div",{className:"text-center",children:[h.jsx(Y0,{className:"w-12 h-12 text-primary mx-auto mb-3"}),h.jsx("h3",{className:"text-elder-xl font-semibold text-foreground mb-2",children:"Set Up Your Emergency System"}),h.jsx("p",{className:"text-elder-base text-muted-foreground mb-4",children:"Add emergency contacts and configure your safety settings for peace of mind"}),h.jsxs($,{variant:"default",size:"lg",className:"text-elder-base",children:[h.jsx(da,{className:"w-5 h-5 mr-2"}),"Go to Settings"]})]})})]})},PD=()=>{const r=Wp(),[e,t]=b.useState(!1),[n,s]=b.useState({full_name:"",email:""});b.useEffect(()=>{i()},[]);const i=async()=>{try{const{data:{user:l}}=await Te.auth.getUser();if(!l)return;const{data:c,error:u}=await Te.from("profiles").select("*").eq("id",l.id).single();if(u)throw u;s({full_name:c.full_name||"",email:c.email||l.email||""})}catch(l){console.error("Error loading profile:",l)}},o=async()=>{t(!0);try{const{data:{user:l}}=await Te.auth.getUser();if(!l)return;const{error:c}=await Te.from("profiles").update({full_name:n.full_name,updated_at:new Date().toISOString()}).eq("id",l.id);if(c)throw c;J.success("Profile updated successfully!")}catch(l){console.error("Error updating profile:",l),J.error("Failed to update profile")}finally{t(!1)}},a=async()=>{try{await Te.auth.signOut(),J.success("Logged out successfully"),r("/auth")}catch(l){console.error("Error logging out:",l),J.error("Failed to log out")}};return h.jsx("div",{className:"max-w-2xl mx-auto space-y-6",children:h.jsxs(K,{className:"p-6 shadow-gentle",children:[h.jsx("h2",{className:"text-2xl font-bold text-foreground mb-6",children:"Account Settings"}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Full Name"}),h.jsxs("div",{className:"relative",children:[h.jsx(L1,{className:"absolute left-3 top-3 w-5 h-5 text-muted-foreground"}),h.jsx(ge,{type:"text",placeholder:"Your name",value:n.full_name,onChange:l=>s({...n,full_name:l.target.value}),className:"pl-10"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Email"}),h.jsxs("div",{className:"relative",children:[h.jsx(zf,{className:"absolute left-3 top-3 w-5 h-5 text-muted-foreground"}),h.jsx(ge,{type:"email",value:n.email,disabled:!0,className:"pl-10 bg-muted"})]}),h.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Email cannot be changed"})]}),h.jsxs("div",{className:"flex gap-4 pt-4",children:[h.jsxs($,{onClick:o,variant:"companionship",disabled:e,className:"flex-1",children:[h.jsx(D1,{className:"w-4 h-4 mr-2"}),e?"Saving...":"Save Changes"]}),h.jsxs($,{onClick:a,variant:"destructive",className:"flex-1",children:[h.jsx(A1,{className:"w-4 h-4 mr-2"}),"Log Out"]})]})]})]})})};var Zp="Progress",em=100,[OD,JL]=Tn(Zp),[ND,AD]=OD(Zp),g_=b.forwardRef((r,e)=>{const{__scopeProgress:t,value:n=null,max:s,getValueLabel:i=MD,...o}=r;(s||s===0)&&!Gv(s)&&console.error(DD(`${s}`,"Progress"));const a=Gv(s)?s:em;n!==null&&!Yv(n,a)&&console.error(RD(`${n}`,"Progress"));const l=Yv(n,a)?n:null,c=Su(l)?i(l,a):void 0;return h.jsx(ND,{scope:t,value:l,max:a,children:h.jsx(ve.div,{"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":Su(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":v_(l,a),"data-value":l??void 0,"data-max":a,...o,ref:e})})});g_.displayName=Zp;var p_="ProgressIndicator",m_=b.forwardRef((r,e)=>{const{__scopeProgress:t,...n}=r,s=AD(p_,t);return h.jsx(ve.div,{"data-state":v_(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...n,ref:e})});m_.displayName=p_;function MD(r,e){return`${Math.round(r/e*100)}%`}function v_(r,e){return r==null?"indeterminate":r===e?"complete":"loading"}function Su(r){return typeof r=="number"}function Gv(r){return Su(r)&&!isNaN(r)&&r>0}function Yv(r,e){return Su(r)&&!isNaN(r)&&r<=e&&r>=0}function DD(r,e){return`Invalid prop \`max\` of value \`${r}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${em}\`.`}function RD(r,e){return`Invalid prop \`value\` of value \`${r}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${em} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var y_=g_,LD=m_;const x_=b.forwardRef(({className:r,value:e,...t},n)=>h.jsx(y_,{ref:n,className:Pe("relative h-4 w-full overflow-hidden rounded-full bg-secondary",r),...t,children:h.jsx(LD,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));x_.displayName=y_.displayName;const Yl=[{id:"thought-challenging",title:"Thought Challenging",description:"Identify and reframe negative thought patterns using CBT techniques.",type:"cbt",duration:10,steps:["Identify the negative thought that's bothering you","Ask yourself: Is this thought realistic? What evidence supports it?","Consider alternative, more balanced perspectives","Replace the thought with a more helpful, realistic one","Notice how this new thought makes you feel"]},{id:"box-breathing",title:"Box Breathing",description:"A calming breathing technique to reduce anxiety and stress.",type:"breathing",duration:5,steps:["Sit comfortably with your back straight","Breathe in through your nose for 4 counts","Hold your breath for 4 counts","Exhale through your mouth for 4 counts","Hold empty for 4 counts, then repeat"]},{id:"body-scan",title:"Body Scan Meditation",description:"Progressive relaxation technique to release tension and increase awareness.",type:"mindfulness",duration:15,steps:["Lie down or sit comfortably","Close your eyes and take three deep breaths","Start at the top of your head, notice any sensations","Slowly move your attention down through your body","Spend 30 seconds on each body part","Release any tension you notice along the way"]},{id:"five-four-three-two-one",title:"5-4-3-2-1 Grounding",description:"Use your senses to ground yourself in the present moment.",type:"grounding",duration:3,steps:["Name 5 things you can see around you","Name 4 things you can touch","Name 3 things you can hear","Name 2 things you can smell","Name 1 thing you can taste"]}],ID=()=>{const[r,e]=b.useState(null),[t,n]=b.useState(0),[s,i]=b.useState(!1),[o,a]=b.useState(0),{toast:l}=Ss(),c=m=>{switch(m){case"cbt":return"bg-primary/20 text-primary";case"breathing":return"bg-green-500/20 text-green-700";case"mindfulness":return"bg-purple-500/20 text-purple-700";case"grounding":return"bg-orange-500/20 text-orange-700"}},u=m=>{switch(m){case"cbt":return"";case"breathing":return"";case"mindfulness":return"";case"grounding":return""}},d=m=>{e(m),n(0),a(m.duration*60),i(!1)},f=()=>{if(!s&&o>0){const m=setInterval(()=>{a(p=>p<=1?(clearInterval(m),i(!1),l({title:"Exercise Complete! ",description:"Great job completing your wellness exercise. How do you feel?"}),0):p-1)},1e3)}i(!s)},g=()=>{e(null),n(0),i(!1),a(0)},y=()=>{r&&t<r.steps.length-1&&n(t+1)},v=()=>{t>0&&n(t-1)},w=m=>{const p=Math.floor(m/60),x=m%60;return`${p}:${x.toString().padStart(2,"0")}`};return r?h.jsx("div",{className:"max-w-3xl mx-auto",children:h.jsxs(K,{className:"p-8 shadow-therapeutic border-primary/10",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-primary flex items-center justify-center text-2xl",children:u(r.type)}),h.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:r.title}),h.jsx("p",{className:"text-muted-foreground",children:r.description})]}),h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("div",{className:"text-4xl font-bold text-primary mb-2",children:w(o)}),h.jsxs("div",{className:"flex justify-center gap-2",children:[h.jsxs($,{variant:"therapeutic",size:"sm",onClick:f,disabled:o===0,children:[s?h.jsx(yj,{className:"w-4 h-4"}):h.jsx(wj,{className:"w-4 h-4"}),s?"Pause":"Start"]}),h.jsxs($,{variant:"outline",size:"sm",onClick:g,children:[h.jsx(_j,{className:"w-4 h-4"}),"Reset"]})]})]}),h.jsxs("div",{className:"mb-6",children:[h.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground mb-2",children:[h.jsxs("span",{children:["Step ",t+1," of ",r.steps.length]}),h.jsxs("span",{children:[Math.round((t+1)/r.steps.length*100),"%"]})]}),h.jsx(x_,{value:(t+1)/r.steps.length*100})]}),h.jsxs(K,{className:"p-6 bg-gradient-healing border-primary/20 mb-6",children:[h.jsxs("h3",{className:"font-semibold text-foreground mb-3",children:["Step ",t+1]}),h.jsx("p",{className:"text-foreground leading-relaxed",children:r.steps[t]})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx($,{variant:"outline",onClick:v,disabled:t===0,children:"Previous Step"}),h.jsx($,{variant:"therapeutic",onClick:y,disabled:t===r.steps.length-1,children:"Next Step"})]})]})}):h.jsxs("div",{className:"max-w-4xl mx-auto",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-primary flex items-center justify-center",children:h.jsx(Bf,{className:"w-8 h-8 text-primary-foreground"})}),h.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"CBT & Mindfulness Exercises"}),h.jsx("p",{className:"text-muted-foreground",children:"Evidence-based techniques to support your mental wellness"})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Yl.map(m=>h.jsx(K,{className:"p-6 shadow-gentle border-primary/10 hover:shadow-therapeutic transition-therapeutic cursor-pointer",onClick:()=>d(m),children:h.jsxs("div",{className:"flex items-start gap-4",children:[h.jsx("div",{className:"text-3xl",children:u(m.type)}),h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx("h3",{className:"font-semibold text-foreground",children:m.title}),h.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${c(m.type)}`,children:m.type.toUpperCase()})]}),h.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:m.description}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[h.jsx(Nj,{className:"w-3 h-3"}),m.duration," minutes"]}),h.jsx($,{variant:"calming",size:"sm",children:"Start Exercise"})]})]})]})},m.id))}),h.jsxs(K,{className:"mt-8 p-6 shadow-gentle border-primary/10 bg-gradient-calm",children:[h.jsx("h3",{className:"font-semibold text-accent-foreground mb-4",children:"Quick Relief Techniques"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[h.jsxs($,{variant:"healing",className:"h-auto p-4 flex-col gap-2",onClick:()=>d(Yl.find(m=>m.id==="box-breathing")),children:[h.jsx("span",{className:"text-2xl",children:""}),h.jsx("span",{className:"text-sm",children:"Quick Breathing"})]}),h.jsxs($,{variant:"healing",className:"h-auto p-4 flex-col gap-2",onClick:()=>d(Yl.find(m=>m.id==="five-four-three-two-one")),children:[h.jsx("span",{className:"text-2xl",children:""}),h.jsx("span",{className:"text-sm",children:"Grounding"})]}),h.jsxs($,{variant:"healing",className:"h-auto p-4 flex-col gap-2",onClick:()=>d(Yl.find(m=>m.id==="thought-challenging")),children:[h.jsx("span",{className:"text-2xl",children:""}),h.jsx("span",{className:"text-sm",children:"Reframe Thoughts"})]})]})]})]})},FD=()=>{const[r,e]=b.useState({isPlaying:!1,score:0,distance:0,speed:5,playerLane:1,obstacles:[],coins:[],gameOver:!1,highScore:0}),t=b.useRef();b.useEffect(()=>(r.isPlaying&&!r.gameOver&&(t.current=window.setInterval(()=>{n()},50)),()=>{t.current&&clearInterval(t.current)}),[r.isPlaying,r.gameOver,r]);const n=()=>{e(o=>{const a=o.distance+o.speed,l=o.score+1,c=o.obstacles.map(p=>({...p,distance:p.distance-o.speed})).filter(p=>p.distance>-50),u=o.coins.map(p=>({...p,distance:p.distance-o.speed})).filter(p=>p.distance>-50);if(c.some(p=>p.lane===o.playerLane&&p.distance<20&&p.distance>-10))return J.error(`Game Over! Final Score: ${l}`),{...o,gameOver:!0,isPlaying:!1,highScore:Math.max(o.highScore,l)};const f=u.filter(p=>p.lane===o.playerLane&&p.distance<20&&p.distance>-10),g=u.filter(p=>!(p.lane===o.playerLane&&p.distance<20&&p.distance>-10)),y=f.length*10;y>0&&J.success(`+${y} coins!`);let v=[...c];if(Math.random()<.02){const p=Math.floor(Math.random()*3),x=["rock","tree","gap"][Math.floor(Math.random()*3)];v.push({lane:p,distance:400,type:x})}let w=[...g];if(Math.random()<.03){const p=Math.floor(Math.random()*3);w.push({lane:p,distance:400})}const m=Math.min(o.speed+.001,12);return{...o,distance:a,score:l+y,obstacles:v,coins:w,speed:m}})},s=o=>{e(a=>{if(!a.isPlaying||a.gameOver)return a;let l=a.playerLane;return o==="left"&&a.playerLane>0?l=a.playerLane-1:o==="right"&&a.playerLane<2&&(l=a.playerLane+1),{...a,playerLane:l}})},i=()=>{e({isPlaying:!0,score:0,distance:0,speed:5,playerLane:1,obstacles:[],coins:[],gameOver:!1,highScore:r.highScore})};return b.useEffect(()=>{const o=a=>{!r.isPlaying||r.gameOver||(a.key==="ArrowLeft"&&s("left"),a.key==="ArrowRight"&&s("right"))};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[r.isPlaying,r.gameOver]),h.jsxs(K,{className:"p-6 shadow-gentle",children:[h.jsxs("div",{className:"text-center mb-6",children:[h.jsxs("h3",{className:"text-elder-2xl font-bold text-foreground mb-2 flex items-center justify-center gap-2",children:[h.jsx(gu,{className:"w-7 h-7 text-yellow-500"}),"Temple Run Adventure"]}),h.jsxs("div",{className:"flex items-center justify-center gap-4 text-elder-base",children:[h.jsxs(Ke,{variant:"secondary",children:[h.jsx(Ep,{className:"w-4 h-4 mr-1"}),"High Score: ",r.highScore]}),r.isPlaying&&h.jsxs(Ke,{variant:"default",children:["Score: ",r.score]})]})]}),!r.isPlaying&&!r.gameOver&&h.jsxs("div",{className:"text-center space-y-4",children:[h.jsx("p",{className:"text-elder-lg text-muted-foreground",children:"Swipe left and right to dodge obstacles and collect coins!"}),h.jsxs($,{onClick:i,size:"lg",variant:"default",className:"text-elder-base",children:[h.jsx(gu,{className:"w-5 h-5 mr-2"}),"Start Running!"]})]}),r.gameOver&&h.jsxs("div",{className:"text-center space-y-4",children:[h.jsx("div",{className:"text-elder-3xl font-bold text-primary",children:"Game Over!"}),h.jsxs("p",{className:"text-elder-xl",children:["Final Score: ",r.score]}),h.jsx($,{onClick:i,size:"lg",variant:"default",className:"text-elder-base",children:"Play Again"})]}),r.isPlaying&&!r.gameOver&&h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"relative h-96 bg-gradient-to-b from-amber-100 to-amber-300 dark:from-amber-900 dark:to-amber-700 rounded-lg overflow-hidden border-2 border-primary/20",children:[h.jsx("div",{className:"absolute inset-0 flex",children:[0,1,2].map(o=>h.jsx("div",{className:"flex-1 border-r border-amber-400/50 dark:border-amber-600/50"},o))}),r.obstacles.map((o,a)=>h.jsxs("div",{className:"absolute w-16 h-16 transition-all",style:{left:`${o.lane*33.33+8.5}%`,bottom:`${o.distance}px`,transform:"translateY(100%)"},children:[o.type==="rock"&&h.jsx("div",{className:"w-full h-full bg-gray-600 rounded-full"}),o.type==="tree"&&h.jsxs("div",{className:"w-full h-full",children:[h.jsx("div",{className:"w-4 h-8 bg-amber-800 mx-auto"}),h.jsx("div",{className:"w-12 h-8 bg-green-600 rounded-full mx-auto -mt-2"})]}),o.type==="gap"&&h.jsx("div",{className:"w-full h-4 bg-red-600"})]},`obs-${a}`)),r.coins.map((o,a)=>h.jsx("div",{className:"absolute w-8 h-8 bg-yellow-400 rounded-full animate-pulse",style:{left:`${o.lane*33.33+16}%`,bottom:`${o.distance}px`,transform:"translateY(100%)"}},`coin-${a}`)),h.jsx("div",{className:"absolute bottom-8 w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-500 rounded-lg transition-all duration-200 shadow-lg",style:{left:`${r.playerLane*33.33+11}%`}})]}),h.jsxs("div",{className:"flex justify-center gap-4",children:[h.jsx($,{onClick:()=>s("left"),size:"lg",variant:"outline",className:"h-16 w-20",children:h.jsx(rj,{className:"w-8 h-8"})}),h.jsx($,{onClick:()=>s("right"),size:"lg",variant:"outline",className:"h-16 w-20",children:h.jsx(nj,{className:"w-8 h-8"})})]}),h.jsx("p",{className:"text-center text-elder-sm text-muted-foreground",children:"Use arrow keys or buttons to move"})]})]})},$D=()=>{const[r,e]=b.useState([]),[t,n]=b.useState(0),[s,i]=b.useState(20),[o,a]=b.useState(null),[l,c]=b.useState(!1),[u,d]=b.useState(0),f=["","","","","",""],g=()=>{const p=[];for(let x=0;x<8;x++){const _=[];for(let S=0;S<8;S++)_.push(f[Math.floor(Math.random()*f.length)]);p.push(_)}return p};b.useEffect(()=>{e(g())},[]);const y=p=>{const x=[];for(let _=0;_<8;_++)for(let S=0;S<6;S++){const C=p[_][S];C!==null&&C===p[_][S+1]&&C===p[_][S+2]&&x.push({row:_,col:S},{row:_,col:S+1},{row:_,col:S+2})}for(let _=0;_<8;_++)for(let S=0;S<6;S++){const C=p[S][_];C!==null&&C===p[S+1][_]&&C===p[S+2][_]&&x.push({row:S,col:_},{row:S+1,col:_},{row:S+2,col:_})}return x},v=p=>{if(p.length===0)return;const x=r.map(S=>[...S]),_=Array.from(new Set(p.map(S=>`${S.row}-${S.col}`))).map(S=>{const[C,T]=S.split("-").map(Number);return{row:C,col:T}});_.forEach(({row:S,col:C})=>{x[S][C]=null}),n(S=>S+_.length*10),J.success(`+${_.length*10} points!`),setTimeout(()=>{for(let S=0;S<8;S++)for(let C=7;C>=0;C--)if(x[C][S]===null){for(let T=C-1;T>=0;T--)if(x[T][S]!==null){x[C][S]=x[T][S],x[T][S]=null;break}}for(let S=0;S<8;S++)for(let C=0;C<8;C++)x[C][S]===null&&(x[C][S]=f[Math.floor(Math.random()*f.length)]);e(x)},300)},w=(p,x)=>{if(!(l||s<=0)){if(!o)a({row:p,col:x});else{const _=Math.abs(o.row-p),S=Math.abs(o.col-x);if(_===1&&S===0||_===0&&S===1){const C=r.map(E=>[...E]),T=C[p][x];C[p][x]=C[o.row][o.col],C[o.row][o.col]=T,e(C),i(E=>E-1),setTimeout(()=>{const E=y(C);if(E.length>0)v(E);else{const A=C.map(D=>[...D]);A[o.row][o.col]=A[p][x],A[p][x]=T,e(A),J("No matches! Try again"),i(D=>D+1)}},100)}a(null)}s<=1&&setTimeout(()=>{c(!0),t>u&&(d(t),J.success(`New High Score: ${t}!`))},500)}},m=()=>{e(g()),n(0),i(20),a(null),c(!1)};return h.jsxs(K,{className:"p-6 shadow-gentle",children:[h.jsxs("div",{className:"text-center mb-6",children:[h.jsxs("h3",{className:"text-elder-2xl font-bold text-foreground mb-2 flex items-center justify-center gap-2",children:[h.jsx(Ia,{className:"w-7 h-7 text-pink-500"}),"Sweet Candy Match"]}),h.jsxs("div",{className:"flex items-center justify-center gap-4 text-elder-base",children:[h.jsxs(Ke,{variant:"secondary",children:[h.jsx(Ep,{className:"w-4 h-4 mr-1"}),"High: ",u]}),h.jsxs(Ke,{variant:"default",children:["Score: ",t]}),h.jsxs(Ke,{variant:"outline",children:["Moves: ",s]})]})]}),l?h.jsxs("div",{className:"text-center space-y-4",children:[h.jsx("div",{className:"text-elder-3xl font-bold text-primary",children:"Game Over!"}),h.jsxs("p",{className:"text-elder-xl",children:["Final Score: ",t]}),h.jsxs($,{onClick:m,size:"lg",variant:"default",className:"text-elder-base",children:[h.jsx(bj,{className:"w-5 h-5 mr-2"}),"Play Again"]})]}):h.jsxs("div",{className:"space-y-4",children:[h.jsx("div",{className:"grid grid-cols-8 gap-1 max-w-md mx-auto",children:r.map((p,x)=>p.map((_,S)=>h.jsx("button",{onClick:()=>w(x,S),className:`
                    aspect-square text-4xl flex items-center justify-center
                    rounded-lg transition-all hover:scale-110
                    ${(o==null?void 0:o.row)===x&&(o==null?void 0:o.col)===S?"bg-yellow-300 dark:bg-yellow-600 scale-110":"bg-pink-100 dark:bg-pink-900 hover:bg-pink-200 dark:hover:bg-pink-800"}
                  `,children:_},`${x}-${S}`)))}),h.jsx("p",{className:"text-center text-elder-sm text-muted-foreground",children:"Match 3 or more candies to score points!"})]})]})},BD=()=>{const[r,e]=b.useState({currentWord:"Rainbow",userInput:"",score:0,chain:["Rainbow"],timeLeft:30}),[t,n]=b.useState({currentQuestion:0,score:0,answered:!1,selectedAnswer:""}),[s,i]=b.useState({sequence:[],userSequence:[],isShowing:!1,level:1}),o=[{question:"Which planet is known as the Red Planet?",options:["Venus","Mars","Jupiter","Saturn"],correct:"Mars"},{question:"What is the largest mammal in the world?",options:["African Elephant","Blue Whale","Giraffe","Polar Bear"],correct:"Blue Whale"},{question:"In which year did World War II end?",options:["1944","1945","1946","1947"],correct:"1945"},{question:"What is the capital of Australia?",options:["Sydney","Melbourne","Brisbane","Canberra"],correct:"Canberra"},{question:"Who painted the Mona Lisa?",options:["Van Gogh","Picasso","Leonardo da Vinci","Michelangelo"],correct:"Leonardo da Vinci"}],a=()=>{if(r.userInput.trim()){const y=[...r.chain,r.userInput.trim()];e(v=>({...v,chain:y,score:v.score+10,userInput:"",currentWord:r.userInput.trim()})),J(`Great connection! Chain: ${y.length} words`)}},l=y=>{n(w=>({...w,selectedAnswer:y,answered:!0}));const v=y===o[t.currentQuestion].correct;v?(n(w=>({...w,score:w.score+100})),J(" Correct! Well done!")):J("Not quite right, but great try!"),setTimeout(()=>{t.currentQuestion<o.length-1?n(w=>({...w,currentQuestion:w.currentQuestion+1,answered:!1,selectedAnswer:""})):J(` Game Complete! Final Score: ${t.score+(v?100:0)}`)},2e3)},c=()=>{const y=Array.from({length:s.level+2},()=>Math.floor(Math.random()*4));i(v=>({...v,sequence:y,isShowing:!0,userSequence:[]})),setTimeout(()=>{i(v=>({...v,isShowing:!1}))},(s.level+2)*1e3)},u=y=>{if(s.isShowing)return;const v=[...s.userSequence,y];i(w=>({...w,userSequence:v})),v.length===s.sequence.length&&(v.every((m,p)=>m===s.sequence[p])?(J(` Perfect! Level ${s.level} completed!`),i(m=>({...m,level:m.level+1})),setTimeout(()=>c(),1500)):(J("Oops! Let's try again from level 1"),i(m=>({...m,level:1,sequence:[],userSequence:[]}))))},d=[{id:"temple-run",title:"Temple Run Adventure",icon:gu,description:"Run, dodge obstacles, and collect coins in this thrilling endless runner!",gradient:"from-yellow-400 to-orange-400"},{id:"candy-crush",title:"Sweet Candy Match",icon:aj,description:"Match 3 or more candies to score points and reach the highest level!",gradient:"from-pink-400 to-purple-400"},{id:"word-association",title:"Word Association Chain",icon:hu,description:"Create a chain of connected words and see how creative you can get!",gradient:"from-purple-400 to-pink-400"},{id:"trivia",title:"Knowledge Quiz",icon:Bf,description:"Test your knowledge with fun trivia questions from various topics!",gradient:"from-blue-400 to-purple-400"},{id:"pattern-memory",title:"Pattern Memory",icon:gd,description:"Remember and repeat the color patterns to advance levels!",gradient:"from-green-400 to-blue-400"}],[f,g]=b.useState(null);return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"text-center",children:[h.jsxs("h2",{className:"text-elder-3xl font-bold text-foreground mb-4 flex items-center justify-center gap-3",children:[h.jsx(Ia,{className:"w-8 h-8 text-primary"}),"Fun & Engaging Games"]}),h.jsx("p",{className:"text-elder-lg text-muted-foreground",children:"Exercise your mind with these delightful and challenging games"})]}),!f&&h.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(y=>{const v=y.icon;return h.jsxs(K,{className:"p-6 shadow-gentle hover:shadow-companionship transition-all cursor-pointer group",onClick:()=>g(y.id),children:[h.jsx("div",{className:`w-16 h-16 rounded-full bg-gradient-to-br ${y.gradient} flex items-center justify-center mb-4 group-hover:scale-110 transition-transform`,children:h.jsx(v,{className:"w-8 h-8 text-white"})}),h.jsx("h3",{className:"text-elder-xl font-semibold text-foreground mb-2",children:y.title}),h.jsx("p",{className:"text-elder-base text-muted-foreground mb-4",children:y.description}),h.jsx($,{variant:"outline",className:"w-full",children:"Play Now"})]},y.id)})}),f==="temple-run"&&h.jsxs("div",{children:[h.jsx($,{variant:"outline",onClick:()=>g(null),className:"mb-4",children:" Back to Games"}),h.jsx(FD,{})]}),f==="candy-crush"&&h.jsxs("div",{children:[h.jsx($,{variant:"outline",onClick:()=>g(null),className:"mb-4",children:" Back to Games"}),h.jsx($D,{})]}),f==="word-association"&&h.jsxs(K,{className:"p-6 shadow-gentle",children:[h.jsxs("div",{className:"text-center mb-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx($,{variant:"outline",onClick:()=>g(null),children:" Back to Games"}),h.jsxs(Ke,{variant:"secondary",className:"text-elder-base",children:[h.jsx(Ep,{className:"w-4 h-4 mr-1"}),"Score: ",r.score]})]}),h.jsx("h3",{className:"text-elder-2xl font-bold text-foreground mb-2",children:"Word Association Chain"}),h.jsx("p",{className:"text-elder-lg text-muted-foreground",children:"Connect words that relate to each other!"})]}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("p",{className:"text-elder-lg text-muted-foreground mb-2",children:"Current word:"}),h.jsx("div",{className:"text-elder-3xl font-bold text-primary bg-gradient-primary bg-clip-text text-transparent",children:r.currentWord})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(ge,{value:r.userInput,onChange:y=>e(v=>({...v,userInput:y.target.value})),onKeyPress:y=>y.key==="Enter"&&a(),placeholder:"Enter a related word...",className:"text-elder-base"}),h.jsx($,{onClick:a,variant:"default",children:h.jsx(gu,{className:"w-4 h-4"})})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("p",{className:"text-elder-base font-medium text-foreground",children:"Your word chain:"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:r.chain.map((y,v)=>h.jsx(Ke,{variant:v===r.chain.length-1?"default":"secondary",children:y},v))})]})]})]}),f==="trivia"&&h.jsxs(K,{className:"p-6 shadow-gentle",children:[h.jsxs("div",{className:"text-center mb-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx($,{variant:"outline",onClick:()=>g(null),children:" Back to Games"}),h.jsxs(Ke,{variant:"secondary",className:"text-elder-base",children:[h.jsx(sj,{className:"w-4 h-4 mr-1"}),"Score: ",t.score]})]}),h.jsx("h3",{className:"text-elder-2xl font-bold text-foreground mb-2",children:"Knowledge Quiz"}),h.jsxs("p",{className:"text-elder-lg text-muted-foreground",children:["Question ",t.currentQuestion+1," of ",o.length]})]}),t.currentQuestion<o.length&&h.jsxs("div",{className:"space-y-6",children:[h.jsx("div",{className:"text-center",children:h.jsx("h4",{className:"text-elder-xl font-semibold text-foreground mb-6",children:o[t.currentQuestion].question})}),h.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:o[t.currentQuestion].options.map(y=>h.jsx($,{variant:t.answered?y===o[t.currentQuestion].correct?"default":y===t.selectedAnswer?"destructive":"outline":"outline",onClick:()=>!t.answered&&l(y),disabled:t.answered,className:"p-4 text-elder-base h-auto",children:y},y))})]})]}),f==="pattern-memory"&&h.jsxs(K,{className:"p-6 shadow-gentle",children:[h.jsxs("div",{className:"text-center mb-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx($,{variant:"outline",onClick:()=>g(null),children:" Back to Games"}),h.jsxs(Ke,{variant:"secondary",className:"text-elder-base",children:[h.jsx(fu,{className:"w-4 h-4 mr-1"}),"Level: ",s.level]})]}),h.jsx("h3",{className:"text-elder-2xl font-bold text-foreground mb-2",children:"Pattern Memory"}),h.jsx("p",{className:"text-elder-lg text-muted-foreground",children:s.sequence.length===0?"Ready to start?":s.isShowing?"Watch the pattern!":"Repeat the pattern!"})]}),h.jsxs("div",{className:"space-y-6",children:[s.sequence.length===0?h.jsx("div",{className:"text-center",children:h.jsxs($,{onClick:c,variant:"default",size:"lg",children:[h.jsx(gd,{className:"w-5 h-5 mr-2"}),"Start Level ",s.level]})}):h.jsx("div",{className:"grid grid-cols-2 gap-4 max-w-md mx-auto",children:[0,1,2,3].map(y=>h.jsx($,{onClick:()=>u(y),variant:"outline",className:`h-24 w-full transition-all ${s.isShowing&&s.sequence[s.userSequence.length]===y?`bg-gradient-to-br ${y===0?"from-red-400 to-red-600":y===1?"from-blue-400 to-blue-600":y===2?"from-green-400 to-green-600":"from-yellow-400 to-yellow-600"} text-white`:s.userSequence.includes(y)?"bg-muted":""}`,disabled:s.isShowing,children:h.jsx("div",{className:`w-8 h-8 rounded-full ${y===0?"bg-red-500":y===1?"bg-blue-500":y===2?"bg-green-500":"bg-yellow-500"}`})},y))}),s.sequence.length>0&&h.jsx("div",{className:"text-center",children:h.jsxs("p",{className:"text-elder-base text-muted-foreground",children:["Progress: ",s.userSequence.length," / ",s.sequence.length]})})]})]}),h.jsxs(K,{className:"p-4 shadow-gentle bg-gradient-companionship",children:[h.jsxs("h3",{className:"text-elder-lg font-semibold text-foreground mb-3 flex items-center gap-2",children:[h.jsx(Or,{className:"w-5 h-5 text-primary"}),"Benefits of Playing Games"]}),h.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-elder-base text-muted-foreground",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Bf,{className:"w-4 h-4 text-primary"}),h.jsx("span",{children:"Improves memory and cognition"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(gd,{className:"w-4 h-4 text-primary"}),h.jsx("span",{children:"Enhances focus and attention"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(vj,{className:"w-4 h-4 text-primary"}),h.jsx("span",{children:"Provides joyful entertainment"})]})]})]})]})},zD=()=>{const[r,e]=b.useState([]),[t,n]=b.useState([]),[s,i]=b.useState(""),[o,a]=b.useState({name:"",artist:"",spotifyUrl:""}),[l,c]=b.useState({name:"",description:"",embedUrl:""}),[u,d]=b.useState(null),f=()=>{if(!o.name||!o.artist){J.error("Please fill in song name and artist");return}const p={id:Date.now().toString(),...o,spotifyUrl:o.spotifyUrl||`https://open.spotify.com/search/${encodeURIComponent(o.name+" "+o.artist)}`,addedAt:new Date};e([...r,p]),a({name:"",artist:"",spotifyUrl:""}),J.success(`${p.name} added to playlist! `)},g=()=>{if(!l.name||!l.embedUrl){J.error("Please fill in playlist name and Spotify embed URL");return}const p={id:Date.now().toString(),...l,addedAt:new Date};n([...t,p]),c({name:"",description:"",embedUrl:""}),J.success(`${p.name} playlist added! `)},y=(p,x)=>{d(u===p?null:p),window.open(x,"_blank"),J("Opening in Spotify ")},v=p=>{e(r.filter(x=>x.id!==p)),J.success("Song removed from playlist")},w=p=>{n(t.filter(x=>x.id!==p)),J.success("Playlist removed")},m=r.filter(p=>p.name.toLowerCase().includes(s.toLowerCase())||p.artist.toLowerCase().includes(s.toLowerCase()));return h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{className:"text-center",children:[h.jsxs("h2",{className:"text-3xl font-bold text-foreground mb-4 flex items-center justify-center gap-3",children:[h.jsx(Ac,{className:"w-8 h-8 text-primary"}),"Spotify Music"]}),h.jsx("p",{className:"text-lg text-muted-foreground",children:"Your favorite songs and playlists from Spotify"})]}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs(K,{className:"p-6 shadow-gentle",children:[h.jsxs("h3",{className:"text-xl font-semibold text-foreground mb-4 flex items-center gap-2",children:[h.jsx(Ac,{className:"w-5 h-5 text-primary"}),"Add Spotify Playlist"]}),h.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:'To add a playlist: Open Spotify  Click "..." on a playlist  Share  Copy Embed Code  Paste the iframe src URL below'}),h.jsxs("div",{className:"space-y-3",children:[h.jsx(ge,{placeholder:"Playlist name (e.g., Relaxing Jazz)",value:l.name,onChange:p=>c({...l,name:p.target.value})}),h.jsx(ge,{placeholder:"Description (optional)",value:l.description,onChange:p=>c({...l,description:p.target.value})}),h.jsx(ge,{placeholder:"Spotify embed URL (e.g., https://open.spotify.com/embed/playlist/...)",value:l.embedUrl,onChange:p=>c({...l,embedUrl:p.target.value})}),h.jsxs($,{onClick:g,variant:"companionship",className:"w-full",children:[h.jsx(Gr,{className:"w-4 h-4 mr-2"}),"Add Playlist"]})]})]}),t.length>0&&h.jsxs("div",{className:"space-y-4",children:[h.jsx("h3",{className:"text-xl font-semibold text-foreground",children:"My Playlists"}),t.map(p=>h.jsxs(K,{className:"p-6 shadow-gentle hover:shadow-companionship transition-all",children:[h.jsxs("div",{className:"flex items-start justify-between mb-4",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-semibold text-foreground",children:p.name}),p.description&&h.jsx("p",{className:"text-sm text-muted-foreground",children:p.description})]}),h.jsx($,{onClick:()=>w(p.id),variant:"outline",size:"sm",children:h.jsx(ps,{className:"w-4 h-4"})})]}),h.jsx("iframe",{src:p.embedUrl,width:"100%",height:"380",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",className:"rounded-lg"})]},p.id))]}),h.jsxs(K,{className:"p-6 shadow-gentle",children:[h.jsx("h3",{className:"text-xl font-semibold text-foreground mb-4",children:"Add Individual Songs"}),h.jsxs("div",{className:"space-y-3",children:[h.jsx(ge,{placeholder:"Song name",value:o.name,onChange:p=>a({...o,name:p.target.value})}),h.jsx(ge,{placeholder:"Artist name",value:o.artist,onChange:p=>a({...o,artist:p.target.value})}),h.jsx(ge,{placeholder:"Spotify URL (optional - will search if empty)",value:o.spotifyUrl,onChange:p=>a({...o,spotifyUrl:p.target.value})}),h.jsxs($,{onClick:f,variant:"companionship",className:"w-full",children:[h.jsx(Gr,{className:"w-4 h-4 mr-2"}),"Add Song"]})]})]}),r.length>0&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"relative",children:[h.jsx(sh,{className:"absolute left-3 top-3 w-5 h-5 text-muted-foreground"}),h.jsx(ge,{placeholder:"Search your songs...",value:s,onChange:p=>i(p.target.value),className:"pl-10"})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("h3",{className:"text-xl font-semibold text-foreground",children:"My Songs"}),m.map(p=>h.jsx(K,{className:"p-4 shadow-gentle hover:shadow-companionship transition-all",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("h4",{className:"font-semibold text-foreground",children:p.name}),h.jsx("p",{className:"text-sm text-muted-foreground",children:p.artist})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx($,{onClick:()=>y(p.id,p.spotifyUrl),variant:"companionship",size:"sm",children:h.jsx(dj,{className:"w-4 h-4"})}),h.jsx($,{onClick:()=>v(p.id),variant:"outline",size:"sm",children:h.jsx(ps,{className:"w-4 h-4"})})]})]})},p.id))]})]}),r.length===0&&t.length===0&&h.jsxs(K,{className:"p-8 text-center shadow-gentle",children:[h.jsx(Ac,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),h.jsx("p",{className:"text-muted-foreground",children:"No music added yet. Add playlists or songs above!"})]}),h.jsx(K,{className:"p-6 shadow-gentle bg-gradient-to-br from-primary/5 to-accent/5",children:h.jsxs("div",{className:"text-center",children:[h.jsx(Or,{className:"w-8 h-8 text-primary mx-auto mb-4"}),h.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Music for Your Soul"}),h.jsx("p",{className:"text-muted-foreground",children:"Enjoy your favorite Spotify playlists and songs all in one place. Music has the power to uplift, comfort, and bring joy!"})]})})]})]})};function k(r,e,t){return(e=w_(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function qv(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),t.push.apply(t,n)}return t}function j(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?qv(Object(t),!0).forEach(function(n){k(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):qv(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Ee(r,e){if(r==null)return{};var t,n,s=function(o,a){if(o==null)return{};var l={};for(var c in o)if({}.hasOwnProperty.call(o,c)){if(a.indexOf(c)>=0)continue;l[c]=o[c]}return l}(r,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(n=0;n<i.length;n++)t=i[n],e.indexOf(t)>=0||{}.propertyIsEnumerable.call(r,t)&&(s[t]=r[t])}return s}function Jr(r,e){return e||(e=r.slice(0)),Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(e)}}))}function w_(r){var e=function(t,n){if(typeof t!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var i=s.call(t,n||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}(r,"string");return typeof e=="symbol"?e:e+""}class Xv{constructor(){k(this,"browserShadowBlurConstant",1),k(this,"DPI",96),k(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),k(this,"perfLimitSizeTotal",2097152),k(this,"maxCacheSideLimit",4096),k(this,"minCacheSideLimit",256),k(this,"disableStyleCopyPaste",!1),k(this,"enableGLFiltering",!0),k(this,"textureSize",4096),k(this,"forceGLPutImageData",!1),k(this,"cachesBoundsOfCurve",!0),k(this,"fontPaths",{}),k(this,"NUM_FRACTION_DIGITS",4)}}const he=new class extends Xv{constructor(r){super(),this.configure(r)}configure(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,r)}addFonts(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=j(j({},this.fontPaths),r)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(r=>{delete this.fontPaths[r]})}clearFonts(){this.fontPaths={}}restoreDefaults(r){const e=new Xv,t=(r==null?void 0:r.reduce((n,s)=>(n[s]=e[s],n),{}))||e;this.configure(t)}},ys=function(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return console[r]("fabric",...t)};class Wr extends Error{constructor(e,t){super("fabric: ".concat(e),t)}}class UD extends Wr{constructor(e){super("".concat(e," 'options.signal' is in 'aborted' state"))}}class WD{}class VD extends WD{testPrecision(e,t){const n="precision ".concat(t,` float;
void main(){}`),s=e.createShader(e.FRAGMENT_SHADER);return!!s&&(e.shaderSource(s,n),e.compileShader(s),!!e.getShaderParameter(s,e.COMPILE_STATUS))}queryWebGL(e){const t=e.getContext("webgl");t&&(this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(n=>this.testPrecision(t,n)),t.getExtension("WEBGL_lose_context").loseContext(),ys("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}}const HD={};let Kv;const Kr=()=>Kv||(Kv={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new VD,dispose(){},copyPasteData:HD}),Eo=()=>Kr().document,tm=()=>Kr().window,b_=()=>{var r;return Math.max((r=he.devicePixelRatio)!==null&&r!==void 0?r:tm().devicePixelRatio,1)},ma=new class{constructor(){k(this,"charWidthsCache",{}),k(this,"boundsOfCurveCache",{})}getFontCache(r){let{fontFamily:e,fontStyle:t,fontWeight:n}=r;e=e.toLowerCase(),this.charWidthsCache[e]||(this.charWidthsCache[e]={});const s=this.charWidthsCache[e],i="".concat(t.toLowerCase(),"_").concat((n+"").toLowerCase());return s[i]||(s[i]={}),s[i]}clearFontCache(r){(r=(r||"").toLowerCase())?this.charWidthsCache[r]&&delete this.charWidthsCache[r]:this.charWidthsCache={}}limitDimsByArea(r){const{perfLimitSizeTotal:e}=he,t=Math.sqrt(e*r);return[Math.floor(t),Math.floor(e/t)]}},cg="6.2.0";function Rc(){}const dl=Math.PI/2,Cu=2*Math.PI,rm=Math.PI/180,wt=Object.freeze([1,0,0,1,0,0]),nm=16,$n=.4477152502,oe="center",me="left",At="top",ug="bottom",$e="right",Mt="none",sm=/\r?\n/,__="moving",wh="scaling",S_="rotating",im="rotate",C_="skewing",Ha="resizing",GD="modifyPoly",YD="modifyPath",ku="changed",bh="scale",Rt="scaleX",or="scaleY",Po="skewX",Oo="skewY",Ge="fill",Dt="stroke",Tu="modified",bi="json",Ed="svg",H=new class{constructor(){this[bi]=new Map,this[Ed]=new Map}has(r){return this[bi].has(r)}getClass(r){const e=this[bi].get(r);if(!e)throw new Wr("No class registered for ".concat(r));return e}setClass(r,e){e?this[bi].set(e,r):(this[bi].set(r.type,r),this[bi].set(r.type.toLowerCase(),r))}getSVGClass(r){return this[Ed].get(r)}setSVGClass(r,e){this[Ed].set(e??r.type.toLowerCase(),r)}},ju=new class extends Array{remove(r){const e=this.indexOf(r);e>-1&&this.splice(e,1)}cancelAll(){const r=this.splice(0);return r.forEach(e=>e.abort()),r}cancelByCanvas(r){if(!r)return[];const e=this.filter(t=>{var n;return t.target===r||typeof t.target=="object"&&((n=t.target)===null||n===void 0?void 0:n.canvas)===r});return e.forEach(t=>t.abort()),e}cancelByTarget(r){if(!r)return[];const e=this.filter(t=>t.target===r);return e.forEach(t=>t.abort()),e}};class qD{constructor(){k(this,"__eventListeners",{})}on(e,t){if(this.__eventListeners||(this.__eventListeners={}),typeof e=="object")return Object.entries(e).forEach(n=>{let[s,i]=n;this.on(s,i)}),()=>this.off(e);if(t){const n=e;return this.__eventListeners[n]||(this.__eventListeners[n]=[]),this.__eventListeners[n].push(t),()=>this.off(n,t)}return()=>!1}once(e,t){if(typeof e=="object"){const n=[];return Object.entries(e).forEach(s=>{let[i,o]=s;n.push(this.once(i,o))}),()=>n.forEach(s=>s())}if(t){const n=this.on(e,function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];t.call(this,...i),n()});return n}return()=>!1}_removeEventListener(e,t){if(this.__eventListeners[e])if(t){const n=this.__eventListeners[e],s=n.indexOf(t);s>-1&&n.splice(s,1)}else this.__eventListeners[e]=[]}off(e,t){if(this.__eventListeners)if(e===void 0)for(const n in this.__eventListeners)this._removeEventListener(n);else typeof e=="object"?Object.entries(e).forEach(n=>{let[s,i]=n;this._removeEventListener(s,i)}):this._removeEventListener(e,t)}fire(e,t){var n;if(!this.__eventListeners)return;const s=(n=this.__eventListeners[e])===null||n===void 0?void 0:n.concat();if(s)for(let i=0;i<s.length;i++)s[i].call(this,t||{})}}const Fi=(r,e)=>isNaN(r)&&typeof e=="number"?e:r,ki=(r,e)=>{const t=r.indexOf(e);return t!==-1&&r.splice(t,1),r},Sn=r=>{if(r===0)return 1;switch(Math.abs(r)/dl){case 1:case 3:return 0;case 2:return-1}return Math.cos(r)},Cn=r=>{if(r===0)return 0;const e=r/dl,t=Math.sign(r);switch(e){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(r)};class O{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof e=="object"?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t)}add(e){return new O(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new O(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new O(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new O(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new O(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new O(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new O(this.x/e.x,this.y/e.y)}scalarDivide(e){return new O(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return t=Math.max(Math.min(1,t),0),new O(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}distanceFrom(e){const t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)}midPointFrom(e){return this.lerp(e)}min(e){return new O(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new O(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const t=this.x,n=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=n}clone(){return new O(this.x,this.y)}rotate(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:om;const n=Cn(e),s=Sn(e),i=this.subtract(t);return new O(i.x*s-i.y*n,i.x*n+i.y*s).add(t)}transform(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new O(e[0]*this.x+e[2]*this.y+(t?0:e[4]),e[1]*this.x+e[3]*this.y+(t?0:e[5]))}}const om=new O(0,0),Lc=r=>!!r&&Array.isArray(r._objects);function k_(r){class e extends r{constructor(){super(...arguments),k(this,"_objects",[])}_onObjectAdded(n){}_onObjectRemoved(n){}_onStackOrderChanged(n){}add(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];const o=this._objects.push(...s);return s.forEach(a=>this._onObjectAdded(a)),o}insertAt(n){for(var s=arguments.length,i=new Array(s>1?s-1:0),o=1;o<s;o++)i[o-1]=arguments[o];return this._objects.splice(n,0,...i),i.forEach(a=>this._onObjectAdded(a)),this._objects.length}remove(){const n=this._objects,s=[];for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return o.forEach(l=>{const c=n.indexOf(l);c!==-1&&(n.splice(c,1),s.push(l),this._onObjectRemoved(l))}),s}forEachObject(n){this.getObjects().forEach((s,i,o)=>n(s,i,o))}getObjects(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return s.length===0?[...this._objects]:this._objects.filter(o=>o.isType(...s))}item(n){return this._objects[n]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(n,s){return!!this._objects.includes(n)||!!s&&this._objects.some(i=>i instanceof e&&i.contains(n,!0))}complexity(){return this._objects.reduce((n,s)=>n+=s.complexity?s.complexity():0,0)}sendObjectToBack(n){return!(!n||n===this._objects[0])&&(ki(this._objects,n),this._objects.unshift(n),this._onStackOrderChanged(n),!0)}bringObjectToFront(n){return!(!n||n===this._objects[this._objects.length-1])&&(ki(this._objects,n),this._objects.push(n),this._onStackOrderChanged(n),!0)}sendObjectBackwards(n,s){if(!n)return!1;const i=this._objects.indexOf(n);if(i!==0){const o=this.findNewLowerIndex(n,i,s);return ki(this._objects,n),this._objects.splice(o,0,n),this._onStackOrderChanged(n),!0}return!1}bringObjectForward(n,s){if(!n)return!1;const i=this._objects.indexOf(n);if(i!==this._objects.length-1){const o=this.findNewUpperIndex(n,i,s);return ki(this._objects,n),this._objects.splice(o,0,n),this._onStackOrderChanged(n),!0}return!1}moveObjectTo(n,s){return n!==this._objects[s]&&(ki(this._objects,n),this._objects.splice(s,0,n),this._onStackOrderChanged(n),!0)}findNewLowerIndex(n,s,i){let o;if(i){o=s;for(let a=s-1;a>=0;--a)if(n.isOverlapping(this._objects[a])){o=a;break}}else o=s-1;return o}findNewUpperIndex(n,s,i){let o;if(i){o=s;for(let a=s+1;a<this._objects.length;++a)if(n.isOverlapping(this._objects[a])){o=a;break}}else o=s+1;return o}collectObjects(n){let{left:s,top:i,width:o,height:a}=n,{includeIntersecting:l=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const c=[],u=new O(s,i),d=u.add(new O(o,a));for(let f=this._objects.length-1;f>=0;f--){const g=this._objects[f];g.selectable&&g.visible&&(l&&g.intersectsWithRect(u,d)||g.isContainedWithinRect(u,d)||l&&g.containsPoint(u)||l&&g.containsPoint(d))&&c.push(g)}return c}}return e}class T_ extends qD{_setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const t in e)this.set(t,e[t])}_setObject(e){for(const t in e)this._set(t,e[t])}set(e,t){return typeof e=="object"?this._setObject(e):this._set(e,t),this}_set(e,t){this[e]=t}toggle(e){const t=this.get(e);return typeof t=="boolean"&&this.set(e,!t),this}get(e){return this[e]}}function Ic(r){return tm().requestAnimationFrame(r)}function XD(r){return tm().cancelAnimationFrame(r)}let KD=0;const xs=()=>KD++,Je=()=>{const r=Eo().createElement("canvas");if(!r||r.getContext===void 0)throw new Wr("Failed to create `canvas` element");return r},QD=()=>Eo().createElement("img"),j_=(r,e,t)=>r.toDataURL("image/".concat(e),t),ze=r=>r*rm,si=r=>r/rm,JD=r=>r.every((e,t)=>e===wt[t]),kt=(r,e,t)=>new O(r).transform(e,t),kr=r=>{const e=1/(r[0]*r[3]-r[1]*r[2]),t=[e*r[3],-e*r[1],-e*r[2],e*r[0],0,0],{x:n,y:s}=new O(r[4],r[5]).transform(t,!0);return t[4]=-n,t[5]=-s,t},nt=(r,e,t)=>[r[0]*e[0]+r[2]*e[1],r[1]*e[0]+r[3]*e[1],r[0]*e[2]+r[2]*e[3],r[1]*e[2]+r[3]*e[3],t?0:r[0]*e[4]+r[2]*e[5]+r[4],t?0:r[1]*e[4]+r[3]*e[5]+r[5]],am=(r,e)=>r.reduceRight((t,n)=>n&&t?nt(n,t,e):n||t,void 0)||wt.concat(),E_=r=>{let[e,t]=r;return Math.atan2(t,e)},Eu=r=>{const e=E_(r),t=Math.pow(r[0],2)+Math.pow(r[1],2),n=Math.sqrt(t),s=(r[0]*r[3]-r[2]*r[1])/n,i=Math.atan2(r[0]*r[2]+r[1]*r[3],t);return{angle:si(e),scaleX:n,scaleY:s,skewX:si(i),skewY:0,translateX:r[4]||0,translateY:r[5]||0}},fl=function(r){return[1,0,0,1,r,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function gl(){let{angle:r=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:e=0,y:t=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=ze(r),s=Sn(n),i=Cn(n);return[s,i,-i,s,e?e-(s*e-i*t):0,t?t-(i*e+s*t):0]}const lm=function(r){return[r,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:r,0,0]},P_=r=>Math.tan(ze(r)),O_=r=>[1,0,P_(r),1,0,0],N_=r=>[1,P_(r),0,1,0,0],_h=r=>{let{scaleX:e=1,scaleY:t=1,flipX:n=!1,flipY:s=!1,skewX:i=0,skewY:o=0}=r,a=lm(n?-e:e,s?-t:t);return i&&(a=nt(a,O_(i),!0)),o&&(a=nt(a,N_(o),!0)),a},ZD=r=>{const{translateX:e=0,translateY:t=0,angle:n=0}=r;let s=fl(e,t);n&&(s=nt(s,gl({angle:n})));const i=_h(r);return JD(i)||(s=nt(s,i)),s},Fc=function(r){let{signal:e,crossOrigin:t=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(n,s){if(e&&e.aborted)return s(new UD("loadImage"));const i=QD();let o;e&&(o=function(l){i.src="",s(l)},e.addEventListener("abort",o,{once:!0}));const a=function(){i.onload=i.onerror=null,o&&(e==null||e.removeEventListener("abort",o)),n(i)};r?(i.onload=a,i.onerror=function(){o&&(e==null||e.removeEventListener("abort",o)),s(new Wr("Error loading ".concat(i.src)))},t&&(i.crossOrigin=t),i.src=r):a()})},Ga=function(r){let{signal:e,reviver:t=Rc}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((n,s)=>{const i=[];e&&e.addEventListener("abort",s,{once:!0}),Promise.all(r.map(o=>H.getClass(o.type).fromObject(o,{signal:e}).then(a=>(t(o,a),i.push(a),a)))).then(n).catch(o=>{i.forEach(a=>{a.dispose&&a.dispose()}),s(o)}).finally(()=>{e&&e.removeEventListener("abort",s)})})},Sh=function(r){let{signal:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((t,n)=>{const s=[];e&&e.addEventListener("abort",n,{once:!0});const i=Object.values(r).map(a=>a&&a.type&&H.has(a.type)?Ga([a],{signal:e}).then(l=>{let[c]=l;return s.push(c),c}):a),o=Object.keys(r);Promise.all(i).then(a=>a.reduce((l,c,u)=>(l[o[u]]=c,l),{})).then(t).catch(a=>{s.forEach(l=>{l.dispose&&l.dispose()}),n(a)}).finally(()=>{e&&e.removeEventListener("abort",n)})})},No=function(r){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((e,t)=>(t in r&&(e[t]=r[t]),e),{})},cm=(r,e)=>Object.keys(r).reduce((t,n)=>(e(r[n],n,r)&&(t[n]=r[n]),t),{}),Qv={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},Pd=(r,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+6*(e-r)*t:t<.5?e:t<2/3?r+(e-r)*(2/3-t)*6:r),Jv=(r,e,t,n)=>{r/=255,e/=255,t/=255;const s=Math.max(r,e,t),i=Math.min(r,e,t);let o,a;const l=(s+i)/2;if(s===i)o=a=0;else{const c=s-i;switch(a=l>.5?c/(2-s-i):c/(s+i),s){case r:o=(e-t)/c+(e<t?6:0);break;case e:o=(t-r)/c+2;break;case t:o=(r-e)/c+4}o/=6}return[Math.round(360*o),Math.round(100*a),Math.round(100*l),n]},Zv=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(r)/(r.endsWith("%")?100:1)},ql=r=>Math.min(Math.round(r),255).toString(16).toUpperCase().padStart(2,"0"),ey=r=>{let[e,t,n,s=1]=r;const i=Math.round(.3*e+.59*t+.11*n);return[i,i,i,s]};class pe{constructor(e){if(k(this,"isUnrecognised",!1),e)if(e instanceof pe)this.setSource([...e._source]);else if(Array.isArray(e)){const[t,n,s,i=1]=e;this.setSource([t,n,s,i])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return e in Qv&&(e=Qv[e]),e==="transparent"?[255,255,255,0]:pe.sourceFromHex(e)||pe.sourceFromRgb(e)||pe.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,t,n]=this.getSource();return"rgb(".concat(e,",").concat(t,",").concat(n,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[e,t,n]=Jv(...this.getSource());return"hsl(".concat(e,",").concat(t,"%,").concat(n,"%)")}toHsla(){const[e,t,n,s]=Jv(...this.getSource());return"hsla(".concat(e,",").concat(t,"%,").concat(n,"%,").concat(s,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,t,n,s]=this.getSource();return"".concat(ql(e)).concat(ql(t)).concat(ql(n)).concat(ql(Math.round(255*s)))}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(ey(this.getSource())),this}toBlackWhite(e){const[t,,,n]=ey(this.getSource()),s=t<(e||127)?0:255;return this.setSource([s,s,s,n]),this}overlayWith(e){e instanceof pe||(e=new pe(e));const t=this.getSource(),n=e.getSource(),[s,i,o]=t.map((a,l)=>Math.round(.5*a+.5*n[l]));return this.setSource([s,i,o,t[3]]),this}static fromRgb(e){return pe.fromRgba(e)}static fromRgba(e){return new pe(pe.sourceFromRgb(e))}static sourceFromRgb(e){const t=e.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(t){const[n,s,i]=t.slice(1,4).map(o=>{const a=parseFloat(o);return o.endsWith("%")?Math.round(2.55*a):a});return[n,s,i,Zv(t[4])]}}static fromHsl(e){return pe.fromHsla(e)}static fromHsla(e){return new pe(pe.sourceFromHsl(e))}static sourceFromHsl(e){const t=e.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!t)return;const n=(pe.parseAngletoDegrees(t[1])%360+360)%360/360,s=parseFloat(t[2])/100,i=parseFloat(t[3])/100;let o,a,l;if(s===0)o=a=l=i;else{const c=i<=.5?i*(s+1):i+s-i*s,u=2*i-c;o=Pd(u,c,n+1/3),a=Pd(u,c,n),l=Pd(u,c,n-1/3)}return[Math.round(255*o),Math.round(255*a),Math.round(255*l),Zv(t[4])]}static fromHex(e){return new pe(pe.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const t=e.slice(e.indexOf("#")+1);let n;n=t.length<=4?t.split("").map(l=>l+l):t.match(/.{2}/g);const[s,i,o,a=255]=n.map(l=>parseInt(l,16));return[s,i,o,a/255]}}static parseAngletoDegrees(e){const t=e.toLowerCase(),n=parseFloat(t);return t.includes("rad")?si(n):t.includes("turn")?360*n:n}}const ue=(r,e)=>parseFloat(Number(r).toFixed(e)),Xi=function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:nm;const t=/\D{0,2}$/.exec(r),n=parseFloat(r),s=he.DPI;switch(t==null?void 0:t[0]){case"mm":return n*s/25.4;case"cm":return n*s/2.54;case"in":return n*s;case"pt":return n*s/72;case"pc":return n*s/72*12;case"em":return n*e;default:return n}},eR=r=>{const[e,t]=r.trim().split(" "),[n,s]=(i=e)&&i!==Mt?[i.slice(1,4),i.slice(5,8)]:i===Mt?[i,i]:["Mid","Mid"];var i;return{meetOrSlice:t||"meet",alignX:n,alignY:s}},Pu=r=>"matrix("+r.map(e=>ue(e,he.NUM_FRACTION_DIGITS)).join(" ")+")",Ya=function(r,e){let t,n,s=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(e)if(e.toLive)t="url(#SVGID_".concat(e.id,")");else{const i=new pe(e),o=i.getAlpha();t=i.toRgb(),o!==1&&(n=o.toString())}else t="none";return s?"".concat(r,": ").concat(t,"; ").concat(n?"".concat(r,"-opacity: ").concat(n,"; "):""):"".concat(r,'="').concat(t,'" ').concat(n?"".concat(r,'-opacity="').concat(n,'" '):"")},er=r=>!!r&&r.toLive!==void 0,ty=r=>!!r&&typeof r.toObject=="function",ry=r=>!!r&&r.offsetX!==void 0&&"source"in r,A_=r=>!!r&&typeof r._renderText=="function",Rs=r=>!!r&&"multiSelectionStacking"in r;function M_(r){const e=r&&Cr(r);let t=0,n=0;if(!r||!e)return{left:t,top:n};let s=r;const i=e.documentElement,o=e.body||{scrollLeft:0,scrollTop:0};for(;s&&(s.parentNode||s.host)&&(s=s.parentNode||s.host,s===e?(t=o.scrollLeft||i.scrollLeft||0,n=o.scrollTop||i.scrollTop||0):(t+=s.scrollLeft||0,n+=s.scrollTop||0),s.nodeType!==1||s.style.position!=="fixed"););return{left:t,top:n}}const Cr=r=>r.ownerDocument||null,D_=r=>{var e;return((e=r.ownerDocument)===null||e===void 0?void 0:e.defaultView)||null};function $c(r,e){const t=r.style;t&&(typeof e=="string"?r.style.cssText+=";"+e:Object.entries(e).forEach(n=>{let[s,i]=n;return t.setProperty(s,i)}))}const R_=function(r,e,t){let{width:n,height:s}=t,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;r.width=n,r.height=s,i>1&&(r.setAttribute("width",(n*i).toString()),r.setAttribute("height",(s*i).toString()),e.scale(i,i))},hg=(r,e)=>{let{width:t,height:n}=e;t&&(r.style.width=typeof t=="number"?"".concat(t,"px"):t),n&&(r.style.height=typeof n=="number"?"".concat(n,"px"):n)};function ny(r){return r.onselectstart!==void 0&&(r.onselectstart=()=>!1),r.style.userSelect=Mt,r}class L_{constructor(e){k(this,"_originalCanvasStyle",void 0),k(this,"lower",void 0);const t=this.createLowerCanvas(e);this.lower={el:t,ctx:t.getContext("2d")}}createLowerCanvas(e){const t=(n=e)&&n.getContext!==void 0?e:e&&Eo().getElementById(e)||Je();var n;if(t.hasAttribute("data-fabric"))throw new Wr("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=t.style.cssText,t.setAttribute("data-fabric","main"),t.classList.add("lower-canvas"),t}cleanupDOM(e){let{width:t,height:n}=e;const{el:s}=this.lower;s.classList.remove("lower-canvas"),s.removeAttribute("data-fabric"),s.setAttribute("width","".concat(t)),s.setAttribute("height","".concat(n)),s.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,t){const{el:n,ctx:s}=this.lower;R_(n,s,e,t)}setCSSDimensions(e){hg(this.lower.el,e)}calcOffset(){return function(e){var t;const n=e&&Cr(e),s={left:0,top:0};if(!n)return s;const i=((t=D_(e))===null||t===void 0?void 0:t.getComputedStyle(e,null))||{};s.left+=parseInt(i.borderLeftWidth,10)||0,s.top+=parseInt(i.borderTopWidth,10)||0,s.left+=parseInt(i.paddingLeft,10)||0,s.top+=parseInt(i.paddingTop,10)||0;let o={left:0,top:0};const a=n.documentElement;e.getBoundingClientRect!==void 0&&(o=e.getBoundingClientRect());const l=M_(e);return{left:o.left+l.left-(a.clientLeft||0)+s.left,top:o.top+l.top-(a.clientTop||0)+s.top}}(this.lower.el)}dispose(){Kr().dispose(this.lower.el),delete this.lower}}const tR={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...wt]};class pl extends k_(T_){get lowerCanvasEl(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.el}get contextContainer(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.ctx}static getDefaults(){return pl.ownDefaults}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(t),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new L_(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];const i=super.insertAt(e,...n);return n.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),i}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(ys("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?b_():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(e,t){return this.setDimensions({width:e},t)}setHeight(e,t){return this.setDimensions({height:e},t)}_setDimensionsImpl(e){let{cssOnly:t=!1,backstoreOnly:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t){const s=j({width:this.width,height:this.height},e);this.elements.setDimensions(s,this.getRetinaScaling()),this.hasLostContext=!0,this.width=s.width,this.height=s.height}n||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,t){this._setDimensionsImpl(e,t),t&&t.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,t){const n=e,s=[...this.viewportTransform],i=kt(e,kr(s));s[0]=t,s[3]=t;const o=kt(i,s);s[4]+=n.x-o.x,s[5]+=n.y-o.y,this.setViewportTransform(s)}setZoom(e){this.zoomToPoint(new O(0,0),e)}absolutePan(e){const t=[...this.viewportTransform];return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)}relativePan(e){return this.absolutePan(new O(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=Ic(()=>this.renderAndReset()))}calcViewportBoundaries(){const e=this.width,t=this.height,n=kr(this.viewportTransform),s=kt({x:0,y:0},n),i=kt({x:e,y:t},n),o=s.min(i),a=s.max(i);return this.vptCoords={tl:o,tr:new O(a.x,o.y),bl:new O(o.x,a.y),br:a}}cancelRequestedRender(){this.nextRenderHandle&&(XD(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,t){if(this.destroyed)return;const n=this.viewportTransform,s=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality="best",this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this._renderObjects(e,t),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),s&&(s._set("canvas",this),s.shouldCache(),s._transformDone=!0,s.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,s)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,t){const n=this.viewportTransform;e.save(),e.transform(...n),e.globalCompositeOperation="destination-in",t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}_renderObjects(e,t){for(let n=0,s=t.length;n<s;++n)t[n]&&t[n].render(e)}_renderBackgroundOrOverlay(e,t){const n=this["".concat(t,"Color")],s=this["".concat(t,"Image")],i=this.viewportTransform,o=this["".concat(t,"Vpt")];if(!n&&!s)return;const a=er(n);if(n){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=a?n.toLive(e):n,o&&e.transform(...i),a){e.transform(1,0,0,1,n.offsetX||0,n.offsetY||0);const l=n.gradientTransform||n.patternTransform;l&&e.transform(...l)}e.fill(),e.restore()}if(s){e.save();const{skipOffscreen:l}=this;this.skipOffscreen=o,o&&e.transform(...i),s.render(e),this.skipOffscreen=l,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new O(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new O(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new O(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new O(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new O(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return kt(this.getCenterPoint(),kr(this.viewportTransform))}_centerObject(e,t){e.setXY(t,oe,oe),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,t){const n=this.clipPath,s=n&&!n.excludeFromExport?this._toObject(n,e,t):null;return j(j(j({version:cg},No(this,t)),{},{objects:this._objects.filter(i=>!i.excludeFromExport).map(i=>this._toObject(i,e,t))},this.__serializeBgOverlay(e,t)),s?{clipPath:s}:null)}_toObject(e,t,n){let s;this.includeDefaultValues||(s=e.includeDefaultValues,e.includeDefaultValues=!1);const i=e[t](n);return this.includeDefaultValues||(e.includeDefaultValues=!!s),i}__serializeBgOverlay(e,t){const n={},s=this.backgroundImage,i=this.overlayImage,o=this.backgroundColor,a=this.overlayColor;return er(o)?o.excludeFromExport||(n.background=o.toObject(t)):o&&(n.background=o),er(a)?a.excludeFromExport||(n.overlay=a.toObject(t)):a&&(n.overlay=a),s&&!s.excludeFromExport&&(n.backgroundImage=this._toObject(s,e,t)),i&&!i.excludeFromExport&&(n.overlayImage=this._toObject(i,e,t)),n}toSVG(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.reviver=t;const n=[];return this._setSVGPreamble(n,e),this._setSVGHeader(n,e),this.clipPath&&n.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(n,"background"),this._setSVGBgOverlayImage(n,"backgroundImage",t),this._setSVGObjects(n,t),this.clipPath&&n.push(`</g>
`),this._setSVGBgOverlayColor(n,"overlay"),this._setSVGBgOverlayImage(n,"overlayImage",t),n.push("</svg>"),n.join("")}_setSVGPreamble(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(e,t){const n=t.width||"".concat(this.width),s=t.height||"".concat(this.height),i=he.NUM_FRACTION_DIGITS,o=t.viewBox;let a;if(o)a='viewBox="'.concat(o.x," ").concat(o.y," ").concat(o.width," ").concat(o.height,'" ');else if(this.svgViewportTransformation){const l=this.viewportTransform;a='viewBox="'.concat(ue(-l[4]/l[0],i)," ").concat(ue(-l[5]/l[3],i)," ").concat(ue(this.width/l[0],i)," ").concat(ue(this.height/l[3],i),'" ')}else a='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',n,'" ','height="',s,'" ',a,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",cg,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),`</defs>
`)}createSVGClipPathMarkup(e){const t=this.clipPath;return t?(t.clipPathId="CLIPPATH_".concat(xs()),'<clipPath id="'.concat(t.clipPathId,`" >
`).concat(t.toClipPathSVG(e.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(e=>{const t=this["".concat(e,"Color")];if(er(t)){const n=this["".concat(e,"Vpt")],s=this.viewportTransform,i={isType:()=>!1,width:this.width/(n?s[0]:1),height:this.height/(n?s[3]:1)};return t.toSVG(i,{additionalTransform:n?Pu(s):""})}}).join("")}createSVGFontFacesMarkup(){const e=[],t={},n=he.fontPaths;this._objects.forEach(function i(o){e.push(o),Lc(o)&&o._objects.forEach(i)}),e.forEach(i=>{if(!A_(i))return;const{styles:o,fontFamily:a}=i;!t[a]&&n[a]&&(t[a]=!0,o&&Object.values(o).forEach(l=>{Object.values(l).forEach(c=>{let{fontFamily:u=""}=c;!t[u]&&n[u]&&(t[u]=!0)})}))});const s=Object.keys(t).map(i=>`		@font-face {
			font-family: '`.concat(i,`';
			src: url('`).concat(n[i],`');
		}
`)).join("");return s?`	<style type="text/css"><![CDATA[
`.concat(s,`]]></style>
`):""}_setSVGObjects(e,t){this.forEachObject(n=>{n.excludeFromExport||this._setSVGObject(e,n,t)})}_setSVGObject(e,t,n){e.push(t.toSVG(n))}_setSVGBgOverlayImage(e,t,n){const s=this[t];s&&!s.excludeFromExport&&s.toSVG&&e.push(s.toSVG(n))}_setSVGBgOverlayColor(e,t){const n=this["".concat(t,"Color")];if(n)if(er(n)){const s=n.repeat||"",i=this.width,o=this.height,a=this["".concat(t,"Vpt")]?Pu(kr(this.viewportTransform)):"";e.push('<rect transform="'.concat(a," translate(").concat(i/2,",").concat(o/2,')" x="').concat(n.offsetX-i/2,'" y="').concat(n.offsetY-o/2,'" width="').concat(s!=="repeat-y"&&s!=="no-repeat"||!ry(n)?i:n.source.width,'" height="').concat(s!=="repeat-x"&&s!=="no-repeat"||!ry(n)?o:n.source.height,'" fill="url(#SVGID_').concat(n.id,`)"></rect>
`))}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',n,'"',`></rect>
`)}loadFromJSON(e,t){let{signal:n}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return Promise.reject(new Wr("`json` is undefined"));const s=typeof e=="string"?JSON.parse(e):e,{objects:i=[],backgroundImage:o,background:a,overlayImage:l,overlay:c,clipPath:u}=s,d=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([Ga(i,{reviver:t,signal:n}),Sh({backgroundImage:o,backgroundColor:a,overlayImage:l,overlayColor:c,clipPath:u},{signal:n})]).then(f=>{let[g,y]=f;return this.clear(),this.add(...g),this.set(s),this.set(y),this.renderOnAddRemove=d,this})}clone(e){const t=this.toObject(e);return this.cloneWithoutData().loadFromJSON(t)}cloneWithoutData(){const e=Je();return e.width=this.width,e.height=this.height,new this.constructor(e)}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:n=1,multiplier:s=1,enableRetinaScaling:i=!1}=e,o=s*(i?this.getRetinaScaling():1);return j_(this.toCanvasElement(o,e),t,n)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:t,height:n,left:s,top:i,filter:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=(t||this.width)*e,l=(n||this.height)*e,c=this.getZoom(),u=this.width,d=this.height,f=this.skipControlsDrawing,g=c*e,y=this.viewportTransform,v=[g,0,0,g,(y[4]-(s||0))*e,(y[5]-(i||0))*e],w=this.enableRetinaScaling,m=Je(),p=o?this._objects.filter(x=>o(x)):this._objects;return m.width=a,m.height=l,this.enableRetinaScaling=!1,this.viewportTransform=v,this.width=a,this.height=l,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(m.getContext("2d"),p),this.viewportTransform=y,this.width=u,this.height=d,this.calcViewportBoundaries(),this.enableRetinaScaling=w,this.skipControlsDrawing=f,m}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),ju.cancelByCanvas(this),this.disposed=!0,new Promise((e,t)=>{const n=()=>{this.destroy(),e(!0)};n.kill=t,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=n:n()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(e=>e.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}k(pl,"ownDefaults",tR);const rR=["touchstart","touchmove","touchend"],nR=r=>{const e=M_(r.target),t=function(n){const s=n.changedTouches;return s&&s[0]?s[0]:n}(r);return new O(t.clientX+e.left,t.clientY+e.top)},dg=r=>rR.includes(r.type)||r.pointerType==="touch",fg=r=>{r.preventDefault(),r.stopPropagation()},gn=r=>{if(r.length===0)return{left:0,top:0,width:0,height:0};const{min:e,max:t}=r.reduce((s,i)=>{let{min:o,max:a}=s;return{min:o.min(i),max:a.max(i)}},{min:new O(r[0]),max:new O(r[0])}),n=t.subtract(e);return{left:e.x,top:e.y,width:n.x,height:n.y}},sR=["translateX","translateY","scaleX","scaleY"],iR=(r,e)=>Ou(r,nt(e,r.calcOwnMatrix())),Ou=(r,e)=>{const t=Eu(e),{translateX:n,translateY:s,scaleX:i,scaleY:o}=t,a=Ee(t,sR),l=new O(n,s);r.flipX=!1,r.flipY=!1,Object.assign(r,a),r.set({scaleX:i,scaleY:o}),r.setPositionByOrigin(l,oe,oe)},oR=r=>{r.scaleX=1,r.scaleY=1,r.skewX=0,r.skewY=0,r.flipX=!1,r.flipY=!1,r.rotate(0)},I_=r=>({scaleX:r.scaleX,scaleY:r.scaleY,skewX:r.skewX,skewY:r.skewY,angle:r.angle,left:r.left,flipX:r.flipX,flipY:r.flipY,top:r.top}),um=(r,e,t)=>{const n=r/2,s=e/2,i=[new O(-n,-s),new O(n,-s),new O(-n,s),new O(n,s)].map(a=>a.transform(t)),o=gn(i);return new O(o.width,o.height)},Ch=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:wt;return nt(kr(arguments.length>1&&arguments[1]!==void 0?arguments[1]:wt),r)},Ki=function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:wt,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:wt;return r.transform(Ch(e,t))},aR=function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:wt,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:wt;return r.transform(Ch(e,t),!0)},lR=(r,e,t)=>{const n=Ch(e,t);return Ou(r,nt(n,r.calcOwnMatrix())),n},F_=(r,e)=>{var t;const{transform:{target:n}}=e;(t=n.canvas)===null||t===void 0||t.fire("object:".concat(r),j(j({},e),{},{target:n})),n.fire(r,e)},cR={left:-.5,top:-.5,center:0,bottom:.5,right:.5},We=r=>typeof r=="string"?cR[r]:r-.5,Nu="not-allowed";function $_(r){return We(r.originX)===We(oe)&&We(r.originY)===We(oe)}function sy(r){return .5-We(r)}const Er=(r,e)=>r[e],B_=(r,e,t,n)=>({e:r,transform:e,pointer:new O(t,n)});function z_(r,e){const t=r.getTotalAngle()+si(Math.atan2(e.y,e.x))+360;return Math.round(t%360/45)}function hm(r,e,t,n,s){var i;let{target:o,corner:a}=r;const l=o.controls[a],c=((i=o.canvas)===null||i===void 0?void 0:i.getZoom())||1,u=o.padding/c,d=function(f,g,y,v){const w=f.getRelativeCenterPoint(),m=y!==void 0&&v!==void 0?f.translateToGivenOrigin(w,oe,oe,y,v):new O(f.left,f.top);return(f.angle?g.rotate(-ze(f.angle),w):g).subtract(m)}(o,new O(n,s),e,t);return d.x>=u&&(d.x-=u),d.x<=-u&&(d.x+=u),d.y>=u&&(d.y-=u),d.y<=u&&(d.y+=u),d.x-=l.offsetX,d.y-=l.offsetY,d}const uR=(r,e,t,n)=>{const{target:s,offsetX:i,offsetY:o}=e,a=t-i,l=n-o,c=!Er(s,"lockMovementX")&&s.left!==a,u=!Er(s,"lockMovementY")&&s.top!==l;return c&&s.set(me,a),u&&s.set(At,l),(c||u)&&F_(__,B_(r,e,t,n)),c||u};class U_{getSvgStyles(e){const t=this.fillRule?this.fillRule:"nonzero",n=this.strokeWidth?this.strokeWidth:"0",s=this.strokeDashArray?this.strokeDashArray.join(" "):Mt,i=this.strokeDashOffset?this.strokeDashOffset:"0",o=this.strokeLineCap?this.strokeLineCap:"butt",a=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",c=this.opacity!==void 0?this.opacity:"1",u=this.visible?"":" visibility: hidden;",d=e?"":this.getSvgFilter(),f=Ya(Ge,this.fill);return[Ya(Dt,this.stroke),"stroke-width: ",n,"; ","stroke-dasharray: ",s,"; ","stroke-linecap: ",o,"; ","stroke-dashoffset: ",i,"; ","stroke-linejoin: ",a,"; ","stroke-miterlimit: ",l,"; ",f,"fill-rule: ",t,"; ","opacity: ",c,";",d,u].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const n=e?this.calcTransformMatrix():this.calcOwnMatrix(),s='transform="'.concat(Pu(n));return"".concat(s).concat(t,'" ')}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:t,additionalTransform:n=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=[this.getSvgTransform(!0,n),this.getSvgCommons()].join(""),i=e.indexOf("COMMON_PARTS");return e[i]=s,t?t(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:t,reviver:n,withShadow:s,additionalTransform:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=t?"":'style="'.concat(this.getSvgStyles(),'" '),a=s?'style="'.concat(this.getSvgFilter(),'" '):"",l=this.clipPath,c=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",u=l&&l.absolutePositioned,d=this.stroke,f=this.fill,g=this.shadow,y=[],v=e.indexOf("COMMON_PARTS");let w;l&&(l.clipPathId="CLIPPATH_".concat(xs()),w='<clipPath id="'.concat(l.clipPathId,`" >
`).concat(l.toClipPathSVG(n),`</clipPath>
`)),u&&y.push("<g ",a,this.getSvgCommons(),` >
`),y.push("<g ",this.getSvgTransform(!1),u?"":a+this.getSvgCommons(),` >
`);const m=[o,c,t?"":this.addPaintOrder()," ",i?'transform="'.concat(i,'" '):""].join("");return e[v]=m,er(f)&&y.push(f.toSVG(this)),er(d)&&y.push(d.toSVG(this)),g&&y.push(g.toSVG(this)),l&&y.push(w),y.push(e.join("")),y.push(`</g>
`),u&&y.push(`</g>
`),n?n(y.join("")):y.join("")}addPaintOrder(){return this.paintFirst!==Ge?' paint-order="'.concat(this.paintFirst,'" '):""}}const hR=(r,e,t,n)=>-t*Math.cos(r/n*dl)+t+e,dR=()=>!1;class dm{constructor(e){let{startValue:t,byValue:n,duration:s=500,delay:i=0,easing:o=hR,onStart:a=Rc,onChange:l=Rc,onComplete:c=Rc,abort:u=dR,target:d}=e;k(this,"_state","pending"),k(this,"durationProgress",0),k(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=s,this.delay=i,this.easing=o,this._onStart=a,this._onChange=l,this._onComplete=c,this._abort=u,this.target=d,this.startValue=t,this.byValue=n,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const e=t=>{this._state==="pending"&&(this.startTime=t||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>Ic(e),this.delay):Ic(e)}tick(e){const t=(e||+new Date)-this.startTime,n=Math.min(t,this.duration);this.durationProgress=n/this.duration;const{value:s,valueProgress:i}=this.calculate(n);this.value=Object.freeze(s),this.valueProgress=i,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):t>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),Ic(this.tick)))}register(){ju.push(this)}unregister(){ju.remove(this)}abort(){this._state="aborted",this.unregister()}}const fR=["startValue","endValue"];class gR extends dm{constructor(e){let{startValue:t=0,endValue:n=100}=e;super(j(j({},Ee(e,fR)),{},{startValue:t,byValue:n-t}))}calculate(e){const t=this.easing(e,this.startValue,this.byValue,this.duration);return{value:t,valueProgress:Math.abs((t-this.startValue)/this.byValue)}}}const pR=["startValue","endValue"];class mR extends dm{constructor(e){let{startValue:t=[0],endValue:n=[100]}=e;super(j(j({},Ee(e,pR)),{},{startValue:t,byValue:n.map((s,i)=>s-t[i])}))}calculate(e){const t=this.startValue.map((n,s)=>this.easing(e,n,this.byValue[s],this.duration,s));return{value:t,valueProgress:Math.abs((t[0]-this.startValue[0])/this.byValue[0])}}}const vo=(r,e,t)=>Math.max(r,Math.min(e,t)),vR=["startValue","endValue","easing","onChange","onComplete","abort"],yR=(r,e,t,n)=>e+t*(1-Math.cos(r/n*dl)),Od=r=>r&&((e,t,n)=>r(new pe(e).toRgba(),t,n));class xR extends dm{constructor(e){let{startValue:t,endValue:n,easing:s=yR,onChange:i,onComplete:o,abort:a}=e,l=Ee(e,vR);const c=new pe(t).getSource(),u=new pe(n).getSource();super(j(j({},l),{},{startValue:c,byValue:u.map((d,f)=>d-c[f]),easing:s,onChange:Od(i),onComplete:Od(o),abort:Od(a)}))}calculate(e){const[t,n,s,i]=this.startValue.map((a,l)=>this.easing(e,a,this.byValue[l],this.duration,l)),o=[...[t,n,s].map(Math.round),vo(0,i,1)];return{value:o,valueProgress:o.map((a,l)=>this.byValue[l]!==0?Math.abs((a-this.startValue[l])/this.byValue[l]):0).find(a=>a!==0)||0}}}function W_(r){const e=(t=>Array.isArray(t.startValue)||Array.isArray(t.endValue))(r)?new mR(r):new gR(r);return e.start(),e}function wR(r){const e=new xR(r);return e.start(),e}const bR=new O(1,0),V_=new O,H_=(r,e)=>r.rotate(e),gg=(r,e)=>new O(e).subtract(r),pg=r=>r.distanceFrom(V_),mg=(r,e)=>Math.atan2(va(r,e),SR(r,e)),_R=r=>mg(bR,r),fm=r=>r.eq(V_)?r:r.scalarDivide(pg(r)),G_=function(r){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return fm(new O(-r.y,r.x).scalarMultiply(e?1:-1))},va=(r,e)=>r.x*e.y-r.y*e.x,SR=(r,e)=>r.x*e.x+r.y*e.y,iy=(r,e,t)=>{if(r.eq(e)||r.eq(t))return!0;const n=va(e,t),s=va(e,r),i=va(t,r);return n>=0?s>=0&&i<=0:!(s<=0&&i>=0)};class Me{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some(t=>t.eq(e))}append(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.points=this.points.concat(t.filter(s=>!this.includes(s))),this}static isPointContained(e,t,n){let s=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(t.eq(n))return e.eq(t);if(t.x===n.x)return e.x===t.x&&(s||e.y>=Math.min(t.y,n.y)&&e.y<=Math.max(t.y,n.y));if(t.y===n.y)return e.y===t.y&&(s||e.x>=Math.min(t.x,n.x)&&e.x<=Math.max(t.x,n.x));{const i=gg(t,n),o=gg(t,e).divide(i);return s?Math.abs(o.x)===Math.abs(o.y):o.x===o.y&&o.x>=0&&o.x<=1}}static isPointInPolygon(e,t){const n=new O(e).setX(Math.min(e.x-1,...t.map(i=>i.x)));let s=0;for(let i=0;i<t.length;i++){const o=this.intersectSegmentSegment(t[i],t[(i+1)%t.length],e,n);if(o.includes(e))return!0;s+=+(o.status==="Intersection")}return s%2==1}static intersectLineLine(e,t,n,s){let i=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],o=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const a=t.x-e.x,l=t.y-e.y,c=s.x-n.x,u=s.y-n.y,d=e.x-n.x,f=e.y-n.y,g=c*f-u*d,y=a*f-l*d,v=u*a-c*l;if(v!==0){const w=g/v,m=y/v;return(i||0<=w&&w<=1)&&(o||0<=m&&m<=1)?new Me("Intersection").append(new O(e.x+w*a,e.y+w*l)):new Me}if(g===0||y===0){const w=i||o||Me.isPointContained(e,n,s)||Me.isPointContained(t,n,s)||Me.isPointContained(n,e,t)||Me.isPointContained(s,e,t);return new Me(w?"Coincident":void 0)}return new Me("Parallel")}static intersectSegmentLine(e,t,n,s){return Me.intersectLineLine(e,t,n,s,!1,!0)}static intersectSegmentSegment(e,t,n,s){return Me.intersectLineLine(e,t,n,s,!1,!1)}static intersectLinePolygon(e,t,n){let s=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const i=new Me,o=n.length;for(let a,l,c,u=0;u<o;u++){if(a=n[u],l=n[(u+1)%o],c=Me.intersectLineLine(e,t,a,l,s,!1),c.status==="Coincident")return c;i.append(...c.points)}return i.points.length>0&&(i.status="Intersection"),i}static intersectSegmentPolygon(e,t,n){return Me.intersectLinePolygon(e,t,n,!1)}static intersectPolygonPolygon(e,t){const n=new Me,s=e.length,i=[];for(let o=0;o<s;o++){const a=e[o],l=e[(o+1)%s],c=Me.intersectSegmentPolygon(a,l,t);c.status==="Coincident"?(i.push(c),n.append(a,l)):n.append(...c.points)}return i.length>0&&i.length===e.length?new Me("Coincident"):(n.points.length>0&&(n.status="Intersection"),n)}static intersectPolygonRectangle(e,t,n){const s=t.min(n),i=t.max(n),o=new O(i.x,s.y),a=new O(s.x,i.y);return Me.intersectPolygonPolygon(e,[s,o,i,a])}}class CR extends T_{_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=j({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},e),n=t.strokeWidth;let s=n,i=0;this.strokeUniform&&(s=0,i=n);const o=t.width+s,a=t.height+s;let l;return l=t.skewX===0&&t.skewY===0?new O(o*t.scaleX,a*t.scaleY):um(o,a,_h(t)),l.scalarAdd(i)}translateToGivenOrigin(e,t,n,s,i){let o=e.x,a=e.y;const l=We(s)-We(t),c=We(i)-We(n);if(l||c){const u=this._getTransformedDimensions();o+=l*u.x,a+=c*u.y}return new O(o,a)}translateToCenterPoint(e,t,n){const s=this.translateToGivenOrigin(e,t,n,oe,oe);return this.angle?s.rotate(ze(this.angle),e):s}translateToOriginPoint(e,t,n){const s=this.translateToGivenOrigin(e,oe,oe,t,n);return this.angle?s.rotate(ze(this.angle),e):s}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?kt(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new O(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,t){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,t)}setPositionByOrigin(e,t,n){const s=this.translateToCenterPoint(e,t,n),i=this.translateToOriginPoint(s,this.originX,this.originY);this.set({left:i.x,top:i.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),me,At)}}class kR extends CR{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?kt(e,this.group.calcTransformMatrix()):e}setXY(e,t,n){this.group&&(e=kt(e,kr(this.group.calcTransformMatrix()))),this.setRelativeXY(e,t,n)}getRelativeXY(){return new O(this.left,this.top)}setRelativeXY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(e,t,n)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:e,tr:t,br:n,bl:s}=this.aCoords||(this.aCoords=this.calcACoords()),i=[e,t,n,s];if(this.group){const o=this.group.calcTransformMatrix();return i.map(a=>kt(a,o))}return i}intersectsWithRect(e,t){return Me.intersectPolygonRectangle(this.getCoords(),e,t).status==="Intersection"}intersectsWithObject(e){const t=Me.intersectPolygonPolygon(this.getCoords(),e.getCoords());return t.status==="Intersection"||t.status==="Coincident"||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every(t=>e.containsPoint(t))}isContainedWithinRect(e,t){const{left:n,top:s,width:i,height:o}=this.getBoundingRect();return n>=e.x&&n+i<=t.x&&s>=e.y&&s+o<=t.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return Me.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.getCoords().some(n=>n.x<=t.x&&n.x>=e.x&&n.y<=t.y&&n.y>=e.y)||!!this.intersectsWithRect(e,t)||this.containsPoint(e.midPointFrom(t))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return this.intersectsWithRect(e,t)?!0:this.getCoords().every(n=>(n.x>=t.x||n.x<=e.x)&&(n.y>=t.y||n.y<=e.y))&&this.containsPoint(e.midPointFrom(t))}getBoundingRect(){return gn(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set(Rt,e),this._set(or,e),this.setCoords()}scaleToWidth(e){const t=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/t)}scaleToHeight(e){const t=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/t)}getCanvasRetinaScaling(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?si(E_(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.viewportTransform)||wt.concat()}calcACoords(){const e=gl({angle:this.angle}),{x:t,y:n}=this.getRelativeCenterPoint(),s=fl(t,n),i=nt(s,e),o=this._getTransformedDimensions(),a=o.x/2,l=o.y/2;return{tl:kt({x:-a,y:-l},i),tr:kt({x:a,y:-l},i),bl:kt({x:-a,y:l},i),br:kt({x:a,y:l},i)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=[];return!e&&this.group&&(t=this.group.transformMatrixKey(e)),t.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,We(this.originX),We(this.originY)),t}calcTransformMatrix(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=this.calcOwnMatrix();if(e||!this.group)return t;const n=this.transformMatrixKey(e),s=this.matrixCache;return s&&s.key.every((i,o)=>i===n[o])?s.value:(this.group&&(t=nt(this.group.calcTransformMatrix(!1),t)),this.matrixCache={key:n,value:t},t)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),t=this.ownMatrixCache;if(t&&t.key===e)return t.value;const n=this.getRelativeCenterPoint(),s={angle:this.angle,translateX:n.x,translateY:n.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},i=ZD(s);return this.ownMatrixCache={key:e,value:i},i}_getNonTransformedDimensions(){return new O(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}}class gm extends kR{isDescendantOf(e){const{parent:t,group:n}=this;return t===e||n===e||this.canvas===e||!!t&&t.isDescendantOf(e)||!!n&&n!==t&&n.isDescendantOf(e)}getAncestors(){const e=[];let t=this;do t=t instanceof gm?t.parent:void 0,t&&e.push(t);while(t);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const t=this.getAncestors(),n=e.getAncestors();if(t.length===0&&n.length>0&&this===n[n.length-1])return{fork:[],otherFork:[e,...n.slice(0,n.length-1)],common:[this]};for(let s,i=0;i<t.length;i++){if(s=t[i],s===e)return{fork:[this,...t.slice(0,i)],otherFork:[],common:t.slice(i)};for(let o=0;o<n.length;o++){if(this===n[o])return{fork:[],otherFork:[e,...n.slice(0,o)],common:[this,...t]};if(s===n[o])return{fork:[this,...t.slice(0,i)],otherFork:[e,...n.slice(0,o)],common:t.slice(i)}}}return{fork:[this,...t],otherFork:[e,...n],common:[]}}hasCommonAncestors(e){const t=this.findCommonAncestors(e);return t&&!!t.common.length}isInFrontOf(e){if(this===e)return;const t=this.findCommonAncestors(e);if(t.fork.includes(e))return!0;if(t.otherFork.includes(this))return!1;const n=t.common[0]||this.canvas;if(!n)return;const s=t.fork.pop(),i=t.otherFork.pop(),o=n._objects.indexOf(s),a=n._objects.indexOf(i);return o>-1&&o>a}}class Y_ extends gm{animate(e,t){return Object.entries(e).reduce((n,s)=>{let[i,o]=s;return n[i]=this._animate(i,o,t),n},{})}_animate(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=e.split("."),i=this.constructor.colorProperties.includes(s[s.length-1]),{abort:o,startValue:a,onChange:l,onComplete:c}=n,u=j(j({},n),{},{target:this,startValue:a??s.reduce((d,f)=>d[f],this),endValue:t,abort:o==null?void 0:o.bind(this),onChange:(d,f,g)=>{s.reduce((y,v,w)=>(w===s.length-1&&(y[v]=d),y[v]),this),l&&l(d,f,g)},onComplete:(d,f,g)=>{this.setCoords(),c&&c(d,f,g)}});return i?wR(u):W_(u)}}function kh(r){return new RegExp("^("+r.join("|")+")\\b","i")}var oy,ay;k(Y_,"colorProperties",[Ge,Dt,"backgroundColor"]);const yo=String.raw(oy||(oy=Jr(["(?:[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?)"],["(?:[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?)"])));String.raw(ay||(ay=Jr(["(?:s+,?s*|,s*|$)"],["(?:\\s+,?\\s*|,\\s*|$)"])));const TR=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+yo+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+yo+"))?\\s+(.*)"),jR={cx:me,x:me,r:"radius",cy:At,y:At,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},Nd="font-size",Ad="clip-path";kh(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);kh(["symbol","image","marker","pattern","view","svg"]);const ly=kh(["symbol","g","a","svg","clipPath","defs"]),cy="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",uy=new RegExp("(?:\\s|^)"+cy+cy+"("+yo+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class qr{constructor(e){const t=typeof e=="string"?qr.parseShadow(e):e;Object.assign(this,qr.ownDefaults,t),this.id=xs()}static parseShadow(e){const t=e.trim(),[,n=0,s=0,i=0]=(uy.exec(t)||[]).map(o=>parseFloat(o)||0);return{color:(t.replace(uy,"")||"rgb(0,0,0)").trim(),offsetX:n,offsetY:s,blur:i}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const t=H_(new O(this.offsetX,this.offsetY),ze(-e.angle)),n=new pe(this.color);let s=40,i=40;return e.width&&e.height&&(s=100*ue((Math.abs(t.x)+this.blur)/e.width,he.NUM_FRACTION_DIGITS)+20,i=100*ue((Math.abs(t.y)+this.blur)/e.height,he.NUM_FRACTION_DIGITS)+20),e.flipX&&(t.x*=-1),e.flipY&&(t.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(i,'%" height="').concat(100+2*i,'%" x="-').concat(s,'%" width="').concat(100+2*s,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(ue(this.blur?this.blur/2:0,he.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(ue(t.x,he.NUM_FRACTION_DIGITS),'" dy="').concat(ue(t.y,he.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(n.toRgb(),'" flood-opacity="').concat(n.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},t=qr.ownDefaults;return this.includeDefaultValues?e:cm(e,(n,s)=>n!==t[s])}static async fromObject(e){return new this(e)}}k(qr,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),k(qr,"type","shadow"),H.setClass(qr,"shadow");const ml=r=>JSON.parse(JSON.stringify(r)),ER=[At,me,Rt,or,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",Po,Oo],jn=[Ge,Dt,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],PR={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:me,originY:At,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:Ge,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},OR=["type"],NR=["extraParam"];let Ms=class vg extends Y_{static getDefaults(){return vg.ownDefaults}get type(){const e=this.constructor.type;return e==="FabricObject"?"object":e.toLowerCase()}set type(e){ys("warn","Setting type has no effect",e)}constructor(e){super(),k(this,"_cacheContext",null),Object.assign(this,vg.ownDefaults),this.setOptions(e)}_createCacheCanvas(){this._cacheCanvas=Je(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const t=e.width,n=e.height,s=he.maxCacheSideLimit,i=he.minCacheSideLimit;if(t<=s&&n<=s&&t*n<=he.perfLimitSizeTotal)return t<i&&(e.width=i),n<i&&(e.height=i),e;const o=t/n,[a,l]=ma.limitDimsByArea(o),c=vo(i,a,s),u=vo(i,l,s);return t>c&&(e.zoomX/=t/c,e.width=c,e.capped=!0),n>u&&(e.zoomY/=n/u,e.height=u,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),t=this._getTransformedDimensions({skewX:0,skewY:0}),n=t.x*e.x/this.scaleX,s=t.y*e.y/this.scaleY;return{width:n+2,height:s+2,zoomX:e.x,zoomY:e.y,x:n,y:s}}_updateCacheCanvas(){const e=this._cacheCanvas,t=this._cacheContext,n=this._limitCacheSize(this._getCacheCanvasDimensions()),s=he.minCacheSideLimit,i=n.width,o=n.height,a=n.zoomX,l=n.zoomY,c=i!==e.width||o!==e.height,u=this.zoomX!==a||this.zoomY!==l;if(!e||!t)return!1;let d,f,g=c||u,y=0,v=0,w=!1;if(c){const m=this._cacheCanvas.width,p=this._cacheCanvas.height,x=i>m||o>p;w=x||(i<.9*m||o<.9*p)&&m>s&&p>s,x&&!n.capped&&(i>s||o>s)&&(y=.1*i,v=.1*o)}return A_(this)&&this.path&&(g=!0,w=!0,y+=this.getHeightOfLine(0)*this.zoomX,v+=this.getHeightOfLine(0)*this.zoomY),!!g&&(w?(e.width=Math.ceil(i+y),e.height=Math.ceil(o+v)):(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height)),d=n.x/2,f=n.y/2,this.cacheTranslationX=Math.round(e.width/2-d)+d,this.cacheTranslationY=Math.round(e.height/2-f)+f,t.translate(this.cacheTranslationX,this.cacheTranslationY),t.scale(a,l),this.zoomX=a,this.zoomY=l,!0)}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(e)}transform(e){const t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,n=this.calcTransformMatrix(!t);e.transform(n[0],n[1],n[2],n[3],n[4],n[5])}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=he.NUM_FRACTION_DIGITS,n=this.clipPath&&!this.clipPath.excludeFromExport?j(j({},this.clipPath.toObject(e)),{},{inverted:this.clipPath.inverted,absolutePositioned:this.clipPath.absolutePositioned}):null,s=j(j({},No(this,e)),{},{type:this.constructor.type,version:cg,originX:this.originX,originY:this.originY,left:ue(this.left,t),top:ue(this.top,t),width:ue(this.width,t),height:ue(this.height,t),fill:ty(this.fill)?this.fill.toObject():this.fill,stroke:ty(this.stroke)?this.stroke.toObject():this.stroke,strokeWidth:ue(this.strokeWidth,t),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:ue(this.strokeMiterLimit,t),scaleX:ue(this.scaleX,t),scaleY:ue(this.scaleY,t),angle:ue(this.angle,t),flipX:this.flipX,flipY:this.flipY,opacity:ue(this.opacity,t),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:ue(this.skewX,t),skewY:ue(this.skewY,t)},n?{clipPath:n}:null);return this.includeDefaultValues?s:this._removeDefaultValues(s)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const t=this.constructor.getDefaults(),n=Object.keys(t).length>0?t:Object.getPrototypeOf(this);return cm(e,(s,i)=>{if(i===me||i===At||i==="type")return!0;const o=n[i];return s!==o&&!(Array.isArray(s)&&Array.isArray(o)&&s.length===0&&o.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}getObjectScaling(){if(!this.group)return new O(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=Eu(this.calcTransformMatrix());return new O(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const t=this.canvas.getZoom(),n=this.getCanvasRetinaScaling();return e.scalarMultiply(t*n)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e}_set(e,t){e!==Rt&&e!==or||(t=this._constrainScale(t)),e===Rt&&t<0?(this.flipX=!this.flipX,t*=-1):e==="scaleY"&&t<0?(this.flipY=!this.flipY,t*=-1):e!=="shadow"||!t||t instanceof qr||(t=new qr(t));const n=this[e]!==t;return this[e]=t,n&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||n&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext&&(this.drawObject(this._cacheContext,e.forClipping),this.dirty=!1)}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===Dt&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.parent||!this.parent.isOnACache()),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(e,t){if(e.save(),t.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",t.absolutePositioned){const n=kr(this.calcTransformMatrix());e.transform(n[0],n[1],n[2],n[3],n[4],n[5])}t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}drawObject(e,t){const n=this.fill,s=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath),this.fill=n,this.stroke=s}_drawClipPath(e,t){t&&(t._set("canvas",this.canvas),t.shouldCache(),t._transformDone=!0,t.renderCache({forClipping:!0}),this.drawClipPathOnCache(e,t))}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const t=this._cacheCanvas,n=this._cacheContext;return!(!t||!n||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(t&&n&&!e&&(n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.width,t.height),n.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;const t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,t){const n=t.stroke;n&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,er(n)?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?this._applyPatternForTransformedGradient(e,n):(e.strokeStyle=n.toLive(e),this._applyPatternGradientTransform(e,n)):e.strokeStyle=t.stroke)}_setFillStyles(e,t){let{fill:n}=t;n&&(er(n)?(e.fillStyle=n.toLive(e),this._applyPatternGradientTransform(e,n)):e.fillStyle=n)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,t){t&&t.length!==0&&(1&t.length&&t.push(...t),e.setLineDash(t))}_setShadow(e){if(!this.shadow)return;const t=this.shadow,n=this.canvas,s=this.getCanvasRetinaScaling(),[i,,,o]=(n==null?void 0:n.viewportTransform)||wt,a=i*s,l=o*s,c=t.nonScaling?new O(1,1):this.getObjectScaling();e.shadowColor=t.color,e.shadowBlur=t.blur*he.browserShadowBlurConstant*(a+l)*(c.x+c.y)/4,e.shadowOffsetX=t.offsetX*a*c.x,e.shadowOffsetY=t.offsetY*l*c.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,t){if(!er(t))return{offsetX:0,offsetY:0};const n=t.gradientTransform||t.patternTransform,s=-this.width/2+t.offsetX||0,i=-this.height/2+t.offsetY||0;return t.gradientUnits==="percentage"?e.transform(this.width,0,0,this.height,s,i):e.transform(1,0,0,1,s,i),n&&e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),{offsetX:s,offsetY:i}}_renderPaintInOrder(e){this.paintFirst===Dt?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),this.fillRule==="evenodd"?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const t=this.getObjectScaling();e.scale(1/t.x,1/t.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,t){var n;const s=this._limitCacheSize(this._getCacheCanvasDimensions()),i=Je(),o=this.getCanvasRetinaScaling(),a=s.x/this.scaleX/o,l=s.y/this.scaleY/o;i.width=Math.ceil(a),i.height=Math.ceil(l);const c=i.getContext("2d");c&&(c.beginPath(),c.moveTo(0,0),c.lineTo(a,0),c.lineTo(a,l),c.lineTo(0,l),c.closePath(),c.translate(a/2,l/2),c.scale(s.zoomX/this.scaleX/o,s.zoomY/this.scaleY/o),this._applyPatternGradientTransform(c,t),c.fillStyle=t.toLive(e),c.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(o*this.scaleX/s.zoomX,o*this.scaleY/s.zoomY),e.strokeStyle=(n=c.createPattern(i,"no-repeat"))!==null&&n!==void 0?n:"")}_findCenterFromElement(){return new O(this.left+this.width/2,this.top+this.height/2)}clone(e){const t=this.toObject(e);return this.constructor.fromObject(t)}cloneAsImage(e){const t=this.toCanvasElement(e);return new(H.getClass("image"))(t)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=I_(this),n=this.group,s=this.shadow,i=Math.abs,o=e.enableRetinaScaling?b_():1,a=(e.multiplier||1)*o,l=e.canvasProvider||(p=>new pl(p,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&oR(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&lR(this,this.getViewportTransform()),this.setCoords();const c=Je(),u=this.getBoundingRect(),d=this.shadow,f=new O;if(d){const p=d.blur,x=d.nonScaling?new O(1,1):this.getObjectScaling();f.x=2*Math.round(i(d.offsetX)+p)*i(x.x),f.y=2*Math.round(i(d.offsetY)+p)*i(x.y)}const g=u.width+f.x,y=u.height+f.y;c.width=Math.ceil(g),c.height=Math.ceil(y);const v=l(c);e.format==="jpeg"&&(v.backgroundColor="#fff"),this.setPositionByOrigin(new O(v.width/2,v.height/2),oe,oe);const w=this.canvas;v._objects=[this],this.set("canvas",v),this.setCoords();const m=v.toCanvasElement(a||1,e);return this.set("canvas",w),this.shadow=s,n&&(this.group=n),this.set(t),this.setCoords(),v._objects=[],v.destroy(),m}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return j_(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.includes(this.constructor.type)||t.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const{centeredRotation:t,originX:n,originY:s}=this;if(t){const{x:i,y:o}=this.getRelativeCenterPoint();this.originX=oe,this.originY=oe,this.left=i,this.top=o}if(this.set("angle",e),t){const{x:i,y:o}=this.translateToOriginPoint(this.getRelativeCenterPoint(),n,s);this.left=i,this.top=o,this.originX=n,this.originY=s}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){ju.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&Kr().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}static _fromObject(e){let t=Ee(e,OR),n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:s}=n,i=Ee(n,NR);return Sh(ml(t),i).then(o=>{const a=j(j({},i),o);if(s){const{[s]:l}=a;return new this(l,Ee(a,[s].map(w_)))}return new this(a)})}static fromObject(e,t){return this._fromObject(e,t)}};k(Ms,"stateProperties",ER),k(Ms,"cacheProperties",jn),k(Ms,"ownDefaults",PR),k(Ms,"type","FabricObject"),H.setClass(Ms),H.setClass(Ms,"object");const Ao=(r,e,t)=>(n,s,i,o)=>{const a=e(n,s,i,o);return a&&F_(r,j(j({},B_(n,s,i,o)),t)),a};function Mo(r){return(e,t,n,s)=>{const{target:i,originX:o,originY:a}=t,l=i.getRelativeCenterPoint(),c=i.translateToOriginPoint(l,o,a),u=r(e,t,n,s);return i.setPositionByOrigin(c,t.originX,t.originY),u}}const hy=Ao(Ha,Mo((r,e,t,n)=>{const s=hm(e,e.originX,e.originY,t,n);if(We(e.originX)===We(oe)||We(e.originX)===We($e)&&s.x<0||We(e.originX)===We(me)&&s.x>0){const{target:i}=e,o=i.strokeWidth/(i.strokeUniform?i.scaleX:1),a=$_(e)?2:1,l=i.width,c=Math.ceil(Math.abs(s.x*a/i.scaleX)-o);return i.set("width",Math.max(c,0)),l!==i.width}return!1}));function AR(r,e,t,n,s){n=n||{};const i=this.sizeX||n.cornerSize||s.cornerSize,o=this.sizeY||n.cornerSize||s.cornerSize,a=n.transparentCorners!==void 0?n.transparentCorners:s.transparentCorners,l=a?Dt:Ge,c=!a&&(n.cornerStrokeColor||s.cornerStrokeColor);let u,d=e,f=t;r.save(),r.fillStyle=n.cornerColor||s.cornerColor||"",r.strokeStyle=n.cornerStrokeColor||s.cornerStrokeColor||"",i>o?(u=i,r.scale(1,o/i),f=t*i/o):o>i?(u=o,r.scale(i/o,1),d=e*o/i):u=i,r.lineWidth=1,r.beginPath(),r.arc(d,f,u/2,0,Cu,!1),r[l](),c&&r.stroke(),r.restore()}function MR(r,e,t,n,s){n=n||{};const i=this.sizeX||n.cornerSize||s.cornerSize,o=this.sizeY||n.cornerSize||s.cornerSize,a=n.transparentCorners!==void 0?n.transparentCorners:s.transparentCorners,l=a?Dt:Ge,c=!a&&(n.cornerStrokeColor||s.cornerStrokeColor),u=i/2,d=o/2;r.save(),r.fillStyle=n.cornerColor||s.cornerColor||"",r.strokeStyle=n.cornerStrokeColor||s.cornerStrokeColor||"",r.lineWidth=1,r.translate(e,t);const f=s.getTotalAngle();r.rotate(ze(f)),r["".concat(l,"Rect")](-u,-d,i,o),c&&r.strokeRect(-u,-d,i,o),r.restore()}class gr{constructor(e){k(this,"visible",!0),k(this,"actionName",bh),k(this,"angle",0),k(this,"x",0),k(this,"y",0),k(this,"offsetX",0),k(this,"offsetY",0),k(this,"sizeX",0),k(this,"sizeY",0),k(this,"touchSizeX",0),k(this,"touchSizeY",0),k(this,"cursorStyle","crosshair"),k(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,t,n,s){var i;let{tl:o,tr:a,br:l,bl:c}=s;return((i=t.canvas)===null||i===void 0?void 0:i.getActiveObject())===t&&t.isControlVisible(e)&&Me.isPointInPolygon(n,[o,a,l,c])}getActionHandler(e,t,n){return this.actionHandler}getMouseDownHandler(e,t,n){return this.mouseDownHandler}getMouseUpHandler(e,t,n){return this.mouseUpHandler}cursorStyleHandler(e,t,n){return t.cursorStyle}getActionName(e,t,n){return t.actionName}getVisibility(e,t){var n,s;return(n=(s=e._controlsVisibility)===null||s===void 0?void 0:s[t])!==null&&n!==void 0?n:this.visible}setVisibility(e,t,n){this.visible=e}positionHandler(e,t,n,s){return new O(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(t)}calcCornerCoords(e,t,n,s,i,o){const a=am([fl(n,s),gl({angle:e}),lm((i?this.touchSizeX:this.sizeX)||t,(i?this.touchSizeY:this.sizeY)||t)]);return{tl:new O(-.5,-.5).transform(a),tr:new O(.5,-.5).transform(a),br:new O(.5,.5).transform(a),bl:new O(-.5,.5).transform(a)}}render(e,t,n,s,i){((s=s||{}).cornerStyle||i.cornerStyle)==="circle"?AR.call(this,e,t,n,s,i):MR.call(this,e,t,n,s,i)}}const DR=(r,e,t)=>t.lockRotation?Nu:e.cursorStyle,RR=Ao(S_,Mo((r,e,t,n)=>{let{target:s,ex:i,ey:o,theta:a,originX:l,originY:c}=e;const u=s.translateToOriginPoint(s.getRelativeCenterPoint(),l,c);if(Er(s,"lockRotation"))return!1;const d=Math.atan2(o-u.y,i-u.x),f=Math.atan2(n-u.y,t-u.x);let g=si(f-d+a);if(s.snapAngle&&s.snapAngle>0){const v=s.snapAngle,w=s.snapThreshold||v,m=Math.ceil(g/v)*v,p=Math.floor(g/v)*v;Math.abs(g-p)<w?g=p:Math.abs(g-m)<w&&(g=m)}g<0&&(g=360+g),g%=360;const y=s.angle!==g;return s.angle=g,y}));function q_(r,e){const t=e.canvas,n=r[t.uniScaleKey];return t.uniformScaling&&!n||!t.uniformScaling&&n}function X_(r,e,t){const n=Er(r,"lockScalingX"),s=Er(r,"lockScalingY");if(n&&s||!e&&(n||s)&&t||n&&e==="x"||s&&e==="y")return!0;const{width:i,height:o,strokeWidth:a}=r;return i===0&&a===0&&e!=="y"||o===0&&a===0&&e!=="x"}const LR=["e","se","s","sw","w","nw","n","ne","e"],ea=(r,e,t)=>{const n=q_(r,t);if(X_(t,e.x!==0&&e.y===0?"x":e.x===0&&e.y!==0?"y":"",n))return Nu;const s=z_(t,e);return"".concat(LR[s],"-resize")};function pm(r,e,t,n){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const i=e.target,o=s.by,a=q_(r,i);let l,c,u,d,f,g;if(X_(i,o,a))return!1;if(e.gestureScale)c=e.scaleX*e.gestureScale,u=e.scaleY*e.gestureScale;else{if(l=hm(e,e.originX,e.originY,t,n),f=o!=="y"?Math.sign(l.x||e.signX||1):1,g=o!=="x"?Math.sign(l.y||e.signY||1):1,e.signX||(e.signX=f),e.signY||(e.signY=g),Er(i,"lockScalingFlip")&&(e.signX!==f||e.signY!==g))return!1;if(d=i._getTransformedDimensions(),a&&!o){const w=Math.abs(l.x)+Math.abs(l.y),{original:m}=e,p=w/(Math.abs(d.x*m.scaleX/i.scaleX)+Math.abs(d.y*m.scaleY/i.scaleY));c=m.scaleX*p,u=m.scaleY*p}else c=Math.abs(l.x*i.scaleX/d.x),u=Math.abs(l.y*i.scaleY/d.y);$_(e)&&(c*=2,u*=2),e.signX!==f&&o!=="y"&&(e.originX=sy(e.originX),c*=-1,e.signX=f),e.signY!==g&&o!=="x"&&(e.originY=sy(e.originY),u*=-1,e.signY=g)}const y=i.scaleX,v=i.scaleY;return o?(o==="x"&&i.set(Rt,c),o==="y"&&i.set(or,u)):(!Er(i,"lockScalingX")&&i.set(Rt,c),!Er(i,"lockScalingY")&&i.set(or,u)),y!==i.scaleX||v!==i.scaleY}const Xl=Ao(wh,Mo((r,e,t,n)=>pm(r,e,t,n))),IR=Ao(wh,Mo((r,e,t,n)=>pm(r,e,t,n,{by:"x"}))),FR=Ao(wh,Mo((r,e,t,n)=>pm(r,e,t,n,{by:"y"}))),$R=["target","ex","ey","skewingSide"],Md={x:{counterAxis:"y",scale:Rt,skew:Po,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:or,skew:Oo,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},BR=["ns","nesw","ew","nwse"],zR=(r,e,t)=>{if(e.x!==0&&Er(t,"lockSkewingY")||e.y!==0&&Er(t,"lockSkewingX"))return Nu;const n=z_(t,e)%4;return"".concat(BR[n],"-resize")};function K_(r,e,t,n,s){const{target:i}=t,{counterAxis:o,origin:a,lockSkewing:l,skew:c,flip:u}=Md[r];if(Er(i,l))return!1;const{origin:d,flip:f}=Md[o],g=We(t[d])*(i[f]?-1:1),y=-Math.sign(g)*(i[u]?-1:1),v=.5*-((i[c]===0&&hm(t,oe,oe,n,s)[r]>0||i[c]>0?1:-1)*y)+.5;return Ao(C_,Mo((m,p,x,_)=>function(S,C,T){let{target:E,ex:A,ey:D,skewingSide:B}=C,P=Ee(C,$R);const{skew:I}=Md[S],L=T.subtract(new O(A,D)).divide(new O(E.scaleX,E.scaleY))[S],G=E[I],W=P[I],V=Math.tan(ze(W)),N=S==="y"?E._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:E._getTransformedDimensions({scaleX:1,scaleY:1}).y,M=2*L*B/Math.max(N,1)+V,z=si(Math.atan(M));E.set(I,z);const Q=G!==E[I];if(Q&&S==="y"){const{skewX:X,scaleX:Z}=E,ee=E._getTransformedDimensions({skewY:G}),Se=E._getTransformedDimensions(),Oe=X!==0?ee.x/Se.x:1;Oe!==1&&E.set(Rt,Oe*Z)}return Q}(r,p,new O(x,_))))(e,j(j({},t),{},{[a]:v,skewingSide:y}),n,s)}const UR=(r,e,t,n)=>K_("x",r,e,t,n),WR=(r,e,t,n)=>K_("y",r,e,t,n);function Th(r,e){return r[e.canvas.altActionKey]}const Kl=(r,e,t)=>{const n=Th(r,t);return e.x===0?n?Po:or:e.y===0?n?Oo:Rt:""},$i=(r,e,t)=>Th(r,t)?zR(0,e,t):ea(r,e,t),dy=(r,e,t,n)=>Th(r,e.target)?WR(r,e,t,n):IR(r,e,t,n),fy=(r,e,t,n)=>Th(r,e.target)?UR(r,e,t,n):FR(r,e,t,n),Q_=()=>({ml:new gr({x:-.5,y:0,cursorStyleHandler:$i,actionHandler:dy,getActionName:Kl}),mr:new gr({x:.5,y:0,cursorStyleHandler:$i,actionHandler:dy,getActionName:Kl}),mb:new gr({x:0,y:.5,cursorStyleHandler:$i,actionHandler:fy,getActionName:Kl}),mt:new gr({x:0,y:-.5,cursorStyleHandler:$i,actionHandler:fy,getActionName:Kl}),tl:new gr({x:-.5,y:-.5,cursorStyleHandler:ea,actionHandler:Xl}),tr:new gr({x:.5,y:-.5,cursorStyleHandler:ea,actionHandler:Xl}),bl:new gr({x:-.5,y:.5,cursorStyleHandler:ea,actionHandler:Xl}),br:new gr({x:.5,y:.5,cursorStyleHandler:ea,actionHandler:Xl}),mtr:new gr({x:0,y:-.5,actionHandler:RR,cursorStyleHandler:DR,offsetY:-40,withConnection:!0,actionName:im})}),VR=()=>({mr:new gr({x:.5,y:0,actionHandler:hy,cursorStyleHandler:$i,actionName:Ha}),ml:new gr({x:-.5,y:0,actionHandler:hy,cursorStyleHandler:$i,actionName:Ha})}),HR=()=>j(j({},Q_()),VR());class qa extends Ms{static getDefaults(){return j(j({},super.getDefaults()),qa.ownDefaults)}constructor(e){super(),Object.assign(this,this.constructor.createControls(),qa.ownDefaults),this.setOptions(e)}static createControls(){return{controls:Q_()}}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const t=e._currentTransform,n=t.target,s=t.action;if(this===n&&s&&s.startsWith(bh))return!1}return super._updateCacheCanvas()}getActiveControl(){const e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const n=Object.entries(this.oCoords);for(let s=n.length-1;s>=0;s--){const[i,o]=n[s],a=this.controls[i];if(a.shouldActivate(i,this,e,t?o.touchCorner:o.corner))return this.__corner=i,{key:i,control:a,coord:this.oCoords[i]}}}calcOCoords(){const e=this.getViewportTransform(),t=this.getCenterPoint(),n=fl(t.x,t.y),s=gl({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),i=nt(n,s),o=nt(e,i),a=nt(o,[1/e[0],0,0,1/e[3],0,0]),l=this.group?Eu(this.calcTransformMatrix()):void 0;l&&(l.scaleX=Math.abs(l.scaleX),l.scaleY=Math.abs(l.scaleY));const c=this._calculateCurrentDimensions(l),u={};return this.forEachControl((d,f)=>{const g=d.positionHandler(c,a,this,d);u[f]=Object.assign(g,this._calcCornerCoords(d,g))}),u}_calcCornerCoords(e,t){const n=this.getTotalAngle();return{corner:e.calcCornerCoords(n,this.cornerSize,t.x,t.y,!1,this),touchCorner:e.calcCornerCoords(n,this.touchCornerSize,t.x,t.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(const t in this.controls)e(this.controls[t],t,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();const t=this.getRelativeCenterPoint(),n=this._calculateCurrentDimensions(),s=this.getViewportTransform();e.translate(t.x,t.y),e.scale(1/s[0],1/s[3]),e.rotate(ze(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-n.x/2,-n.y/2,n.x,n.y),e.restore()}strokeBorders(e,t){e.strokeRect(-t.x/2,-t.y/2,t.x,t.y)}_drawBorders(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=j({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},n);e.save(),e.strokeStyle=s.borderColor,this._setLineDash(e,s.borderDashArray),this.strokeBorders(e,t),s.hasControls&&this.drawControlsConnectingLines(e,t),e.restore()}_renderControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:n,hasControls:s}=this,i=j({hasBorders:n,hasControls:s},t),o=this.getViewportTransform(),a=i.hasBorders,l=i.hasControls,c=nt(o,this.calcTransformMatrix()),u=Eu(c);e.save(),e.translate(u.translateX,u.translateY),e.lineWidth=1*this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(u.angle-=180),e.rotate(ze(this.group?u.angle:this.angle)),a&&this.drawBorders(e,u,t),l&&this.drawControls(e,t),e.restore()}drawBorders(e,t,n){let s;if(n&&n.forActiveSelection||this.group){const i=um(this.width,this.height,_h(t)),o=this.isStrokeAccountedForInDimensions()?om:(this.strokeUniform?new O().scalarAdd(this.canvas?this.canvas.getZoom():1):new O(t.scaleX,t.scaleY)).scalarMultiply(this.strokeWidth);s=i.add(o).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else s=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,s,n)}drawControlsConnectingLines(e,t){let n=!1;e.beginPath(),this.forEachControl((s,i)=>{s.withConnection&&s.getVisibility(this,i)&&(n=!0,e.moveTo(s.x*t.x,s.y*t.y),e.lineTo(s.x*t.x+s.offsetX,s.y*t.y+s.offsetY))}),n&&e.stroke()}drawControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.save();const n=this.getCanvasRetinaScaling(),{cornerStrokeColor:s,cornerDashArray:i,cornerColor:o}=this,a=j({cornerStrokeColor:s,cornerDashArray:i,cornerColor:o},t);e.setTransform(n,0,0,n,0,0),e.strokeStyle=e.fillStyle=a.cornerColor,this.transparentCorners||(e.strokeStyle=a.cornerStrokeColor),this._setLineDash(e,a.cornerDashArray),this.forEachControl((l,c)=>{if(l.getVisibility(this,c)){const u=this.oCoords[c];l.render(e,u.x,u.y,a,this)}}),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,t){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t}setControlsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(e).forEach(t=>{let[n,s]=t;return this.setControlVisible(n,s)})}clearContextTop(e){if(!this.canvas)return;const t=this.canvas.contextTop;if(!t)return;const n=this.canvas.viewportTransform;t.save(),t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this.transform(t);const s=this.width+4,i=this.height+4;return t.clearRect(-s/2,-i/2,s,i),e||t.restore(),t}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}function J_(r,e){return e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(n=>{n!=="constructor"&&Object.defineProperty(r.prototype,n,Object.getOwnPropertyDescriptor(t.prototype,n)||Object.create(null))})}),r}k(qa,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class ft extends qa{}J_(ft,[U_]),H.setClass(ft),H.setClass(ft,"object");const GR=(r,e,t,n)=>{const s=2*(n=Math.round(n))+1,{data:i}=r.getImageData(e-n,t-n,s,s);for(let o=3;o<i.length;o+=4)if(i[o]>0)return!1;return!0};class Z_{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new O(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new O(1/this.options.scaleX,1/this.options.scaleY):new O(1,1)}createSideVector(e,t){const n=gg(e,t);return this.options.strokeUniform?n.multiply(this.scale):n}projectOrthogonally(e,t,n){return this.applySkew(e.add(this.calcOrthogonalProjection(e,t,n)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(e){const t=new O(e);return t.y+=t.x*Math.tan(ze(this.options.skewY)),t.x+=t.y*Math.tan(ze(this.options.skewX)),t}scaleUnitVector(e,t){return e.multiply(this.strokeUniformScalar).scalarMultiply(t)}}const YR=new O;class Qi extends Z_{static getOrthogonalRotationFactor(e,t){const n=t?mg(e,t):_R(e);return Math.abs(n)<dl?-1:1}constructor(e,t,n,s){super(s),k(this,"AB",void 0),k(this,"AC",void 0),k(this,"alpha",void 0),k(this,"bisector",void 0),this.A=new O(e),this.B=new O(t),this.C=new O(n),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=mg(this.AB,this.AC),this.bisector=fm(H_(this.AB.eq(YR)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const s=this.createSideVector(e,t),i=G_(s),o=Qi.getOrthogonalRotationFactor(i,this.bisector);return this.scaleUnitVector(i,n*o)}projectBevel(){const e=[];return(this.alpha%Cu==0?[this.B]:[this.B,this.C]).forEach(t=>{e.push(this.projectOrthogonally(this.A,t)),e.push(this.projectOrthogonally(this.A,t,-this.strokeProjectionMagnitude))}),e}projectMiter(){const e=[],t=Math.abs(this.alpha),n=1/Math.sin(t/2),s=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*n),i=this.options.strokeUniform?pg(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return pg(s)/this.strokeProjectionMagnitude<=i&&e.push(this.applySkew(this.A.add(s))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,t){const n=[],s=new O(Qi.getOrthogonalRotationFactor(this.bisector),Qi.getOrthogonalRotationFactor(new O(this.bisector.y,this.bisector.x)));return[new O(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(s),new O(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(s)].forEach(i=>{iy(i,e,t)&&n.push(this.A.add(i))}),n}projectRoundWithSkew(e,t){const n=[],{skewX:s,skewY:i,scaleX:o,scaleY:a,strokeUniform:l}=this.options,c=new O(Math.tan(ze(s)),Math.tan(ze(i))),u=this.strokeProjectionMagnitude,d=l?u/a/Math.sqrt(1/a**2+1/o**2*c.y**2):u/Math.sqrt(1+c.y**2),f=new O(Math.sqrt(Math.max(u**2-d**2,0)),d),g=l?u/Math.sqrt(1+c.x**2*(1/a)**2/(1/o+1/o*c.x*c.y)**2):u/Math.sqrt(1+c.x**2/(1+c.x*c.y)**2),y=new O(g,Math.sqrt(Math.max(u**2-g**2,0)));return[y,y.scalarMultiply(-1),f,f.scalarMultiply(-1)].map(v=>this.applySkew(l?v.multiply(this.strokeUniformScalar):v)).forEach(v=>{iy(v,e,t)&&n.push(this.applySkew(this.A).add(v))}),n}projectRound(){const e=[];e.push(...this.projectBevel());const t=this.alpha%Cu==0,n=this.applySkew(this.A),s=e[t?0:2].subtract(n),i=e[t?1:0].subtract(n),o=t?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),a=va(s,o)>0,l=a?s:i,c=a?i:s;return this.isSkewed()?e.push(...this.projectRoundWithSkew(l,c)):e.push(...this.projectRoundNoSkew(l,c)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector}))}}class gy extends Z_{constructor(e,t,n){super(n),this.A=new O(e),this.T=new O(t)}calcOrthogonalProjection(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const s=this.createSideVector(e,t);return this.scaleUnitVector(G_(s),n)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const e=[];if(!this.isSkewed()&&this.A.eq(this.T)){const t=new O(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(t)),this.applySkew(this.A.subtract(t)))}else e.push(...new Qi(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){const e=[];if(this.A.eq(this.T)){const t=new O(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(t),this.A.subtract(t))}else{const t=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),n=this.scaleUnitVector(fm(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),s=this.A.add(n);e.push(s.add(t),s.subtract(t))}return e.map(t=>this.applySkew(t))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e}))}}const qR=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const n=[];if(r.length===0)return n;const s=r.reduce((i,o)=>(i[i.length-1].eq(o)||i.push(new O(o)),i),[new O(r[0])]);if(s.length===1)t=!0;else if(!t){const i=s[0],o=((a,l)=>{for(let c=a.length-1;c>=0;c--)if(l(a[c],c,a))return c;return-1})(s,a=>!a.eq(i));s.splice(o+1)}return s.forEach((i,o,a)=>{let l,c;o===0?(c=a[1],l=t?i:a[a.length-1]):o===a.length-1?(l=a[o-1],c=t?i:a[0]):(l=a[o-1],c=a[o+1]),t&&a.length===1?n.push(...new gy(i,i,e).project()):!t||o!==0&&o!==a.length-1?n.push(...new Qi(i,l,c,e).project()):n.push(...new gy(i,o===0?c:l,e).project())}),n},XR=r=>r.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),mm=r=>{const e=[];for(let t,n=0;n<r.length;n++)(t=KR(r,n))!==!1&&e.push(t);return e},KR=(r,e)=>{const t=r.charCodeAt(e);if(isNaN(t))return"";if(t<55296||t>57343)return r.charAt(e);if(55296<=t&&t<=56319){if(r.length<=e+1)throw"High surrogate without following low surrogate";const s=r.charCodeAt(e+1);if(56320>s||s>57343)throw"High surrogate without following low surrogate";return r.charAt(e)+r.charAt(e+1)}if(e===0)throw"Low surrogate without preceding high surrogate";const n=r.charCodeAt(e-1);if(55296>n||n>56319)throw"Low surrogate without preceding high surrogate";return!1},vm=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return r.fill!==e.fill||r.stroke!==e.stroke||r.strokeWidth!==e.strokeWidth||r.fontSize!==e.fontSize||r.fontFamily!==e.fontFamily||r.fontWeight!==e.fontWeight||r.fontStyle!==e.fontStyle||r.textBackgroundColor!==e.textBackgroundColor||r.deltaY!==e.deltaY||t&&(r.overline!==e.overline||r.underline!==e.underline||r.linethrough!==e.linethrough)},QR=(r,e)=>{const t=e.split(`
`),n=[];let s=-1,i={};r=ml(r);for(let o=0;o<t.length;o++){const a=mm(t[o]);if(r[o])for(let l=0;l<a.length;l++){s++;const c=r[o][l];c&&Object.keys(c).length>0&&(vm(i,c,!0)?n.push({start:s,end:s+1,style:c}):n[n.length-1].end++),i=c||{}}else s+=a.length,i={}}return n},JR=(r,e)=>{if(!Array.isArray(r))return ml(r);const t=e.split(sm),n={};let s=-1,i=0;for(let o=0;o<t.length;o++){const a=mm(t[o]);for(let l=0;l<a.length;l++)s++,r[i]&&r[i].start<=s&&s<r[i].end&&(n[o]=n[o]||{},n[o][l]=j({},r[i].style),s===r[i].end-1&&i++)}return n},ks=["display","transform",Ge,"fill-opacity","fill-rule","opacity",Dt,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function py(r,e){const t=r.nodeName,n=r.getAttribute("class"),s=r.getAttribute("id"),i="(?![a-zA-Z\\-]+)";let o;if(o=new RegExp("^"+t,"i"),e=e.replace(o,""),s&&e.length&&(o=new RegExp("#"+s+i,"i"),e=e.replace(o,"")),n&&e.length){const a=n.split(" ");for(let l=a.length;l--;)o=new RegExp("\\."+a[l]+i,"i"),e=e.replace(o,"")}return e.length===0}function ZR(r,e){let t=!0;const n=py(r,e.pop());return n&&e.length&&(t=function(s,i){let o,a=!0;for(;s.parentElement&&s.parentElement.nodeType===1&&i.length;)a&&(o=i.pop()),a=py(s=s.parentElement,o);return i.length===0}(r,e)),n&&t&&e.length===0}const e4=r=>{var e;return(e=jR[r])!==null&&e!==void 0?e:r},t4=new RegExp("(".concat(yo,")"),"gi"),eS=r=>r.replace(t4," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var my,vy,yy,xy,wy,by,_y;const yt="(".concat(yo,")"),r4=String.raw(my||(my=Jr(["(skewX)(",")"],["(skewX)\\(","\\)"])),yt),n4=String.raw(vy||(vy=Jr(["(skewY)(",")"],["(skewY)\\(","\\)"])),yt),s4=String.raw(yy||(yy=Jr(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),yt,yt,yt),i4=String.raw(xy||(xy=Jr(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),yt,yt),o4=String.raw(wy||(wy=Jr(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),yt,yt),a4=String.raw(by||(by=Jr(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),yt,yt,yt,yt,yt,yt),ym="(?:".concat(a4,"|").concat(o4,"|").concat(s4,"|").concat(i4,"|").concat(r4,"|").concat(n4,")"),l4="(?:".concat(ym,"*)"),c4=String.raw(_y||(_y=Jr(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),l4),u4=new RegExp(c4),h4=new RegExp(ym),d4=new RegExp(ym,"g");function yg(r){const e=[];if(!(r=eS(r).replace(/\s*([()])\s*/gi,"$1"))||r&&!u4.test(r))return[...wt];for(const t of r.matchAll(d4)){const n=h4.exec(t[0]);if(!n)continue;let s=wt;const i=n.filter(y=>!!y),[,o,...a]=i,[l,c,u,d,f,g]=a.map(y=>parseFloat(y));switch(o){case"translate":s=fl(l,c);break;case im:s=gl({angle:l},{x:c,y:u});break;case bh:s=lm(l,c);break;case Po:s=O_(l);break;case Oo:s=N_(l);break;case"matrix":s=[l,c,u,d,f,g]}e.push(s)}return am(e)}function f4(r,e,t,n){const s=Array.isArray(e);let i,o=e;if(r!==Ge&&r!==Dt||e!==Mt){if(r==="strokeUniform")return e==="non-scaling-stroke";if(r==="strokeDashArray")o=e===Mt?null:e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(r==="transformMatrix")o=t&&t.transformMatrix?nt(t.transformMatrix,yg(e)):yg(e);else if(r==="visible")o=e!==Mt&&e!=="hidden",t&&t.visible===!1&&(o=!1);else if(r==="opacity")o=parseFloat(e),t&&t.opacity!==void 0&&(o*=t.opacity);else if(r==="textAnchor")o=e==="start"?me:e==="end"?$e:oe;else if(r==="charSpacing")i=Xi(e,n)/n*1e3;else if(r==="paintFirst"){const a=e.indexOf(Ge),l=e.indexOf(Dt);o=Ge,(a>-1&&l>-1&&l<a||a===-1&&l>-1)&&(o=Dt)}else{if(r==="href"||r==="xlink:href"||r==="font")return e;if(r==="imageSmoothing")return e==="optimizeQuality";i=s?e.map(Xi):Xi(e,n)}}else o="";return!s&&isNaN(i)?o:i}function g4(r,e){const t=r.match(TR);if(!t)return;const n=t[1],s=t[3],i=t[4],o=t[5],a=t[6];n&&(e.fontStyle=n),s&&(e.fontWeight=isNaN(parseFloat(s))?s:parseFloat(s)),i&&(e.fontSize=Xi(i)),a&&(e.fontFamily=a),o&&(e.lineHeight=o==="normal"?1:o)}function p4(r,e){r.replace(/;\s*$/,"").split(";").forEach(t=>{if(!t)return;const[n,s]=t.split(":");e[n.trim().toLowerCase()]=s.trim()})}function m4(r){const e={},t=r.getAttribute("style");return t&&(typeof t=="string"?p4(t,e):function(n,s){Object.entries(n).forEach(i=>{let[o,a]=i;a!==void 0&&(s[o.toLowerCase()]=a)})}(t,e)),e}const v4={stroke:"strokeOpacity",fill:"fillOpacity"};function En(r,e,t){if(!r)return{};let n,s={},i=nm;r.parentNode&&ly.test(r.parentNode.nodeName)&&(s=En(r.parentElement,e,t),s.fontSize&&(n=i=Xi(s.fontSize)));const o=j(j(j({},e.reduce((c,u)=>{const d=r.getAttribute(u);return d&&(c[u]=d),c},{})),function(c){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d={};for(const f in u)ZR(c,f.split(" "))&&(d=j(j({},d),u[f]));return d}(r,t)),m4(r));o[Ad]&&r.setAttribute(Ad,o[Ad]),o[Nd]&&(n=Xi(o[Nd],i),o[Nd]="".concat(n));const a={};for(const c in o){const u=e4(c),d=f4(u,o[c],s,n);a[u]=d}a&&a.font&&g4(a.font,a);const l=j(j({},s),a);return ly.test(r.nodeName)?l:function(c){const u=ft.getDefaults();return Object.entries(v4).forEach(d=>{let[f,g]=d;if(c[g]===void 0||c[f]==="")return;if(c[f]===void 0){if(!u[f])return;c[f]=u[f]}if(c[f].indexOf("url(")===0)return;const y=new pe(c[f]);c[f]=y.setAlpha(ue(y.getAlpha()*c[g],2)).toRgba()}),c}(l)}const y4=["left","top","width","height","visible"],tS=["rx","ry"];class Sr extends ft{static getDefaults(){return j(j({},super.getDefaults()),Sr.ownDefaults)}constructor(e){super(),Object.assign(this,Sr.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:t}=this;e&&!t?this.ry=e:t&&!e&&(this.rx=t)}_render(e){const{width:t,height:n}=this,s=-t/2,i=-n/2,o=this.rx?Math.min(this.rx,t/2):0,a=this.ry?Math.min(this.ry,n/2):0,l=o!==0||a!==0;e.beginPath(),e.moveTo(s+o,i),e.lineTo(s+t-o,i),l&&e.bezierCurveTo(s+t-$n*o,i,s+t,i+$n*a,s+t,i+a),e.lineTo(s+t,i+n-a),l&&e.bezierCurveTo(s+t,i+n-$n*a,s+t-$n*o,i+n,s+t-o,i+n),e.lineTo(s+o,i+n),l&&e.bezierCurveTo(s+$n*o,i+n,s,i+n-$n*a,s,i+n-a),e.lineTo(s,i+a),l&&e.bezierCurveTo(s,i+$n*a,s+$n*o,i,s+o,i),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...tS,...e])}_toSVG(){const{width:e,height:t,rx:n,ry:s}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-e/2,'" y="').concat(-t/2,'" rx="').concat(n,'" ry="').concat(s,'" width="').concat(e,'" height="').concat(t,`" />
`)]}static async fromElement(e,t,n){const s=En(e,this.ATTRIBUTE_NAMES,n),{left:i=0,top:o=0,width:a=0,height:l=0,visible:c=!0}=s,u=Ee(s,y4);return new this(j(j(j({},t),u),{},{left:i,top:o,width:a,height:l,visible:!!(c&&a&&l)}))}}k(Sr,"type","Rect"),k(Sr,"cacheProperties",[...jn,...tS]),k(Sr,"ownDefaults",{rx:0,ry:0}),k(Sr,"ATTRIBUTE_NAMES",[...ks,"x","y","rx","ry","width","height"]),H.setClass(Sr),H.setSVGClass(Sr);const hn="initialization",Au="added",xm="removed",Mu="imperative",rS=(r,e)=>{const{strokeUniform:t,strokeWidth:n,width:s,height:i,group:o}=e,a=o&&o!==r?Ch(o.calcTransformMatrix(),r.calcTransformMatrix()):null,l=a?e.getRelativeCenterPoint().transform(a):e.getRelativeCenterPoint(),c=!e.isStrokeAccountedForInDimensions(),u=t&&c?aR(new O(n,n),void 0,r.calcTransformMatrix()):om,d=!t&&c?n:0,f=um(s+d,i+d,am([a,e.calcOwnMatrix()],!0)).add(u).scalarDivide(2);return[l.subtract(f),l.add(f)]};class jh{calcLayoutResult(e,t){if(this.shouldPerformLayout(e))return this.calcBoundingBox(t,e)}shouldPerformLayout(e){let{type:t,prevStrategy:n,strategy:s}=e;return t===hn||t===Mu||!!n&&s!==n}shouldLayoutClipPath(e){let{type:t,target:{clipPath:n}}=e;return t!==hn&&n&&!n.absolutePositioned}getInitialSize(e,t){return t.size}calcBoundingBox(e,t){const{type:n,target:s}=t;if(n===Mu&&t.overrides)return t.overrides;if(e.length===0)return;const{left:i,top:o,width:a,height:l}=gn(e.map(d=>rS(s,d)).reduce((d,f)=>d.concat(f),[])),c=new O(a,l),u=new O(i,o).add(c.scalarDivide(2));if(n===hn){const d=this.getInitialSize(t,{size:c,center:u});return{center:u,relativeCorrection:new O(0,0),size:d}}return{center:u.transform(s.calcOwnMatrix()),size:c}}}k(jh,"type","strategy");class xg extends jh{shouldPerformLayout(e){return!0}}k(xg,"type","fit-content"),H.setClass(xg);const x4=["strategy"],w4=["target","strategy","bubbles","prevStrategy"],nS="layoutManager";class Xa{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new xg;k(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){const t=j(j({bubbles:!0,strategy:this.strategy},e),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(t);const n=this.getLayoutResult(t);n&&this.commitLayout(t,n),this.onAfterLayout(t,n),this._prevLayoutStrategy=t.strategy}attachHandlers(e,t){const{target:n}=t;return[Tu,__,Ha,S_,wh,C_,ku,GD,YD].map(s=>e.on(s,i=>this.performLayout(s===Tu?{type:"object_modified",trigger:s,e:i,target:n}:{type:"object_modifying",trigger:s,e:i,target:n})))}subscribe(e,t){this.unsubscribe(e,t);const n=this.attachHandlers(e,t);this._subscriptions.set(e,n)}unsubscribe(e,t){(this._subscriptions.get(e)||[]).forEach(n=>n()),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach(t=>this.unsubscribe(t,e))}subscribeTargets(e){e.targets.forEach(t=>this.subscribe(t,e))}onBeforeLayout(e){const{target:t,type:n}=e,{canvas:s}=t;if(n===hn||n===Au?this.subscribeTargets(e):n===xm&&this.unsubscribeTargets(e),t.fire("layout:before",{context:e}),s&&s.fire("object:layout:before",{target:t,context:e}),n===Mu&&e.deep){const i=Ee(e,x4);t.forEachObject(o=>o.layoutManager&&o.layoutManager.performLayout(j(j({},i),{},{bubbles:!1,target:o})))}}getLayoutResult(e){const{target:t,strategy:n,type:s}=e,i=n.calcLayoutResult(e,t.getObjects());if(!i)return;const o=s===hn?new O:t.getRelativeCenterPoint(),{center:a,correction:l=new O,relativeCorrection:c=new O}=i,u=o.subtract(a).add(l).transform(s===hn?wt:kr(t.calcOwnMatrix()),!0).add(c);return{result:i,prevCenter:o,nextCenter:a,offset:u}}commitLayout(e,t){const{target:n}=e,{result:{size:s},nextCenter:i}=t;var o,a;n.set({width:s.x,height:s.y}),this.layoutObjects(e,t),e.type===hn?n.set({left:(o=e.x)!==null&&o!==void 0?o:i.x+s.x*We(n.originX),top:(a=e.y)!==null&&a!==void 0?a:i.y+s.y*We(n.originY)}):(n.setPositionByOrigin(i,oe,oe),n.setCoords(),n.set("dirty",!0))}layoutObjects(e,t){const{target:n}=e;n.forEachObject(s=>{s.group===n&&this.layoutObject(e,t,s)}),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,t,n.clipPath)}layoutObject(e,t,n){let{offset:s}=t;n.set({left:n.left+s.x,top:n.top+s.y})}onAfterLayout(e,t){const{target:n,strategy:s,bubbles:i,prevStrategy:o}=e,a=Ee(e,w4),{canvas:l}=n;n.fire("layout:after",{context:e,result:t}),l&&l.fire("object:layout:after",{context:e,result:t,target:n});const c=n.parent;i&&c!=null&&c.layoutManager&&((a.path||(a.path=[])).push(n),c.layoutManager.performLayout(j(j({},a),{},{target:c}))),n.set("dirty",!0)}dispose(){const{_subscriptions:e}=this;e.forEach(t=>t.forEach(n=>n())),e.clear()}toObject(){return{type:nS,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}H.setClass(Xa,nS);const b4=["type","objects","layoutManager"];class _4 extends Xa{performLayout(){}}class Qs extends k_(ft){static getDefaults(){return j(j({},super.getDefaults()),Qs.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),k(this,"_activeObjects",[]),k(this,"__objectSelectionTracker",void 0),k(this,"__objectSelectionDisposer",void 0),Object.assign(this,Qs.ownDefaults),this.setOptions(t),this.groupInit(e,t)}groupInit(e,t){var n;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(s=>{this.enterGroup(s,!1)}),this.layoutManager=(n=t.layoutManager)!==null&&n!==void 0?n:new Xa,this.layoutManager.performLayout({type:hn,target:this,targets:[...e],x:t.left,y:t.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(ys("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(e)===-1||(ys("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter((t,n,s)=>this.canEnterGroup(t)&&s.indexOf(t)===n)}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const s=this._filterObjectsBeforeEnteringGroup(t),i=super.add(...s);return this._onAfterObjectsChange(Au,s),i}insertAt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];const i=this._filterObjectsBeforeEnteringGroup(n),o=super.insertAt(e,...i);return this._onAfterObjectsChange(Au,i),o}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange(xm,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,t){this.exitGroup(e,t),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,t){this.layoutManager.performLayout({type:e,targets:t,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,t){const n=this[e];return super._set(e,t),e==="canvas"&&n!==t&&(this._objects||[]).forEach(s=>{s._set(e,t)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,t){let{target:n}=t;const s=this._activeObjects;if(e)s.push(n),this._set("dirty",!0);else if(s.length>0){const i=s.indexOf(n);i>-1&&(s.splice(i,1),this._set("dirty",!0))}}_watchObject(e,t){e&&this._watchObject(!1,t),e?(t.on("selected",this.__objectSelectionTracker),t.on("deselected",this.__objectSelectionDisposer)):(t.off("selected",this.__objectSelectionTracker),t.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,t){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,t)}_enterGroup(e,t){t&&Ou(e,nt(kr(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);const n=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();n&&(n===e||e.isDescendantOf(n))&&this._activeObjects.push(e)}exitGroup(e,t){this._exitGroup(e,t),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,t){e._set("group",void 0),t||(Ou(e,nt(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const n=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;n>-1&&this._activeObjects.splice(n,1)}shouldCache(){const e=ft.prototype.shouldCache.call(this);if(e){for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1}return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e){this._renderBackground(e);for(let n=0;n<this._objects.length;n++){var t;(t=this.canvas)!==null&&t!==void 0&&t.preserveObjectStacking&&this._objects[n].group!==this?(e.save(),e.transform(...kr(this.calcTransformMatrix())),this._objects[n].render(e),e.restore()):this._objects[n].group===this&&this._objects[n].render(e)}this._drawClipPath(e,this.clipPath)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(e=>e.setCoords())}triggerLayout(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(j({target:this,type:Mu},e))}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,t){const n=this.includeDefaultValues;return this._objects.filter(function(s){return!s.excludeFromExport}).map(function(s){const i=s.includeDefaultValues;s.includeDefaultValues=n;const o=s[e||"toObject"](t);return s.includeDefaultValues=i,o})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.layoutManager.toObject();return j(j(j({},super.toObject(["subTargetCheck","interactive",...e])),t.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:t}:{}),{},{objects:this.__serializeObjects("toObject",e)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(e=>{this._watchObject(!1,e),e.dispose()}),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const t=Sr.prototype._toSVG.call(this),n=t.indexOf("COMMON_PARTS");t[n]='for="group" ';const s=t.join("");return e?e(s):s}_toSVG(e){const t=["<g ","COMMON_PARTS",` >
`],n=this._createSVGBgRect(e);n&&t.push("		",n);for(let s=0;s<this._objects.length;s++)t.push("		",this._objects[s].toSVG(e));return t.push(`</g>
`),t}getSvgStyles(){const e=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")}toClipPathSVG(e){const t=[],n=this._createSVGBgRect(e);n&&t.push("	",n);for(let s=0;s<this._objects.length;s++)t.push("	",this._objects[s].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}static fromObject(e,t){let{type:n,objects:s=[],layoutManager:i}=e,o=Ee(e,b4);return Promise.all([Ga(s,t),Sh(o,t)]).then(a=>{let[l,c]=a;const u=new this(l,j(j(j({},o),c),{},{layoutManager:new _4}));if(i){const d=H.getClass(i.type),f=H.getClass(i.strategy);u.layoutManager=new d(new f)}else u.layoutManager=new Xa;return u.layoutManager.subscribeTargets({type:hn,target:u,targets:u.getObjects()}),u.setCoords(),u})}}k(Qs,"type","Group"),k(Qs,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),H.setClass(Qs);const S4=(r,e)=>Math.min(e.width/r.width,e.height/r.height),C4=(r,e)=>Math.max(e.width/r.width,e.height/r.height);var Sy;const we="(".concat(yo,")"),k4="(M) (?:".concat(we," ").concat(we," ?)+"),T4="(L) (?:".concat(we," ").concat(we," ?)+"),j4="(H) (?:".concat(we," ?)+"),E4="(V) (?:".concat(we," ?)+"),P4=String.raw(Sy||(Sy=Jr(["(Z)s*"],["(Z)\\s*"]))),O4="(C) (?:".concat(we," ").concat(we," ").concat(we," ").concat(we," ").concat(we," ").concat(we," ?)+"),N4="(S) (?:".concat(we," ").concat(we," ").concat(we," ").concat(we," ?)+"),A4="(Q) (?:".concat(we," ").concat(we," ").concat(we," ").concat(we," ?)+"),M4="(T) (?:".concat(we," ").concat(we," ?)+"),D4="(A) (?:".concat(we," ").concat(we," ").concat(we," ([01]) ?([01]) ").concat(we," ").concat(we," ?)+"),sS="(?:(?:".concat(k4,")")+"|(?:".concat(T4,")")+"|(?:".concat(j4,")")+"|(?:".concat(E4,")")+"|(?:".concat(P4,")")+"|(?:".concat(O4,")")+"|(?:".concat(N4,")")+"|(?:".concat(A4,")")+"|(?:".concat(M4,")")+"|(?:".concat(D4,"))"),R4={m:"l",M:"L"},L4=(r,e,t,n,s,i,o,a,l,c,u)=>{const d=Sn(r),f=Cn(r),g=Sn(e),y=Cn(e),v=t*s*g-n*i*y+o,w=n*s*g+t*i*y+a;return["C",c+l*(-t*s*f-n*i*d),u+l*(-n*s*f+t*i*d),v+l*(t*s*y+n*i*g),w+l*(n*s*y-t*i*g),v,w]},Cy=(r,e,t,n)=>{const s=Math.atan2(e,r),i=Math.atan2(n,t);return i>=s?i-s:2*Math.PI-(s-i)};function ky(r,e,t,n,s,i,o,a){let l;if(he.cachesBoundsOfCurve&&(l=[...arguments].join(),ma.boundsOfCurveCache[l]))return ma.boundsOfCurveCache[l];const c=Math.sqrt,u=Math.abs,d=[],f=[[0,0],[0,0]];let g=6*r-12*t+6*s,y=-3*r+9*t-9*s+3*o,v=3*t-3*r;for(let _=0;_<2;++_){if(_>0&&(g=6*e-12*n+6*i,y=-3*e+9*n-9*i+3*a,v=3*n-3*e),u(y)<1e-12){if(u(g)<1e-12)continue;const A=-v/g;0<A&&A<1&&d.push(A);continue}const S=g*g-4*v*y;if(S<0)continue;const C=c(S),T=(-g+C)/(2*y);0<T&&T<1&&d.push(T);const E=(-g-C)/(2*y);0<E&&E<1&&d.push(E)}let w=d.length;const m=w,p=iS(r,e,t,n,s,i,o,a);for(;w--;){const{x:_,y:S}=p(d[w]);f[0][w]=_,f[1][w]=S}f[0][m]=r,f[1][m]=e,f[0][m+1]=o,f[1][m+1]=a;const x=[new O(Math.min(...f[0]),Math.min(...f[1])),new O(Math.max(...f[0]),Math.max(...f[1]))];return he.cachesBoundsOfCurve&&(ma.boundsOfCurveCache[l]=x),x}const I4=(r,e,t)=>{let[n,s,i,o,a,l,c,u]=t;const d=((f,g,y,v,w,m,p)=>{if(y===0||v===0)return[];let x=0,_=0,S=0;const C=Math.PI,T=p*rm,E=Cn(T),A=Sn(T),D=.5*(-A*f-E*g),B=.5*(-A*g+E*f),P=y**2,I=v**2,L=B**2,G=D**2,W=P*I-P*L-I*G;let V=Math.abs(y),N=Math.abs(v);if(W<0){const ot=Math.sqrt(1-W/(P*I));V*=ot,N*=ot}else S=(w===m?-1:1)*Math.sqrt(W/(P*L+I*G));const M=S*V*B/N,z=-S*N*D/V,Q=A*M-E*z+.5*f,X=E*M+A*z+.5*g;let Z=Cy(1,0,(D-M)/V,(B-z)/N),ee=Cy((D-M)/V,(B-z)/N,(-D-M)/V,(-B-z)/N);m===0&&ee>0?ee-=2*C:m===1&&ee<0&&(ee+=2*C);const Se=Math.ceil(Math.abs(ee/C*2)),Oe=[],le=ee/Se,Pn=8/3*Math.sin(le/4)*Math.sin(le/4)/Math.sin(le/2);let Gt=Z+le;for(let ot=0;ot<Se;ot++)Oe[ot]=L4(Z,Gt,A,E,V,N,Q,X,Pn,x,_),x=Oe[ot][5],_=Oe[ot][6],Z=Gt,Gt+=le;return Oe})(c-r,u-e,s,i,a,l,o);for(let f=0,g=d.length;f<g;f++)d[f][1]+=r,d[f][2]+=e,d[f][3]+=r,d[f][4]+=e,d[f][5]+=r,d[f][6]+=e;return d},F4=r=>{let e=0,t=0,n=0,s=0;const i=[];let o,a=0,l=0;for(const c of r){const u=[...c];let d;switch(u[0]){case"l":u[1]+=e,u[2]+=t;case"L":e=u[1],t=u[2],d=["L",e,t];break;case"h":u[1]+=e;case"H":e=u[1],d=["L",e,t];break;case"v":u[1]+=t;case"V":t=u[1],d=["L",e,t];break;case"m":u[1]+=e,u[2]+=t;case"M":e=u[1],t=u[2],n=u[1],s=u[2],d=["M",e,t];break;case"c":u[1]+=e,u[2]+=t,u[3]+=e,u[4]+=t,u[5]+=e,u[6]+=t;case"C":a=u[3],l=u[4],e=u[5],t=u[6],d=["C",u[1],u[2],a,l,e,t];break;case"s":u[1]+=e,u[2]+=t,u[3]+=e,u[4]+=t;case"S":o==="C"?(a=2*e-a,l=2*t-l):(a=e,l=t),e=u[3],t=u[4],d=["C",a,l,u[1],u[2],e,t],a=d[3],l=d[4];break;case"q":u[1]+=e,u[2]+=t,u[3]+=e,u[4]+=t;case"Q":a=u[1],l=u[2],e=u[3],t=u[4],d=["Q",a,l,e,t];break;case"t":u[1]+=e,u[2]+=t;case"T":o==="Q"?(a=2*e-a,l=2*t-l):(a=e,l=t),e=u[1],t=u[2],d=["Q",a,l,e,t];break;case"a":u[6]+=e,u[7]+=t;case"A":I4(e,t,u).forEach(f=>i.push(f)),e=u[6],t=u[7];break;case"z":case"Z":e=n,t=s,d=["Z"]}d?(i.push(d),o=d[0]):o=""}return i},Du=(r,e,t,n)=>Math.sqrt((t-r)**2+(n-e)**2),iS=(r,e,t,n,s,i,o,a)=>l=>{const c=l**3,u=(g=>3*g**2*(1-g))(l),d=(g=>3*g*(1-g)**2)(l),f=(g=>(1-g)**3)(l);return new O(o*c+s*u+t*d+r*f,a*c+i*u+n*d+e*f)},oS=r=>r**2,aS=r=>2*r*(1-r),lS=r=>(1-r)**2,$4=(r,e,t,n,s,i,o,a)=>l=>{const c=oS(l),u=aS(l),d=lS(l),f=3*(d*(t-r)+u*(s-t)+c*(o-s)),g=3*(d*(n-e)+u*(i-n)+c*(a-i));return Math.atan2(g,f)},B4=(r,e,t,n,s,i)=>o=>{const a=oS(o),l=aS(o),c=lS(o);return new O(s*a+t*l+r*c,i*a+n*l+e*c)},z4=(r,e,t,n,s,i)=>o=>{const a=1-o,l=2*(a*(t-r)+o*(s-t)),c=2*(a*(n-e)+o*(i-n));return Math.atan2(c,l)},Ty=(r,e,t)=>{let n=new O(e,t),s=0;for(let i=1;i<=100;i+=1){const o=r(i/100);s+=Du(n.x,n.y,o.x,o.y),n=o}return s},U4=(r,e)=>{let t,n=0,s=0,i={x:r.x,y:r.y},o=j({},i),a=.01,l=0;const c=r.iterator,u=r.angleFinder;for(;s<e&&a>1e-4;)o=c(n),l=n,t=Du(i.x,i.y,o.x,o.y),t+s>e?(n-=a,a/=2):(i=o,n+=a,s+=t);return j(j({},o),{},{angle:u(l)})},cS=r=>{let e,t,n=0,s=0,i=0,o=0,a=0;const l=[];for(const c of r){const u={x:s,y:i,command:c[0],length:0};switch(c[0]){case"M":t=u,t.x=o=s=c[1],t.y=a=i=c[2];break;case"L":t=u,t.length=Du(s,i,c[1],c[2]),s=c[1],i=c[2];break;case"C":e=iS(s,i,c[1],c[2],c[3],c[4],c[5],c[6]),t=u,t.iterator=e,t.angleFinder=$4(s,i,c[1],c[2],c[3],c[4],c[5],c[6]),t.length=Ty(e,s,i),s=c[5],i=c[6];break;case"Q":e=B4(s,i,c[1],c[2],c[3],c[4]),t=u,t.iterator=e,t.angleFinder=z4(s,i,c[1],c[2],c[3],c[4]),t.length=Ty(e,s,i),s=c[3],i=c[4];break;case"Z":t=u,t.destX=o,t.destY=a,t.length=Du(s,i,o,a),s=o,i=a}n+=t.length,l.push(t)}return l.push({length:n,x:s,y:i}),l},W4=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:cS(r),n=0;for(;e-t[n].length>0&&n<t.length-2;)e-=t[n].length,n++;const s=t[n],i=e/s.length,o=r[n];switch(s.command){case"M":return{x:s.x,y:s.y,angle:0};case"Z":return j(j({},new O(s.x,s.y).lerp(new O(s.destX,s.destY),i)),{},{angle:Math.atan2(s.destY-s.y,s.destX-s.x)});case"L":return j(j({},new O(s.x,s.y).lerp(new O(o[1],o[2]),i)),{},{angle:Math.atan2(o[2]-s.y,o[1]-s.x)});case"C":case"Q":return U4(s,e)}},V4=new RegExp(sS,"gi"),H4=new RegExp(sS,"i"),G4=r=>{r=eS(r);const e=[];for(let[t]of r.matchAll(V4)){const n=[];let s;do{if(s=H4.exec(t),!s)break;const i=s.filter(a=>a);i.shift();const o=i.map(a=>{const l=Number.parseFloat(a);return Number.isNaN(l)?a:l});if(n.push(o),i.length<=1)break;i.shift(),t=t.replace(new RegExp("".concat(i.join(" ?")," ?$")),"")}while(s);n.reverse().forEach((i,o)=>{const a=R4[i[0]];o>0&&(a=="l"||a=="L")&&(i[0]=a),e.push(i)})}return e},Y4=function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=new O(r[0]),n=new O(r[1]),s=1,i=0;const o=[],a=r.length,l=a>2;let c;for(l&&(s=r[2].x<n.x?-1:r[2].x===n.x?0:1,i=r[2].y<n.y?-1:r[2].y===n.y?0:1),o.push(["M",t.x-s*e,t.y-i*e]),c=1;c<a;c++){if(!t.eq(n)){const u=t.midPointFrom(n);o.push(["Q",t.x,t.y,u.x,u.y])}t=r[c],c+1<r.length&&(n=r[c+1])}return l&&(s=t.x>r[c-2].x?1:t.x===r[c-2].x?0:-1,i=t.y>r[c-2].y?1:t.y===r[c-2].y?0:-1),o.push(["L",t.x+s*e,t.y+i*e]),o},uS=(r,e)=>r.map(t=>t.map((n,s)=>s===0||e===void 0?n:ue(n,e)).join(" ")).join(" ");class q4 extends L_{constructor(e){let{allowTouchScrolling:t=!1,containerClass:n=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e),k(this,"upper",void 0),k(this,"container",void 0);const{el:s}=this.lower,i=this.createUpperCanvas();this.upper={el:i,ctx:i.getContext("2d")},this.applyCanvasStyle(s,{allowTouchScrolling:t}),this.applyCanvasStyle(i,{allowTouchScrolling:t});const o=this.createContainerElement();o.classList.add(n),s.parentNode&&s.parentNode.replaceChild(o,s),o.append(s,i),this.container=o}createUpperCanvas(){const{el:e}=this.lower,t=Je();return t.className=e.className,t.classList.remove("lower-canvas"),t.classList.add("upper-canvas"),t.setAttribute("data-fabric","top"),t.style.cssText=e.style.cssText,t.setAttribute("draggable","true"),t}createContainerElement(){const e=Eo().createElement("div");return e.setAttribute("data-fabric","wrapper"),$c(e,{position:"relative"}),ny(e),e}applyCanvasStyle(e,t){let{allowTouchScrolling:n}=t;$c(e,{position:"absolute",left:"0",top:"0"}),function(s,i){const o=i?"manipulation":Mt;$c(s,{"touch-action":o,"-ms-touch-action":o})}(e,n),ny(e)}setDimensions(e,t){super.setDimensions(e,t);const{el:n,ctx:s}=this.upper;R_(n,s,e,t)}setCSSDimensions(e){super.setCSSDimensions(e),hg(this.upper.el,e),hg(this.container,e)}cleanupDOM(e){const t=this.container,{el:n}=this.lower,{el:s}=this.upper;super.cleanupDOM(e),t.removeChild(s),t.removeChild(n),t.parentNode&&t.parentNode.replaceChild(n,t)}dispose(){super.dispose(),Kr().dispose(this.upper.el),delete this.upper,delete this.container}}class Eh extends pl{constructor(){super(...arguments),k(this,"targets",[]),k(this,"_hoveredTargets",[]),k(this,"_objectsToRender",void 0),k(this,"_currentTransform",null),k(this,"_groupSelector",null),k(this,"contextTopDirty",!1)}static getDefaults(){return j(j({},super.getDefaults()),Eh.ownDefaults)}get upperCanvasEl(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.el}get contextTop(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new q4(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter(t=>!t.group&&t!==e).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const t=this.getRetinaScaling(),n=Math.ceil((2*e+1)*t);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=n,this.pixelFindContext.scale(t,t)}isTargetTransparent(e,t,n){const s=this.targetFindTolerance,i=this.pixelFindContext;this.clearContext(i),i.save(),i.translate(-t+s,-n+s),i.transform(...this.viewportTransform);const o=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(i),e.selectionBackgroundColor=o,i.restore();const a=Math.round(s*this.getRetinaScaling());return GR(i,a,a,a)}_isSelectionKeyPressed(e){const t=this.selectionKey;return!!t&&(Array.isArray(t)?!!t.find(n=>!!n&&e[n]===!0):e[t])}_shouldClearSelection(e,t){const n=this.getActiveObjects(),s=this._activeObject;return!!(!t||t&&s&&n.length>1&&n.indexOf(t)===-1&&s!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&s&&s!==t)}_shouldCenterTransform(e,t,n){if(!e)return;let s;return t===bh||t===Rt||t===or||t===Ha?s=this.centeredScaling||e.centeredScaling:t===im&&(s=this.centeredRotation||e.centeredRotation),s?!n:n}_getOriginFromCorner(e,t){const n={x:e.originX,y:e.originY};return t&&(["ml","tl","bl"].includes(t)?n.x=$e:["mr","tr","br"].includes(t)&&(n.x=me),["tl","mt","tr"].includes(t)?n.y=ug:["bl","mb","br"].includes(t)&&(n.y=At)),n}_setupCurrentTransform(e,t,n){var s;const i=t.group?Ki(this.getScenePoint(e),void 0,t.group.calcTransformMatrix()):this.getScenePoint(e),{key:o="",control:a}=t.getActiveControl()||{},l=n&&a?(s=a.getActionHandler(e,t,a))===null||s===void 0?void 0:s.bind(a):uR,c=((g,y,v,w)=>{if(!y||!g)return"drag";const m=w.controls[y];return m.getActionName(v,m,w)})(n,o,e,t),u=e[this.centeredKey],d=this._shouldCenterTransform(t,c,u)?{x:oe,y:oe}:this._getOriginFromCorner(t,o),f={target:t,action:c,actionHandler:l,actionPerformed:!1,corner:o,scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,offsetX:i.x-t.left,offsetY:i.y-t.top,originX:d.x,originY:d.y,ex:i.x,ey:i.y,lastX:i.x,lastY:i.y,theta:ze(t.angle),width:t.width,height:t.height,shiftKey:e.shiftKey,altKey:u,original:j(j({},I_(t)),{},{originX:d.x,originY:d.y})};this._currentTransform=f,this.fire("before:transform",{e,transform:f})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:t,y:n,deltaX:s,deltaY:i}=this._groupSelector,o=new O(t,n).transform(this.viewportTransform),a=new O(t+s,n+i).transform(this.viewportTransform),l=this.selectionLineWidth/2;let c=Math.min(o.x,a.x),u=Math.min(o.y,a.y),d=Math.max(o.x,a.x),f=Math.max(o.y,a.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(c,u,d-c,f-u)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,c+=l,u+=l,d-=l,f-=l,ft.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(c,u,d-c,f-u))}findTarget(e){if(this.skipTargetFind)return;const t=this.getViewportPoint(e),n=this._activeObject,s=this.getActiveObjects();if(this.targets=[],n&&s.length>=1){if(n.findControl(t,dg(e))||s.length>1&&this.searchPossibleTargets([n],t))return n;if(n===this.searchPossibleTargets([n],t)){if(this.preserveObjectStacking){const i=this.targets;this.targets=[];const o=this.searchPossibleTargets(this._objects,t);return e[this.altSelectionKey]&&o&&o!==n?(this.targets=i,n):o}return n}}return this.searchPossibleTargets(this._objects,t)}_pointIsInObjectSelectionArea(e,t){let n=e.getCoords();const s=this.getZoom(),i=e.padding/s;if(i){const[o,a,l,c]=n,u=Math.atan2(a.y-o.y,a.x-o.x),d=Sn(u)*i,f=Cn(u)*i,g=d+f,y=d-f;n=[new O(o.x-y,o.y-g),new O(a.x+g,a.y-y),new O(l.x+y,l.y+g),new O(c.x-g,c.y+y)]}return Me.isPointInPolygon(t,n)}_checkTarget(e,t){return!!(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,Ki(t,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing||!this.isTargetTransparent(e,t.x,t.y)))}_searchPossibleTargets(e,t){let n=e.length;for(;n--;){const s=e[n];if(this._checkTarget(s,t)){if(Lc(s)&&s.subTargetCheck){const i=this._searchPossibleTargets(s._objects,t);i&&this.targets.push(i)}return s}}}searchPossibleTargets(e,t){const n=this._searchPossibleTargets(e,t);if(n&&Lc(n)&&n.interactive&&this.targets[0]){const s=this.targets;for(let i=s.length-1;i>0;i--){const o=s[i];if(!Lc(o)||!o.interactive)return o}return s[0]}return n}getViewportPoint(e){return this._pointer?this._pointer:this.getPointer(e,!0)}getScenePoint(e){return this._absolutePointer?this._absolutePointer:this.getPointer(e)}getPointer(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const n=this.upperCanvasEl,s=n.getBoundingClientRect();let i=nR(e),o=s.width||0,a=s.height||0;o&&a||(At in s&&ug in s&&(a=Math.abs(s.top-s.bottom)),$e in s&&me in s&&(o=Math.abs(s.right-s.left))),this.calcOffset(),i.x=i.x-this._offset.left,i.y=i.y-this._offset.top,t||(i=Ki(i,void 0,this.viewportTransform));const l=this.getRetinaScaling();l!==1&&(i.x/=l,i.y/=l);const c=o===0||a===0?new O(1,1):new O(n.width/o,n.height/a);return i.multiply(c)}_setDimensionsImpl(e,t){this._resetTransformEventData(),super._setDimensionsImpl(e,t),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=Je(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const e=this._activeObject;return Rs(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,t){let n=!1,s=!1;const i=this.getActiveObjects(),o=[],a=[];e.forEach(l=>{i.includes(l)||(n=!0,l.fire("deselected",{e:t,target:l}),a.push(l))}),i.forEach(l=>{e.includes(l)||(n=!0,l.fire("selected",{e:t,target:l}),o.push(l))}),e.length>0&&i.length>0?(s=!0,n&&this.fire("selection:updated",{e:t,selected:o,deselected:a})):i.length>0?(s=!0,this.fire("selection:created",{e:t,selected:o})):e.length>0&&(s=!0,this.fire("selection:cleared",{e:t,deselected:a})),s&&(this._objectsToRender=void 0)}setActiveObject(e,t){const n=this.getActiveObjects(),s=this._setActiveObject(e,t);return this._fireSelectionEvents(n,t),s}_setActiveObject(e,t){const n=this._activeObject;return n!==e&&!(!this._discardActiveObject(t,e)&&this._activeObject)&&!e.onSelect({e:t})&&(this._activeObject=e,Rs(e)&&n!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,t){const n=this._activeObject;return!!n&&!n.onDeselect({e,object:t})&&(this._currentTransform&&this._currentTransform.target===n&&this.endCurrentTransform(e),Rs(n)&&n===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){const t=this.getActiveObjects(),n=this.getActiveObject();t.length&&this.fire("before:selection:cleared",{e,deselected:[n]});const s=this._discardActiveObject(e);return this._fireSelectionEvents(t,e),s}endCurrentTransform(e){const t=this._currentTransform;this._finalizeCurrentTransform(e),t&&t.target&&(t.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const t=this._currentTransform,n=t.target,s={e,target:n,transform:t,action:t.action};n._scaling&&(n._scaling=!1),n.setCoords(),t.actionPerformed&&(this.fire("object:modified",s),n.fire(Tu,s))}setViewportTransform(e){super.setViewportTransform(e);const t=this._activeObject;t&&t.setCoords()}destroy(){const e=this._activeObject;Rs(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const t=this._activeObject;t&&t._renderControls(e)}_toObject(e,t,n){const s=this._realizeGroupTransformOnObject(e),i=super._toObject(e,t,n);return e.set(s),i}_realizeGroupTransformOnObject(e){const{group:t}=e;if(t&&Rs(t)&&this._activeObject===t){const n=No(e,["angle","flipX","flipY",me,Rt,or,Po,Oo,At]);return iR(e,t.calcOwnMatrix()),n}return{}}_setSVGObject(e,t,n){const s=this._realizeGroupTransformOnObject(t);super._setSVGObject(e,t,n),t.set(s)}}k(Eh,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class X4{constructor(e){k(this,"targets",[]),k(this,"__disposer",void 0);const t=()=>{const{hiddenTextarea:s}=e.getActiveObject()||{};s&&s.focus()},n=e.upperCanvasEl;n.addEventListener("click",t),this.__disposer=()=>n.removeEventListener("click",t)}exitTextEditing(){this.target=void 0,this.targets.forEach(e=>{e.isEditing&&e.exitEditing()})}add(e){this.targets.push(e)}remove(e){this.unregister(e),ki(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var t;!((t=this.target)===null||t===void 0)&&t.isEditing&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const K4=["target","oldTarget","fireCanvas","e"],Lt={passive:!1},_i=(r,e)=>{const t=r.getViewportPoint(e),n=r.getScenePoint(e);return{viewportPoint:t,scenePoint:n,pointer:t,absolutePointer:n}},Bn=function(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return r.addEventListener(...t)},qt=function(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return r.removeEventListener(...t)},Q4={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class wg extends Eh{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),k(this,"_isClick",void 0),k(this,"textEditingManager",new X4(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onDoubleClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(t=>{this[t]=this[t].bind(this)}),this.addOrRemove(Bn,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e,t){const n=this.upperCanvasEl,s=this._getEventPrefix();e(D_(n),"resize",this._onResize),e(n,s+"down",this._onMouseDown),e(n,"".concat(s,"move"),this._onMouseMove,Lt),e(n,"".concat(s,"out"),this._onMouseOut),e(n,"".concat(s,"enter"),this._onMouseEnter),e(n,"wheel",this._onMouseWheel),e(n,"contextmenu",this._onContextMenu),e(n,"dblclick",this._onDoubleClick),e(n,"dragstart",this._onDragStart),e(n,"dragend",this._onDragEnd),e(n,"dragover",this._onDragOver),e(n,"dragenter",this._onDragEnter),e(n,"dragleave",this._onDragLeave),e(n,"drop",this._onDrop),this.enablePointerEvents||e(n,"touchstart",this._onTouchStart,Lt)}removeListeners(){this.addOrRemove(qt,"remove");const e=this._getEventPrefix(),t=Cr(this.upperCanvasEl);qt(t,"".concat(e,"up"),this._onMouseUp),qt(t,"touchend",this._onTouchEnd,Lt),qt(t,"".concat(e,"move"),this._onMouseMove,Lt),qt(t,"touchmove",this._onMouseMove,Lt)}_onMouseWheel(e){this.__onMouseWheel(e)}_onMouseOut(e){const t=this._hoveredTarget,n=j({e},_i(this,e));this.fire("mouse:out",j(j({},n),{},{target:t})),this._hoveredTarget=void 0,t&&t.fire("mouseout",j({},n)),this._hoveredTargets.forEach(s=>{this.fire("mouse:out",j(j({},n),{},{target:s})),s&&s.fire("mouseout",j({},n))}),this._hoveredTargets=[]}_onMouseEnter(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",j({e},_i(this,e))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const t=this.getActiveObject();if(t&&t.onDragStart(e)){this._dragSource=t;const n={e,target:t};return this.fire("dragstart",n),t.fire("dragstart",n),void Bn(this.upperCanvasEl,"drag",this._onDragProgress)}fg(e)}_renderDragEffects(e,t,n){let s=!1;const i=this._dropTarget;i&&i!==t&&i!==n&&(i.clearContextTop(),s=!0),t==null||t.clearContextTop(),n!==t&&(n==null||n.clearContextTop());const o=this.contextTop;o.save(),o.transform(...this.viewportTransform),t&&(o.save(),t.transform(o),t.renderDragSourceEffect(e),o.restore(),s=!0),n&&(o.save(),n.transform(o),n.renderDropTargetEffect(e),o.restore(),s=!0),o.restore(),s&&(this.contextTopDirty=!0)}_onDragEnd(e){const t=!!e.dataTransfer&&e.dataTransfer.dropEffect!==Mt,n=t?this._activeObject:void 0,s={e,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:t,dropTarget:n};qt(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",s),this._dragSource&&this._dragSource.fire("dragend",s),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const t={e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",t),this._dragSource&&this._dragSource.fire("drag",t)}findDragTargets(e){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(e)),targets:[...this.targets]}}_onDragOver(e){const t="dragover",{target:n,targets:s}=this.findDragTargets(e),i=this._dragSource,o={e,target:n,subTargets:s,dragSource:i,canDrop:!1,dropTarget:void 0};let a;this.fire(t,o),this._fireEnterLeaveEvents(n,o),n&&(n.canDrop(e)&&(a=n),n.fire(t,o));for(let l=0;l<s.length;l++){const c=s[l];c.canDrop(e)&&(a=c),c.fire(t,o)}this._renderDragEffects(e,i,a),this._dropTarget=a}_onDragEnter(e){const{target:t,targets:n}=this.findDragTargets(e),s={e,target:t,subTargets:n,dragSource:this._dragSource};this.fire("dragenter",s),this._fireEnterLeaveEvents(t,s)}_onDragLeave(e){const t={e,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",t),this._fireEnterLeaveEvents(void 0,t),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(e){const{target:t,targets:n}=this.findDragTargets(e),s=this._basicEventHandler("drop:before",j({e,target:t,subTargets:n,dragSource:this._dragSource},_i(this,e)));s.didDrop=!1,s.dropTarget=void 0,this._basicEventHandler("drop",s),this.fire("drop:after",s)}_onContextMenu(e){const t=this.findTarget(e),n=this.targets||[],s=this._basicEventHandler("contextmenu:before",{e,target:t,subTargets:n});return this.stopContextMenu&&fg(e),this._basicEventHandler("contextmenu",s),!1}_onDoubleClick(e){this._cacheTransformEventData(e),this._handleEvent(e,"dblclick"),this._resetTransformEventData()}getPointerId(e){const t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return e.isPrimary===!0||e.isPrimary!==!1&&(e.type==="touchend"&&e.touches.length===0||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){e.preventDefault(),this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),this._resetTransformEventData();const t=this.upperCanvasEl,n=this._getEventPrefix(),s=Cr(t);Bn(s,"touchend",this._onTouchEnd,Lt),Bn(s,"touchmove",this._onMouseMove,Lt),qt(t,"".concat(n,"down"),this._onMouseDown)}_onMouseDown(e){this.__onMouseDown(e),this._resetTransformEventData();const t=this.upperCanvasEl,n=this._getEventPrefix();qt(t,"".concat(n,"move"),this._onMouseMove,Lt);const s=Cr(t);Bn(s,"".concat(n,"up"),this._onMouseUp),Bn(s,"".concat(n,"move"),this._onMouseMove,Lt)}_onTouchEnd(e){if(e.touches.length>0)return;this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;const t=this._getEventPrefix(),n=Cr(this.upperCanvasEl);qt(n,"touchend",this._onTouchEnd,Lt),qt(n,"touchmove",this._onMouseMove,Lt),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{Bn(this.upperCanvasEl,"".concat(t,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(e){this.__onMouseUp(e),this._resetTransformEventData();const t=this.upperCanvasEl,n=this._getEventPrefix();if(this._isMainEvent(e)){const s=Cr(this.upperCanvasEl);qt(s,"".concat(n,"up"),this._onMouseUp),qt(s,"".concat(n,"move"),this._onMouseMove,Lt),Bn(t,"".concat(n,"move"),this._onMouseMove,Lt)}}_onMouseMove(e){const t=this.getActiveObject();!this.allowTouchScrolling&&(!t||!t.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const t=this.getActiveObject();return!!t!=!!e||t&&e&&t!==e}__onMouseUp(e){var t;this._cacheTransformEventData(e),this._handleEvent(e,"up:before");const n=this._currentTransform,s=this._isClick,i=this._target,{button:o}=e;if(o)return(this.fireMiddleClick&&o===1||this.fireRightClick&&o===2)&&this._handleEvent(e,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let a,l,c=!1;if(n&&(this._finalizeCurrentTransform(e),c=n.actionPerformed),!s){const u=i===this._activeObject;this.handleSelection(e),c||(c=this._shouldRender(i)||!u&&i===this._activeObject)}if(i){const u=i.findControl(this.getViewportPoint(e),dg(e)),{key:d,control:f}=u||{};if(l=d,i.selectable&&i!==this._activeObject&&i.activeOn==="up")this.setActiveObject(i,e),c=!0;else if(f){const g=f.getMouseUpHandler(e,i,f);g&&(a=this.getScenePoint(e),g.call(f,e,n,a.x,a.y))}i.isMoving=!1}if(n&&(n.target!==i||n.corner!==l)){const u=n.target&&n.target.controls[n.corner],d=u&&u.getMouseUpHandler(e,n.target,u);a=a||this.getScenePoint(e),d&&d.call(u,e,n,a.x,a.y)}this._setCursorFromEvent(e,i),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,i&&(i.__corner=void 0),c?this.requestRenderAll():s||(t=this._activeObject)!==null&&t!==void 0&&t.isEditing||this.renderTop()}_basicEventHandler(e,t){const{target:n,subTargets:s=[]}=t;this.fire(e,t),n&&n.fire(e,t);for(let i=0;i<s.length;i++)s[i]!==n&&s[i].fire(e,t);return t}_handleEvent(e,t){const n=this._target,s=this.targets||[],i=j(j({e,target:n,subTargets:s},_i(this,e)),{},{transform:this._currentTransform},t==="up:before"||t==="up"?{isClick:this._isClick,currentTarget:this.findTarget(e),currentSubTargets:this.targets}:{});this.fire("mouse:".concat(t),i),n&&n.fire("mouse".concat(t),i);for(let o=0;o<s.length;o++)s[o]!==n&&s[o].fire("mouse".concat(t),i)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(t,{e,pointer:t}),this._handleEvent(e,"down")}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(t,{e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const t=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e,pointer:t}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._cacheTransformEventData(e),this._handleEvent(e,"down:before");let t=this._target;const{button:n}=e;if(n)return(this.fireMiddleClick&&n===1||this.fireRightClick&&n===2)&&this._handleEvent(e,"down"),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e)||this._currentTransform)return;let s=this._shouldRender(t),i=!1;if(this.handleMultiSelection(e,t)?(t=this._activeObject,i=!0,s=!0):this._shouldClearSelection(e,t)&&this.discardActiveObject(e),this.selection&&(!t||!t.selectable&&!t.isEditing&&t!==this._activeObject)){const o=this.getScenePoint(e);this._groupSelector={x:o.x,y:o.y,deltaY:0,deltaX:0}}if(t){const o=t===this._activeObject;t.selectable&&t.activeOn==="down"&&this.setActiveObject(t,e);const a=t.findControl(this.getViewportPoint(e),dg(e));if(t===this._activeObject&&(a||!i)){this._setupCurrentTransform(e,t,o);const l=a?a.control:void 0,c=this.getScenePoint(e),u=l&&l.getMouseDownHandler(e,t,l);u&&u.call(l,e,this._currentTransform,c.x,c.y)}}s&&(this._objectsToRender=void 0),this._handleEvent(e,"down"),s&&this.requestRenderAll()}_resetTransformEventData(){this._target=void 0,this._pointer=void 0,this._absolutePointer=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._pointer=this.getViewportPoint(e),this._absolutePointer=Ki(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)}__onMouseMove(e){if(this._isClick=!1,this._cacheTransformEventData(e),this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;const t=this._groupSelector;if(t){const n=this.getScenePoint(e);t.deltaX=n.x-t.x,t.deltaY=n.y-t.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const n=this.findTarget(e);this._setCursorFromEvent(e,n),this._fireOverOutEvents(e,n)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move"),this._resetTransformEventData()}_fireOverOutEvents(e,t){const n=this._hoveredTarget,s=this._hoveredTargets,i=this.targets,o=Math.max(s.length,i.length);this.fireSyntheticInOutEvents("mouse",{e,target:t,oldTarget:n,fireCanvas:!0});for(let a=0;a<o;a++)this.fireSyntheticInOutEvents("mouse",{e,target:i[a],oldTarget:s[a]});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(e,t){const n=this._draggedoverTarget,s=this._hoveredTargets,i=this.targets,o=Math.max(s.length,i.length);this.fireSyntheticInOutEvents("drag",j(j({},t),{},{target:e,oldTarget:n,fireCanvas:!0}));for(let a=0;a<o;a++)this.fireSyntheticInOutEvents("drag",j(j({},t),{},{target:i[a],oldTarget:s[a]}));this._draggedoverTarget=e}fireSyntheticInOutEvents(e,t){let{target:n,oldTarget:s,fireCanvas:i,e:o}=t,a=Ee(t,K4);const{targetIn:l,targetOut:c,canvasIn:u,canvasOut:d}=Q4[e],f=s!==n;if(s&&f){const g=j(j({},a),{},{e:o,target:s,nextTarget:n},_i(this,o));i&&this.fire(d,g),s.fire(c,g)}if(n&&f){const g=j(j({},a),{},{e:o,target:n,previousTarget:s},_i(this,o));i&&this.fire(u,g),n.fire(l,g)}}__onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_transformObject(e){const t=this.getScenePoint(e),n=this._currentTransform,s=n.target,i=s.group?Ki(t,void 0,s.group.calcTransformMatrix()):t;n.shiftKey=e.shiftKey,n.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,n,i),n.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,t,n){const{action:s,actionHandler:i,target:o}=t,a=!!i&&i(e,t,n.x,n.y);a&&o.setCoords(),s==="drag"&&a&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||a}_setCursorFromEvent(e,t){if(!t)return void this.setCursor(this.defaultCursor);let n=t.hoverCursor||this.hoverCursor;const s=Rs(this._activeObject)?this._activeObject:null,i=(!s||t.group!==s)&&t.findControl(this.getViewportPoint(e));if(i){const o=i.control;this.setCursor(o.cursorStyleHandler(e,o,t))}else t.subTargetCheck&&this.targets.concat().reverse().map(o=>{n=o.hoverCursor||n}),this.setCursor(n)}handleMultiSelection(e,t){const n=this._activeObject,s=Rs(n);if(n&&this._isSelectionKeyPressed(e)&&this.selection&&t&&t.selectable&&(n!==t||s)&&(s||!t.isDescendantOf(n)&&!n.isDescendantOf(t))&&!t.onSelect({e})&&!n.getActiveControl()){if(s){const i=n.getObjects();if(t===n){const o=this.getViewportPoint(e);if(!(t=this.searchPossibleTargets(i,o)||this.searchPossibleTargets(this._objects,o))||!t.selectable)return!1}t.group===n?(n.remove(t),this._hoveredTarget=t,this._hoveredTargets=[...this.targets],n.size()===1&&this._setActiveObject(n.item(0),e)):(n.multiSelectAdd(t),this._hoveredTarget=n,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(i,e)}else{n.exitEditing&&n.exitEditing();const i=new(H.getClass("ActiveSelection"))([],{canvas:this});i.multiSelectAdd(n,t),this._hoveredTarget=i,this._setActiveObject(i,e),this._fireSelectionEvents([n],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:t,y:n,deltaX:s,deltaY:i}=this._groupSelector,o=new O(t,n),a=o.add(new O(s,i)),l=o.min(a),c=o.max(a).subtract(l),u=this.collectObjects({left:l.x,top:l.y,width:c.x,height:c.y},{includeIntersecting:!this.selectionFullyContained}),d=o.eq(a)?u[0]?[u[0]]:[]:u.length>1?u.filter(f=>!f.onSelect({e})).reverse():u;if(d.length===1)this.setActiveObject(d[0],e);else if(d.length>1){const f=H.getClass("ActiveSelection");this.setActiveObject(new f(d,{canvas:this}),e)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const hS={x1:0,y1:0,x2:0,y2:0},J4=j(j({},hS),{},{r1:0,r2:0}),Z4=/^(\d+\.\d+)%|(\d+)%$/;function dS(r){return r&&Z4.test(r)}function fS(r,e){const t=typeof r=="number"?r:typeof r=="string"?parseFloat(r)/(dS(r)?100:1):NaN;return vo(0,Fi(t,e),1)}const e5=/\s*;\s*/,t5=/\s*:\s*/;function r5(r,e){let t,n;const s=r.getAttribute("style");if(s){const o=s.split(e5);o[o.length-1]===""&&o.pop();for(let a=o.length;a--;){const[l,c]=o[a].split(t5).map(u=>u.trim());l==="stop-color"?t=c:l==="stop-opacity"&&(n=c)}}const i=new pe(t||r.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:fS(r.getAttribute("offset"),0),color:i.toRgb(),opacity:Fi(parseFloat(n||r.getAttribute("stop-opacity")||""),1)*i.getAlpha()*e}}function n5(r,e){const t=[],n=r.getElementsByTagName("stop"),s=fS(e,1);for(let i=n.length;i--;)t.push(r5(n[i],s));return t}function gS(r){return r.nodeName==="linearGradient"||r.nodeName==="LINEARGRADIENT"?"linear":"radial"}function pS(r){return r.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function dr(r,e){return r.getAttribute(e)}function s5(r,e){return function(t,n){let s,{width:i,height:o,gradientUnits:a}=n;return Object.keys(t).reduce((l,c)=>{const u=t[c];return u==="Infinity"?s=1:u==="-Infinity"?s=0:(s=typeof u=="string"?parseFloat(u):u,typeof u=="string"&&dS(u)&&(s*=.01,a==="pixels"&&(c!=="x1"&&c!=="x2"&&c!=="r2"||(s*=i),c!=="y1"&&c!=="y2"||(s*=o)))),l[c]=s,l},{})}(gS(r)==="linear"?function(t){return{x1:dr(t,"x1")||0,y1:dr(t,"y1")||0,x2:dr(t,"x2")||"100%",y2:dr(t,"y2")||0}}(r):function(t){return{x1:dr(t,"fx")||dr(t,"cx")||"50%",y1:dr(t,"fy")||dr(t,"cy")||"50%",r1:0,x2:dr(t,"cx")||"50%",y2:dr(t,"cy")||"50%",r2:dr(t,"r")||"50%"}}(r),j(j({},e),{},{gradientUnits:pS(r)}))}class Ql{constructor(e){let{type:t="linear",gradientUnits:n="pixels",coords:s={},colorStops:i=[],offsetX:o=0,offsetY:a=0,gradientTransform:l,id:c}=e;this.id=c?"".concat(c,"_").concat(xs()):xs(),this.type=t,this.gradientUnits=n,this.gradientTransform=l,this.offsetX=o,this.offsetY=a,this.coords=j(j({},this.type==="radial"?J4:hS),s),this.colorStops=i.slice()}addColorStop(e){for(const t in e){const n=new pe(e[t]);this.colorStops.push({offset:parseFloat(t),color:n.toRgb(),opacity:n.getAlpha()})}return this}toObject(e){return j(j({},No(this,e)),{},{type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(e){let{additionalTransform:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=[],s=this.gradientTransform?this.gradientTransform.concat():wt.concat(),i=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",o=this.colorStops.map(d=>j({},d)).sort((d,f)=>d.offset-f.offset);let a=-this.offsetX,l=-this.offsetY;var c;i==="objectBoundingBox"?(a/=e.width,l/=e.height):(a+=e.width/2,l+=e.height/2),(c=e)&&typeof c._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(a-=e.pathOffset.x,l-=e.pathOffset.y),s[4]-=a,s[5]-=l;const u=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(i,'"'),'gradientTransform="'.concat(t?t+" ":"").concat(Pu(s),'"'),""].join(" ");if(this.type==="linear"){const{x1:d,y1:f,x2:g,y2:y}=this.coords;n.push("<linearGradient ",u,' x1="',d,'" y1="',f,'" x2="',g,'" y2="',y,`">
`)}else if(this.type==="radial"){const{x1:d,y1:f,x2:g,y2:y,r1:v,r2:w}=this.coords,m=v>w;n.push("<radialGradient ",u,' cx="',m?d:g,'" cy="',m?f:y,'" r="',m?v:w,'" fx="',m?g:d,'" fy="',m?y:f,`">
`),m&&(o.reverse(),o.forEach(x=>{x.offset=1-x.offset}));const p=Math.min(v,w);if(p>0){const x=p/Math.max(v,w);o.forEach(_=>{_.offset+=x*(1-_.offset)})}}return o.forEach(d=>{let{color:f,offset:g,opacity:y}=d;n.push("<stop ",'offset="',100*g+"%",'" style="stop-color:',f,y!==void 0?";stop-opacity: "+y:";",`"/>
`)}),n.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),n.join("")}toLive(e){const t=this.coords,n=this.type==="linear"?e.createLinearGradient(t.x1,t.y1,t.x2,t.y2):e.createRadialGradient(t.x1,t.y1,t.r1,t.x2,t.y2,t.r2);return this.colorStops.forEach(s=>{let{color:i,opacity:o,offset:a}=s;n.addColorStop(a,o!==void 0?new pe(i).setAlpha(o).toRgba():i)}),n}static async fromObject(e){return new this(e)}static fromElement(e,t,n){const s=pS(e),i=t._findCenterFromElement();return new this(j({id:e.getAttribute("id")||void 0,type:gS(e),coords:s5(e,{width:n.viewBoxWidth||n.width,height:n.viewBoxHeight||n.height}),colorStops:n5(e,n.opacity),gradientUnits:s,gradientTransform:yg(e.getAttribute("gradientTransform")||"")},s==="pixels"?{offsetX:t.width/2-i.x,offsetY:t.height/2-i.y}:{offsetX:0,offsetY:0}))}}k(Ql,"type","Gradient"),H.setClass(Ql,"gradient"),H.setClass(Ql,"linear"),H.setClass(Ql,"radial");const i5=["type","source"];class Dd{get type(){return"pattern"}set type(e){ys("warn","Setting type has no effect",e)}constructor(e){k(this,"repeat","repeat"),k(this,"offsetX",0),k(this,"offsetY",0),k(this,"crossOrigin",""),k(this,"patternTransform",null),this.id=xs(),Object.assign(this,e)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:t,crossOrigin:n}=this;return j(j({},No(this,e)),{},{type:"pattern",source:this.sourceToString(),repeat:t,crossOrigin:n,offsetX:ue(this.offsetX,he.NUM_FRACTION_DIGITS),offsetY:ue(this.offsetY,he.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(e){let{width:t,height:n}=e;const{source:s,repeat:i,id:o}=this,a=Fi(this.offsetX/t,0),l=Fi(this.offsetY/n,0),c=i==="repeat-y"||i==="no-repeat"?1+Math.abs(a||0):Fi(s.width/t,0),u=i==="repeat-x"||i==="no-repeat"?1+Math.abs(l||0):Fi(s.height/n,0);return['<pattern id="SVGID_'.concat(o,'" x="').concat(a,'" y="').concat(l,'" width="').concat(c,'" height="').concat(u,'">'),'<image x="0" y="0" width="'.concat(s.width,'" height="').concat(s.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(e,t){let{type:n,source:s}=e,i=Ee(e,i5);const o=await Fc(s,j(j({},t),{},{crossOrigin:i.crossOrigin}));return new this(j(j({},i),{},{source:o}))}}k(Dd,"type","Pattern"),H.setClass(Dd),H.setClass(Dd,"pattern");class o5{constructor(e){k(this,"color","rgb(0, 0, 0)"),k(this,"width",1),k(this,"shadow",null),k(this,"strokeLineCap","round"),k(this,"strokeLineJoin","round"),k(this,"strokeMiterLimit",10),k(this,"strokeDashArray",null),k(this,"limitedToCanvasSize",!1),this.canvas=e}_setBrushStyles(e){e.strokeStyle=this.color,e.lineWidth=this.width,e.lineCap=this.strokeLineCap,e.miterLimit=this.strokeMiterLimit,e.lineJoin=this.strokeLineJoin,e.setLineDash(this.strokeDashArray||[])}_saveAndTransform(e){const t=this.canvas.viewportTransform;e.save(),e.transform(t[0],t[1],t[2],t[3],t[4],t[5])}needsFullRender(){return new pe(this.color).getAlpha()<1||!!this.shadow}_setShadow(){if(!this.shadow||!this.canvas)return;const e=this.canvas,t=this.shadow,n=e.contextTop,s=e.getZoom()*e.getRetinaScaling();n.shadowColor=t.color,n.shadowBlur=t.blur*s,n.shadowOffsetX=t.offsetX*s,n.shadowOffsetY=t.offsetY*s}_resetShadow(){const e=this.canvas.contextTop;e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0}_isOutSideCanvas(e){return e.x<0||e.x>this.canvas.getWidth()||e.y<0||e.y>this.canvas.getHeight()}}const a5=["path","left","top"],l5=["d"];class qn extends ft{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:n,left:s,top:i}=t,o=Ee(t,a5);super(),Object.assign(this,qn.ownDefaults),this.setOptions(o),this._setPath(e||[],!0),typeof s=="number"&&this.set(me,s),typeof i=="number"&&this.set(At,i)}_setPath(e,t){this.path=F4(Array.isArray(e)?e:G4(e)),this.setBoundingBox(t)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new O(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){const t=-this.pathOffset.x,n=-this.pathOffset.y;e.beginPath();for(const s of this.path)switch(s[0]){case"L":e.lineTo(s[1]+t,s[2]+n);break;case"M":e.moveTo(s[1]+t,s[2]+n);break;case"C":e.bezierCurveTo(s[1]+t,s[2]+n,s[3]+t,s[4]+n,s[5]+t,s[6]+n);break;case"Q":e.quadraticCurveTo(s[1]+t,s[2]+n,s[3]+t,s[4]+n);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return j(j({},super.toObject(e)),{},{path:this.path.map(t=>t.slice())})}toDatalessObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.toObject(e);return this.sourcePath&&(delete t.path,t.sourcePath=this.sourcePath),t}_toSVG(){const e=uS(this.path,he.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(e,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const e=he.NUM_FRACTION_DIGITS;return" translate(".concat(ue(-this.pathOffset.x,e),", ").concat(ue(-this.pathOffset.y,e),")")}toClipPathSVG(e){const t=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}toSVG(e){const t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:t,height:n,pathOffset:s}=this._calcDimensions();this.set({width:t,height:n,pathOffset:s}),e&&this.setPositionByOrigin(s,oe,oe)}_calcBoundsFromPath(){const e=[];let t=0,n=0,s=0,i=0;for(const o of this.path)switch(o[0]){case"L":s=o[1],i=o[2],e.push(new O(t,n),new O(s,i));break;case"M":s=o[1],i=o[2],t=s,n=i;break;case"C":e.push(...ky(s,i,o[1],o[2],o[3],o[4],o[5],o[6])),s=o[5],i=o[6];break;case"Q":e.push(...ky(s,i,o[1],o[2],o[1],o[2],o[3],o[4])),s=o[3],i=o[4];break;case"Z":s=t,i=n}return gn(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return j(j({},e),{},{pathOffset:new O(e.left+e.width/2,e.top+e.height/2)})}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,t,n){const s=En(e,this.ATTRIBUTE_NAMES,n),{d:i}=s;return new this(i,j(j(j({},Ee(s,l5)),t),{},{left:void 0,top:void 0}))}}k(qn,"type","Path"),k(qn,"cacheProperties",[...jn,"path","fillRule"]),k(qn,"ATTRIBUTE_NAMES",[...ks,"d"]),H.setClass(qn),H.setSVGClass(qn);class Ru extends o5{constructor(e){super(e),k(this,"decimate",.4),k(this,"drawStraightLine",!1),k(this,"straightLineKey","shiftKey"),this._points=[],this._hasStraightLine=!1}needsFullRender(){return super.needsFullRender()||this._hasStraightLine}static drawSegment(e,t,n){const s=t.midPointFrom(n);return e.quadraticCurveTo(t.x,t.y,s.x,s.y),s}onMouseDown(e,t){let{e:n}=t;this.canvas._isMainEvent(n)&&(this.drawStraightLine=!!this.straightLineKey&&n[this.straightLineKey],this._prepareForDrawing(e),this._addPoint(e),this._render())}onMouseMove(e,t){let{e:n}=t;if(this.canvas._isMainEvent(n)&&(this.drawStraightLine=!!this.straightLineKey&&n[this.straightLineKey],(this.limitedToCanvasSize!==!0||!this._isOutSideCanvas(e))&&this._addPoint(e)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{const s=this._points,i=s.length,o=this.canvas.contextTop;this._saveAndTransform(o),this.oldEnd&&(o.beginPath(),o.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=Ru.drawSegment(o,s[i-2],s[i-1]),o.stroke(),o.restore()}}onMouseUp(e){let{e:t}=e;return!this.canvas._isMainEvent(t)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)}_prepareForDrawing(e){this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)}_addPoint(e){return!(this._points.length>1&&e.eq(this._points[this._points.length-1]))&&(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(e),!0)}_reset(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1}_render(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.canvas.contextTop,t=this._points[0],n=this._points[1];if(this._saveAndTransform(e),e.beginPath(),this._points.length===2&&t.x===n.x&&t.y===n.y){const s=this.width/1e3;t.x-=s,n.x+=s}e.moveTo(t.x,t.y);for(let s=1;s<this._points.length;s++)Ru.drawSegment(e,t,n),t=this._points[s],n=this._points[s+1];e.lineTo(t.x,t.y),e.stroke(),e.restore()}convertPointsToSVGPath(e){const t=this.width/1e3;return Y4(e,t)}createPath(e){const t=new qn(e,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,t.shadow=new qr(this.shadow)),t}decimatePoints(e,t){if(e.length<=2)return e;let n,s=e[0];const i=this.canvas.getZoom(),o=Math.pow(t/i,2),a=e.length-1,l=[s];for(let c=1;c<a-1;c++)n=Math.pow(s.x-e[c].x,2)+Math.pow(s.y-e[c].y,2),n>=o&&(s=e[c],l.push(s));return l.push(e[a]),l}_finalizeAndAddPath(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));const e=this.convertPointsToSVGPath(this._points);if(function(n){return uS(n)==="M 0 0 Q 0 0 0 0 L 0 0"}(e))return void this.canvas.requestRenderAll();const t=this.createPath(e);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:t}),this.canvas.add(t),this.canvas.requestRenderAll(),t.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:t})}}const c5=["left","top","radius"],mS=["radius","startAngle","endAngle","counterClockwise"];class $t extends ft{static getDefaults(){return j(j({},super.getDefaults()),$t.ownDefaults)}constructor(e){super(),Object.assign(this,$t.ownDefaults),this.setOptions(e)}_set(e,t){return super._set(e,t),e==="radius"&&this.setRadius(t),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,ze(this.startAngle),ze(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get(Rt)}getRadiusY(){return this.get("radius")*this.get(or)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...mS,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(e===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:t}=this,n=ze(this.startAngle),s=ze(this.endAngle),i=Sn(n)*t,o=Cn(n)*t,a=Sn(s)*t,l=Cn(s)*t,c=e>180?1:0,u=this.counterClockwise?0:1;return['<path d="M '.concat(i," ").concat(o," A ").concat(t," ").concat(t," 0 ").concat(c," ").concat(u," ").concat(a," ").concat(l,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(e,t,n){const s=En(e,this.ATTRIBUTE_NAMES,n),{left:i=0,top:o=0,radius:a=0}=s;return new this(j(j({},Ee(s,c5)),{},{radius:a,left:i-a,top:o-a}))}static fromObject(e){return super._fromObject(e)}}k($t,"type","Circle"),k($t,"cacheProperties",[...jn,...mS]),k($t,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),k($t,"ATTRIBUTE_NAMES",["cx","cy","r",...ks]),H.setClass($t),H.setSVGClass($t);const u5=["x1","y1","x2","y2"],h5=["x1","y1","x2","y2"],bg=["x1","x2","y1","y2"];class ln extends ft{constructor(){let[e,t,n,s]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,ln.ownDefaults),this.setOptions(i),this.x1=e,this.x2=n,this.y1=t,this.y2=s,this._setWidthHeight();const{left:o,top:a}=i;typeof o=="number"&&this.set(me,o),typeof a=="number"&&this.set(At,a)}_setWidthHeight(){const{x1:e,y1:t,x2:n,y2:s}=this;this.width=Math.abs(n-e),this.height=Math.abs(s-t);const{left:i,top:o,width:a,height:l}=gn([{x:e,y:t},{x:n,y:s}]),c=new O(i+a/2,o+l/2);this.setPositionByOrigin(c,oe,oe)}_set(e,t){return super._set(e,t),bg.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;const n=e.strokeStyle;var s;er(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=(s=this.stroke)!==null&&s!==void 0?s:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=n}_findCenterFromElement(){return new O((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return j(j({},super.toObject(e)),this.calcLinePoints())}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(e.y-=this.strokeWidth),this.height===0&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:t,y1:n,y2:s,width:i,height:o}=this,a=e<=t?-1:1,l=n<=s?-1:1;return{x1:a*i/2,x2:a*-i/2,y1:l*o/2,y2:l*-o/2}}_toSVG(){const{x1:e,x2:t,y1:n,y2:s}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(e,'" y1="').concat(n,'" x2="').concat(t,'" y2="').concat(s,`" />
`)]}static async fromElement(e,t,n){const s=En(e,this.ATTRIBUTE_NAMES,n),{x1:i=0,y1:o=0,x2:a=0,y2:l=0}=s;return new this([i,o,a,l],Ee(s,u5))}static fromObject(e){let{x1:t,y1:n,x2:s,y2:i}=e,o=Ee(e,h5);return this._fromObject(j(j({},o),{},{points:[t,n,s,i]}),{extraParam:"points"})}}k(ln,"type","Line"),k(ln,"cacheProperties",[...jn,...bg]),k(ln,"ATTRIBUTE_NAMES",ks.concat(bg)),H.setClass(ln),H.setSVGClass(ln);class ss extends ft{static getDefaults(){return j(j({},super.getDefaults()),ss.ownDefaults)}constructor(e){super(),Object.assign(this,ss.ownDefaults),this.setOptions(e)}_render(e){const t=this.width/2,n=this.height/2;e.beginPath(),e.moveTo(-t,n),e.lineTo(0,-n),e.lineTo(t,n),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-e," ").concat(t,",0 ").concat(-t,",").concat(e," ").concat(t),'" />']}}k(ss,"type","Triangle"),k(ss,"ownDefaults",{width:100,height:100}),H.setClass(ss),H.setSVGClass(ss);const vS=["rx","ry"];class sn extends ft{static getDefaults(){return j(j({},super.getDefaults()),sn.ownDefaults)}constructor(e){super(),Object.assign(this,sn.ownDefaults),this.setOptions(e)}_set(e,t){switch(super._set(e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this}getRx(){return this.get("rx")*this.get(Rt)}getRy(){return this.get("ry")*this.get(or)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...vS,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,Cu,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e,t,n){const s=En(e,this.ATTRIBUTE_NAMES,n);return s.left=(s.left||0)-s.rx,s.top=(s.top||0)-s.ry,new this(s)}}function d5(r){if(!r)return[];const e=r.replace(/,/g," ").trim().split(/\s+/),t=[];for(let n=0;n<e.length;n+=2)t.push({x:parseFloat(e[n]),y:parseFloat(e[n+1])});return t}k(sn,"type","Ellipse"),k(sn,"cacheProperties",[...jn,...vS]),k(sn,"ownDefaults",{rx:0,ry:0}),k(sn,"ATTRIBUTE_NAMES",[...ks,"cx","cy","rx","ry"]),H.setClass(sn),H.setSVGClass(sn);const f5=["left","top"],yS={exactBoundingBox:!1};class br extends ft{static getDefaults(){return j(j({},super.getDefaults()),br.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),k(this,"strokeDiff",void 0),Object.assign(this,br.ownDefaults),this.setOptions(t),this.points=e;const{left:n,top:s}=t;this.initialized=!0,this.setBoundingBox(!0),typeof n=="number"&&this.set(me,n),typeof s=="number"&&this.set(At,s)}isOpen(){return!0}_projectStrokeOnPoints(e){return qR(this.points,e,this.isOpen())}_calcDimensions(e){e=j({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},e||{});const t=this.exactBoundingBox?this._projectStrokeOnPoints(e).map(c=>c.projectedPoint):this.points;if(t.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new O,strokeOffset:new O,strokeDiff:new O};const n=gn(t),s=_h(j(j({},e),{},{scaleX:1,scaleY:1})),i=gn(this.points.map(c=>kt(c,s,!0))),o=new O(this.scaleX,this.scaleY);let a=n.left+n.width/2,l=n.top+n.height/2;return this.exactBoundingBox&&(a-=l*Math.tan(ze(this.skewX)),l-=a*Math.tan(ze(this.skewY))),j(j({},n),{},{pathOffset:new O(a,l),strokeOffset:new O(i.left,i.top).subtract(new O(n.left,n.top)).multiply(o),strokeDiff:new O(n.width,n.height).subtract(new O(i.width,i.height)).multiply(o)})}_findCenterFromElement(){const e=gn(this.points);return new O(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:t,top:n,width:s,height:i,pathOffset:o,strokeOffset:a,strokeDiff:l}=this._calcDimensions();this.set({width:s,height:i,pathOffset:o,strokeOffset:a,strokeDiff:l}),e&&this.setPositionByOrigin(new O(t+s/2,n+i/2),oe,oe)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new O(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let o;if(Object.keys(e).some(a=>this.strokeUniform||this.constructor.layoutProperties.includes(a))){var t,n;const{width:a,height:l}=this._calcDimensions(e);o=new O((t=e.width)!==null&&t!==void 0?t:a,(n=e.height)!==null&&n!==void 0?n:l)}else{var s,i;o=new O((s=e.width)!==null&&s!==void 0?s:this.width,(i=e.height)!==null&&i!==void 0?i:this.height)}return o.multiply(new O(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,t){const n=this.initialized&&this[e]!==t,s=super._set(e,t);return this.exactBoundingBox&&n&&((e===Rt||e===or)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),s}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return j(j({},super.toObject(e)),{},{points:ml(this.points)})}_toSVG(){const e=[],t=this.pathOffset.x,n=this.pathOffset.y,s=he.NUM_FRACTION_DIGITS;for(let i=0,o=this.points.length;i<o;i++)e.push(ue(this.points[i].x-t,s),",",ue(this.points[i].y-n,s)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(e.join(""),`" />
`)]}_render(e){const t=this.points.length,n=this.pathOffset.x,s=this.pathOffset.y;if(t&&!isNaN(this.points[t-1].y)){e.beginPath(),e.moveTo(this.points[0].x-n,this.points[0].y-s);for(let i=0;i<t;i++){const o=this.points[i];e.lineTo(o.x-n,o.y-s)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,t,n){return new this(d5(e.getAttribute("points")),j(j({},Ee(En(e,this.ATTRIBUTE_NAMES,n),f5)),t))}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}k(br,"ownDefaults",yS),k(br,"type","Polyline"),k(br,"layoutProperties",[Po,Oo,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),k(br,"cacheProperties",[...jn,"points"]),k(br,"ATTRIBUTE_NAMES",[...ks]),H.setClass(br),H.setSVGClass(br);class ta extends br{isOpen(){return!1}}k(ta,"ownDefaults",yS),k(ta,"type","Polygon"),H.setClass(ta),H.setSVGClass(ta);const xS=["fontSize","fontWeight","fontFamily","fontStyle"],wS=["underline","overline","linethrough"],bS=[...xS,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_S=[...bS,...wS,"textBackgroundColor","direction"],g5=[...xS,...wS,Dt,"strokeWidth",Ge,"deltaY","textBackgroundColor"],p5={_reNewline:sm,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:me,fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:me,pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2},zr="justify",Lu="justify-left",ya="justify-right",xa="justify-center";class SS extends ft{isEmptyStyles(e){if(!this.styles||e!==void 0&&!this.styles[e])return!0;const t=e===void 0?this.styles:{line:this.styles[e]};for(const n in t)for(const s in t[n])for(const i in t[n][s])return!1;return!0}styleHas(e,t){if(!this.styles||t!==void 0&&!this.styles[t])return!1;const n=t===void 0?this.styles:{0:this.styles[t]};for(const s in n)for(const i in n[s])if(n[s][i][e]!==void 0)return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const t=this.styles;let n,s,i=0,o=!0,a=0;for(const l in t){n=0;for(const c in t[l]){const u=t[l][c]||{};i++,u[e]!==void 0?(s?u[e]!==s&&(o=!1):s=u[e],u[e]===this[e]&&delete u[e]):o=!1,Object.keys(u).length!==0?n++:delete t[l][c]}n===0&&delete t[l]}for(let l=0;l<this._textLines.length;l++)a+=this._textLines[l].length;o&&i===a&&(this[e]=s,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const t=this.styles;let n,s,i;for(s in t){for(i in n=t[s],n)delete n[i][e],Object.keys(n[i]).length===0&&delete n[i];Object.keys(n).length===0&&delete t[s]}}_extendStyles(e,t){const{lineIndex:n,charIndex:s}=this.get2DCursorLocation(e);this._getLineStyle(n)||this._setLineStyle(n);const i=cm(j(j({},this._getStyleDeclaration(n,s)),t),o=>o!==void 0);this._setStyleDeclaration(n,s,i)}getSelectionStyles(e,t,n){const s=[];for(let i=e;i<(t||e);i++)s.push(this.getStyleAtPosition(i,n));return s}getStyleAtPosition(e,t){const{lineIndex:n,charIndex:s}=this.get2DCursorLocation(e);return t?this.getCompleteStyleDeclaration(n,s):this._getStyleDeclaration(n,s)}setSelectionStyles(e,t,n){for(let s=t;s<(n||t);s++)this._extendStyles(s,e);this._forceClearCache=!0}_getStyleDeclaration(e,t){var n;const s=this.styles&&this.styles[e];return s&&(n=s[t])!==null&&n!==void 0?n:{}}getCompleteStyleDeclaration(e,t){return j(j({},No(this,this.constructor._styleProperties)),this._getStyleDeclaration(e,t))}_setStyleDeclaration(e,t,n){this.styles[e][t]=n}_deleteStyleDeclaration(e,t){delete this.styles[e][t]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}k(SS,"_styleProperties",g5);const m5=/  +/g,v5=/"/g;function Rd(r,e,t,n,s){return"		".concat(function(i,o){let{left:a,top:l,width:c,height:u}=o,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:he.NUM_FRACTION_DIGITS;const f=Ya(Ge,i,!1),[g,y,v,w]=[a,l,c,u].map(m=>ue(m,d));return"<rect ".concat(f,' x="').concat(g,'" y="').concat(y,'" width="').concat(v,'" height="').concat(w,'"></rect>')}(r,{left:e,top:t,width:n,height:s}),`
`)}const y5=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let Ld;class ht extends SS{static getDefaults(){return j(j({},super.getDefaults()),ht.ownDefaults)}constructor(e,t){super(),k(this,"__charBounds",[]),Object.assign(this,ht.ownDefaults),this.setOptions(t),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=cS(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(zr)&&this.enlargeSpaces()}enlargeSpaces(){let e,t,n,s,i,o,a;for(let l=0,c=this._textLines.length;l<c;l++)if((this.textAlign===zr||l!==c-1&&!this.isEndOfWrapping(l))&&(s=0,i=this._textLines[l],t=this.getLineWidth(l),t<this.width&&(a=this.textLines[l].match(this._reSpacesAndTabs)))){n=a.length,e=(this.width-t)/n;for(let u=0;u<=i.length;u++)o=this.__charBounds[l][u],this._reSpaceAndTab.test(i[u])?(o.width+=e,o.kernedWidth+=e,o.left+=s,s+=e):o.left+=s}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,t){const n=t?this._unwrappedTextLines:this._textLines;let s;for(s=0;s<n.length;s++){if(e<=n[s].length)return{lineIndex:s,charIndex:e};e-=n[s].length+this.missingNewlineOffset(s,t)}return{lineIndex:s-1,charIndex:n[s-1].length<e?n[s-1].length:e}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e}_render(e){const t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===Dt?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,t,n){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case oe:e.textBaseline="middle";break;case"ascender":e.textBaseline=At;break;case"descender":e.textBaseline=ug}e.font=this._getFontDeclaration(t,n)}calcTextWidth(){let e=this.getLineWidth(0);for(let t=1,n=this._textLines.length;t<n;t++){const s=this.getLineWidth(t);s>e&&(e=s)}return e}_renderTextLine(e,t,n,s,i,o){this._renderChars(e,t,n,s,i,o)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const t=e.fillStyle,n=this._getLeftOffset();let s=this._getTopOffset();for(let i=0,o=this._textLines.length;i<o;i++){const a=this.getHeightOfLine(i);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",i)){s+=a;continue}const l=this._textLines[i].length,c=this._getLineLeftOffset(i);let u,d,f=0,g=0,y=this.getValueOfPropertyAt(i,0,"textBackgroundColor");for(let v=0;v<l;v++){const w=this.__charBounds[i][v];d=this.getValueOfPropertyAt(i,v,"textBackgroundColor"),this.path?(e.save(),e.translate(w.renderLeft,w.renderTop),e.rotate(w.angle),e.fillStyle=d,d&&e.fillRect(-w.width/2,-a/this.lineHeight*(1-this._fontSizeFraction),w.width,a/this.lineHeight),e.restore()):d!==y?(u=n+c+g,this.direction==="rtl"&&(u=this.width-u-f),e.fillStyle=y,y&&e.fillRect(u,s,f,a/this.lineHeight),g=w.left,f=w.width,y=d):f+=w.kernedWidth}d&&!this.path&&(u=n+c+g,this.direction==="rtl"&&(u=this.width-u-f),e.fillStyle=d,e.fillRect(u,s,f,a/this.lineHeight)),s+=a}e.fillStyle=t,this._removeShadow(e)}_measureChar(e,t,n,s){const i=ma.getFontCache(t),o=this._getFontDeclaration(t),a=n+e,l=n&&o===this._getFontDeclaration(s),c=t.fontSize/this.CACHE_FONT_SIZE;let u,d,f,g;if(n&&i[n]!==void 0&&(f=i[n]),i[e]!==void 0&&(g=u=i[e]),l&&i[a]!==void 0&&(d=i[a],g=d-f),u===void 0||f===void 0||d===void 0){const y=function(){if(!Ld){const v=Je();v.width=v.height=0,Ld=v.getContext("2d")}return Ld}();this._setTextStyles(y,t,!0),u===void 0&&(g=u=y.measureText(e).width,i[e]=u),f===void 0&&l&&n&&(f=y.measureText(n).width,i[n]=f),l&&d===void 0&&(d=y.measureText(a).width,i[a]=d,g=d-f)}return{width:u*c,kernedWidth:g*c}}getHeightOfChar(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")}measureLine(e){const t=this._measureLine(e);return this.charSpacing!==0&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t}_measureLine(e){let t,n,s=0;const i=this.pathSide===$e,o=this.path,a=this._textLines[e],l=a.length,c=new Array(l);this.__charBounds[e]=c;for(let u=0;u<l;u++){const d=a[u];n=this._getGraphemeBox(d,e,u,t),c[u]=n,s+=n.kernedWidth,t=d}if(c[l]={left:n?n.left+n.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},o&&o.segmentsInfo){let u=0;const d=o.segmentsInfo[o.segmentsInfo.length-1].length;switch(this.textAlign){case me:u=i?d-s:0;break;case oe:u=(d-s)/2;break;case $e:u=i?0:d-s}u+=this.pathStartOffset*(i?-1:1);for(let f=i?l-1:0;i?f>=0:f<l;i?f--:f++)n=c[f],u>d?u%=d:u<0&&(u+=d),this._setGraphemeOnPath(u,n),u+=n.kernedWidth}return{width:s,numOfSpaces:0}}_setGraphemeOnPath(e,t){const n=e+t.kernedWidth/2,s=this.path,i=W4(s.path,n,s.segmentsInfo);t.renderLeft=i.x-s.pathOffset.x,t.renderTop=i.y-s.pathOffset.y,t.angle=i.angle+(this.pathSide===$e?Math.PI:0)}_getGraphemeBox(e,t,n,s,i){const o=this.getCompleteStyleDeclaration(t,n),a=s?this.getCompleteStyleDeclaration(t,n-1):{},l=this._measureChar(e,o,s,a);let c,u=l.kernedWidth,d=l.width;this.charSpacing!==0&&(c=this._getWidthOfCharSpacing(),d+=c,u+=c);const f={width:d,left:0,height:o.fontSize,kernedWidth:u,deltaY:o.deltaY};if(n>0&&!i){const g=this.__charBounds[t][n-1];f.left=g.left+g.width+l.kernedWidth-l.width}return f}getHeightOfLine(e){if(this.__lineHeights[e])return this.__lineHeights[e];let t=this.getHeightOfChar(e,0);for(let n=1,s=this._textLines[e].length;n<s;n++)t=Math.max(this.getHeightOfChar(e,n),t);return this.__lineHeights[e]=t*this.lineHeight*this._fontSizeMult}calcTextHeight(){let e,t=0;for(let n=0,s=this._textLines.length;n<s;n++)e=this.getHeightOfLine(n),t+=n===s-1?e/this.lineHeight:e;return t}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,t){e.save();let n=0;const s=this._getLeftOffset(),i=this._getTopOffset();for(let o=0,a=this._textLines.length;o<a;o++){const l=this.getHeightOfLine(o),c=l/this.lineHeight,u=this._getLineLeftOffset(o);this._renderTextLine(t,e,this._textLines[o],s+u,i+n+c,o),n+=l}e.restore()}_renderTextFill(e){(this.fill||this.styleHas(Ge))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,t,n,s,i,o){const a=this.getHeightOfLine(o),l=this.textAlign.includes(zr),c=this.path,u=!l&&this.charSpacing===0&&this.isEmptyStyles(o)&&!c,d=this.direction==="ltr",f=this.direction==="ltr"?1:-1,g=t.direction;let y,v,w,m,p,x="",_=0;if(t.save(),g!==this.direction&&(t.canvas.setAttribute("dir",d?"ltr":"rtl"),t.direction=d?"ltr":"rtl",t.textAlign=d?me:$e),i-=a*this._fontSizeFraction/this.lineHeight,u)return this._renderChar(e,t,o,0,n.join(""),s,i),void t.restore();for(let S=0,C=n.length-1;S<=C;S++)m=S===C||this.charSpacing||c,x+=n[S],w=this.__charBounds[o][S],_===0?(s+=f*(w.kernedWidth-w.width),_+=w.width):_+=w.kernedWidth,l&&!m&&this._reSpaceAndTab.test(n[S])&&(m=!0),m||(y=y||this.getCompleteStyleDeclaration(o,S),v=this.getCompleteStyleDeclaration(o,S+1),m=vm(y,v,!1)),m&&(c?(t.save(),t.translate(w.renderLeft,w.renderTop),t.rotate(w.angle),this._renderChar(e,t,o,S,x,-_/2,0),t.restore()):(p=s,this._renderChar(e,t,o,S,x,p,i)),x="",y=v,s+=f*_,_=0);t.restore()}_applyPatternGradientTransformText(e){const t=Je(),n=this.width+this.strokeWidth,s=this.height+this.strokeWidth,i=t.getContext("2d");return t.width=n,t.height=s,i.beginPath(),i.moveTo(0,0),i.lineTo(n,0),i.lineTo(n,s),i.lineTo(0,s),i.closePath(),i.translate(n/2,s/2),i.fillStyle=e.toLive(i),this._applyPatternGradientTransform(i,e),i.fill(),i.createPattern(t,"no-repeat")}handleFiller(e,t,n){let s,i;return er(n)?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?(s=-this.width/2,i=-this.height/2,e.translate(s,i),e[t]=this._applyPatternGradientTransformText(n),{offsetX:s,offsetY:i}):(e[t]=n.toLive(e),this._applyPatternGradientTransform(e,n)):(e[t]=n,{offsetX:0,offsetY:0})}_setStrokeStyles(e,t){let{stroke:n,strokeWidth:s}=t;return e.lineWidth=s,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",n)}_setFillStyles(e,t){let{fill:n}=t;return this.handleFiller(e,"fillStyle",n)}_renderChar(e,t,n,s,i,o,a){const l=this._getStyleDeclaration(n,s),c=this.getCompleteStyleDeclaration(n,s),u=e==="fillText"&&c.fill,d=e==="strokeText"&&c.stroke&&c.strokeWidth;if(d||u){if(t.save(),t.font=this._getFontDeclaration(c),l.textBackgroundColor&&this._removeShadow(t),l.deltaY&&(a+=l.deltaY),u){const f=this._setFillStyles(t,c);t.fillText(i,o-f.offsetX,a-f.offsetY)}if(d){const f=this._setStrokeStyles(t,c);t.strokeText(i,o-f.offsetX,a-f.offsetY)}t.restore()}}setSuperscript(e,t){this._setScript(e,t,this.superscript)}setSubscript(e,t){this._setScript(e,t,this.subscript)}_setScript(e,t,n){const s=this.get2DCursorLocation(e,!0),i=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"fontSize"),o=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"deltaY"),a={fontSize:i*n.size,deltaY:o+i*n.baseline};this.setSelectionStyles(a,e,t)}_getLineLeftOffset(e){const t=this.getLineWidth(e),n=this.width-t,s=this.textAlign,i=this.direction,o=this.isEndOfWrapping(e);let a=0;return s===zr||s===xa&&!o||s===ya&&!o||s===Lu&&!o?0:(s===oe&&(a=n/2),s===$e&&(a=n),s===xa&&(a=n/2),s===ya&&(a=n),i==="rtl"&&(s===$e||s===zr||s===ya?a=0:s===me||s===Lu?a=-n:s!==oe&&s!==xa||(a=-n/2)),a)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];const{width:t}=this.measureLine(e);return this.__lineWidths[e]=t,t}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,t,n){var s;return(s=this._getStyleDeclaration(e,t)[n])!==null&&s!==void 0?s:this[n]}_renderTextDecoration(e,t){if(!this[t]&&!this.styleHas(t))return;let n=this._getTopOffset();const s=this._getLeftOffset(),i=this.path,o=this._getWidthOfCharSpacing(),a=this.offsets[t];for(let l=0,c=this._textLines.length;l<c;l++){const u=this.getHeightOfLine(l);if(!this[t]&&!this.styleHas(t,l)){n+=u;continue}const d=this._textLines[l],f=u/this.lineHeight,g=this._getLineLeftOffset(l);let y,v,w=0,m=0,p=this.getValueOfPropertyAt(l,0,t),x=this.getValueOfPropertyAt(l,0,Ge);const _=n+f*(1-this._fontSizeFraction);let S=this.getHeightOfChar(l,0),C=this.getValueOfPropertyAt(l,0,"deltaY");for(let E=0,A=d.length;E<A;E++){const D=this.__charBounds[l][E];y=this.getValueOfPropertyAt(l,E,t),v=this.getValueOfPropertyAt(l,E,Ge);const B=this.getHeightOfChar(l,E),P=this.getValueOfPropertyAt(l,E,"deltaY");if(i&&y&&v)e.save(),e.fillStyle=x,e.translate(D.renderLeft,D.renderTop),e.rotate(D.angle),e.fillRect(-D.kernedWidth/2,a*B+P,D.kernedWidth,this.fontSize/15),e.restore();else if((y!==p||v!==x||B!==S||P!==C)&&m>0){let I=s+g+w;this.direction==="rtl"&&(I=this.width-I-m),p&&x&&(e.fillStyle=x,e.fillRect(I,_+a*S+C,m,this.fontSize/15)),w=D.left,m=D.width,p=y,x=v,S=B,C=P}else m+=D.kernedWidth}let T=s+g+w;this.direction==="rtl"&&(T=this.width-T-m),e.fillStyle=v,y&&v&&e.fillRect(T,_+a*S+C,m-o,this.fontSize/15),n+=u}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:t=this.fontStyle,fontWeight:n=this.fontWeight,fontSize:s=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;const o=e.includes("'")||e.includes('"')||e.includes(",")||ht.genericFonts.includes(e.toLowerCase())?e:'"'.concat(e,'"');return[t,n,"".concat(i?this.CACHE_FONT_SIZE:s,"px"),o].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return mm(e)}_splitTextIntoLines(e){const t=e.split(this._reNewline),n=new Array(t.length),s=[`
`];let i=[];for(let o=0;o<t.length;o++)n[o]=this.graphemeSplit(t[o]),i=i.concat(n[o],s);return i.pop(),{_unwrappedLines:n,lines:t,graphemeText:i,graphemeLines:n}}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return j(j({},super.toObject([..._S,...e])),{},{styles:QR(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(e,t){const{textLayoutProperties:n}=this.constructor;super.set(e,t);let s=!1,i=!1;if(typeof e=="object")for(const o in e)o==="path"&&this.setPathInfo(),s=s||n.includes(o),i=i||o==="path";else s=n.includes(e),i=e==="path";return i&&this.setPathInfo(),s&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,t,n){const s=En(e,ht.ATTRIBUTE_NAMES,n),i=j(j({},t),s),{textAnchor:o=me,textDecoration:a="",dx:l=0,dy:c=0,top:u=0,left:d=0,fontSize:f=nm,strokeWidth:g=1}=i,y=Ee(i,y5),v=new this((e.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),j({left:d+l,top:u+c,underline:a.includes("underline"),overline:a.includes("overline"),linethrough:a.includes("line-through"),strokeWidth:0,fontSize:f},y)),w=v.getScaledHeight()/v.height,m=((v.height+v.strokeWidth)*v.lineHeight-v.height)*w,p=v.getScaledHeight()+m;let x=0;return o===oe&&(x=v.getScaledWidth()/2),o===$e&&(x=v.getScaledWidth()),v.set({left:v.left-x,top:v.top-(p-v.fontSize*(.07+v._fontSizeFraction))/v.lineHeight,strokeWidth:g}),v}static fromObject(e){return this._fromObject(j(j({},e),{},{styles:JR(e.styles||{},e.text)}),{extraParam:"text"})}}k(ht,"textLayoutProperties",bS),k(ht,"cacheProperties",[...jn,..._S]),k(ht,"ownDefaults",p5),k(ht,"type","Text"),k(ht,"genericFonts",["sans-serif","serif","cursive","fantasy","monospace"]),k(ht,"ATTRIBUTE_NAMES",ks.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),J_(ht,[class extends U_{_toSVG(){const r=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(r.textTop,r.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(r){return this._createBaseSVGMarkup(this._toSVG(),{reviver:r,noStyle:!0,withShadow:!0})}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(r){let{textBgRects:e,textSpans:t}=r;const n=this.getSvgTextDecoration(this);return[e.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'.concat(this.fontFamily.replace(v5,"'"),'" '):"",this.fontSize?'font-size="'.concat(this.fontSize,'" '):"",this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",n?'text-decoration="'.concat(n,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t.join(""),`</text>
`]}_getSVGTextAndBg(r,e){const t=[],n=[];let s,i=r;this.backgroundColor&&n.push(...Rd(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let o=0,a=this._textLines.length;o<a;o++)s=this._getLineLeftOffset(o),this.direction==="rtl"&&(s+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",o))&&this._setSVGTextLineBg(n,o,e+s,i),this._setSVGTextLineText(t,o,e+s,i),i+=this.getHeightOfLine(o);return{textSpans:t,textBgRects:n}}_createTextCharSpan(r,e,t,n){const s=this.getSvgSpanStyles(e,r!==r.trim()||!!r.match(m5)),i=s?'style="'.concat(s,'"'):"",o=e.deltaY,a=o?' dy="'.concat(ue(o,he.NUM_FRACTION_DIGITS),'" '):"";return'<tspan x="'.concat(ue(t,he.NUM_FRACTION_DIGITS),'" y="').concat(ue(n,he.NUM_FRACTION_DIGITS),'" ').concat(a).concat(i,">").concat(XR(r),"</tspan>")}_setSVGTextLineText(r,e,t,n){const s=this.getHeightOfLine(e),i=this.textAlign.includes(zr),o=this._textLines[e];let a,l,c,u,d,f="",g=0;n+=s*(1-this._fontSizeFraction)/this.lineHeight;for(let y=0,v=o.length-1;y<=v;y++)d=y===v||this.charSpacing,f+=o[y],c=this.__charBounds[e][y],g===0?(t+=c.kernedWidth-c.width,g+=c.width):g+=c.kernedWidth,i&&!d&&this._reSpaceAndTab.test(o[y])&&(d=!0),d||(a=a||this.getCompleteStyleDeclaration(e,y),l=this.getCompleteStyleDeclaration(e,y+1),d=vm(a,l,!0)),d&&(u=this._getStyleDeclaration(e,y),r.push(this._createTextCharSpan(f,u,t,n)),f="",a=l,this.direction==="rtl"?t-=g:t+=g,g=0)}_setSVGTextLineBg(r,e,t,n){const s=this._textLines[e],i=this.getHeightOfLine(e)/this.lineHeight;let o,a=0,l=0,c=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let u=0;u<s.length;u++){const{left:d,width:f,kernedWidth:g}=this.__charBounds[e][u];o=this.getValueOfPropertyAt(e,u,"textBackgroundColor"),o!==c?(c&&r.push(...Rd(c,t+l,n,a,i)),l=d,a=f,c=o):a+=g}o&&r.push(...Rd(c,t+l,n,a,i))}_getSVGLineTopOffset(r){let e,t=0;for(e=0;e<r;e++)t+=this.getHeightOfLine(e);const n=this.getHeightOfLine(e);return{lineTop:t,offset:(this._fontSizeMult-this._fontSizeFraction)*n/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(r){return"".concat(super.getSvgStyles(r)," white-space: pre;")}getSvgSpanStyles(r,e){const{fontFamily:t,strokeWidth:n,stroke:s,fill:i,fontSize:o,fontStyle:a,fontWeight:l,deltaY:c}=r,u=this.getSvgTextDecoration(r);return[s?Ya(Dt,s):"",n?"stroke-width: ".concat(n,"; "):"",t?"font-family: ".concat(t.includes("'")||t.includes('"')?t:"'".concat(t,"'"),"; "):"",o?"font-size: ".concat(o,"px; "):"",a?"font-style: ".concat(a,"; "):"",l?"font-weight: ".concat(l,"; "):"",u&&"text-decoration: ".concat(u,"; "),i?Ya(Ge,i):"",c?"baseline-shift: ".concat(-c,"; "):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(r){return["overline","underline","line-through"].filter(e=>r[e.replace("-","")]).join(" ")}}]),H.setClass(ht),H.setSVGClass(ht);class x5{constructor(e){k(this,"target",void 0),k(this,"__mouseDownInPlace",!1),k(this,"__dragStartFired",!1),k(this,"__isDraggingOver",!1),k(this,"__dragStartSelection",void 0),k(this,"__dragImageDisposer",void 0),k(this,"_dispose",void 0),this.target=e;const t=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{t.forEach(n=>n()),this._dispose=void 0}}isPointerOverSelection(e){const t=this.target,n=t.getSelectionStartFromPointer(e);return t.isEditing&&n>=t.selectionStart&&n<=t.selectionEnd&&t.selectionStart<t.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const t=this.isActive();return t&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,t}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,t){var n;let{selectionStart:s,selectionEnd:i}=t;const o=this.target,a=o.canvas,l=new O(o.flipX?-1:1,o.flipY?-1:1),c=o._getCursorBoundaries(s),u=new O(c.left+c.leftOffset,c.top+c.topOffset).multiply(l).transform(o.calcTransformMatrix()),d=a.getScenePoint(e).subtract(u),f=o.getCanvasRetinaScaling(),g=o.getBoundingRect(),y=u.subtract(new O(g.left,g.top)),v=a.viewportTransform,w=y.add(d).transform(v,!0),m=o.backgroundColor,p=ml(o.styles);o.backgroundColor="";const x={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};o.setSelectionStyles(x,0,s),o.setSelectionStyles(x,i,o.text.length),o.dirty=!0;const _=o.toCanvasElement({enableRetinaScaling:a.enableRetinaScaling,viewportTransform:!0});o.backgroundColor=m,o.styles=p,o.dirty=!0,$c(_,{position:"fixed",left:"".concat(-_.width,"px"),border:Mt,width:"".concat(_.width/f,"px"),height:"".concat(_.height/f,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{_.remove()},Cr(e.target||this.target.hiddenTextarea).body.appendChild(_),(n=e.dataTransfer)===null||n===void 0||n.setDragImage(_,w.x,w.y)}onDragStart(e){this.__dragStartFired=!0;const t=this.target,n=this.isActive();if(n&&e.dataTransfer){const s=this.__dragStartSelection={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},i=t._text.slice(s.selectionStart,s.selectionEnd).join(""),o=j({text:t.text,value:i},s);e.dataTransfer.setData("text/plain",i),e.dataTransfer.setData("application/fabric",JSON.stringify({value:i,styles:t.getSelectionStyles(s.selectionStart,s.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,o)}return t.abortCursorAnimation(),n}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const t=this.target.getSelectionStartFromPointer(e),n=this.__dragStartSelection;return t<n.selectionStart||t>n.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:t}=e;const n=this.targetCanDrop(t);!this.__isDraggingOver&&n&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:t}=e,n=this.targetCanDrop(t);!this.__isDraggingOver&&n?this.__isDraggingOver=!0:this.__isDraggingOver&&!n&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(t.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var t;const{e:n}=e,s=n.defaultPrevented;this.__isDraggingOver=!1,n.preventDefault();let i=(t=n.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain");if(i&&!s){const o=this.target,a=o.canvas;let l=o.getSelectionStartFromPointer(n);const{styles:c}=n.dataTransfer.types.includes("application/fabric")?JSON.parse(n.dataTransfer.getData("application/fabric")):{},u=i[Math.max(0,i.length-1)],d=0;if(this.__dragStartSelection){const f=this.__dragStartSelection.selectionStart,g=this.__dragStartSelection.selectionEnd;l>f&&l<=g?l=f:l>g&&(l-=g-f),o.removeChars(f,g),delete this.__dragStartSelection}o._reNewline.test(u)&&(o._reNewline.test(o._text[l])||l===o._text.length)&&(i=i.trimEnd()),e.didDrop=!0,e.dropTarget=o,o.insertChars(i,c,l),a.setActiveObject(o),o.enterEditing(n),o.selectionStart=Math.min(l+d,o._text.length),o.selectionEnd=Math.min(o.selectionStart+i.length,o._text.length),o.hiddenTextarea.value=o.text,o._updateTextarea(),o.hiddenTextarea.focus(),o.fire(ku,{index:l+d,action:"drop"}),a.fire("text:changed",{target:o}),a.contextTopDirty=!0,a.requestRenderAll()}}dragEndHandler(e){let{e:t}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var n;const s=this.target,i=this.target.canvas,{selectionStart:o,selectionEnd:a}=this.__dragStartSelection,l=((n=t.dataTransfer)===null||n===void 0?void 0:n.dropEffect)||Mt;l===Mt?(s.selectionStart=o,s.selectionEnd=a,s._updateTextarea(),s.hiddenTextarea.focus()):(s.clearContextTop(),l==="move"&&(s.removeChars(o,a),s.selectionStart=s.selectionEnd=o,s.hiddenTextarea&&(s.hiddenTextarea.value=s.text),s._updateTextarea(),s.fire(ku,{index:o,action:"dragend"}),i.fire("text:changed",{target:s}),i.requestRenderAll()),s.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const jy=/[ \n\.,;!\?\-]/;class w5 extends ht{constructor(){super(...arguments),k(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:t,duration:n,delay:s,onComplete:i}=e;return W_({startValue:this._currentCursorOpacity,endValue:t,duration:n,delay:s,onComplete:i,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:o=>{this._currentCursorOpacity=o,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;(e=this._currentTickCompleteState)===null||e===void 0||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach(t=>{t&&!t.isDone()&&(e=!0,t.abort())}),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(e=>!e||e.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let t=0,n=e-1;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)t++,n--;for(;/\S/.test(this._text[n])&&n>-1;)t++,n--;return e-t}findWordBoundaryRight(e){let t=0,n=e;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)t++,n++;for(;/\S/.test(this._text[n])&&n<this._text.length;)t++,n++;return e+t}findLineBoundaryLeft(e){let t=0,n=e-1;for(;!/\n/.test(this._text[n])&&n>-1;)t++,n--;return e-t}findLineBoundaryRight(e){let t=0,n=e;for(;!/\n/.test(this._text[n])&&n<this._text.length;)t++,n++;return e+t}searchWordBoundary(e,t){const n=this._text;let s=e>0&&this._reSpace.test(n[e])&&(t===-1||!sm.test(n[e-1]))?e-1:e,i=n[s];for(;s>0&&s<n.length&&!jy.test(i);)s+=t,i=n[s];return t===-1&&jy.test(i)&&s++,s}selectWord(e){e=e||this.selectionStart;const t=this.searchWordBoundary(e,-1),n=Math.max(t,this.searchWordBoundary(e,1));this.selectionStart=t,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){e=e||this.selectionStart;const t=this.findLineBoundaryLeft(e),n=this.findLineBoundaryRight(e);return this.selectionStart=t,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this}enterEditing(e){!this.isEditing&&this.editable&&(this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered",e?{e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e}),this.canvas.requestRenderAll()))}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;const t=this.hiddenTextarea;Cr(t).activeElement!==t&&t.focus();const n=this.getSelectionStartFromPointer(e),s=this.selectionStart,i=this.selectionEnd;(n===this.__selectionStartOnMouseDown&&s!==i||s!==n&&i!==n)&&(n>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=n):(this.selectionStart=n,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===s&&this.selectionEnd===i||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,t,n){const s=n.slice(0,e),i=this.graphemeSplit(s).length;if(e===t)return{selectionStart:i,selectionEnd:i};const o=n.slice(e,t);return{selectionStart:i,selectionEnd:i+this.graphemeSplit(o).length}}fromGraphemeToStringSelection(e,t,n){const s=n.slice(0,e).join("").length;return e===t?{selectionStart:s,selectionEnd:s}:{selectionStart:s,selectionEnd:s+n.slice(e,t).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const e=this.hiddenTextarea;this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const t=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),n=this.get2DCursorLocation(e),s=n.lineIndex,i=n.charIndex,o=this.getValueOfPropertyAt(s,i,"fontSize")*this.lineHeight,a=t.leftOffset,l=this.getCanvasRetinaScaling(),c=this.canvas.upperCanvasEl,u=c.width/l,d=c.height/l,f=u-o,g=d-o,y=new O(t.left+a,t.top+t.topOffset+o).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new O(c.clientWidth/u,c.clientHeight/d));return y.x<0&&(y.x=0),y.x>f&&(y.x=f),y.y<0&&(y.y=0),y.y>g&&(y.y=g),y.x+=this.canvas._offset.left,y.y+=this.canvas._offset.top,{left:"".concat(y.x,"px"),top:"".concat(y.y,"px"),fontSize:"".concat(o,"px"),charHeight:o}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditing(){const e=this._textBeforeEdit!==this.text;return this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),e&&this.fire(Tu),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,t){const{lineIndex:n,charIndex:s}=this.get2DCursorLocation(e,!0),{lineIndex:i,charIndex:o}=this.get2DCursorLocation(t,!0);if(n!==i){if(this.styles[n])for(let a=s;a<this._unwrappedTextLines[n].length;a++)delete this.styles[n][a];if(this.styles[i])for(let a=o;a<this._unwrappedTextLines[i].length;a++){const l=this.styles[i][a];l&&(this.styles[n]||(this.styles[n]={}),this.styles[n][s+a-o]=l)}for(let a=n+1;a<=i;a++)delete this.styles[a];this.shiftLineStyles(i,n-i)}else if(this.styles[n]){const a=this.styles[n],l=o-s;for(let c=s;c<o;c++)delete a[c];for(const c in this.styles[n]){const u=parseInt(c,10);u>=o&&(a[u-l]=a[c],delete a[c])}}}shiftLineStyles(e,t){const n=Object.assign({},this.styles);for(const s in this.styles){const i=parseInt(s,10);i>e&&(this.styles[i+t]=n[i],n[i-t]||delete this.styles[i])}}insertNewlineStyleObject(e,t,n,s){const i={},o=this._unwrappedTextLines[e].length,a=o===t;let l=!1;n||(n=1),this.shiftLineStyles(e,n);const c=this.styles[e]?this.styles[e][t===0?t:t-1]:void 0;for(const d in this.styles[e]){const f=parseInt(d,10);f>=t&&(l=!0,i[f-t]=this.styles[e][d],a&&t===0||delete this.styles[e][d])}let u=!1;for(l&&!a&&(this.styles[e+n]=i,u=!0),(u||o>t)&&n--;n>0;)s&&s[n-1]?this.styles[e+n]={0:j({},s[n-1])}:c?this.styles[e+n]={0:j({},c)}:delete this.styles[e+n],n--;this._forceClearCache=!0}insertCharStyleObject(e,t,n,s){this.styles||(this.styles={});const i=this.styles[e],o=i?j({},i):{};n||(n=1);for(const l in o){const c=parseInt(l,10);c>=t&&(i[c+n]=o[c],o[c-n]||delete i[c])}if(this._forceClearCache=!0,s){for(;n--;)Object.keys(s[n]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+n]=j({},s[n]));return}if(!i)return;const a=i[t?t-1:1];for(;a&&n--;)this.styles[e][t+n]=j({},a)}insertNewStyleBlock(e,t,n){const s=this.get2DCursorLocation(t,!0),i=[0];let o,a=0;for(let l=0;l<e.length;l++)e[l]===`
`?(a++,i[a]=0):i[a]++;for(i[0]>0&&(this.insertCharStyleObject(s.lineIndex,s.charIndex,i[0],n),n=n&&n.slice(i[0]+1)),a&&this.insertNewlineStyleObject(s.lineIndex,s.charIndex+i[0],a),o=1;o<a;o++)i[o]>0?this.insertCharStyleObject(s.lineIndex+o,0,i[o],n):n&&this.styles[s.lineIndex+o]&&n[0]&&(this.styles[s.lineIndex+o][0]=n[0]),n=n&&n.slice(i[o]+1);i[o]>0&&this.insertCharStyleObject(s.lineIndex+o,0,i[o],n)}removeChars(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e+1;this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,t,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n;s>n&&this.removeStyleFromTo(n,s);const i=this.graphemeSplit(e);this.insertNewStyleBlock(i,n,t),this._text=[...this._text.slice(0,n),...i,...this._text.slice(s)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,t,n){n<=e?(t===e?this._selectionDirection=me:this._selectionDirection===$e&&(this._selectionDirection=me,this.selectionEnd=e),this.selectionStart=n):n>e&&n<t?this._selectionDirection===$e?this.selectionEnd=n:this.selectionStart=n:(t===e?this._selectionDirection=$e:this._selectionDirection===me&&(this._selectionDirection=$e,this.selectionStart=t),this.selectionEnd=n)}}class b5 extends w5{initHiddenTextarea(){const e=this.canvas&&Cr(this.canvas.getElement())||Eo(),t=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(o=>{let[a,l]=o;return t.setAttribute(a,l)});const{top:n,left:s,fontSize:i}=this._calcTextareaPosition();t.style.cssText="position: absolute; top: ".concat(n,"; left: ").concat(s,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(i,";"),(this.hiddenTextareaContainer||e.body).appendChild(t),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(o=>{let[a,l]=o;return t.addEventListener(a,this[l].bind(this))}),this.hiddenTextarea=t}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const t=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){const t=this.fromPaste;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const n=()=>{this.updateFromTextArea(),this.fire(ku),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void n();const s=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,i=this._text.length,o=s.length,a=this.selectionStart,l=this.selectionEnd,c=a!==l;let u,d,f,g,y=o-i;const v=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),w=a>v.selectionStart;c?(d=this._text.slice(a,l),y+=l-a):o<i&&(d=w?this._text.slice(l+y,l):this._text.slice(a,a-y));const m=s.slice(v.selectionEnd-y,v.selectionEnd);if(d&&d.length&&(m.length&&(u=this.getSelectionStyles(a,a+1,!1),u=m.map(()=>u[0])),c?(f=a,g=l):w?(f=l-d.length,g=l):(f=l,g=l+d.length),this.removeStyleFromTo(f,g)),m.length){const{copyPasteData:p}=Kr();t&&m.join("")===p.copiedText&&!he.disableStyleCopyPaste&&(u=p.copiedTextStyle),this.insertNewStyleBlock(m,a,u)}n()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:t}=e;const{selectionStart:n,selectionEnd:s}=t;this.compositionStart=n,this.compositionEnd=s,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=Kr();e.copiedText=this.getSelectedText(),he.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,t){let n,s=this._getLineLeftOffset(e);return t>0&&(n=this.__charBounds[e][t-1],s+=n.left+n.width),s}getDownCursorOffset(e,t){const n=this._getSelectionForOffset(e,t),s=this.get2DCursorLocation(n),i=s.lineIndex;if(i===this._textLines.length-1||e.metaKey||e.keyCode===34)return this._text.length-n;const o=s.charIndex,a=this._getWidthBeforeCursor(i,o),l=this._getIndexOnLine(i+1,a);return this._textLines[i].slice(o).length+l+1+this.missingNewlineOffset(i)}_getSelectionForOffset(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,t){const n=this._getSelectionForOffset(e,t),s=this.get2DCursorLocation(n),i=s.lineIndex;if(i===0||e.metaKey||e.keyCode===33)return-n;const o=s.charIndex,a=this._getWidthBeforeCursor(i,o),l=this._getIndexOnLine(i-1,a),c=this._textLines[i].slice(0,o),u=this.missingNewlineOffset(i-1);return-this._textLines[i-1].length+l-c.length+(1-u)}_getIndexOnLine(e,t){const n=this._textLines[e];let s,i,o=this._getLineLeftOffset(e),a=0;for(let l=0,c=n.length;l<c;l++)if(s=this.__charBounds[e][l].width,o+=s,o>t){i=!0;const u=o-s,d=o,f=Math.abs(u-t);a=Math.abs(d-t)<f?l:l-1;break}return i||(a=n.length-1),a}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,t){const n=this["get".concat(e,"CursorOffset")](t,this._selectionDirection===$e);if(t.shiftKey?this.moveCursorWithShift(n):this.moveCursorWithoutShift(n),n!==0){const s=this.text.length;this.selectionStart=vo(0,this.selectionStart,s),this.selectionEnd=vo(0,this.selectionEnd,s),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const t=this._selectionDirection===me?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),e!==0}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),e!==0}moveCursorLeft(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",e)}_move(e,t,n){let s;if(e.altKey)s=this["findWordBoundary".concat(n)](this[t]);else{if(!e.metaKey&&e.keyCode!==35&&e.keyCode!==36)return this[t]+=n==="Left"?-1:1,!0;s=this["findLineBoundary".concat(n)](this[t])}return s!==void 0&&this[t]!==s&&(this[t]=s,!0)}_moveLeft(e,t){return this._move(e,t,"Left")}_moveRight(e,t){return this._move(e,t,"Right")}moveCursorLeftWithoutShift(e){let t=!0;return this._selectionDirection=me,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t}moveCursorLeftWithShift(e){return this._selectionDirection===$e&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=me,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,t){const n="moveCursor".concat(e).concat(t.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[n](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===me&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=$e,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let t=!0;return this._selectionDirection=$e,this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t}}const Id=r=>!!r.button;class _5 extends b5{constructor(){super(...arguments),k(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler),this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown),this.draggableTextDelegate=new x5(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}onMouseDown(e){if(!this.canvas)return;this.__newClickTime=+new Date;const t=e.pointer;this.isTripleClick(t)&&(this.fire("tripleclick",e),fg(e.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=t,this.__lastSelected=this.selected&&!this.getActiveControl()}isTripleClick(e){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===e.x&&this.__lastPointer.y===e.y}doubleClickHandler(e){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(e.e))}tripleClickHandler(e){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(e.e))}_mouseDownHandler(e){let{e:t}=e;this.canvas&&this.editable&&!Id(t)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(t)||(this.canvas.textEditingManager.register(this),this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(t)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection())))}_mouseDownHandlerBefore(e){let{e:t}=e;this.canvas&&this.editable&&!Id(t)&&(this.selected=this===this.canvas._activeObject)}mouseUpHandler(e){let{e:t,transform:n}=e;const s=this.draggableTextDelegate.end(t);if(this.canvas){this.canvas.textEditingManager.unregister(this);const i=this.canvas._activeObject;if(i&&i!==this)return}!this.editable||this.group&&!this.group.interactive||n&&n.actionPerformed||Id(t)||s||(this.__lastSelected&&!this.getActiveControl()?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(t),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0)}setCursorByClick(e){const t=this.getSelectionStartFromPointer(e),n=this.selectionStart,s=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(n,s,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const t=this.canvas.getScenePoint(e).transform(kr(this.calcTransformMatrix())).add(new O(-this._getLeftOffset(),-this._getTopOffset()));let n=0,s=0,i=0;for(let c=0;c<this._textLines.length&&n<=t.y;c++)n+=this.getHeightOfLine(c),i=c,c>0&&(s+=this._textLines[c-1].length+this.missingNewlineOffset(c-1));let o=Math.abs(this._getLineLeftOffset(i));const a=this._textLines[i].length,l=this.__charBounds[i];for(let c=0;c<a;c++){const u=o+l[c].kernedWidth;if(t.x<=u){Math.abs(t.x-u)<=Math.abs(t.x-o)&&s++;break}o=u,s++}return Math.min(this.flipX?a-s:s,this._text.length)}}const Jl="moveCursorUp",Zl="moveCursorDown",ec="moveCursorLeft",tc="moveCursorRight",rc="exitEditing",S5=j({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:rc,27:rc,33:Jl,34:Zl,35:tc,36:ec,37:ec,38:Jl,39:tc,40:Zl},keysMapRtl:{9:rc,27:rc,33:Jl,34:Zl,35:ec,36:tc,37:tc,38:Jl,39:ec,40:Zl},ctrlKeysMapDown:{65:"selectAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class dn extends _5{static getDefaults(){return j(j({},super.getDefaults()),dn.ownDefaults)}get type(){const e=super.type;return e==="itext"?"i-text":e}constructor(e,t){super(e,j(j({},dn.ownDefaults),t)),this.initBehavior()}_set(e,t){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=t,this):(e==="canvas"&&(this.canvas instanceof wg&&this.canvas.textEditingManager.remove(this),t instanceof wg&&t.textEditingManager.add(this)),super._set(e,t))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,n=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,t,n)}setSelectionStyles(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,t,n)}get2DCursorLocation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,t)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const t=this.isEditing;this.isEditing=!1;const n=super.toCanvasElement(e);return this.isEditing=t,n}renderCursorOrSelection(){if(!this.isEditing)return;const e=this.clearContextTop(!0);if(!e)return;const t=this._getCursorBoundaries();this.selectionStart===this.selectionEnd?this.renderCursor(e,t):this.renderSelection(e,t),this.canvas.contextTopDirty=!0,e.restore()}_getCursorBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;const n=this._getLeftOffset(),s=this._getTopOffset(),i=this._getCursorBoundariesOffsets(e,t);return{left:n,top:s,leftOffset:i.left,topOffset:i.top}}_getCursorBoundariesOffsets(e,t){return t?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let t=0,n=0;const{charIndex:s,lineIndex:i}=this.get2DCursorLocation(e);for(let c=0;c<i;c++)t+=this.getHeightOfLine(c);const o=this._getLineLeftOffset(i),a=this.__charBounds[i][s];a&&(n=a.left),this.charSpacing!==0&&s===this._textLines[i].length&&(n-=this._getWidthOfCharSpacing());const l={top:t,left:o+(n>0?n:0)};return this.direction==="rtl"&&(this.textAlign===$e||this.textAlign===zr||this.textAlign===ya?l.left*=-1:this.textAlign===me||this.textAlign===Lu?l.left=o-(n>0?n:0):this.textAlign!==oe&&this.textAlign!==xa||(l.left=o-(n>0?n:0))),l}renderCursorAt(e){const t=this._getCursorBoundaries(e,!0);this._renderCursor(this.canvas.contextTop,t,e)}renderCursor(e,t){this._renderCursor(e,t,this.selectionStart)}_renderCursor(e,t,n){const s=this.get2DCursorLocation(n),i=s.lineIndex,o=s.charIndex>0?s.charIndex-1:0,a=this.getValueOfPropertyAt(i,o,"fontSize"),l=this.getObjectScaling().x*this.canvas.getZoom(),c=this.cursorWidth/l,u=this.getValueOfPropertyAt(i,o,"deltaY"),d=t.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(i)/this.lineHeight-a*(1-this._fontSizeFraction);this.inCompositionMode&&this.renderSelection(e,t),e.fillStyle=this.cursorColor||this.getValueOfPropertyAt(i,o,Ge),e.globalAlpha=this._currentCursorOpacity,e.fillRect(t.left+t.leftOffset-c/2,d+t.top+u,c,a)}renderSelection(e,t){const n={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,n,t)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const t=this.getSelectionStartFromPointer(e);this.renderCursorAt(t)}_renderSelection(e,t,n){const s=t.selectionStart,i=t.selectionEnd,o=this.textAlign.includes(zr),a=this.get2DCursorLocation(s),l=this.get2DCursorLocation(i),c=a.lineIndex,u=l.lineIndex,d=a.charIndex<0?0:a.charIndex,f=l.charIndex<0?0:l.charIndex;for(let g=c;g<=u;g++){const y=this._getLineLeftOffset(g)||0;let v=this.getHeightOfLine(g),w=0,m=0,p=0;if(g===c&&(m=this.__charBounds[c][d].left),g>=c&&g<u)p=o&&!this.isEndOfWrapping(g)?this.width:this.getLineWidth(g)||5;else if(g===u)if(f===0)p=this.__charBounds[u][f].left;else{const T=this._getWidthOfCharSpacing();p=this.__charBounds[u][f-1].left+this.__charBounds[u][f-1].width-T}w=v,(this.lineHeight<1||g===u&&this.lineHeight>1)&&(v/=this.lineHeight);let x=n.left+y+m,_=v,S=0;const C=p-m;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",_=1,S=v):e.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===$e||this.textAlign===zr||this.textAlign===ya?x=this.width-x-C:this.textAlign===me||this.textAlign===Lu?x=n.left+y-p:this.textAlign!==oe&&this.textAlign!==xa||(x=n.left+y-p)),e.fillRect(x,n.top+n.topOffset+S,C,_),n.topOffset+=w}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,Ge)}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}dispose(){this._exitEditing(),this.draggableTextDelegate.dispose(),super.dispose()}}k(dn,"ownDefaults",S5),k(dn,"type","IText"),H.setClass(dn),H.setClass(dn,"i-text");class $s extends dn{static getDefaults(){return j(j({},super.getDefaults()),$s.ownDefaults)}constructor(e,t){super(e,j(j({},$s.ownDefaults),t))}static createControls(){return{controls:HR()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(zr)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let t=0,n=0,s=0;const i={};for(let o=0;o<e.graphemeLines.length;o++)e.graphemeText[s]===`
`&&o>0?(n=0,s++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[s])&&o>0&&(n++,s++),i[o]={line:t,offset:n},s+=e.graphemeLines[o].length,n+=e.graphemeLines[o].length;return i}styleHas(e,t){if(this._styleMap&&!this.isWrapping){const n=this._styleMap[t];n&&(t=n.line)}return super.styleHas(e,t)}isEmptyStyles(e){if(!this.styles)return!0;let t,n=0,s=e+1,i=!1;const o=this._styleMap[e],a=this._styleMap[e+1];o&&(e=o.line,n=o.offset),a&&(s=a.line,i=s===e,t=a.offset);const l=e===void 0?this.styles:{line:this.styles[e]};for(const c in l)for(const u in l[c]){const d=parseInt(u,10);if(d>=n&&(!i||d<t))for(const f in l[c][u])return!1}return!0}_getStyleDeclaration(e,t){if(this._styleMap&&!this.isWrapping){const n=this._styleMap[e];if(!n)return{};e=n.line,t=n.offset+t}return super._getStyleDeclaration(e,t)}_setStyleDeclaration(e,t,n){const s=this._styleMap[e];super._setStyleDeclaration(s.line,s.offset+t,n)}_deleteStyleDeclaration(e,t){const n=this._styleMap[e];super._deleteStyleDeclaration(n.line,n.offset+t)}_getLineStyle(e){const t=this._styleMap[e];return!!this.styles[t.line]}_setLineStyle(e){const t=this._styleMap[e];super._setLineStyle(t.line)}_wrapText(e,t){this.isWrapping=!0;const n=this.getGraphemeDataForRender(e),s=[];for(let i=0;i<n.wordsData.length;i++)s.push(...this._wrapLine(i,t,n));return this.isWrapping=!1,s}getGraphemeDataForRender(e){const t=this.splitByGrapheme,n=t?"":" ";let s=0;return{wordsData:e.map((i,o)=>{let a=0;const l=t?this.graphemeSplit(i):this.wordSplit(i);return l.length===0?[{word:[],width:0}]:l.map(c=>{const u=t?[c]:this.graphemeSplit(c),d=this._measureWord(u,o,a);return s=Math.max(d,s),a+=u.length+n.length,{word:u,width:d}})}),largestWordWidth:s}}_measureWord(e,t){let n,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=0;for(let o=0,a=e.length;o<a;o++)i+=this._getGraphemeBox(e[o],t,o+s,n,!0).kernedWidth,n=e[o];return i}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,t,n){let{largestWordWidth:s,wordsData:i}=n,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const a=this._getWidthOfCharSpacing(),l=this.splitByGrapheme,c=[],u=l?"":" ";let d=0,f=[],g=0,y=0,v=!0;t-=o;const w=Math.max(t,s,this.dynamicMinWidth),m=i[e];let p;for(g=0,p=0;p<m.length;p++){const{word:x,width:_}=m[p];g+=x.length,d+=y+_-a,d>w&&!v?(c.push(f),f=[],d=_,v=!0):d+=a,v||l||f.push(u),f=f.concat(x),y=l?0:this._measureWord([u],e,g),g++,v=!1}return p&&c.push(f),s+o>this.dynamicMinWidth&&(this.dynamicMinWidth=s-a+o),c}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,t){return this.splitByGrapheme&&!t?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const t=super._splitTextIntoLines(e),n=this._wrapText(t.lines,this.width),s=new Array(n.length);for(let i=0;i<n.length;i++)s[i]=n[i].join("");return t.lines=s,t.graphemeLines=n,t}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e=new Map;for(const t in this._styleMap){const n=parseInt(t,10);if(this._textLines[n]){const s=this._styleMap[t].line;e.set("".concat(s),!0)}}for(const t in this.styles)e.has(t)||delete this.styles[t]}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}}k($s,"type","Textbox"),k($s,"textLayoutProperties",[...dn.textLayoutProperties,"width"]),k($s,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),H.setClass($s);class Ey extends jh{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,t){const{target:n}=e,{clipPath:s,group:i}=n;if(!s||!this.shouldPerformLayout(e))return;const{width:o,height:a}=gn(rS(n,s)),l=new O(o,a);if(s.absolutePositioned)return{center:Ki(s.getRelativeCenterPoint(),void 0,i?i.calcTransformMatrix():void 0),size:l};{const c=s.getRelativeCenterPoint().transform(n.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){const{center:u=new O,correction:d=new O}=this.calcBoundingBox(t,e)||{};return{center:u.add(c),correction:d.subtract(c),size:l}}return{center:n.getRelativeCenterPoint().add(c),size:l}}}}k(Ey,"type","clip-path"),H.setClass(Ey);class Py extends jh{getInitialSize(e,t){let{target:n}=e,{size:s}=t;return new O(n.width||s.x,n.height||s.y)}}k(Py,"type","fixed"),H.setClass(Py);class C5 extends Xa{subscribeTargets(e){const t=e.target;e.targets.reduce((n,s)=>(s.parent&&n.add(s.parent),n),new Set).forEach(n=>{n.layoutManager.subscribeTargets({target:n,targets:[t]})})}unsubscribeTargets(e){const t=e.target,n=t.getObjects();e.targets.reduce((s,i)=>(i.parent&&s.add(i.parent),s),new Set).forEach(s=>{!n.some(i=>i.parent===s)&&s.layoutManager.unsubscribeTargets({target:s,targets:[t]})})}}class Bs extends Qs{static getDefaults(){return j(j({},super.getDefaults()),Bs.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Bs.ownDefaults),this.setOptions(t);const{left:n,top:s,layoutManager:i}=t;this.groupInit(e,{left:n,top:s,layoutManager:i??new C5})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.multiSelectionStacking==="selection-order"?this.add(...t):t.forEach(s=>{const i=this._objects.findIndex(a=>a.isInFrontOf(s)),o=i===-1?this.size():i;this.insertAt(o,s)})}canEnterGroup(e){return this.getObjects().some(t=>t.isDescendantOf(e)||e.isDescendantOf(t))?(ys("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,t){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,t)}exitGroup(e,t){this._exitGroup(e,t),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,t){super._onAfterObjectsChange(e,t);const n=new Set;t.forEach(s=>{const{parent:i}=s;i&&n.add(i)}),e===xm?n.forEach(s=>{s._onAfterObjectsChange(Au,t)}):n.forEach(s=>{s._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,t,n){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const s=j(j({hasControls:!1},n),{},{forActiveSelection:!0});for(let i=0;i<this._objects.length;i++)this._objects[i]._renderControls(e,s);super._renderControls(e,t),e.restore()}}k(Bs,"type","ActiveSelection"),k(Bs,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),H.setClass(Bs),H.setClass(Bs,"activeSelection");class k5{constructor(){k(this,"resources",{})}applyFilters(e,t,n,s,i){const o=i.getContext("2d");if(!o)return;o.drawImage(t,0,0,n,s);const a={sourceWidth:n,sourceHeight:s,imageData:o.getImageData(0,0,n,s),originalEl:t,originalImageData:o.getImageData(0,0,n,s),canvasEl:i,ctx:o,filterBackend:this};e.forEach(c=>{c.applyTo(a)});const{imageData:l}=a;return l.width===n&&l.height===s||(i.width=l.width,i.height=l.height),o.putImageData(l,0,0),a}}class CS{constructor(){let{tileSize:e=he.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};k(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),k(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,t){this.dispose(),this.createWebGLCanvas(e,t)}createWebGLCanvas(e,t){const n=Je();n.width=e,n.height=t;const s=n.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});s&&(s.clearColor(0,0,0,0),this.canvas=n,this.gl=s)}applyFilters(e,t,n,s,i,o){const a=this.gl,l=i.getContext("2d");if(!a||!l)return;let c;o&&(c=this.getCachedTexture(o,t));const u={originalWidth:t.width||t.originalWidth||0,originalHeight:t.height||t.originalHeight||0,sourceWidth:n,sourceHeight:s,destinationWidth:n,destinationHeight:s,context:a,sourceTexture:this.createTexture(a,n,s,c?void 0:t),targetTexture:this.createTexture(a,n,s),originalTexture:c||this.createTexture(a,n,s,c?void 0:t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:i},d=a.createFramebuffer();return a.bindFramebuffer(a.FRAMEBUFFER,d),e.forEach(f=>{f&&f.applyTo(u)}),function(f){const g=f.targetCanvas,y=g.width,v=g.height,w=f.destinationWidth,m=f.destinationHeight;y===w&&v===m||(g.width=w,g.height=m)}(u),this.copyGLTo2D(a,u),a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(u.sourceTexture),a.deleteTexture(u.targetTexture),a.deleteFramebuffer(d),l.setTransform(1,0,0,1,0,0),u}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,t,n,s,i){const{NEAREST:o,TEXTURE_2D:a,RGBA:l,UNSIGNED_BYTE:c,CLAMP_TO_EDGE:u,TEXTURE_MAG_FILTER:d,TEXTURE_MIN_FILTER:f,TEXTURE_WRAP_S:g,TEXTURE_WRAP_T:y}=e,v=e.createTexture();return e.bindTexture(a,v),e.texParameteri(a,d,i||o),e.texParameteri(a,f,i||o),e.texParameteri(a,g,u),e.texParameteri(a,y,u),s?e.texImage2D(a,0,l,l,c,s):e.texImage2D(a,0,l,t,n,0,l,c,null),v}getCachedTexture(e,t,n){const{textureCache:s}=this;if(s[e])return s[e];{const i=this.createTexture(this.gl,t.width,t.height,t,n);return i&&(s[e]=i),i}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,t){const n=e.canvas,s=t.targetCanvas,i=s.getContext("2d");if(!i)return;i.translate(0,s.height),i.scale(1,-1);const o=n.height-s.height;i.drawImage(n,0,o,s.width,s.height,0,0,s.width,s.height)}copyGLTo2DPutImageData(e,t){const n=t.targetCanvas.getContext("2d"),s=t.destinationWidth,i=t.destinationHeight,o=s*i*4;if(!n)return;const a=new Uint8Array(this.imageBuffer,0,o),l=new Uint8ClampedArray(this.imageBuffer,0,o);e.readPixels(0,0,s,i,e.RGBA,e.UNSIGNED_BYTE,a);const c=new ImageData(l,s,i);n.putImageData(c,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,t={renderer:"",vendor:""};if(!e)return t;const n=e.getExtension("WEBGL_debug_renderer_info");if(n){const s=e.getParameter(n.UNMASKED_RENDERER_WEBGL),i=e.getParameter(n.UNMASKED_VENDOR_WEBGL);s&&(t.renderer=s.toLowerCase()),i&&(t.vendor=i.toLowerCase())}return this.gpuInfo=t,t}}let Fd;function T5(){const{WebGLProbe:r}=Kr();return r.queryWebGL(Je()),he.enableGLFiltering&&r.isSupported(he.textureSize)?new CS({tileSize:he.textureSize}):new k5}function $d(){return!Fd&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(Fd=T5()),Fd}const j5=["filters","resizeFilter","src","crossOrigin","type"],kS=["cropX","cropY"];class Qt extends ft{static getDefaults(){return j(j({},super.getDefaults()),Qt.ownDefaults)}constructor(e,t){super(),k(this,"_lastScaleX",1),k(this,"_lastScaleY",1),k(this,"_filterScalingX",1),k(this,"_filterScalingY",1),this.filters=[],Object.assign(this,Qt.ownDefaults),this.setOptions(t),this.cacheKey="texture".concat(xs()),this.setElement(typeof e=="string"?(this.canvas&&Cr(this.canvas.getElement())||Eo()).getElementById(e):e,t)}getElement(){return this._element}setElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=e,this._originalElement=e,this._setWidthHeight(t),e.classList.add(Qt.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const t=$d(!1);t instanceof CS&&t.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(e=>{const t=this[e];t&&Kr().dispose(t),this[e]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||this.strokeWidth===0)return;const t=this.width/2,n=this.height/2;e.beginPath(),e.moveTo(-t,-n),e.lineTo(t,-n),e.lineTo(t,n),e.lineTo(-t,n),e.lineTo(-t,-n),e.closePath()}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];return this.filters.forEach(n=>{n&&t.push(n.toObject())}),j(j({},super.toObject([...kS,...e])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:t},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],t=this._element,n=-this.width/2,s=-this.height/2;let i=[],o=[],a="",l="";if(!t)return[];if(this.hasCrop()){const c=xs();i.push('<clipPath id="imageCrop_'+c+`">
`,'	<rect x="'+n+'" y="'+s+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),a=' clip-path="url(#imageCrop_'+c+')" '}if(this.imageSmoothing||(l=' image-rendering="optimizeSpeed"'),e.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(n-this.cropX,'" y="').concat(s-this.cropY,'" width="').concat(t.width||t.naturalWidth,'" height="').concat(t.height||t.naturalHeight,'"').concat(l).concat(a,`></image>
`)),this.stroke||this.strokeDashArray){const c=this.fill;this.fill=null,o=['	<rect x="'.concat(n,'" y="').concat(s,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=c}return i=this.paintFirst!==Ge?i.concat(o,e):i.concat(e,o),i}getSrc(e){const t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src")||"":t.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:t,signal:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Fc(e,{crossOrigin:t,signal:n}).then(s=>{t!==void 0&&this.set({crossOrigin:t}),this.setElement(s)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const e=this.resizeFilter,t=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),s=n.x,i=n.y,o=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||s>t&&i>t)return this._element=o,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=s,void(this._lastScaleY=i);const a=Je(),l=o.width,c=o.height;a.width=l,a.height=c,this._element=a,this._lastScaleX=e.scaleX=s,this._lastScaleY=e.scaleY=i,$d().applyFilters([e],o,l,c,this._element),this._filterScalingX=a.width/this._originalElement.width,this._filterScalingY=a.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(e=e.filter(i=>i&&!i.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),e.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const t=this._originalElement,n=t.naturalWidth||t.width,s=t.naturalHeight||t.height;if(this._element===this._originalElement){const i=Je();i.width=n,i.height=s,this._element=i,this._filteredEl=i}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,n,s),this._lastScaleX=1,this._lastScaleY=1);$d().applyFilters(e,this._originalElement,n,s,this._element),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const t=this._element;if(!t)return;const n=this._filterScalingX,s=this._filterScalingY,i=this.width,o=this.height,a=Math.max(this.cropX,0),l=Math.max(this.cropY,0),c=t.naturalWidth||t.width,u=t.naturalHeight||t.height,d=a*n,f=l*s,g=Math.min(i*n,c-d),y=Math.min(o*s,u-f),v=-i/2,w=-o/2,m=Math.min(i,c/n-a),p=Math.min(o,u/s-l);t&&e.drawImage(t,d,f,g,y,v,w,m,p)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this.getOriginalSize();this.width=e||n.width,this.height=t||n.height}parsePreserveAspectRatioAttribute(){const e=eR(this.preserveAspectRatio||""),t=this.width,n=this.height,s={width:t,height:n};let i,o=this._element.width,a=this._element.height,l=1,c=1,u=0,d=0,f=0,g=0;return!e||e.alignX===Mt&&e.alignY===Mt?(l=t/o,c=n/a):(e.meetOrSlice==="meet"&&(l=c=S4(this._element,s),i=(t-o*l)/2,e.alignX==="Min"&&(u=-i),e.alignX==="Max"&&(u=i),i=(n-a*c)/2,e.alignY==="Min"&&(d=-i),e.alignY==="Max"&&(d=i)),e.meetOrSlice==="slice"&&(l=c=C4(this._element,s),i=o-t/l,e.alignX==="Mid"&&(f=i/2),e.alignX==="Max"&&(f=i),i=a-n/c,e.alignY==="Mid"&&(g=i/2),e.alignY==="Max"&&(g=i),o=t/l,a=n/c)),{width:o,height:a,scaleX:l,scaleY:c,offsetLeft:u,offsetTop:d,cropX:f,cropY:g}}static fromObject(e,t){let{filters:n,resizeFilter:s,src:i,crossOrigin:o,type:a}=e,l=Ee(e,j5);return Promise.all([Fc(i,j(j({},t),{},{crossOrigin:o})),n&&Ga(n,t),s&&Ga([s],t),Sh(l,t)]).then(c=>{let[u,d=[],[f]=[],g={}]=c;return new this(u,j(j({},l),{},{src:i,filters:d,resizeFilter:f},g))})}static fromURL(e){let{crossOrigin:t=null,signal:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;return Fc(e,{crossOrigin:t,signal:n}).then(i=>new this(i,s))}static async fromElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const s=En(e,this.ATTRIBUTE_NAMES,n);return this.fromURL(s["xlink:href"],t,s).catch(i=>(ys("log","Unable to parse Image",i),null))}}k(Qt,"type","Image"),k(Qt,"cacheProperties",[...jn,...kS]),k(Qt,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),k(Qt,"CSS_CANVAS","canvas-img"),k(Qt,"ATTRIBUTE_NAMES",[...ks,"x","y","width","height","preserveAspectRatio","xlink:href","crossOrigin","image-rendering"]),H.setClass(Qt),H.setSVGClass(Qt);kh(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const Ph=r=>r.webgl!==void 0,wm="precision highp float",E5=`
    `.concat(wm,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),P5=["type"],O5=["type"],N5=new RegExp(wm,"g");class Ze{get type(){return this.constructor.type}constructor(){let e=Ee(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},P5);Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return E5}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:s="highp"}}=Kr();s!=="highp"&&(t=t.replace(N5,wm.replace("highp",s)));const i=e.createShader(e.VERTEX_SHADER),o=e.createShader(e.FRAGMENT_SHADER),a=e.createProgram();if(!i||!o||!a)throw new Wr("Vertex, fragment shader or program creation error");if(e.shaderSource(i,n),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw new Wr("Vertex shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(i)));if(e.shaderSource(o,t),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS))throw new Wr("Fragment shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(o)));if(e.attachShader(a,i),e.attachShader(a,o),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw new Wr('Shader link error for "'.concat(this.type,'" ').concat(e.getProgramInfoLog(a)));const l=this.getUniformLocations(e,a)||{};return l.uStepW=e.getUniformLocation(a,"uStepW"),l.uStepH=e.getUniformLocation(a,"uStepH"),{program:a,attributeLocations:this.getAttributeLocations(e,a),uniformLocations:l}}getAttributeLocations(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}}getUniformLocations(e,t){const n=this.constructor.uniformLocations,s={};for(let i=0;i<n.length;i++)s[n[i]]=e.getUniformLocation(t,n[i]);return s}sendAttributeData(e,t,n){const s=t.aPosition,i=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,i),e.enableVertexAttribArray(s),e.vertexAttribPointer(s,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)}_setupFrameBuffer(e){const t=e.context;if(e.passes>1){const n=e.destinationWidth,s=e.destinationHeight;e.sourceWidth===n&&e.sourceHeight===s||(t.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(t,n,s)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.targetTexture,0)}else t.bindFramebuffer(t.FRAMEBUFFER,null),t.finish()}_swapTextures(e){e.passes--,e.pass++;const t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t}isNeutralState(e){return!1}applyTo(e){Ph(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const t=this.getCacheKey();return e.programCache[t]||(e.programCache[t]=this.createProgram(e.context)),e.programCache[t]}applyToWebGL(e){const t=e.context,n=this.retrieveShader(e);e.pass===0&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(n.program),this.sendAttributeData(t,n.attributeLocations,e.aPosition),t.uniform1f(n.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(n.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,n.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,t,n){e.activeTexture(n),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,t){}createHelpLayer(e){if(!e.helpLayer){const t=Je();t.width=e.sourceWidth,t.height=e.sourceHeight,e.helpLayer=t}}toObject(){const e=Object.keys(this.constructor.defaults);return j({type:this.type},e.reduce((t,n)=>(t[n]=this[n],t),{}))}toJSON(){return this.toObject()}static async fromObject(e,t){return new this(Ee(e,O5))}}k(Ze,"type","BaseFilter"),k(Ze,"uniformLocations",[]);const A5={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class nc extends Ze{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(A5[this.mode],`
        }
      }
      `)}applyTo2d(e){let{imageData:{data:t}}=e;const n=new pe(this.color).getSource(),s=n[0]*this.alpha,i=n[1]*this.alpha,o=n[2]*this.alpha,a=1-this.alpha;for(let l=0;l<t.length;l+=4){const c=t[l],u=t[l+1],d=t[l+2];switch(this.mode){case"multiply":t[l]=c*s/255,t[l+1]=u*i/255,t[l+2]=d*o/255;break;case"screen":t[l]=255-(255-c)*(255-s)/255,t[l+1]=255-(255-u)*(255-i)/255,t[l+2]=255-(255-d)*(255-o)/255;break;case"add":t[l]=c+s,t[l+1]=u+i,t[l+2]=d+o;break;case"difference":t[l]=Math.abs(c-s),t[l+1]=Math.abs(u-i),t[l+2]=Math.abs(d-o);break;case"subtract":t[l]=c-s,t[l+1]=u-i,t[l+2]=d-o;break;case"darken":t[l]=Math.min(c,s),t[l+1]=Math.min(u,i),t[l+2]=Math.min(d,o);break;case"lighten":t[l]=Math.max(c,s),t[l+1]=Math.max(u,i),t[l+2]=Math.max(d,o);break;case"overlay":t[l]=s<128?2*c*s/255:255-2*(255-c)*(255-s)/255,t[l+1]=i<128?2*u*i/255:255-2*(255-u)*(255-i)/255,t[l+2]=o<128?2*d*o/255:255-2*(255-d)*(255-o)/255;break;case"exclusion":t[l]=s+c-2*s*c/255,t[l+1]=i+u-2*i*u/255,t[l+2]=o+d-2*o*d/255;break;case"tint":t[l]=s+c*a,t[l+1]=i+u*a,t[l+2]=o+d*a}}}sendUniformData(e,t){const n=new pe(this.color).getSource();n[0]=this.alpha*n[0]/255,n[1]=this.alpha*n[1]/255,n[2]=this.alpha*n[2]/255,n[3]=this.alpha,e.uniform4fv(t.uColor,n)}}k(nc,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),k(nc,"type","BlendColor"),k(nc,"uniformLocations",["uColor"]),H.setClass(nc);const M5={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},D5=["type","image"];class sc extends Ze{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return M5[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(e){const t=e.context,n=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,n,t.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(t,t.TEXTURE1)}createTexture(e,t){return e.getCachedTexture(t.cacheKey,t.getElement())}calculateMatrix(){const e=this.image,{width:t,height:n}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/n,1]}applyTo2d(e){let{imageData:{data:t,width:n,height:s},filterBackend:{resources:i}}=e;const o=this.image;i.blendImage||(i.blendImage=Je());const a=i.blendImage,l=a.getContext("2d");a.width!==n||a.height!==s?(a.width=n,a.height=s):l.clearRect(0,0,n,s),l.setTransform(o.scaleX,0,0,o.scaleY,o.left,o.top),l.drawImage(o.getElement(),0,0,n,s);const c=l.getImageData(0,0,n,s).data;for(let u=0;u<t.length;u+=4){const d=t[u],f=t[u+1],g=t[u+2],y=t[u+3],v=c[u],w=c[u+1],m=c[u+2],p=c[u+3];switch(this.mode){case"multiply":t[u]=d*v/255,t[u+1]=f*w/255,t[u+2]=g*m/255,t[u+3]=y*p/255;break;case"mask":t[u+3]=p}}}sendUniformData(e,t){const n=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,n)}toObject(){return j(j({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(e,t){let{type:n,image:s}=e,i=Ee(e,D5);return Qt.fromObject(s,t).then(o=>new this(j(j({},i),{},{image:o})))}}k(sc,"type","BlendImage"),k(sc,"defaults",{mode:"multiply",alpha:1}),k(sc,"uniformLocations",["uTransformMatrix","uImage"]),H.setClass(sc);class ic extends Ze{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float total = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        float weight = 1.0 - abs(percent);
        color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
        total += weight;
      }
      gl_FragColor = color / total;
    }
  `}applyTo(e){Ph(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){e.imageData=this.simpleBlur(e)}simpleBlur(e){let{ctx:t,imageData:n,filterBackend:{resources:s}}=e;const{width:i,height:o}=n;s.blurLayer1||(s.blurLayer1=Je(),s.blurLayer2=Je());const a=s.blurLayer1,l=s.blurLayer2;a.width===i&&a.height===o||(l.width=a.width=i,l.height=a.height=o);const c=a.getContext("2d"),u=l.getContext("2d"),d=15,f=.06*this.blur*.5;let g,y,v,w;for(c.putImageData(n,0,0),u.clearRect(0,0,i,o),w=-15;w<=d;w++)g=(Math.random()-.5)/4,y=w/d,v=f*y*i+g,u.globalAlpha=1-Math.abs(y),u.drawImage(a,v,g),c.drawImage(l,0,0),u.globalAlpha=1,u.clearRect(0,0,l.width,l.height);for(w=-15;w<=d;w++)g=(Math.random()-.5)/4,y=w/d,v=f*y*o+g,u.globalAlpha=1-Math.abs(y),u.drawImage(a,g,v),c.drawImage(l,0,0),u.globalAlpha=1,u.clearRect(0,0,l.width,l.height);t.drawImage(a,0,0);const m=t.getImageData(0,0,a.width,a.height);return c.globalAlpha=1,c.clearRect(0,0,a.width,a.height),m}sendUniformData(e,t){const n=this.chooseRightDelta();e.uniform2fv(t.uDelta,n)}isNeutralState(){return this.blur===0}chooseRightDelta(){let e=1;const t=[0,0];this.horizontal?this.aspectRatio>1&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio);const n=e*this.blur*.12;return this.horizontal?t[0]=n:t[1]=n,t}}k(ic,"type","Blur"),k(ic,"defaults",{blur:0}),k(ic,"uniformLocations",["uDelta"]),H.setClass(ic);class oc extends Ze{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=Math.round(255*this.brightness);for(let s=0;s<t.length;s+=4)t[s]=t[s]+n,t[s+1]=t[s+1]+n,t[s+2]=t[s+2]+n}isNeutralState(){return this.brightness===0}sendUniformData(e,t){e.uniform1f(t.uBrightness,this.brightness)}}k(oc,"type","Brightness"),k(oc,"defaults",{brightness:0}),k(oc,"uniformLocations",["uBrightness"]),H.setClass(oc);class Bi extends Ze{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(e){const t=e.imageData.data,n=this.matrix,s=this.colorsOnly;for(let i=0;i<t.length;i+=4){const o=t[i],a=t[i+1],l=t[i+2];if(s)t[i]=o*n[0]+a*n[1]+l*n[2]+255*n[4],t[i+1]=o*n[5]+a*n[6]+l*n[7]+255*n[9],t[i+2]=o*n[10]+a*n[11]+l*n[12]+255*n[14];else{const c=t[i+3];t[i]=o*n[0]+a*n[1]+l*n[2]+c*n[3]+255*n[4],t[i+1]=o*n[5]+a*n[6]+l*n[7]+c*n[8]+255*n[9],t[i+2]=o*n[10]+a*n[11]+l*n[12]+c*n[13]+255*n[14],t[i+3]=o*n[15]+a*n[16]+l*n[17]+c*n[18]+255*n[19]}}}sendUniformData(e,t){const n=this.matrix,s=[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]],i=[n[4],n[9],n[14],n[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,s),e.uniform4fv(t.uConstants,i)}toObject(){return j(j({},super.toObject()),{},{matrix:[...this.matrix]})}}function ci(r,e){var t;const n=(k(t=class extends Bi{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",r),k(t,"defaults",{colorsOnly:!1,matrix:e}),t);return H.setClass(n,r),n}k(Bi,"type","ColorMatrix"),k(Bi,"defaults",{matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0}),k(Bi,"uniformLocations",["uColorMatrix","uConstants"]),H.setClass(Bi);ci("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);ci("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);ci("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);ci("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);ci("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);ci("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);ci("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class Oy extends Ze{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){Ph(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach(t=>{t.applyTo(e)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(e=>e.toObject())}}isNeutralState(){return!this.subFilters.some(e=>!e.isNeutralState())}static fromObject(e,t){return Promise.all((e.subFilters||[]).map(n=>H.getClass(n.type).fromObject(n,t))).then(n=>new this({subFilters:n}))}}k(Oy,"type","Composed"),H.setClass(Oy);class ac extends Ze{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(e){let{imageData:{data:t}}=e;const n=Math.floor(255*this.contrast),s=259*(n+255)/(255*(259-n));for(let i=0;i<t.length;i+=4)t[i]=s*(t[i]-128)+128,t[i+1]=s*(t[i+1]-128)+128,t[i+2]=s*(t[i+2]-128)+128}sendUniformData(e,t){e.uniform1f(t.uContrast,this.contrast)}}k(ac,"type","Contrast"),k(ac,"defaults",{contrast:0}),k(ac,"uniformLocations",["uContrast"]),H.setClass(ac);const R5={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class lc extends Ze{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return R5[this.getCacheKey()]}applyTo2d(e){const t=e.imageData,n=t.data,s=this.matrix,i=Math.round(Math.sqrt(s.length)),o=Math.floor(i/2),a=t.width,l=t.height,c=e.ctx.createImageData(a,l),u=c.data,d=this.opaque?1:0;let f,g,y,v,w,m,p,x,_,S,C,T,E;for(C=0;C<l;C++)for(S=0;S<a;S++){for(w=4*(C*a+S),f=0,g=0,y=0,v=0,E=0;E<i;E++)for(T=0;T<i;T++)p=C+E-o,m=S+T-o,p<0||p>=l||m<0||m>=a||(x=4*(p*a+m),_=s[E*i+T],f+=n[x]*_,g+=n[x+1]*_,y+=n[x+2]*_,d||(v+=n[x+3]*_));u[w]=f,u[w+1]=g,u[w+2]=y,u[w+3]=d?n[w+3]:v}e.imageData=c}sendUniformData(e,t){e.uniform1fv(t.uMatrix,this.matrix)}toObject(){return j(j({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}k(lc,"type","Convolute"),k(lc,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),k(lc,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),H.setClass(lc);const TS="Gamma";class cc extends Ze{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:t}}=e;const n=this.gamma,s=1/n[0],i=1/n[1],o=1/n[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const a=this.rgbValues;for(let l=0;l<256;l++)a.r[l]=255*Math.pow(l/255,s),a.g[l]=255*Math.pow(l/255,i),a.b[l]=255*Math.pow(l/255,o);for(let l=0;l<t.length;l+=4)t[l]=a.r[t[l]],t[l+1]=a.g[t[l+1]],t[l+2]=a.b[t[l+2]]}sendUniformData(e,t){e.uniform3fv(t.uGamma,this.gamma)}isNeutralState(){const{gamma:e}=this;return e[0]===1&&e[1]===1&&e[2]===1}toObject(){return{type:TS,gamma:this.gamma.concat()}}}k(cc,"type",TS),k(cc,"defaults",{gamma:[1,1,1]}),k(cc,"uniformLocations",["uGamma"]),H.setClass(cc);const L5={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class uc extends Ze{applyTo2d(e){let{imageData:{data:t}}=e;for(let n,s=0;s<t.length;s+=4){switch(this.mode){case"average":n=(t[s]+t[s+1]+t[s+2])/3;break;case"lightness":n=(Math.min(t[s],t[s+1],t[s+2])+Math.max(t[s],t[s+1],t[s+2]))/2;break;case"luminosity":n=.21*t[s]+.72*t[s+1]+.07*t[s+2]}t[s]=n,t[s+1]=n,t[s+2]=n}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return L5[this.mode]}sendUniformData(e,t){e.uniform1i(t.uMode,1)}isNeutralState(){return!1}}k(uc,"type","Grayscale"),k(uc,"defaults",{mode:"average"}),k(uc,"uniformLocations",["uMode"]),H.setClass(uc);class Bd extends Bi{calculateMatrix(){const e=this.rotation*Math.PI,t=Sn(e),n=Cn(e),s=1/3,i=Math.sqrt(s)*n,o=1-t;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=t+o/3,this.matrix[1]=s*o-i,this.matrix[2]=s*o+i,this.matrix[5]=s*o+i,this.matrix[6]=t+s*o,this.matrix[7]=s*o-i,this.matrix[10]=s*o-i,this.matrix[11]=s*o+i,this.matrix[12]=t+s*o}isNeutralState(){return this.rotation===0}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}}k(Bd,"type","HueRotation"),k(Bd,"defaults",{rotation:0}),H.setClass(Bd);class hc extends Ze{applyTo2d(e){let{imageData:{data:t}}=e;for(let n=0;n<t.length;n+=4)t[n]=255-t[n],t[n+1]=255-t[n+1],t[n+2]=255-t[n+2],this.alpha&&(t[n+3]=255-t[n+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(e,t){e.uniform1i(t.uInvert,Number(this.invert)),e.uniform1i(t.uAlpha,Number(this.alpha))}}k(hc,"type","Invert"),k(hc,"defaults",{alpha:!1,invert:!0}),k(hc,"uniformLocations",["uInvert","uAlpha"]),H.setClass(hc);class dc extends Ze{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=this.noise;for(let s=0;s<t.length;s+=4){const i=(.5-Math.random())*n;t[s]+=i,t[s+1]+=i,t[s+2]+=i}}sendUniformData(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())}isNeutralState(){return this.noise===0}}k(dc,"type","Noise"),k(dc,"defaults",{noise:0}),k(dc,"uniformLocations",["uNoise","uSeed"]),H.setClass(dc);class fc extends Ze{applyTo2d(e){let{imageData:{data:t,width:n,height:s}}=e;for(let i=0;i<s;i+=this.blocksize)for(let o=0;o<n;o+=this.blocksize){const a=4*i*n+4*o,l=t[a],c=t[a+1],u=t[a+2],d=t[a+3];for(let f=i;f<Math.min(i+this.blocksize,s);f++)for(let g=o;g<Math.min(o+this.blocksize,n);g++){const y=4*f*n+4*g;t[y]=l,t[y+1]=c,t[y+2]=u,t[y+3]=d}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepW;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}k(fc,"type","Pixelate"),k(fc,"defaults",{blocksize:4}),k(fc,"uniformLocations",["uBlocksize"]),H.setClass(fc);class gc extends Ze{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=255*this.distance,s=new pe(this.color).getSource(),i=[s[0]-n,s[1]-n,s[2]-n],o=[s[0]+n,s[1]+n,s[2]+n];for(let a=0;a<t.length;a+=4){const l=t[a],c=t[a+1],u=t[a+2];l>i[0]&&c>i[1]&&u>i[2]&&l<o[0]&&c<o[1]&&u<o[2]&&(t[a+3]=0)}}sendUniformData(e,t){const n=new pe(this.color).getSource(),s=this.distance,i=[0+n[0]/255-s,0+n[1]/255-s,0+n[2]/255-s,1],o=[n[0]/255+s,n[1]/255+s,n[2]/255+s,1];e.uniform4fv(t.uLow,i),e.uniform4fv(t.uHigh,o)}}k(gc,"type","RemoveColor"),k(gc,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),k(gc,"uniformLocations",["uLow","uHigh"]),H.setClass(gc);class pc extends Ze{sendUniformData(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return"".concat(this.type,"_").concat(e)}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,n=this.getFilterWindow(),s=new Array(n);for(let i=1;i<=n;i++)s[i-1]=e(i*t);return s}generateShader(e){const t=new Array(e);for(let n=1;n<=e;n++)t[n-1]="".concat(n,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(e,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(t.map((n,s)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(n,") * uTaps[").concat(s,"] + texture2D(uTexture, vTexCoord - ").concat(n,") * uTaps[").concat(s,`];
              sum += 2.0 * uTaps[`).concat(s,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){Ph(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(e){return t=>{if(t>=e||t<=-e)return 0;if(t<11920929e-14&&t>-11920929e-14)return 1;const n=(t*=Math.PI)/e;return Math.sin(t)/t*Math.sin(n)/n}}applyTo2d(e){const t=e.imageData,n=this.scaleX,s=this.scaleY;this.rcpScaleX=1/n,this.rcpScaleY=1/s;const i=t.width,o=t.height,a=Math.round(i*n),l=Math.round(o*s);let c;c=this.resizeType==="sliceHack"?this.sliceByTwo(e,i,o,a,l):this.resizeType==="hermite"?this.hermiteFastResize(e,i,o,a,l):this.resizeType==="bilinear"?this.bilinearFiltering(e,i,o,a,l):this.resizeType==="lanczos"?this.lanczosResize(e,i,o,a,l):new ImageData(a,l),e.imageData=c}sliceByTwo(e,t,n,s,i){const o=e.imageData,a=.5;let l=!1,c=!1,u=t*a,d=n*a;const f=e.filterBackend.resources;let g=0,y=0;const v=t;let w=0;f.sliceByTwo||(f.sliceByTwo=Je());const m=f.sliceByTwo;(m.width<1.5*t||m.height<n)&&(m.width=1.5*t,m.height=n);const p=m.getContext("2d");for(p.clearRect(0,0,1.5*t,n),p.putImageData(o,0,0),s=Math.floor(s),i=Math.floor(i);!l||!c;)t=u,n=d,s<Math.floor(u*a)?u=Math.floor(u*a):(u=s,l=!0),i<Math.floor(d*a)?d=Math.floor(d*a):(d=i,c=!0),p.drawImage(m,g,y,t,n,v,w,u,d),g=v,y=w,w+=d;return p.getImageData(g,y,s,i)}lanczosResize(e,t,n,s,i){const o=e.imageData.data,a=e.ctx.createImageData(s,i),l=a.data,c=this.lanczosCreate(this.lanczosLobes),u=this.rcpScaleX,d=this.rcpScaleY,f=2/this.rcpScaleX,g=2/this.rcpScaleY,y=Math.ceil(u*this.lanczosLobes/2),v=Math.ceil(d*this.lanczosLobes/2),w={},m={x:0,y:0},p={x:0,y:0};return function x(_){let S,C,T,E,A,D,B,P,I,L,G;for(m.x=(_+.5)*u,p.x=Math.floor(m.x),S=0;S<i;S++){for(m.y=(S+.5)*d,p.y=Math.floor(m.y),A=0,D=0,B=0,P=0,I=0,C=p.x-y;C<=p.x+y;C++)if(!(C<0||C>=t)){L=Math.floor(1e3*Math.abs(C-m.x)),w[L]||(w[L]={});for(let W=p.y-v;W<=p.y+v;W++)W<0||W>=n||(G=Math.floor(1e3*Math.abs(W-m.y)),w[L][G]||(w[L][G]=c(Math.sqrt(Math.pow(L*f,2)+Math.pow(G*g,2))/1e3)),T=w[L][G],T>0&&(E=4*(W*t+C),A+=T,D+=T*o[E],B+=T*o[E+1],P+=T*o[E+2],I+=T*o[E+3]))}E=4*(S*s+_),l[E]=D/A,l[E+1]=B/A,l[E+2]=P/A,l[E+3]=I/A}return++_<s?x(_):a}(0)}bilinearFiltering(e,t,n,s,i){let o,a,l,c,u,d,f,g,y,v,w,m,p,x=0;const _=this.rcpScaleX,S=this.rcpScaleY,C=4*(t-1),T=e.imageData.data,E=e.ctx.createImageData(s,i),A=E.data;for(f=0;f<i;f++)for(g=0;g<s;g++)for(u=Math.floor(_*g),d=Math.floor(S*f),y=_*g-u,v=S*f-d,p=4*(d*t+u),w=0;w<4;w++)o=T[p+w],a=T[p+4+w],l=T[p+C+w],c=T[p+C+4+w],m=o*(1-y)*(1-v)+a*y*(1-v)+l*v*(1-y)+c*y*v,A[x++]=m;return E}hermiteFastResize(e,t,n,s,i){const o=this.rcpScaleX,a=this.rcpScaleY,l=Math.ceil(o/2),c=Math.ceil(a/2),u=e.imageData.data,d=e.ctx.createImageData(s,i),f=d.data;for(let g=0;g<i;g++)for(let y=0;y<s;y++){const v=4*(y+g*s);let w=0,m=0,p=0,x=0,_=0,S=0,C=0;const T=(g+.5)*a;for(let E=Math.floor(g*a);E<(g+1)*a;E++){const A=Math.abs(T-(E+.5))/c,D=(y+.5)*o,B=A*A;for(let P=Math.floor(y*o);P<(y+1)*o;P++){let I=Math.abs(D-(P+.5))/l;const L=Math.sqrt(B+I*I);L>1&&L<-1||(w=2*L*L*L-3*L*L+1,w>0&&(I=4*(P+E*t),C+=w*u[I+3],p+=w,u[I+3]<255&&(w=w*u[I+3]/250),x+=w*u[I],_+=w*u[I+1],S+=w*u[I+2],m+=w))}}f[v]=x/m,f[v+1]=_/m,f[v+2]=S/m,f[v+3]=C/p}return d}}k(pc,"type","Resize"),k(pc,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),k(pc,"uniformLocations",["uDelta","uTaps"]),H.setClass(pc);class mc extends Ze{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=-this.saturation;for(let s=0;s<t.length;s+=4){const i=Math.max(t[s],t[s+1],t[s+2]);t[s]+=i!==t[s]?(i-t[s])*n:0,t[s+1]+=i!==t[s+1]?(i-t[s+1])*n:0,t[s+2]+=i!==t[s+2]?(i-t[s+2])*n:0}}sendUniformData(e,t){e.uniform1f(t.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}k(mc,"type","Saturation"),k(mc,"defaults",{saturation:0}),k(mc,"uniformLocations",["uSaturation"]),H.setClass(mc);class vc extends Ze{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=-this.vibrance;for(let s=0;s<t.length;s+=4){const i=Math.max(t[s],t[s+1],t[s+2]),o=(t[s]+t[s+1]+t[s+2])/3,a=2*Math.abs(i-o)/255*n;t[s]+=i!==t[s]?(i-t[s])*a:0,t[s+1]+=i!==t[s+1]?(i-t[s+1])*a:0,t[s+2]+=i!==t[s+2]?(i-t[s+2])*a:0}}sendUniformData(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}k(vc,"type","Vibrance"),k(vc,"defaults",{vibrance:0}),k(vc,"uniformLocations",["uVibrance"]),H.setClass(vc);function jS(r,[e,t]){return Math.min(t,Math.max(e,r))}var I5=b.createContext(void 0);function bm(r){const e=b.useContext(I5);return r||e||"ltr"}function ES(r){const e=b.useRef({value:r,previous:r});return b.useMemo(()=>(e.current.value!==r&&(e.current.previous=e.current.value,e.current.value=r),e.current.previous),[r])}var PS=["PageUp","PageDown"],OS=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],NS={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Do="Slider",[_g,F5,$5]=Sp(Do),[AS,ZL]=Tn(Do,[$5]),[B5,Oh]=AS(Do),MS=b.forwardRef((r,e)=>{const{name:t,min:n=0,max:s=100,step:i=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[n],value:u,onValueChange:d=()=>{},onValueCommit:f=()=>{},inverted:g=!1,form:y,...v}=r,w=b.useRef(new Set),m=b.useRef(0),x=o==="horizontal"?z5:U5,[_=[],S]=sl({prop:u,defaultProp:c,onChange:B=>{var I;(I=[...w.current][m.current])==null||I.focus(),d(B)}}),C=b.useRef(_);function T(B){const P=Y5(_,B);D(B,P)}function E(B){D(B,m.current)}function A(){const B=C.current[m.current];_[m.current]!==B&&f(_)}function D(B,P,{commit:I}={commit:!1}){const L=Q5(i),G=J5(Math.round((B-n)/i)*i+n,L),W=jS(G,[n,s]);S((V=[])=>{const N=H5(V,W,P);if(K5(N,l*i)){m.current=N.indexOf(W);const M=String(N)!==String(V);return M&&I&&f(N),M?N:V}else return V})}return h.jsx(B5,{scope:r.__scopeSlider,name:t,disabled:a,min:n,max:s,valueIndexToChangeRef:m,thumbs:w.current,values:_,orientation:o,form:y,children:h.jsx(_g.Provider,{scope:r.__scopeSlider,children:h.jsx(_g.Slot,{scope:r.__scopeSlider,children:h.jsx(x,{"aria-disabled":a,"data-disabled":a?"":void 0,...v,ref:e,onPointerDown:ce(v.onPointerDown,()=>{a||(C.current=_)}),min:n,max:s,inverted:g,onSlideStart:a?void 0:T,onSlideMove:a?void 0:E,onSlideEnd:a?void 0:A,onHomeKeyDown:()=>!a&&D(n,0,{commit:!0}),onEndKeyDown:()=>!a&&D(s,_.length-1,{commit:!0}),onStepKeyDown:({event:B,direction:P})=>{if(!a){const G=PS.includes(B.key)||B.shiftKey&&OS.includes(B.key)?10:1,W=m.current,V=_[W],N=i*G*P;D(V+N,W,{commit:!0})}}})})})})});MS.displayName=Do;var[DS,RS]=AS(Do,{startEdge:"left",endEdge:"right",size:"width",direction:1}),z5=b.forwardRef((r,e)=>{const{min:t,max:n,dir:s,inverted:i,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=r,[d,f]=b.useState(null),g=Ye(e,x=>f(x)),y=b.useRef(void 0),v=bm(s),w=v==="ltr",m=w&&!i||!w&&i;function p(x){const _=y.current||d.getBoundingClientRect(),S=[0,_.width],T=_m(S,m?[t,n]:[n,t]);return y.current=_,T(x-_.left)}return h.jsx(DS,{scope:r.__scopeSlider,startEdge:m?"left":"right",endEdge:m?"right":"left",direction:m?1:-1,size:"width",children:h.jsx(LS,{dir:v,"data-orientation":"horizontal",...u,ref:g,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:x=>{const _=p(x.clientX);o==null||o(_)},onSlideMove:x=>{const _=p(x.clientX);a==null||a(_)},onSlideEnd:()=>{y.current=void 0,l==null||l()},onStepKeyDown:x=>{const S=NS[m?"from-left":"from-right"].includes(x.key);c==null||c({event:x,direction:S?-1:1})}})})}),U5=b.forwardRef((r,e)=>{const{min:t,max:n,inverted:s,onSlideStart:i,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...c}=r,u=b.useRef(null),d=Ye(e,u),f=b.useRef(void 0),g=!s;function y(v){const w=f.current||u.current.getBoundingClientRect(),m=[0,w.height],x=_m(m,g?[n,t]:[t,n]);return f.current=w,x(v-w.top)}return h.jsx(DS,{scope:r.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:h.jsx(LS,{"data-orientation":"vertical",...c,ref:d,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:v=>{const w=y(v.clientY);i==null||i(w)},onSlideMove:v=>{const w=y(v.clientY);o==null||o(w)},onSlideEnd:()=>{f.current=void 0,a==null||a()},onStepKeyDown:v=>{const m=NS[g?"from-bottom":"from-top"].includes(v.key);l==null||l({event:v,direction:m?-1:1})}})})}),LS=b.forwardRef((r,e)=>{const{__scopeSlider:t,onSlideStart:n,onSlideMove:s,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...c}=r,u=Oh(Do,t);return h.jsx(ve.span,{...c,ref:e,onKeyDown:ce(r.onKeyDown,d=>{d.key==="Home"?(o(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):PS.concat(OS).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:ce(r.onPointerDown,d=>{const f=d.target;f.setPointerCapture(d.pointerId),d.preventDefault(),u.thumbs.has(f)?f.focus():n(d)}),onPointerMove:ce(r.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&s(d)}),onPointerUp:ce(r.onPointerUp,d=>{const f=d.target;f.hasPointerCapture(d.pointerId)&&(f.releasePointerCapture(d.pointerId),i(d))})})}),IS="SliderTrack",FS=b.forwardRef((r,e)=>{const{__scopeSlider:t,...n}=r,s=Oh(IS,t);return h.jsx(ve.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...n,ref:e})});FS.displayName=IS;var Sg="SliderRange",$S=b.forwardRef((r,e)=>{const{__scopeSlider:t,...n}=r,s=Oh(Sg,t),i=RS(Sg,t),o=b.useRef(null),a=Ye(e,o),l=s.values.length,c=s.values.map(f=>US(f,s.min,s.max)),u=l>1?Math.min(...c):0,d=100-Math.max(...c);return h.jsx(ve.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...n,ref:a,style:{...r.style,[i.startEdge]:u+"%",[i.endEdge]:d+"%"}})});$S.displayName=Sg;var Cg="SliderThumb",BS=b.forwardRef((r,e)=>{const t=F5(r.__scopeSlider),[n,s]=b.useState(null),i=Ye(e,a=>s(a)),o=b.useMemo(()=>n?t().findIndex(a=>a.ref.current===n):-1,[t,n]);return h.jsx(W5,{...r,ref:i,index:o})}),W5=b.forwardRef((r,e)=>{const{__scopeSlider:t,index:n,name:s,...i}=r,o=Oh(Cg,t),a=RS(Cg,t),[l,c]=b.useState(null),u=Ye(e,p=>c(p)),d=l?o.form||!!l.closest("form"):!0,f=Ip(l),g=o.values[n],y=g===void 0?0:US(g,o.min,o.max),v=G5(n,o.values.length),w=f==null?void 0:f[a.size],m=w?q5(w,y,a.direction):0;return b.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),h.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${y}% + ${m}px)`},children:[h.jsx(_g.ItemSlot,{scope:r.__scopeSlider,children:h.jsx(ve.span,{role:"slider","aria-label":r["aria-label"]||v,"aria-valuemin":o.min,"aria-valuenow":g,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:u,style:g===void 0?{display:"none"}:r.style,onFocus:ce(r.onFocus,()=>{o.valueIndexToChangeRef.current=n})})}),d&&h.jsx(zS,{name:s??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:g},n)]})});BS.displayName=Cg;var V5="RadioBubbleInput",zS=b.forwardRef(({__scopeSlider:r,value:e,...t},n)=>{const s=b.useRef(null),i=Ye(s,n),o=ES(e);return b.useEffect(()=>{const a=s.current;if(!a)return;const l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const d=new Event("input",{bubbles:!0});u.call(a,e),a.dispatchEvent(d)}},[o,e]),h.jsx(ve.input,{style:{display:"none"},...t,ref:i,defaultValue:e})});zS.displayName=V5;function H5(r=[],e,t){const n=[...r];return n[t]=e,n.sort((s,i)=>s-i)}function US(r,e,t){const i=100/(t-e)*(r-e);return jS(i,[0,100])}function G5(r,e){return e>2?`Value ${r+1} of ${e}`:e===2?["Minimum","Maximum"][r]:void 0}function Y5(r,e){if(r.length===1)return 0;const t=r.map(s=>Math.abs(s-e)),n=Math.min(...t);return t.indexOf(n)}function q5(r,e,t){const n=r/2,i=_m([0,50],[0,n]);return(n-i(e)*t)*t}function X5(r){return r.slice(0,-1).map((e,t)=>r[t+1]-e)}function K5(r,e){if(e>0){const t=X5(r);return Math.min(...t)>=e}return!0}function _m(r,e){return t=>{if(r[0]===r[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(r[1]-r[0]);return e[0]+n*(t-r[0])}}function Q5(r){return(String(r).split(".")[1]||"").length}function J5(r,e){const t=Math.pow(10,e);return Math.round(r*t)/t}var WS=MS,Z5=FS,eL=$S,tL=BS;const VS=b.forwardRef(({className:r,...e},t)=>h.jsxs(WS,{ref:t,className:Pe("relative flex w-full touch-none select-none items-center",r),...e,children:[h.jsx(Z5,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:h.jsx(eL,{className:"absolute h-full bg-primary"})}),h.jsx(tL,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));VS.displayName=WS.displayName;const rL=()=>{const r=b.useRef(null),[e,t]=b.useState(null),[n,s]=b.useState("#8b5cf6"),[i,o]=b.useState(5),[a,l]=b.useState(!1),[c,u]=b.useState("draw"),[d,f]=b.useState(""),[g,y]=b.useState(!1),[v,w]=b.useState(0),[m,p]=b.useState("#ffffff"),x=["#8b5cf6","#ec4899","#3b82f6","#10b981","#f59e0b","#ef4444","#6366f1","#14b8a6","#f97316","#a855f7","#06b6d4","#84cc16","#ff69b4","#ffd700","#98fb98","#dda0dd"],_=[{name:"White",color:"#ffffff"},{name:"Cream",color:"#fffef0"},{name:"Light Blue",color:"#e6f3ff"},{name:"Light Pink",color:"#ffe6f0"},{name:"Light Green",color:"#e6ffe6"},{name:"Lavender",color:"#f0e6ff"}];b.useEffect(()=>{if(!r.current)return;const P=new wg(r.current,{width:window.innerWidth>900?900:window.innerWidth-48,height:600,backgroundColor:"#ffffff",isDrawingMode:!0});P.freeDrawingBrush=new Ru(P),P.freeDrawingBrush.color=n,P.freeDrawingBrush.width=i,t(P);const I=["Your creative journey begins! ","Canvas is ready for your masterpiece! ","Let your imagination flow freely! ","Time to create something beautiful! ","Your blank canvas awaits your magic! ","Ready to paint your emotions! "];return J.success(I[Math.floor(Math.random()*I.length)]),()=>{P.dispose()}},[]),b.useEffect(()=>{!e||!e.freeDrawingBrush||(a?e.freeDrawingBrush.color="#ffffff":e.freeDrawingBrush.color=n)},[n,a,e]),b.useEffect(()=>{!e||!e.freeDrawingBrush||(e.freeDrawingBrush.width=i)},[i,e]);const S=()=>{if(!e)return;e.clear(),e.backgroundColor="#ffffff",e.renderAll();const P=["Fresh start! Your canvas is clean! ","Ready for a new creation! ","Blank slate, endless possibilities! ","Cleared! Time for something new! ","Fresh canvas, fresh ideas! ","All clear! What will you create next? "];J.success(P[Math.floor(Math.random()*P.length)])},C=()=>{if(!e)return;const P=e.getObjects();if(P.length>0){e.remove(P[P.length-1]),e.renderAll();const I=["Step back taken! ","Reversed! Try again! ","Undone! Keep creating! ","One step back, two steps forward! ","Removed! No worries! ","Take your time, perfection takes patience! "];J.success(I[Math.floor(Math.random()*I.length)])}},T=()=>{if(!e)return;const P=e.toDataURL({format:"png",quality:1,multiplier:1}),I=document.createElement("a");I.download=`shalala-art-${Date.now()}.png`,I.href=P,I.click();const L=["Your masterpiece is saved! ","Art preserved! Beautiful work! ","Downloaded! Your creativity is captured! ","Saved forever! Amazing creation! ","Your art is now yours to keep! ","Masterpiece downloaded! So proud of you! "];J.success(L[Math.floor(Math.random()*L.length)])},E=P=>{e&&(e.backgroundColor=P,e.renderAll(),p(P),J.success("Background color changed! "))},A=P=>{if(e)if(u(P),l(!1),y(P==="text"),P==="draw"){e.isDrawingMode=!0;const I=["Free drawing mode! Express yourself! ","Pencil ready! Let your hand flow! ","Draw anything your heart desires! ","Time to sketch your thoughts! "];J.success(I[Math.floor(Math.random()*I.length)])}else if(P==="text")e.isDrawingMode=!1,J.info("Type your text and click 'Add Text' to place it! ");else{e.isDrawingMode=!1;let I;const L=Math.random()*400+100,G=Math.random()*300+100;if(P==="circle")I=new $t({left:L,top:G,radius:50,fill:n,stroke:n,strokeWidth:2});else if(P==="square")I=new Sr({left:L,top:G,width:100,height:100,fill:n,stroke:n,strokeWidth:2});else if(P==="triangle")I=new ss({left:L,top:G,width:100,height:100,fill:n,stroke:n,strokeWidth:2});else if(P==="line")I=new ln([L,G,L+150,G+100],{stroke:n,strokeWidth:i});else if(P==="star"){const W=[];for(let M=0;M<10;M++){const z=M%2===0?50:25,Q=M*Math.PI/5-Math.PI/2;W.push({x:L+z*Math.cos(Q),y:G+z*Math.sin(Q)})}I=new ta(W,{fill:n,stroke:n,strokeWidth:2})}else if(P==="flower"){for(let z=0;z<8;z++){const Q=z*2*Math.PI/8,X=L+Math.cos(Q)*35,Z=G+Math.sin(Q)*35,ee=new $t({left:X,top:Z,radius:20,fill:n,stroke:n,strokeWidth:1,opacity:.8});e.add(ee)}const M=new $t({left:L,top:G,radius:15,fill:"#ffd700",stroke:"#ffd700",strokeWidth:2});e.add(M),e.renderAll(),J.success("Beautiful flower bloomed! ");return}else if(P==="sun"){const W=new $t({left:L,top:G,radius:40,fill:"#ffd700",stroke:"#ff8c00",strokeWidth:3});e.add(W);for(let V=0;V<12;V++){const N=V*2*Math.PI/12,M=L+Math.cos(N)*45,z=G+Math.sin(N)*45,Q=L+Math.cos(N)*70,X=G+Math.sin(N)*70,Z=new ln([M,z,Q,X],{stroke:"#ff8c00",strokeWidth:4});e.add(Z)}e.renderAll(),J.success("Bright sun shining! ");return}if(I){e.add(I),e.setActiveObject(I),e.renderAll(),w(V=>V+1);const W=[`Beautiful ${P}! Love it! `,`${P} placed! Keep creating! `,`Gorgeous ${P} added! `,`Perfect ${P}! Your art is blooming! `,`${P} looks amazing there! `,`Wonderful choice! That ${P} is perfect! `,`${P} added! You're doing great! `,`Love that ${P}! So creative! `];if(J.success(W[Math.floor(Math.random()*W.length)]),v>0&&v%5===0){const V=["You're creating something truly special! Keep going! ","Your artistic skills are shining through! ","Every stroke adds more beauty! Don't stop! ","This is turning out wonderfully! ","You have such a creative eye! Amazing! "];setTimeout(()=>{J(V[Math.floor(Math.random()*V.length)],{duration:3e3})},1e3)}}}},D=()=>{if(!e||!d.trim())return;const P=new ht(d,{left:Math.random()*400+100,top:Math.random()*300+100,fontSize:30,fill:n,fontFamily:"Arial"});e.add(P),e.setActiveObject(P),e.renderAll();const I=["Text added! Words on canvas! ","Your message is now art! ","Beautiful text! Perfect placement! ","Words that shine! Love it! ","Text looks fantastic! "];J.success(I[Math.floor(Math.random()*I.length)]),f(""),y(!1),u("draw"),e.isDrawingMode=!0},B=()=>{if(!e)return;const P=e.getActiveObject();if(P){P.rotate((P.angle||0)+15),e.renderAll();const I=["Rotated! New perspective! ","Spin it! Looking good! ","Angle changed! Perfect! ","Turned! Love that rotation! "];J.success(I[Math.floor(Math.random()*I.length)])}else J.info("Select a shape first to rotate it! ")};return h.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[h.jsxs("div",{className:"text-center",children:[h.jsxs("h2",{className:"text-3xl font-bold text-foreground mb-2 flex items-center justify-center gap-3",children:[h.jsx(du,{className:"w-8 h-8 text-primary"}),"Digital Art Canvas"]}),h.jsx("p",{className:"text-lg text-muted-foreground",children:"Express yourself through colors and creativity"})]}),h.jsxs(K,{className:"p-6 shadow-companionship",children:[h.jsxs("div",{className:"flex flex-wrap gap-4 items-center mb-6",children:[h.jsxs("div",{className:"flex gap-2 border-r border-border pr-4",children:[h.jsx($,{onClick:()=>A("draw"),variant:c==="draw"&&!a?"default":"outline",size:"sm",title:"Free Draw",children:h.jsx(xj,{className:"w-4 h-4"})}),h.jsx($,{onClick:()=>A("line"),variant:c==="line"?"default":"outline",size:"sm",title:"Line",children:h.jsx(mj,{className:"w-4 h-4"})}),h.jsx($,{onClick:()=>A("text"),variant:c==="text"?"default":"outline",size:"sm",title:"Add Text",children:h.jsx(Mj,{className:"w-4 h-4"})})]}),h.jsxs("div",{className:"flex gap-2 border-r border-border pr-4",children:[h.jsx($,{onClick:()=>A("circle"),variant:c==="circle"?"default":"outline",size:"sm",title:"Circle",children:h.jsx(P1,{className:"w-4 h-4"})}),h.jsx($,{onClick:()=>A("square"),variant:c==="square"?"default":"outline",size:"sm",title:"Square",children:h.jsx(Ej,{className:"w-4 h-4"})}),h.jsx($,{onClick:()=>A("triangle"),variant:c==="triangle"?"default":"outline",size:"sm",title:"Triangle",children:h.jsx(Aj,{className:"w-4 h-4"})}),h.jsx($,{onClick:()=>A("star"),variant:c==="star"?"default":"outline",size:"sm",title:"Star",children:h.jsx(fu,{className:"w-4 h-4"})}),h.jsx($,{onClick:()=>A("heart"),variant:c==="heart"?"default":"outline",size:"sm",title:"Heart",children:h.jsx(Or,{className:"w-4 h-4"})}),h.jsx($,{onClick:()=>A("flower"),variant:c==="flower"?"default":"outline",size:"sm",title:"Flower",children:h.jsx(Ia,{className:"w-4 h-4"})}),h.jsx($,{onClick:()=>A("sun"),variant:c==="sun"?"default":"outline",size:"sm",title:"Sun",children:h.jsx(fu,{className:"w-4 h-4"})})]}),h.jsxs("div",{className:"flex gap-2 border-r border-border pr-4",children:[h.jsx("span",{className:"text-sm text-muted-foreground self-center",children:"BG:"}),_.map(P=>h.jsx("button",{onClick:()=>E(P.color),className:`w-8 h-8 rounded border-2 transition-all ${m===P.color?"border-foreground scale-110 shadow-lg":"border-border hover:scale-105"}`,style:{backgroundColor:P.color},title:P.name},P.color))]}),h.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(P=>h.jsx("button",{onClick:()=>{s(P),l(!1),e!=null&&e.freeDrawingBrush&&(e.freeDrawingBrush.color=P)},className:`w-10 h-10 rounded-full border-2 transition-all ${n===P&&!a?"border-foreground scale-110 shadow-lg":"border-border hover:scale-105"}`,style:{backgroundColor:P}},P))}),h.jsx($,{onClick:()=>{l(!a),u("draw"),e&&(e.isDrawingMode=!0)},variant:a?"default":"outline",size:"sm",children:h.jsx(hj,{className:"w-4 h-4"})}),h.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-[200px]",children:[h.jsxs("span",{className:"text-sm text-muted-foreground whitespace-nowrap",children:["Size: ",i]}),h.jsx(VS,{value:[i],onValueChange:P=>o(P[0]),min:1,max:50,step:1,className:"flex-1"})]}),h.jsxs("div",{className:"flex gap-2 border-l border-border pl-4",children:[h.jsx($,{onClick:B,variant:"outline",size:"sm",title:"Rotate Selected",children:h.jsx(Sj,{className:"w-4 h-4"})}),h.jsxs($,{onClick:C,variant:"outline",size:"sm",children:[h.jsx(Dj,{className:"w-4 h-4 mr-1"}),"Undo"]}),h.jsxs($,{onClick:S,variant:"outline",size:"sm",children:[h.jsx(ps,{className:"w-4 h-4 mr-1"}),"Clear"]}),h.jsxs($,{onClick:T,variant:"default",size:"sm",children:[h.jsx(uj,{className:"w-4 h-4 mr-1"}),"Save Art"]})]})]}),g&&h.jsxs("div",{className:"flex gap-2 mb-4 items-center",children:[h.jsx(ge,{type:"text",placeholder:"Type your text here...",value:d,onChange:P=>f(P.target.value),onKeyPress:P=>P.key==="Enter"&&D(),className:"flex-1"}),h.jsxs($,{onClick:D,size:"sm",children:[h.jsx(Ia,{className:"w-4 h-4 mr-1"}),"Add Text"]})]}),h.jsx("div",{className:"border border-border rounded-lg overflow-hidden shadow-gentle",children:h.jsx("canvas",{ref:r,className:"max-w-full"})})]}),h.jsxs(K,{className:"p-6 shadow-gentle bg-gradient-to-br from-primary/5 to-accent/5",children:[h.jsxs("h3",{className:"text-lg font-semibold text-foreground mb-3 flex items-center gap-2",children:[h.jsx(du,{className:"w-5 h-5 text-primary"}),"Creative Tips"]}),h.jsxs("ul",{className:"space-y-2 text-muted-foreground",children:[h.jsxs("li",{children:[" ",h.jsx("strong",{children:"Draw Mode:"})," Freehand drawing with adjustable brush size"]}),h.jsxs("li",{children:[" ",h.jsx("strong",{children:"Shapes:"})," Add circles, squares, triangles, stars, and hearts!"]}),h.jsxs("li",{children:[" ",h.jsx("strong",{children:"Text:"})," Add meaningful words to your artwork"]}),h.jsxs("li",{children:[" ",h.jsx("strong",{children:"Colors:"})," Express emotions with our vibrant color palette"]}),h.jsxs("li",{children:[" ",h.jsx("strong",{children:"Rotate:"})," Select any shape and click rotate to change its angle"]}),h.jsxs("li",{children:[" ",h.jsx("strong",{children:"Layers:"})," Shapes can be moved, resized, and layered freely"]}),h.jsxs("li",{children:[" ",h.jsx("strong",{children:"Experiment:"})," Don't worry about perfection - just enjoy creating!"]}),h.jsxs("li",{children:[" ",h.jsx("strong",{children:"Art Therapy:"})," Creating art helps reduce stress and express feelings"]})]})]})]})},nL=()=>{const[r,e]=b.useState([{id:"1",title:"Beautiful Morning Walk",content:"Today I took a lovely walk in the park. The flowers were blooming and I felt so peaceful watching the birds sing. It reminded me of walks I used to take with my dear mother.",mood:"peaceful",tags:["nature","memories","walking"],date:new Date("2025-01-20"),color:"bg-green-50 border-green-200",isFavorite:!0},{id:"2",title:"Family Video Call",content:"Had the most wonderful video call with my grandchildren today! They showed me their drawings and we played online games together. Technology is amazing.",mood:"happy",tags:["family","grandchildren","technology"],date:new Date("2025-01-18"),color:"bg-blue-50 border-blue-200",isFavorite:!1},{id:"3",title:"Gratitude for Friends",content:"Feeling so grateful for my dear friend Sarah who brought me homemade soup when I wasn't feeling well. True friendship is such a blessing.",mood:"grateful",tags:["friendship","gratitude","kindness"],date:new Date("2025-01-15"),color:"bg-pink-50 border-pink-200",isFavorite:!0}]),[t,n]=b.useState(""),[s,i]=b.useState("all"),[o,a]=b.useState(!1),[l,c]=b.useState({title:"",content:"",mood:"happy",tags:"",color:"bg-purple-50 border-purple-200"}),u=[{value:"happy",label:"Happy",icon:"",color:"bg-yellow-50 border-yellow-200"},{value:"peaceful",label:"Peaceful",icon:"",color:"bg-green-50 border-green-200"},{value:"grateful",label:"Grateful",icon:"",color:"bg-pink-50 border-pink-200"},{value:"reflective",label:"Reflective",icon:"",color:"bg-blue-50 border-blue-200"},{value:"excited",label:"Excited",icon:"",color:"bg-orange-50 border-orange-200"},{value:"nostalgic",label:"Nostalgic",icon:"",color:"bg-purple-50 border-purple-200"}],d=["bg-purple-50 border-purple-200","bg-pink-50 border-pink-200","bg-blue-50 border-blue-200","bg-green-50 border-green-200","bg-yellow-50 border-yellow-200","bg-orange-50 border-orange-200","bg-red-50 border-red-200","bg-indigo-50 border-indigo-200"],f=()=>{if(!l.title||!l.content){J("Please fill in title and content");return}const m={id:Date.now().toString(),title:l.title,content:l.content,mood:l.mood,tags:l.tags.split(",").map(p=>p.trim()).filter(p=>p),date:new Date,color:l.color,isFavorite:!1};e(p=>[m,...p]),c({title:"",content:"",mood:"happy",tags:"",color:"bg-purple-50 border-purple-200"}),a(!1),J(" Journal entry added!")},g=m=>{e(p=>p.map(x=>x.id===m?{...x,isFavorite:!x.isFavorite}:x)),J(" Updated favorites!")},y=m=>{e(p=>p.filter(x=>x.id!==m)),J("Deleted journal entry")},v=r.filter(m=>{const p=m.title.toLowerCase().includes(t.toLowerCase())||m.content.toLowerCase().includes(t.toLowerCase())||m.tags.some(_=>_.toLowerCase().includes(t.toLowerCase())),x=s==="all"||m.mood===s;return p&&x}),w=m=>{const p=u.find(x=>x.value===m);return p?p.icon:""};return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"text-center",children:[h.jsxs("h2",{className:"text-elder-3xl font-bold text-foreground mb-4 flex items-center justify-center gap-3",children:[h.jsx(hu,{className:"w-8 h-8 text-primary"}),"My Beautiful Journal"]}),h.jsx("p",{className:"text-elder-lg text-muted-foreground",children:"Capture your precious memories and thoughts in a beautiful, Pinterest-inspired journal"})]}),h.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[h.jsxs(K,{className:"p-4 text-center bg-gradient-to-br from-purple-50 to-pink-50 border-purple-200",children:[h.jsx("div",{className:"text-elder-2xl font-bold text-purple-600",children:r.length}),h.jsx("div",{className:"text-elder-sm text-purple-600",children:"Total Entries"})]}),h.jsxs(K,{className:"p-4 text-center bg-gradient-to-br from-pink-50 to-red-50 border-pink-200",children:[h.jsx("div",{className:"text-elder-2xl font-bold text-pink-600",children:r.filter(m=>m.isFavorite).length}),h.jsx("div",{className:"text-elder-sm text-pink-600",children:"Favorites"})]}),h.jsxs(K,{className:"p-4 text-center bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200",children:[h.jsx("div",{className:"text-elder-2xl font-bold text-blue-600",children:new Set(r.flatMap(m=>m.tags)).size}),h.jsx("div",{className:"text-elder-sm text-blue-600",children:"Unique Tags"})]}),h.jsxs($,{onClick:()=>a(!o),className:"h-full bg-gradient-to-r from-primary to-primary-glow hover:from-primary-glow hover:to-primary transition-all",size:"lg",children:[h.jsx(Gr,{className:"w-5 h-5 mr-2"}),"New Entry"]})]}),o&&h.jsxs(K,{className:"p-6 shadow-gentle bg-gradient-to-br from-purple-50/50 to-pink-50/50 border-purple-200",children:[h.jsxs("h3",{className:"text-elder-xl font-semibold text-foreground mb-4 flex items-center gap-2",children:[h.jsx(jj,{className:"w-5 h-5 text-primary"}),"Create New Journal Entry"]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx(ge,{placeholder:"Give your entry a beautiful title...",value:l.title,onChange:m=>c(p=>({...p,title:m.target.value})),className:"text-elder-base bg-white/80"}),h.jsx(xh,{placeholder:"Share your thoughts, memories, and feelings...",value:l.content,onChange:m=>c(p=>({...p,content:m.target.value})),className:"text-elder-base bg-white/80 min-h-32",rows:6}),h.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-elder-sm font-medium text-foreground block mb-2",children:"How are you feeling?"}),h.jsx("select",{value:l.mood,onChange:m=>c(p=>({...p,mood:m.target.value})),className:"w-full p-2 border border-border rounded-md text-elder-base bg-white/80",children:u.map(m=>h.jsxs("option",{value:m.value,children:[m.icon," ",m.label]},m.value))})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-elder-sm font-medium text-foreground block mb-2",children:"Tags (comma-separated)"}),h.jsx(ge,{placeholder:"family, memories, gratitude...",value:l.tags,onChange:m=>c(p=>({...p,tags:m.target.value})),className:"text-elder-base bg-white/80"})]})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-elder-sm font-medium text-foreground block mb-2 flex items-center gap-2",children:[h.jsx(du,{className:"w-4 h-4"}),"Choose a color theme"]}),h.jsx("div",{className:"flex gap-2 flex-wrap",children:d.map((m,p)=>h.jsx("button",{onClick:()=>c(x=>({...x,color:m})),className:`w-8 h-8 rounded-full border-2 transition-all hover:scale-110 ${m} ${l.color===m?"border-foreground scale-110":"border-border"}`},p))})]})]}),h.jsxs("div",{className:"flex gap-2 mt-6",children:[h.jsxs($,{onClick:f,className:"bg-gradient-to-r from-primary to-primary-glow",children:[h.jsx(Gr,{className:"w-4 h-4 mr-2"}),"Save Entry"]}),h.jsx($,{onClick:()=>a(!1),variant:"outline",children:"Cancel"})]})]}),h.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[h.jsx(K,{className:"p-4 shadow-gentle",children:h.jsxs("div",{className:"relative",children:[h.jsx(sh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),h.jsx(ge,{placeholder:"Search your memories...",value:t,onChange:m=>n(m.target.value),className:"pl-10 text-elder-base"})]})}),h.jsx(K,{className:"p-4 shadow-gentle",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(fj,{className:"w-4 h-4 text-muted-foreground"}),h.jsxs("select",{value:s,onChange:m=>i(m.target.value),className:"flex-1 p-2 border border-border rounded-md text-elder-base bg-background",children:[h.jsx("option",{value:"all",children:"All Moods"}),u.map(m=>h.jsxs("option",{value:m.value,children:[m.icon," ",m.label]},m.value))]})]})})]}),v.length===0?h.jsxs(K,{className:"p-8 shadow-gentle text-center",children:[h.jsx(hu,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),h.jsx("p",{className:"text-elder-lg text-muted-foreground",children:t||s!=="all"?"No entries match your search":"Your journal is waiting for your first entry"}),h.jsx("p",{className:"text-elder-base text-muted-foreground mt-2",children:"Start writing your beautiful memories today! "})]}):h.jsx("div",{className:"columns-1 md:columns-2 lg:columns-3 gap-6 space-y-6",children:v.map(m=>h.jsxs(K,{className:`break-inside-avoid p-6 shadow-gentle hover:shadow-companionship transition-all cursor-pointer ${m.color} group`,children:[h.jsxs("div",{className:"flex items-start justify-between mb-4",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("h3",{className:"text-elder-lg font-semibold text-foreground mb-2",children:m.title}),h.jsxs("div",{className:"flex items-center gap-2 text-elder-sm text-muted-foreground",children:[h.jsx(Xs,{className:"w-4 h-4"}),m.date.toLocaleDateString()]})]}),h.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[h.jsx($,{onClick:()=>g(m.id),variant:"ghost",size:"sm",className:"p-1",children:h.jsx(Or,{className:`w-4 h-4 ${m.isFavorite?"fill-red-500 text-red-500":"text-muted-foreground"}`})}),h.jsx($,{onClick:()=>y(m.id),variant:"ghost",size:"sm",className:"p-1 text-muted-foreground hover:text-destructive",children:h.jsx(ps,{className:"w-4 h-4"})})]})]}),h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs(Ke,{variant:"secondary",className:"bg-white/60",children:[w(m.mood)," ",m.mood]}),m.isFavorite&&h.jsx(fu,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"})]}),h.jsx("p",{className:"text-elder-base text-foreground mb-4 leading-relaxed",children:m.content}),m.tags.length>0&&h.jsx("div",{className:"flex flex-wrap gap-2",children:m.tags.map((p,x)=>h.jsxs(Ke,{variant:"outline",className:"text-xs bg-white/60 hover:bg-white/80 transition-colors",children:[h.jsx(Pj,{className:"w-3 h-3 mr-1"}),p]},x))})]},m.id))}),h.jsxs(K,{className:"p-6 shadow-gentle bg-gradient-to-r from-purple-50 to-pink-50 border-purple-200 text-center",children:[h.jsx("h3",{className:"text-elder-lg font-semibold text-foreground mb-2",children:" Journal Inspiration "}),h.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-elder-sm text-muted-foreground",children:[h.jsxs("div",{children:[h.jsxs("p",{className:"mb-2",children:[" ",h.jsx("strong",{children:"Memories:"})," What made you smile today?"]}),h.jsxs("p",{children:[" ",h.jsx("strong",{children:"Gratitude:"})," What are you thankful for?"]})]}),h.jsxs("div",{children:[h.jsxs("p",{className:"mb-2",children:[" ",h.jsx("strong",{children:"People:"})," Who brightened your day?"]}),h.jsxs("p",{children:[" ",h.jsx("strong",{children:"Feelings:"})," How did today make you feel?"]})]}),h.jsxs("div",{children:[h.jsxs("p",{className:"mb-2",children:[" ",h.jsx("strong",{children:"Dreams:"})," What are you looking forward to?"]}),h.jsxs("p",{children:[" ",h.jsx("strong",{children:"Stories:"})," What story does today tell?"]})]})]})]})]})},sL=()=>{const[r,e]=b.useState([{id:"1",title:"Doctor Appointment",description:"Annual checkup with Dr. Smith",date:"2025-01-30",time:"10:00",type:"appointment",priority:"high",addedAt:new Date},{id:"2",title:"Take Medication",description:"Blood pressure medication",date:"2025-01-25",time:"08:00",type:"medication",priority:"high",completed:!1,addedAt:new Date}]),[t,n]=b.useState(""),[s,i]=b.useState({title:"",description:"",date:"",time:"",type:"reminder",priority:"medium"}),[o,a]=b.useState(!1),l=()=>{if(!s.title||!s.date){J("Please fill in title and date");return}const p={id:Date.now().toString(),title:s.title,description:s.description,date:s.date,time:s.time,type:s.type,priority:s.priority,completed:!1,addedAt:new Date};e(x=>[...x,p]),i({title:"",description:"",date:"",time:"",type:"reminder",priority:"medium"}),a(!1),J(` Added "${p.title}" to your schedule!`)},c=p=>{e(_=>_.map(S=>S.id===p?{...S,completed:!S.completed}:S));const x=r.find(_=>_.id===p);J(`${x!=null&&x.completed?"Uncompleted":"Completed"} "${x==null?void 0:x.title}"`)},u=p=>{const x=r.find(_=>_.id===p);e(_=>_.filter(S=>S.id!==p)),J(`Removed "${x==null?void 0:x.title}" from schedule`)},d=r.filter(p=>p.title.toLowerCase().includes(t.toLowerCase())||p.description.toLowerCase().includes(t.toLowerCase())),f=new Date().toISOString().split("T")[0],g=d.filter(p=>p.date===f),y=d.filter(p=>p.date>f),v=d.filter(p=>p.date<f),w=p=>{switch(p){case"appointment":return"";case"medication":return"";case"event":return"";default:return""}},m=p=>{switch(p){case"high":return"destructive";case"medium":return"secondary";case"low":return"outline"}};return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"text-center",children:[h.jsxs("h2",{className:"text-elder-3xl font-bold text-foreground mb-4 flex items-center justify-center gap-3",children:[h.jsx(Xs,{className:"w-8 h-8 text-primary"}),"Schedule & Notes"]}),h.jsx("p",{className:"text-elder-lg text-muted-foreground",children:"Keep track of your appointments, medications, and important events"})]}),h.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[h.jsxs($,{onClick:()=>a(!o),variant:"companionship",size:"lg",className:"h-16",children:[h.jsx(Gr,{className:"w-5 h-5 mr-2"}),"Add New Schedule Item"]}),h.jsxs("div",{className:"text-center p-4 bg-gradient-primary rounded-lg text-primary-foreground",children:[h.jsx(O1,{className:"w-8 h-8 mx-auto mb-2"}),h.jsxs("p",{className:"text-elder-base font-semibold",children:[g.length," items today"]})]})]}),o&&h.jsxs(K,{className:"p-6 shadow-gentle",children:[h.jsxs("h3",{className:"text-elder-xl font-semibold text-foreground mb-4 flex items-center gap-2",children:[h.jsx(Gr,{className:"w-5 h-5 text-primary"}),"Add New Schedule Item"]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[h.jsx(ge,{placeholder:"Title (e.g., Doctor Appointment)",value:s.title,onChange:p=>i(x=>({...x,title:p.target.value})),className:"text-elder-base"}),h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsx(ge,{type:"date",value:s.date,onChange:p=>i(x=>({...x,date:p.target.value})),className:"text-elder-base"}),h.jsx(ge,{type:"time",value:s.time,onChange:p=>i(x=>({...x,time:p.target.value})),className:"text-elder-base"})]})]}),h.jsx(xh,{placeholder:"Description (optional)",value:s.description,onChange:p=>i(x=>({...x,description:p.target.value})),className:"text-elder-base",rows:3}),h.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-elder-sm font-medium text-foreground block mb-2",children:"Type"}),h.jsxs("select",{value:s.type,onChange:p=>i(x=>({...x,type:p.target.value})),className:"w-full p-2 border border-border rounded-md text-elder-base bg-background",children:[h.jsx("option",{value:"appointment",children:" Appointment"}),h.jsx("option",{value:"medication",children:" Medication"}),h.jsx("option",{value:"event",children:" Event"}),h.jsx("option",{value:"reminder",children:" Reminder"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-elder-sm font-medium text-foreground block mb-2",children:"Priority"}),h.jsxs("select",{value:s.priority,onChange:p=>i(x=>({...x,priority:p.target.value})),className:"w-full p-2 border border-border rounded-md text-elder-base bg-background",children:[h.jsx("option",{value:"high",children:"High Priority"}),h.jsx("option",{value:"medium",children:"Medium Priority"}),h.jsx("option",{value:"low",children:"Low Priority"})]})]})]})]}),h.jsxs("div",{className:"flex gap-2 mt-6",children:[h.jsxs($,{onClick:l,variant:"companionship",children:[h.jsx(Gr,{className:"w-4 h-4 mr-2"}),"Add to Schedule"]}),h.jsx($,{onClick:()=>a(!1),variant:"outline",children:"Cancel"})]})]}),h.jsx(K,{className:"p-4 shadow-gentle",children:h.jsxs("div",{className:"relative",children:[h.jsx(sh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),h.jsx(ge,{placeholder:"Search your schedule...",value:t,onChange:p=>n(p.target.value),className:"pl-10 text-elder-base"})]})}),g.length>0&&h.jsxs(K,{className:"p-6 shadow-gentle border-primary/20",children:[h.jsxs("h3",{className:"text-elder-xl font-semibold text-foreground mb-4 flex items-center gap-2",children:[h.jsx(nh,{className:"w-5 h-5 text-primary"}),"Today's Schedule (",g.length," items)"]}),h.jsx("div",{className:"space-y-3",children:g.map(p=>h.jsx(zd,{schedule:p,onToggleComplete:c,onDelete:u,getTypeIcon:w,getPriorityColor:m},p.id))})]}),y.length>0&&h.jsxs(K,{className:"p-6 shadow-gentle",children:[h.jsxs("h3",{className:"text-elder-xl font-semibold text-foreground mb-4 flex items-center gap-2",children:[h.jsx(Xs,{className:"w-5 h-5 text-primary"}),"Upcoming Schedule (",y.length," items)"]}),h.jsx("div",{className:"space-y-3",children:y.map(p=>h.jsx(zd,{schedule:p,onToggleComplete:c,onDelete:u,getTypeIcon:w,getPriorityColor:m},p.id))})]}),v.length>0&&h.jsxs(K,{className:"p-6 shadow-gentle",children:[h.jsxs("h3",{className:"text-elder-xl font-semibold text-foreground mb-4 flex items-center gap-2",children:[h.jsx(fr,{className:"w-5 h-5 text-muted-foreground"}),"Past Items (",v.length,")"]}),h.jsx("div",{className:"space-y-3",children:v.map(p=>h.jsx(zd,{schedule:p,onToggleComplete:c,onDelete:u,getTypeIcon:w,getPriorityColor:m,isPast:!0},p.id))})]}),d.length===0&&h.jsxs(K,{className:"p-8 shadow-gentle text-center",children:[h.jsx(Xs,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),h.jsx("p",{className:"text-elder-lg text-muted-foreground",children:t?"No items match your search":"Your schedule is empty"}),h.jsx("p",{className:"text-elder-base text-muted-foreground mt-2",children:"Add appointments, medications, or reminders to get started!"})]})]})},zd=({schedule:r,onToggleComplete:e,onDelete:t,getTypeIcon:n,getPriorityColor:s,isPast:i=!1})=>h.jsxs("div",{className:`
      flex items-center justify-between p-4 rounded-lg border transition-all hover:shadow-gentle
      ${r.completed?"bg-muted/50 opacity-70":"bg-card"}
      ${i?"border-muted":"border-border"}
    `,children:[h.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[h.jsx($,{variant:"ghost",size:"sm",onClick:()=>e(r.id),className:"p-1",children:r.completed?h.jsx(fr,{className:"w-5 h-5 text-primary"}):h.jsx(P1,{className:"w-5 h-5 text-muted-foreground"})}),h.jsx("div",{className:"text-2xl",children:n(r.type)}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("h4",{className:`text-elder-base font-medium ${r.completed?"line-through":""}`,children:r.title}),h.jsxs("p",{className:"text-elder-sm text-muted-foreground",children:[r.date," ",r.time&&`at ${r.time}`]}),r.description&&h.jsx("p",{className:"text-elder-sm text-muted-foreground mt-1",children:r.description})]}),h.jsx(Ke,{variant:s(r.priority),children:r.priority})]}),h.jsx($,{onClick:()=>t(r.id),variant:"ghost",size:"sm",children:h.jsx(ps,{className:"w-4 h-4"})})]}),iL=()=>{const[r,e]=b.useState([]),[t,n]=b.useState(!0),[s,i]=b.useState(""),[o,a]=b.useState({name:"",phone:"",relationship:"",emergency:!1}),[l,c]=b.useState(!1);b.useEffect(()=>{u()},[]);const u=async()=>{try{const{data:{user:m}}=await Te.auth.getUser();if(!m){n(!1);return}const{data:p,error:x}=await Te.from("contacts").select("*").eq("user_id",m.id).order("created_at",{ascending:!1});if(x)throw x;const _=p.map(S=>({id:S.id,name:S.name,phone:S.phone,relationship:S.relationship||"",emergency:S.emergency_contact||!1,addedAt:new Date(S.created_at)}));e(_)}catch(m){console.error("Error loading contacts:",m),J.error("Failed to load contacts")}finally{n(!1)}},d=async()=>{if(!o.name||!o.phone){J.error("Please fill in name and phone number");return}try{const{data:{user:m}}=await Te.auth.getUser();if(!m){J.error("Please log in to add contacts");return}const{data:p,error:x}=await Te.from("contacts").insert({user_id:m.id,name:o.name,phone:o.phone,relationship:o.relationship||"Contact",emergency_contact:o.emergency}).select().single();if(x)throw x;const _={id:p.id,name:p.name,phone:p.phone,relationship:p.relationship||"",emergency:p.emergency_contact||!1,addedAt:new Date(p.created_at)};e(S=>[_,...S]),a({name:"",phone:"",relationship:"",emergency:!1}),c(!1),J.success(` Added ${_.name} to your contacts!`)}catch(m){console.error("Error adding contact:",m),J.error("Failed to add contact")}},f=m=>{const p=m.phone.replace(/[^\d+]/g,"");navigator.userAgent.includes("Mobile")?window.location.href=`tel:${p}`:J(` Call ${m.name} at ${m.phone}`)},g=async m=>{const p=r.find(x=>x.id===m);try{const{error:x}=await Te.from("contacts").delete().eq("id",m);if(x)throw x;e(_=>_.filter(S=>S.id!==m)),J.success(`Removed ${p==null?void 0:p.name} from contacts`)}catch(x){console.error("Error deleting contact:",x),J.error("Failed to delete contact")}},y=r.filter(m=>m.name.toLowerCase().includes(s.toLowerCase())||m.phone.includes(s)||m.relationship.toLowerCase().includes(s.toLowerCase())),v=y.filter(m=>m.emergency),w=y.filter(m=>!m.emergency);return t?h.jsx("div",{className:"text-center py-12",children:h.jsx("p",{className:"text-muted-foreground",children:"Loading contacts..."})}):h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"text-center",children:[h.jsxs("h2",{className:"text-3xl font-bold text-foreground mb-4 flex items-center justify-center gap-3",children:[h.jsx(rs,{className:"w-8 h-8 text-primary"}),"Personal Contacts"]}),h.jsx("p",{className:"text-lg text-muted-foreground",children:"Keep your important contacts close and make calls easily"})]}),h.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[h.jsxs($,{onClick:()=>c(!l),variant:"companionship",size:"lg",className:"h-16",children:[h.jsx(Gr,{className:"w-5 h-5 mr-2"}),"Add New Contact"]}),h.jsxs($,{onClick:()=>f({name:"Emergency",phone:"911",relationship:"Emergency",id:"emergency",addedAt:new Date}),variant:"destructive",size:"lg",className:"h-16",children:[h.jsx(fd,{className:"w-5 h-5 mr-2"}),"Emergency Call (911)"]})]}),l&&h.jsxs(K,{className:"p-6 shadow-gentle",children:[h.jsxs("h3",{className:"text-xl font-semibold text-foreground mb-4 flex items-center gap-2",children:[h.jsx(q0,{className:"w-5 h-5 text-primary"}),"Add New Contact"]}),h.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[h.jsx(ge,{placeholder:"Full name",value:o.name,onChange:m=>a(p=>({...p,name:m.target.value}))}),h.jsx(ge,{placeholder:"Phone number",value:o.phone,onChange:m=>a(p=>({...p,phone:m.target.value}))}),h.jsx(ge,{placeholder:"Relationship (e.g., Son, Doctor)",value:o.relationship,onChange:m=>a(p=>({...p,relationship:m.target.value}))}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("input",{type:"checkbox",id:"emergency",checked:o.emergency,onChange:m=>a(p=>({...p,emergency:m.target.checked})),className:"w-4 h-4"}),h.jsx("label",{htmlFor:"emergency",className:"text-foreground",children:"Emergency Contact"})]})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs($,{onClick:d,variant:"companionship",children:[h.jsx(Gr,{className:"w-4 h-4 mr-2"}),"Add Contact"]}),h.jsx($,{onClick:()=>c(!1),variant:"outline",children:"Cancel"})]})]}),h.jsx(K,{className:"p-4 shadow-gentle",children:h.jsxs("div",{className:"relative",children:[h.jsx(sh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),h.jsx(ge,{placeholder:"Search contacts...",value:s,onChange:m=>i(m.target.value),className:"pl-10"})]})}),v.length>0&&h.jsxs(K,{className:"p-6 shadow-gentle border-destructive/20",children:[h.jsxs("h3",{className:"text-xl font-semibold text-foreground mb-4 flex items-center gap-2",children:[h.jsx(Or,{className:"w-5 h-5 text-destructive"}),"Emergency Contacts"]}),h.jsx("div",{className:"space-y-3",children:v.map(m=>h.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-destructive/20 bg-destructive/5",children:[h.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[h.jsx("div",{className:"w-12 h-12 rounded-full bg-destructive/10 flex items-center justify-center",children:h.jsx(rs,{className:"w-6 h-6 text-destructive"})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("h4",{className:"font-medium text-foreground",children:m.name}),h.jsxs("p",{className:"text-sm text-muted-foreground",children:[m.relationship,"  ",m.phone]})]}),h.jsx(Ke,{variant:"destructive",children:"Emergency"})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs($,{onClick:()=>f(m),variant:"destructive",size:"sm",children:[h.jsx(fd,{className:"w-4 h-4 mr-1"}),"Call"]}),h.jsx($,{onClick:()=>g(m.id),variant:"ghost",size:"sm",children:h.jsx(ps,{className:"w-4 h-4"})})]})]},m.id))})]}),h.jsxs(K,{className:"p-6 shadow-gentle",children:[h.jsxs("h3",{className:"text-xl font-semibold text-foreground mb-4 flex items-center gap-2",children:[h.jsx(q0,{className:"w-5 h-5 text-primary"}),"Your Contacts (",w.length,")"]}),w.length===0?h.jsxs("div",{className:"text-center py-8",children:[h.jsx(rs,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),h.jsx("p",{className:"text-lg text-muted-foreground",children:s?"No contacts match your search":"No contacts yet"}),h.jsx("p",{className:"text-muted-foreground mt-2",children:"Add some contacts to get started!"})]}):h.jsx("div",{className:"space-y-3",children:w.map(m=>h.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-border bg-card hover:shadow-gentle transition-all",children:[h.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[h.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:h.jsx(rs,{className:"w-6 h-6 text-primary"})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("h4",{className:"font-medium text-foreground",children:m.name}),h.jsxs("p",{className:"text-sm text-muted-foreground",children:[m.relationship,"  ",m.phone]})]})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs($,{onClick:()=>f(m),variant:"companionship",size:"sm",children:[h.jsx(fd,{className:"w-4 h-4 mr-1"}),"Call"]}),h.jsx($,{onClick:()=>g(m.id),variant:"ghost",size:"sm",children:h.jsx(ps,{className:"w-4 h-4"})})]})]},m.id))})]}),h.jsxs(K,{className:"p-4 shadow-gentle bg-muted/30",children:[h.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"How to make calls"}),h.jsxs("div",{className:"text-muted-foreground space-y-2",children:[h.jsx("p",{children:' On mobile devices, clicking "Call" will open your phone app'}),h.jsx("p",{children:" On desktop, the phone number will be displayed for you to dial"}),h.jsx("p",{children:" Emergency contacts are highlighted in red for quick access"}),h.jsx("p",{children:" Always call 911 for life-threatening emergencies"})]})]})]})};var oL="Label",HS=b.forwardRef((r,e)=>h.jsx(ve.label,{...r,ref:e,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||((s=r.onMouseDown)==null||s.call(r,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));HS.displayName=oL;var GS=HS;const aL=rh("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),on=b.forwardRef(({className:r,...e},t)=>h.jsx(GS,{ref:t,className:Pe(aL(),r),...e}));on.displayName=GS.displayName;var Nh="Switch",[lL,eI]=Tn(Nh),[cL,uL]=lL(Nh),YS=b.forwardRef((r,e)=>{const{__scopeSwitch:t,name:n,checked:s,defaultChecked:i,required:o,disabled:a,value:l="on",onCheckedChange:c,form:u,...d}=r,[f,g]=b.useState(null),y=Ye(e,x=>g(x)),v=b.useRef(!1),w=f?u||!!f.closest("form"):!0,[m,p]=sl({prop:s,defaultProp:i??!1,onChange:c,caller:Nh});return h.jsxs(cL,{scope:t,checked:m,disabled:a,children:[h.jsx(ve.button,{type:"button",role:"switch","aria-checked":m,"aria-required":o,"data-state":QS(m),"data-disabled":a?"":void 0,disabled:a,value:l,...d,ref:y,onClick:ce(r.onClick,x=>{p(_=>!_),w&&(v.current=x.isPropagationStopped(),v.current||x.stopPropagation())})}),w&&h.jsx(KS,{control:f,bubbles:!v.current,name:n,value:l,checked:m,required:o,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});YS.displayName=Nh;var qS="SwitchThumb",XS=b.forwardRef((r,e)=>{const{__scopeSwitch:t,...n}=r,s=uL(qS,t);return h.jsx(ve.span,{"data-state":QS(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:e})});XS.displayName=qS;var hL="SwitchBubbleInput",KS=b.forwardRef(({__scopeSwitch:r,control:e,checked:t,bubbles:n=!0,...s},i)=>{const o=b.useRef(null),a=Ye(o,i),l=ES(t),c=Ip(e);return b.useEffect(()=>{const u=o.current;if(!u)return;const d=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==t&&g){const y=new Event("click",{bubbles:n});g.call(u,t),u.dispatchEvent(y)}},[l,t,n]),h.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...s,tabIndex:-1,ref:a,style:{...s.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});KS.displayName=hL;function QS(r){return r?"checked":"unchecked"}var JS=YS,dL=XS;const ZS=b.forwardRef(({className:r,...e},t)=>h.jsx(JS,{className:Pe("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",r),...e,ref:t,children:h.jsx(dL,{className:Pe("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));ZS.displayName=JS.displayName;function fL(){const[r,e]=b.useState([]),[t,n]=b.useState(""),[s,i]=b.useState(""),{toast:o}=Ss();b.useEffect(()=>{a(),f()},[]);const a=async()=>{const{data:{user:v}}=await Te.auth.getUser();if(!v)return;const w=localStorage.getItem(`reminders_${v.id}`);w&&e(JSON.parse(w))},l=async v=>{const{data:{user:w}}=await Te.auth.getUser();w&&(localStorage.setItem(`reminders_${w.id}`,JSON.stringify(v)),e(v))},c=()=>{if(!t||!s){o({title:"Missing Information",description:"Please enter both time and message",variant:"destructive"});return}const v={id:Date.now().toString(),time:t,message:s,enabled:!0,days:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]};l([...r,v]),n(""),i(""),o({title:"Reminder Added",description:`Scheduled for ${t}`})},u=v=>{l(r.filter(w=>w.id!==v)),o({title:"Reminder Deleted",description:"The scheduled reminder has been removed"})},d=v=>{l(r.map(w=>w.id===v?{...w,enabled:!w.enabled}:w))},f=()=>{setInterval(()=>{const v=new Date,w=`${String(v.getHours()).padStart(2,"0")}:${String(v.getMinutes()).padStart(2,"0")}`,m=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][v.getDay()];r.forEach(p=>{p.enabled&&p.time===w&&p.days.includes(m)&&g(p.message)})},6e4)},g=v=>{Notification.permission==="granted"?(new Notification("Shalala Reminder",{body:v,icon:"/favicon.ico"}),new Audio("https://www.soundjay.com/misc/sounds/bell-ringing-05.mp3").play().catch(()=>{})):Notification.permission!=="denied"&&Notification.requestPermission().then(w=>{w==="granted"&&g(v)}),o({title:"Reminder",description:v})},y=async()=>{const v=await Notification.requestPermission();o(v==="granted"?{title:"Notifications Enabled",description:"You'll receive scheduled reminders"}:{title:"Notifications Blocked",description:"Please enable notifications in your browser settings",variant:"destructive"})};return h.jsx("div",{className:"space-y-6",children:h.jsxs(K,{className:"shadow-companionship",children:[h.jsxs(Xp,{children:[h.jsxs(Kp,{className:"text-elder-2xl flex items-center gap-2",children:[h.jsx(nh,{className:"w-6 h-6"}),"Scheduled Reminders"]}),h.jsx(Qp,{className:"text-elder-base",children:"Set up daily reminders for medications, activities, or check-ins"})]}),h.jsxs(Jp,{className:"space-y-6",children:[Notification.permission!=="granted"&&h.jsx($,{onClick:y,variant:"nurturing",className:"w-full",children:"Enable Notifications"}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsxs(on,{htmlFor:"time",className:"text-elder-base",children:[h.jsx(O1,{className:"w-4 h-4 inline mr-2"}),"Time"]}),h.jsx(ge,{id:"time",type:"time",value:t,onChange:v=>n(v.target.value),className:"text-elder-base h-12"})]}),h.jsxs("div",{className:"space-y-2 md:col-span-2",children:[h.jsx(on,{htmlFor:"message",className:"text-elder-base",children:"Message"}),h.jsx(ge,{id:"message",type:"text",placeholder:"e.g., Take morning medication",value:s,onChange:v=>i(v.target.value),className:"text-elder-base h-12"})]})]}),h.jsxs($,{onClick:c,className:"w-full",variant:"companionship",children:[h.jsx(Gr,{className:"w-4 h-4 mr-2"}),"Add Reminder"]})]}),h.jsx("div",{className:"space-y-3",children:r.length===0?h.jsx("p",{className:"text-elder-base text-muted-foreground text-center py-8",children:"No reminders scheduled yet"}):r.map(v=>h.jsx(K,{className:"p-4",children:h.jsxs("div",{className:"flex items-center justify-between gap-4",children:[h.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[h.jsx(ZS,{checked:v.enabled,onCheckedChange:()=>d(v.id)}),h.jsxs("div",{className:"flex-1",children:[h.jsx("p",{className:"text-elder-lg font-semibold",children:v.time}),h.jsx("p",{className:"text-elder-base text-muted-foreground",children:v.message}),h.jsx("p",{className:"text-elder-sm text-muted-foreground mt-1",children:v.days.join(", ")})]})]}),h.jsx($,{variant:"destructive",size:"sm",onClick:()=>u(v.id),children:h.jsx(ps,{className:"w-4 h-4"})})]})},v.id))})]})]})})}const gL=()=>{const[r,e]=b.useState("chat"),{toast:t}=Ss(),n=async()=>{const{error:i}=await Te.auth.signOut();i&&t({title:"Error signing out",description:i.message,variant:"destructive"})},s=()=>{switch(r){case"chat":return h.jsx(Vv,{});case"mood":return h.jsx(jD,{});case"dashboard":return h.jsx(ED,{});case"settings":return h.jsx(PD,{});case"exercises":return h.jsx(ID,{});case"games":return h.jsx(BD,{});case"music":return h.jsx(zD,{});case"doodle":return h.jsx(rL,{});case"journal":return h.jsx(nL,{});case"notepad":return h.jsx(sL,{});case"contacts":return h.jsx(iL,{});case"notifications":return h.jsx(fL,{});default:return h.jsx(Vv,{})}};return h.jsxs("div",{className:"min-h-screen bg-gradient-companionship",children:[h.jsx("header",{className:"bg-card/90 backdrop-blur-sm border-b border-border shadow-companionship",children:h.jsx("div",{className:"container mx-auto px-6 py-6",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-primary flex items-center justify-center shadow-gentle",children:h.jsx(Or,{className:"w-6 h-6 text-primary-foreground"})}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-elder-2xl font-bold text-foreground",children:"Shalala"}),h.jsx("p",{className:"text-elder-base text-muted-foreground",children:"Your caring companion, always here for you"})]})]}),h.jsxs("div",{className:"flex gap-2 flex-wrap",children:[h.jsxs($,{variant:r==="chat"?"companionship":"nurturing",size:"sm",onClick:()=>e("chat"),children:[h.jsx(M1,{className:"w-4 h-4"}),h.jsx("span",{className:"hidden sm:inline ml-1",children:"Chat"})]}),h.jsxs($,{variant:r==="mood"?"companionship":"nurturing",size:"sm",onClick:()=>e("mood"),children:[h.jsx(Tj,{className:"w-4 h-4"}),h.jsx("span",{className:"hidden sm:inline ml-1",children:"Mood"})]}),h.jsxs($,{variant:r==="games"?"companionship":"nurturing",size:"sm",onClick:()=>e("games"),children:[h.jsx(N1,{className:"w-4 h-4"}),h.jsx("span",{className:"hidden sm:inline ml-1",children:"Games"})]}),h.jsxs($,{variant:r==="music"?"companionship":"nurturing",size:"sm",onClick:()=>e("music"),children:[h.jsx(Ac,{className:"w-4 h-4"}),h.jsx("span",{className:"hidden sm:inline ml-1",children:"Music"})]}),h.jsxs($,{variant:r==="doodle"?"companionship":"nurturing",size:"sm",onClick:()=>e("doodle"),children:[h.jsx(du,{className:"w-4 h-4"}),h.jsx("span",{className:"hidden sm:inline ml-1",children:"Doodle"})]}),h.jsxs($,{variant:r==="journal"?"companionship":"nurturing",size:"sm",onClick:()=>e("journal"),children:[h.jsx(hu,{className:"w-4 h-4"}),h.jsx("span",{className:"hidden sm:inline ml-1",children:"Journal"})]}),h.jsxs($,{variant:r==="dashboard"?"companionship":"nurturing",size:"sm",onClick:()=>e("dashboard"),children:[h.jsx(lj,{className:"w-4 h-4"}),h.jsx("span",{className:"hidden sm:inline ml-1",children:"Progress"})]}),h.jsxs($,{variant:r==="exercises"?"companionship":"nurturing",size:"sm",onClick:()=>e("exercises"),children:[h.jsx(I1,{className:"w-4 h-4"}),h.jsx("span",{className:"hidden sm:inline ml-1",children:"Activities"})]}),h.jsxs($,{variant:r==="notepad"?"companionship":"nurturing",size:"sm",onClick:()=>e("notepad"),children:[h.jsx(Xs,{className:"w-4 h-4"}),h.jsx("span",{className:"hidden sm:inline ml-1",children:"Schedule"})]}),h.jsxs($,{variant:r==="contacts"?"companionship":"nurturing",size:"sm",onClick:()=>e("contacts"),children:[h.jsx(rs,{className:"w-4 h-4"}),h.jsx("span",{className:"hidden sm:inline ml-1",children:"Contacts"})]}),h.jsxs($,{variant:r==="notifications"?"companionship":"nurturing",size:"sm",onClick:()=>e("notifications"),children:[h.jsx(nh,{className:"w-4 h-4"}),h.jsx("span",{className:"hidden sm:inline ml-1",children:"Reminders"})]}),h.jsxs($,{variant:r==="settings"?"companionship":"nurturing",size:"sm",onClick:()=>e("settings"),children:[h.jsx(kj,{className:"w-4 h-4"}),h.jsx("span",{className:"hidden sm:inline ml-1",children:"Settings"})]}),h.jsxs($,{variant:"destructive",size:"sm",onClick:n,children:[h.jsx(A1,{className:"w-4 h-4"}),h.jsx("span",{className:"hidden sm:inline ml-1",children:"Sign Out"})]})]})]})})}),r==="chat"&&h.jsxs("div",{className:"relative overflow-hidden bg-gradient-primary shadow-companionship",children:[h.jsx("img",{src:SD,alt:"Warm, welcoming companion space",className:"absolute inset-0 w-full h-40 object-cover opacity-25"}),h.jsx("div",{className:"relative container mx-auto px-6 py-12",children:h.jsxs("div",{className:"text-center text-primary-foreground max-w-2xl mx-auto",children:[h.jsx("h2",{className:"text-elder-3xl font-bold mb-4",children:"Welcome, dear friend"}),h.jsx("p",{className:"text-elder-xl text-primary-foreground/90 mb-6",children:"You're not alone. I'm here to listen, chat, and keep you company whenever you need it."}),h.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:h.jsxs($,{variant:"comfort",size:"lg",className:"text-elder-lg",children:[h.jsx(rs,{className:"w-6 h-6"}),"Emergency Support: 988"]})})]})})]}),h.jsx("main",{className:"container mx-auto px-6 py-8",children:s()}),h.jsx("footer",{className:"bg-card/80 border-t border-border shadow-gentle mt-16",children:h.jsxs("div",{className:"container mx-auto px-6 py-8 text-center",children:[h.jsx("p",{className:"text-elder-lg text-muted-foreground font-semibold",children:"Shalala - You always have a friend here"}),h.jsx("p",{className:"text-elder-base text-muted-foreground mt-3",children:"This app provides friendly conversation and emotional support. For mental health emergencies, please call 988 or your local crisis line."})]})})]})};var Ud="rovingFocusGroup.onEntryFocus",pL={bubbles:!1,cancelable:!0},vl="RovingFocusGroup",[kg,eC,mL]=Sp(vl),[vL,tC]=Tn(vl,[mL]),[yL,xL]=vL(vl),rC=b.forwardRef((r,e)=>h.jsx(kg.Provider,{scope:r.__scopeRovingFocusGroup,children:h.jsx(kg.Slot,{scope:r.__scopeRovingFocusGroup,children:h.jsx(wL,{...r,ref:e})})}));rC.displayName=vl;var wL=b.forwardRef((r,e)=>{const{__scopeRovingFocusGroup:t,orientation:n,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=r,f=b.useRef(null),g=Ye(e,f),y=bm(i),[v,w]=sl({prop:o,defaultProp:a??null,onChange:l,caller:vl}),[m,p]=b.useState(!1),x=xn(c),_=eC(t),S=b.useRef(!1),[C,T]=b.useState(0);return b.useEffect(()=>{const E=f.current;if(E)return E.addEventListener(Ud,x),()=>E.removeEventListener(Ud,x)},[x]),h.jsx(yL,{scope:t,orientation:n,dir:y,loop:s,currentTabStopId:v,onItemFocus:b.useCallback(E=>w(E),[w]),onItemShiftTab:b.useCallback(()=>p(!0),[]),onFocusableItemAdd:b.useCallback(()=>T(E=>E+1),[]),onFocusableItemRemove:b.useCallback(()=>T(E=>E-1),[]),children:h.jsx(ve.div,{tabIndex:m||C===0?-1:0,"data-orientation":n,...d,ref:g,style:{outline:"none",...r.style},onMouseDown:ce(r.onMouseDown,()=>{S.current=!0}),onFocus:ce(r.onFocus,E=>{const A=!S.current;if(E.target===E.currentTarget&&A&&!m){const D=new CustomEvent(Ud,pL);if(E.currentTarget.dispatchEvent(D),!D.defaultPrevented){const B=_().filter(W=>W.focusable),P=B.find(W=>W.active),I=B.find(W=>W.id===v),G=[P,I,...B].filter(Boolean).map(W=>W.ref.current);iC(G,u)}}S.current=!1}),onBlur:ce(r.onBlur,()=>p(!1))})})}),nC="RovingFocusGroupItem",sC=b.forwardRef((r,e)=>{const{__scopeRovingFocusGroup:t,focusable:n=!0,active:s=!1,tabStopId:i,children:o,...a}=r,l=q1(),c=i||l,u=xL(nC,t),d=u.currentTabStopId===c,f=eC(t),{onFocusableItemAdd:g,onFocusableItemRemove:y,currentTabStopId:v}=u;return b.useEffect(()=>{if(n)return g(),()=>y()},[n,g,y]),h.jsx(kg.ItemSlot,{scope:t,id:c,focusable:n,active:s,children:h.jsx(ve.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:ce(r.onMouseDown,w=>{n?u.onItemFocus(c):w.preventDefault()}),onFocus:ce(r.onFocus,()=>u.onItemFocus(c)),onKeyDown:ce(r.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){u.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const m=SL(w,u.orientation,u.dir);if(m!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let x=f().filter(_=>_.focusable).map(_=>_.ref.current);if(m==="last")x.reverse();else if(m==="prev"||m==="next"){m==="prev"&&x.reverse();const _=x.indexOf(w.currentTarget);x=u.loop?CL(x,_+1):x.slice(_+1)}setTimeout(()=>iC(x))}}),children:typeof o=="function"?o({isCurrentTabStop:d,hasTabStop:v!=null}):o})})});sC.displayName=nC;var bL={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function _L(r,e){return e!=="rtl"?r:r==="ArrowLeft"?"ArrowRight":r==="ArrowRight"?"ArrowLeft":r}function SL(r,e,t){const n=_L(r.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return bL[n]}function iC(r,e=!1){const t=document.activeElement;for(const n of r)if(n===t||(n.focus({preventScroll:e}),document.activeElement!==t))return}function CL(r,e){return r.map((t,n)=>r[(e+n)%r.length])}var kL=rC,TL=sC,Ah="Tabs",[jL,tI]=Tn(Ah,[tC]),oC=tC(),[EL,Sm]=jL(Ah),aC=b.forwardRef((r,e)=>{const{__scopeTabs:t,value:n,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=r,u=bm(a),[d,f]=sl({prop:n,onChange:s,defaultProp:i??"",caller:Ah});return h.jsx(EL,{scope:t,baseId:q1(),value:d,onValueChange:f,orientation:o,dir:u,activationMode:l,children:h.jsx(ve.div,{dir:u,"data-orientation":o,...c,ref:e})})});aC.displayName=Ah;var lC="TabsList",cC=b.forwardRef((r,e)=>{const{__scopeTabs:t,loop:n=!0,...s}=r,i=Sm(lC,t),o=oC(t);return h.jsx(kL,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:h.jsx(ve.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});cC.displayName=lC;var uC="TabsTrigger",hC=b.forwardRef((r,e)=>{const{__scopeTabs:t,value:n,disabled:s=!1,...i}=r,o=Sm(uC,t),a=oC(t),l=gC(o.baseId,n),c=pC(o.baseId,n),u=n===o.value;return h.jsx(TL,{asChild:!0,...a,focusable:!s,active:u,children:h.jsx(ve.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...i,ref:e,onMouseDown:ce(r.onMouseDown,d=>{!s&&d.button===0&&d.ctrlKey===!1?o.onValueChange(n):d.preventDefault()}),onKeyDown:ce(r.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(n)}),onFocus:ce(r.onFocus,()=>{const d=o.activationMode!=="manual";!u&&!s&&d&&o.onValueChange(n)})})})});hC.displayName=uC;var dC="TabsContent",fC=b.forwardRef((r,e)=>{const{__scopeTabs:t,value:n,forceMount:s,children:i,...o}=r,a=Sm(dC,t),l=gC(a.baseId,n),c=pC(a.baseId,n),u=n===a.value,d=b.useRef(u);return b.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),h.jsx(Zu,{present:s||u,children:({present:f})=>h.jsx(ve.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0,...o,ref:e,style:{...r.style,animationDuration:d.current?"0s":void 0},children:f&&i})})});fC.displayName=dC;function gC(r,e){return`${r}-trigger-${e}`}function pC(r,e){return`${r}-content-${e}`}var PL=aC,mC=cC,vC=hC,yC=fC;const OL=PL,xC=b.forwardRef(({className:r,...e},t)=>h.jsx(mC,{ref:t,className:Pe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...e}));xC.displayName=mC.displayName;const Tg=b.forwardRef(({className:r,...e},t)=>h.jsx(vC,{ref:t,className:Pe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",r),...e}));Tg.displayName=vC.displayName;const jg=b.forwardRef(({className:r,...e},t)=>h.jsx(yC,{ref:t,className:Pe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...e}));jg.displayName=yC.displayName;function NL(){const[r,e]=b.useState(!1),[t,n]=b.useState(""),[s,i]=b.useState(""),[o,a]=b.useState(""),[l,c]=b.useState(""),{toast:u}=Ss(),d=Wp(),f=async v=>{v.preventDefault(),e(!0);try{const{error:w}=await Te.auth.signUp({email:t,password:o,options:{data:{full_name:l},emailRedirectTo:`${window.location.origin}/`}});if(w)throw w;u({title:"Check your email!",description:"We've sent you a verification link to complete your registration."})}catch(w){u({title:"Error",description:w.message,variant:"destructive"})}finally{e(!1)}},g=async v=>{v.preventDefault(),e(!0);try{const{error:w}=await Te.auth.signInWithPassword({email:t,password:o});if(w)throw w;d("/")}catch(w){u({title:"Error",description:w.message,variant:"destructive"})}finally{e(!1)}},y=async v=>{v.preventDefault(),e(!0);try{const{error:w}=await Te.auth.signInWithOtp({phone:s,options:{channel:"sms"}});if(w)throw w;u({title:"OTP Sent!",description:"Check your phone for the verification code."})}catch(w){u({title:"Error",description:w.message||"Failed to send OTP. Please ensure phone authentication is enabled in Supabase.",variant:"destructive"})}finally{e(!1)}};return h.jsx("div",{className:"min-h-screen bg-gradient-companionship flex items-center justify-center p-6",children:h.jsxs(K,{className:"w-full max-w-md shadow-companionship",children:[h.jsxs(Xp,{className:"text-center space-y-4",children:[h.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-primary flex items-center justify-center shadow-gentle mx-auto",children:h.jsx(Or,{className:"w-8 h-8 text-primary-foreground"})}),h.jsxs("div",{children:[h.jsx(Kp,{className:"text-elder-2xl",children:"Welcome to Shalala"}),h.jsx(Qp,{className:"text-elder-base mt-2",children:"Your caring companion is here for you"})]})]}),h.jsx(Jp,{children:h.jsxs(OL,{defaultValue:"signin",className:"w-full",children:[h.jsxs(xC,{className:"grid w-full grid-cols-2 mb-6",children:[h.jsx(Tg,{value:"signin",children:"Sign In"}),h.jsx(Tg,{value:"signup",children:"Sign Up"})]}),h.jsxs(jg,{value:"signin",children:[h.jsxs("form",{onSubmit:g,className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsxs(on,{htmlFor:"signin-email",className:"text-elder-base",children:[h.jsx(zf,{className:"w-4 h-4 inline mr-2"}),"Email"]}),h.jsx(ge,{id:"signin-email",type:"email",placeholder:"your@email.com",value:t,onChange:v=>n(v.target.value),required:!0,className:"text-elder-base h-12"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs(on,{htmlFor:"signin-password",className:"text-elder-base",children:[h.jsx(da,{className:"w-4 h-4 inline mr-2"}),"Password"]}),h.jsx(ge,{id:"signin-password",type:"password",placeholder:"",value:o,onChange:v=>a(v.target.value),required:!0,className:"text-elder-base h-12"})]}),h.jsx($,{type:"submit",className:"w-full text-elder-lg h-12",disabled:r,variant:"companionship",children:r?"Signing in...":"Sign In"})]}),h.jsxs("div",{className:"relative my-6",children:[h.jsx("div",{className:"absolute inset-0 flex items-center",children:h.jsx("span",{className:"w-full border-t"})}),h.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:h.jsx("span",{className:"bg-card px-2 text-muted-foreground",children:"Or continue with"})})]}),h.jsxs("form",{onSubmit:y,className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsxs(on,{htmlFor:"phone",className:"text-elder-base",children:[h.jsx(rs,{className:"w-4 h-4 inline mr-2"}),"Phone Number (with country code)"]}),h.jsx(ge,{id:"phone",type:"tel",placeholder:"+1234567890",value:s,onChange:v=>i(v.target.value),required:!0,className:"text-elder-base h-12"})]}),h.jsx($,{type:"submit",variant:"nurturing",className:"w-full text-elder-lg h-12",disabled:r,children:r?"Sending OTP...":"Send OTP"})]})]}),h.jsx(jg,{value:"signup",children:h.jsxs("form",{onSubmit:f,className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(on,{htmlFor:"fullname",className:"text-elder-base",children:"Full Name"}),h.jsx(ge,{id:"fullname",type:"text",placeholder:"Your name",value:l,onChange:v=>c(v.target.value),required:!0,className:"text-elder-base h-12"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs(on,{htmlFor:"signup-email",className:"text-elder-base",children:[h.jsx(zf,{className:"w-4 h-4 inline mr-2"}),"Email"]}),h.jsx(ge,{id:"signup-email",type:"email",placeholder:"your@email.com",value:t,onChange:v=>n(v.target.value),required:!0,className:"text-elder-base h-12"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs(on,{htmlFor:"signup-password",className:"text-elder-base",children:[h.jsx(da,{className:"w-4 h-4 inline mr-2"}),"Password"]}),h.jsx(ge,{id:"signup-password",type:"password",placeholder:"",value:o,onChange:v=>a(v.target.value),required:!0,className:"text-elder-base h-12"})]}),h.jsx($,{type:"submit",className:"w-full text-elder-lg h-12",disabled:r,variant:"companionship",children:r?"Creating account...":"Sign Up"})]})})]})})]})})}const AL=()=>{const r=fh();return b.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",r.pathname)},[r.pathname]),h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-healing p-4",children:h.jsxs(K,{className:"text-center max-w-md w-full p-8 shadow-therapeutic border-primary/10",children:[h.jsx("div",{className:"w-16 h-16 mx-auto mb-6 rounded-full bg-gradient-primary flex items-center justify-center",children:h.jsx(Or,{className:"w-8 h-8 text-primary-foreground"})}),h.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"404"}),h.jsx("p",{className:"text-xl text-muted-foreground mb-6",children:"Page not found"}),h.jsx("p",{className:"text-sm text-muted-foreground mb-8",children:"The page you're looking for doesn't exist, but your wellness journey continues."}),h.jsx($,{variant:"therapeutic",asChild:!0,className:"w-full",children:h.jsxs("a",{href:"/",children:[h.jsx(gj,{className:"w-4 h-4 mr-2"}),"Return to WellMind"]})})]})})},ML=new iN,DL=()=>{const[r,e]=b.useState(null),[t,n]=b.useState(!0);return b.useEffect(()=>{const{data:{subscription:s}}=Te.auth.onAuthStateChange((i,o)=>{e(o),n(!1)});return Te.auth.getSession().then(({data:{session:i}})=>{e(i),n(!1)}),()=>s.unsubscribe()},[]),t?h.jsx("div",{className:"min-h-screen bg-gradient-companionship flex items-center justify-center",children:h.jsx("div",{className:"text-elder-xl text-muted-foreground",children:"Loading..."})}):h.jsx(aN,{client:ML,children:h.jsxs(RO,{children:[h.jsx(vE,{}),h.jsx(XE,{}),h.jsx(JN,{children:h.jsxs(XN,{children:[h.jsx(Dc,{path:"/",element:r?h.jsx(gL,{}):h.jsx(_v,{to:"/auth",replace:!0})}),h.jsx(Dc,{path:"/auth",element:r?h.jsx(_v,{to:"/",replace:!0}):h.jsx(NL,{})}),h.jsx(Dc,{path:"*",element:h.jsx(AL,{})})]})})]})})};Zw(document.getElementById("root")).render(h.jsx(DL,{}));
